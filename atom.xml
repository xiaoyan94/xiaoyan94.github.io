<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>空城盼故人</title>
  
  <subtitle>许嵩老公的博客</subtitle>
  <link href="https://xiaoyan94.github.io/atom.xml" rel="self"/>
  
  <link href="https://xiaoyan94.github.io/"/>
  <updated>2025-02-25T03:23:25.720Z</updated>
  <id>https://xiaoyan94.github.io/</id>
  
  <author>
    <name>许嵩老公</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>mysql数据库表自增ID跳跃不连续的问题</title>
    <link href="https://xiaoyan94.github.io/2025/02/25/mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E8%87%AA%E5%A2%9EID%E8%B7%B3%E8%B7%83%E4%B8%8D%E8%BF%9E%E7%BB%AD%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>https://xiaoyan94.github.io/2025/02/25/mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E8%87%AA%E5%A2%9EID%E8%B7%B3%E8%B7%83%E4%B8%8D%E8%BF%9E%E7%BB%AD%E7%9A%84%E9%97%AE%E9%A2%98/</id>
    <published>2025-02-25T02:25:44.000Z</published>
    <updated>2025-02-25T03:23:25.720Z</updated>
    
    <content type="html"><![CDATA[<ul><li><a href="#%E9%97%AE%E9%A2%98%E7%8E%B0%E8%B1%A1">问题现象</a></li><li><a href="#%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D">问题定位</a><ul><li><a href="#%E5%8E%9Fsql">原sql</a></li><li><a href="#%E5%8E%9F%E5%9B%A0">原因</a></li><li><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95">解决方法</a></li></ul></li></ul><h2 id="问题现象"><a href="#问题现象" class="headerlink" title="问题现象"></a>问题现象</h2><p><img src="/2025/02/25/mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E8%87%AA%E5%A2%9EID%E8%B7%B3%E8%B7%83%E4%B8%8D%E8%BF%9E%E7%BB%AD%E7%9A%84%E9%97%AE%E9%A2%98/2025-02-25-10-28-27.png" alt="问题现象"></p><ul><li>业务表记录为从SRM同步的送货单相关数据</li><li>业务表只做插入和更新，没有删除逻辑</li><li>业务表主键ID自增，<code>AUTO_INCREMENT</code>字段</li><li>业务表出现ID增长不连续、跳跃式增长的现象</li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(<span class="keyword">id</span>) <span class="keyword">from</span> biz_wms_delivery_order_barcode;</span><br><span class="line"><span class="comment">-- 913293</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">id</span>) <span class="keyword">from</span> biz_wms_delivery_order_barcode;</span><br><span class="line"><span class="comment">-- 49314</span></span><br></pre></td></tr></table></figure></div><p>才几万行数据，表ID已经增长到快100万了</p><h2 id="问题定位"><a href="#问题定位" class="headerlink" title="问题定位"></a>问题定位</h2><h3 id="原sql"><a href="#原sql" class="headerlink" title="原sql"></a>原sql</h3><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"insertDeliveryOrder"</span> <span class="attr">parameterType</span>=<span class="string">"Map"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"dataList != null and dataList.size() &gt; 0"</span>&gt;</span></span><br><span class="line">        insert into biz_wms_delivery_order(</span><br><span class="line">        factoryid, deliveryno, deliverytype, purchasetype, status, innervendorcode, lastoperatetime, updatetime, maintainer, createtime)</span><br><span class="line">        values</span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"dataList"</span> <span class="attr">item</span>=<span class="string">"item"</span> <span class="attr">open</span>=<span class="string">""</span> <span class="attr">close</span>=<span class="string">""</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">            (#&#123;factoryid&#125;,#&#123;item.deliveryno&#125;,#&#123;item.deliverytype&#125;,#&#123;item.purchasetype&#125;,#&#123;item.status&#125;,#&#123;item.innervendorcode&#125;,#&#123;item.lastoperatetime&#125;, #&#123;maintaintime&#125;,'sys', #&#123;maintaintime&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">        on duplicate key update deliverytype=values(deliverytype),purchasetype=values(purchasetype),status=values(status),innervendorcode=values(innervendorcode),lastoperatetime=values(lastoperatetime),updatetime=values(updatetime),maintainer=values(maintainer)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"insertDeliveryOrderDetails"</span> <span class="attr">parameterType</span>=<span class="string">"Map"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"linelist != null and linelist.size() &gt; 0"</span>&gt;</span></span><br><span class="line">     insert into biz_wms_delivery_order_detail(</span><br><span class="line">        factoryid, deliveryno, innervendorcode, innervendorname, lineno, poerpno, polineno, requirementorderno, productcode, productname, productscale,</span><br><span class="line">        deliveryqty, remark, totalpackingqty, packingqty, sendverifystatus, createtime, maintainer, updatetime, status)</span><br><span class="line">        values</span><br><span class="line">     <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"linelist"</span> <span class="attr">item</span>=<span class="string">"item"</span> <span class="attr">open</span>=<span class="string">""</span> <span class="attr">close</span>=<span class="string">""</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">         (#&#123;factoryid&#125;,#&#123;deliveryno&#125;,#&#123;innervendorcode&#125;,#&#123;innervendorname&#125;,#&#123;item.lineno&#125;,#&#123;item.poerpno&#125;,#&#123;item.polineno&#125;, #&#123;item.requirementorderno&#125;,#&#123;item.productcode&#125;,#&#123;item.productname&#125;,#&#123;item.productscale&#125;,</span><br><span class="line">            #&#123;item.deliveryqty&#125;,#&#123;item.remark&#125;,#&#123;totalpackingqty&#125;,#&#123;item.packingqty&#125;,#&#123;item.sendverifystatus&#125;, #&#123;maintaintime&#125;,'sys', #&#123;maintaintime&#125;, #&#123;item.status&#125;)</span><br><span class="line">     <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">        on duplicate key update innervendorcode=values(innervendorcode),innervendorname=values(innervendorname),poerpno=values(poerpno),polineno=values(polineno), requirementorderno=values(requirementorderno),productcode=values(productcode),productname=values(productname),productscale=values(productscale),</span><br><span class="line">        deliveryqty=values(deliveryqty),remark=values(remark),totalpackingqty=values(totalpackingqty),packingqty=values(packingqty),sendverifystatus=values(sendverifystatus),updatetime=values(updatetime),maintainer=values(maintainer), status=values(status)</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"insertDeliveryOrderBarcodes"</span> <span class="attr">parameterType</span>=<span class="string">"Map"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"dataList != null and dataList.size() &gt; 0"</span>&gt;</span></span><br><span class="line">     insert into biz_wms_delivery_order_barcode(</span><br><span class="line">        factoryid, deliveryno, productcode, productname, productscale, lineno, smallbarcode, includeqty, createtime, maintainer, updatetime)</span><br><span class="line">        values</span><br><span class="line">     <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"dataList"</span> <span class="attr">item</span>=<span class="string">"item"</span> <span class="attr">open</span>=<span class="string">""</span> <span class="attr">close</span>=<span class="string">""</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">         (#&#123;factoryid&#125;,#&#123;deliveryno&#125;,#&#123;item.productcode&#125;,#&#123;item.productname&#125;,#&#123;item.productscale&#125;, ifnull(#&#123;item.dynamicdata.lineNo&#125;, 1) ,#&#123;item.smallbarcode&#125;,#&#123;item.includeqty&#125;, #&#123;maintaintime&#125;,'sys', #&#123;maintaintime&#125;)</span><br><span class="line">     <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">        on duplicate key update productname=values(productname), productscale=values(productscale)</span><br><span class="line"> <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>三个表同样的现象，自增ID不连续。</p><h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><p>使用 <code>INSERT INTO ... ON DUPLICATE KEY UPDATE</code> 或 <code>INSERT IGNORE INTO</code> 语句的坑。</p><ol><li><p>使用 <code>INSERT INTO ... ON DUPLICATE KEY UPDATE</code> 语句：</p><p>即使在唯一键冲突时执行更新操作，没有实际插入数据库，<code>AUTO_INCREMENT</code> 计数器仍会递增，导致ID值跳跃。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> biz_wms_delivery_order(</span><br><span class="line">factoryid, deliveryno, deliverytype, purchasetype, <span class="keyword">status</span>, innervendorcode, lastoperatetime, updatetime, maintainer, createtime)</span><br><span class="line"><span class="keyword">values</span></span><br><span class="line">(<span class="number">414</span>, <span class="string">'22241217838N'</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4.018</span>, <span class="string">'2024-12-31 10:53:01'</span>, <span class="string">'2025-01-02 11:43:11'</span>, <span class="string">'sys'</span>, <span class="string">'2024-12-27 15:58:07'</span>)</span><br><span class="line"><span class="keyword">on</span> <span class="keyword">duplicate</span> <span class="keyword">key</span> <span class="keyword">update</span> deliverytype=<span class="keyword">values</span>(deliverytype),purchasetype=<span class="keyword">values</span>(purchasetype),<span class="keyword">status</span>=<span class="keyword">values</span>(<span class="keyword">status</span>),innervendorcode=<span class="keyword">values</span>(innervendorcode),lastoperatetime=<span class="keyword">values</span>(lastoperatetime),updatetime=<span class="keyword">values</span>(updatetime),maintainer=<span class="keyword">values</span>(maintainer)</span><br></pre></td></tr></table></figure></div><p>尤其是在批量操作的时候，假设批量插入100条数据，其中5条插入成功，95条已存在执行更新操作，自增主键ID会在此次语句执行完后增大100而不是5，即使实际上只插入了5条新数据。</p><p>可以手动多执行几次同样的SQL，通过 <code>show create table</code> 语句查看表的 <code>AUTO_INCREMENT</code> 属性验证。</p></li><li><p>使用 <code>INSERT IGNORE INTO</code> 语句，也是一样。假设批量插入100条数据，其中5条插入成功，另外95条由于主键冲突被忽略，实际 <code>AUTO_INCREMENT</code> 增大了100。</p></li></ol><p>表结构，查看 <code>AUTO_INCREMENT</code></p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> biz_wms_delivery_order_barcode;</span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`biz_wms_delivery_order_barcode`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`factoryid`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="comment">-- ...其他字段</span></span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">15713</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4 <span class="keyword">COMMENT</span>=<span class="string">'送货单标签'</span></span><br></pre></td></tr></table></figure></div><h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><blockquote><p>网上查询可知以上是mysql默认的自增ID分配策略导致的问题，会直接预先分配ID，导致 <code>AUTO_INCREMENT</code> 增长。虽然调整 <code>innodb_autoinc_lock_mode</code> 配置，可以修改该策略，但是修改该参数会影响并发性能。</p></blockquote><p>因为需要定时从SRM同步，每次执行 <code>INSERT INTO ... ON DUPLICATE KEY UPDATE</code> 会有大量已存在的数据需要更新，导致ID跳跃的非常大。</p><p>最终还是要修改业务表的插入逻辑，不使用 <code>INSERT INTO ... ON DUPLICATE KEY UPDATE</code> ，将其拆分为插入和更新两部分。</p><p><strong>方案</strong>： 在插入前先执行查询，判断记录是否存在；如果存在，则执行更新；如果不存在，则执行插入。</p><p><strong>优点</strong>： 避免了自增ID的跳跃。</p><p><strong>缺点</strong>： 增加了查询和判断的开销，增加了代码，可能影响性能，但影响不大可以接受。</p>]]></content>
    
    
      
      
    <summary type="html"></summary>
      
    
    
    
    
    <category term="SQL" scheme="https://xiaoyan94.github.io/tags/SQL/"/>
    
    <category term="数据库" scheme="https://xiaoyan94.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>mysqldump备份还原相关</title>
    <link href="https://xiaoyan94.github.io/2025/02/25/mysqldump%E5%A4%87%E4%BB%BD%E8%BF%98%E5%8E%9F%E7%9B%B8%E5%85%B3/"/>
    <id>https://xiaoyan94.github.io/2025/02/25/mysqldump%E5%A4%87%E4%BB%BD%E8%BF%98%E5%8E%9F%E7%9B%B8%E5%85%B3/</id>
    <published>2025-02-25T01:46:26.000Z</published>
    <updated>2025-02-25T01:55:23.624Z</updated>
    
    <content type="html"><![CDATA[<ul><li><a href="#mysqldump%E5%A4%87%E4%BB%BD%E8%BF%98%E5%8E%9F%E7%9B%B8%E5%85%B3">mysqldump备份还原相关</a><ul><li><a href="#%E4%BD%BF%E7%94%A8mysqldump%E5%A4%87%E4%BB%BD">使用mysqldump备份</a><ul><li><a href="#%E5%A4%87%E4%BB%BD%E5%89%8D%E5%8F%AF%E6%9F%A5%E8%AF%A2%E8%A1%A8%E5%A4%A7%E5%B0%8F">备份前可查询表大小</a></li><li><a href="#%E5%A4%87%E4%BB%BD%E6%97%B6%E5%8F%AF%E5%BF%BD%E7%95%A5%E6%8C%87%E5%AE%9A%E8%A1%A8">备份时可忽略指定表</a></li><li><a href="#%E5%A4%87%E4%BB%BD%E6%97%B6%E5%8F%AA%E5%A4%87%E4%BB%BD%E8%A1%A8%E7%BB%93%E6%9E%84">备份时只备份表结构</a></li><li><a href="#%E5%A4%87%E4%BB%BD%E6%97%B6%E5%8F%AF%E5%90%8C%E6%97%B6%E5%A4%87%E4%BB%BD%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B">备份时可同时备份存储过程</a></li><li><a href="#%E5%A4%87%E4%BB%BD%E6%97%B6%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9Awhere%E6%9D%A1%E4%BB%B6">备份时可以指定where条件</a></li></ul></li><li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6%E8%BF%98%E5%8E%9F">数据库备份文件还原</a><ul><li><a href="#%E8%BF%98%E5%8E%9F%E6%8C%87%E5%AE%9A%E8%A1%A8">还原指定表</a></li></ul></li></ul></li></ul><h2 id="mysqldump备份还原相关"><a href="#mysqldump备份还原相关" class="headerlink" title="mysqldump备份还原相关"></a>mysqldump备份还原相关</h2><h3 id="使用mysqldump备份"><a href="#使用mysqldump备份" class="headerlink" title="使用mysqldump备份"></a>使用mysqldump备份</h3><h4 id="备份前可查询表大小"><a href="#备份前可查询表大小" class="headerlink" title="备份前可查询表大小"></a>备份前可查询表大小</h4><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> table_name <span class="keyword">as</span> <span class="string">'表名'</span>,</span><br><span class="line">       <span class="keyword">round</span>((data_length + index_length) / <span class="number">1024</span> / <span class="number">1024</span>, <span class="number">2</span>) <span class="keyword">as</span> <span class="string">'表大小(MB)'</span></span><br><span class="line"><span class="keyword">from</span> information_schema.tables</span><br><span class="line"><span class="keyword">where</span> table_schema = <span class="string">'alpsmes'</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">round</span>((data_length + index_length) / <span class="number">1024</span> / <span class="number">1024</span>, <span class="number">2</span>) <span class="keyword">desc</span></span><br><span class="line"><span class="keyword">limit</span> <span class="number">20</span>;</span><br></pre></td></tr></table></figure></div><h4 id="备份时可忽略指定表"><a href="#备份时可忽略指定表" class="headerlink" title="备份时可忽略指定表"></a>备份时可忽略指定表</h4><p>  使用 <code>--ignore-table</code> 选项</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uzy_mes -p12345 alpsmes \</span><br><span class="line">--ignore-table=alpsmes.biz_electr_inspection_data \</span><br><span class="line">--ignore-table=alpsmes.tmp_biz_electr_inspection_data \</span><br><span class="line">--ignore-table=alpsmes.sys_log_his \</span><br><span class="line">--ignore-table=alpsmes.act_ru_meter_log \</span><br><span class="line">--ignore-table=alpsmes.biz_technics_opc_quality \</span><br><span class="line">--ignore-table=alpsmes.sys_log \</span><br><span class="line">--ignore-table=alpsmes.biz_3rd_andon_api_log \</span><br><span class="line">--ignore-table=alpsmes.biz_order_report_record_bak \</span><br><span class="line">&gt; alpsmes20240306.sql</span><br></pre></td></tr></table></figure></div><h4 id="备份时只备份表结构"><a href="#备份时只备份表结构" class="headerlink" title="备份时只备份表结构"></a>备份时只备份表结构</h4><p>  使用 <code>--no-data</code> 选项</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uzy_mes -p122345 alpsmes \</span><br><span class="line">biz_electr_inspection_data \</span><br><span class="line">tmp_biz_electr_inspection_data \</span><br><span class="line">sys_log_his \</span><br><span class="line">act_ru_meter_log \</span><br><span class="line">biz_technics_opc_quality \</span><br><span class="line">sys_log \</span><br><span class="line">biz_3rd_andon_api_log \</span><br><span class="line">biz_order_report_record_bak \</span><br><span class="line">--no-data \</span><br><span class="line">&gt; alpsmes_no_data_20240306.sql</span><br></pre></td></tr></table></figure></div><h4 id="备份时可同时备份存储过程"><a href="#备份时可同时备份存储过程" class="headerlink" title="备份时可同时备份存储过程"></a>备份时可同时备份存储过程</h4><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uzy_mes -p12345 --routines --no-data --databases dengqimes &gt; /tmp/dengqimes_structure.sql</span><br></pre></td></tr></table></figure></div><h4 id="备份时可以指定where条件"><a href="#备份时可以指定where条件" class="headerlink" title="备份时可以指定where条件"></a>备份时可以指定where条件</h4><p>  使用 <code>--where</code> 选项</p><ul><li><p>备份时只备份数据不备份表结构</p><p>使用 <code>--no-create-info</code> 选项</p></li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uzy_mes -p122345 dengqimes biz_technics_opc_quality --<span class="built_in">where</span>=<span class="string">"factoryid=3 and deviceid between 88 and 91"</span> --no-create-info &gt; output_technics_91.sql</span><br></pre></td></tr></table></figure></div><h3 id="数据库备份文件还原"><a href="#数据库备份文件还原" class="headerlink" title="数据库备份文件还原"></a>数据库备份文件还原</h3><h4 id="还原指定表"><a href="#还原指定表" class="headerlink" title="还原指定表"></a>还原指定表</h4><ul><li><p>mysqldump备份的历史数据库文件(.sql)，不想恢复整个数据库，只想取出其中一张表</p><p>原理是使用 <code>sed</code> 工具</p></li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n -e <span class="string">'/CREATE TABLE `biz_order_child`/,/UNLOCK TABLES/p'</span> dengqimes20240118000001.sql &gt; orderchild.sql</span><br></pre></td></tr></table></figure></div><p>或者</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n -e <span class="string">'/Table structure for.*`biz_order_child/,/Table structure for/p'</span> dengqimes20250207000001.sql &gt; biz_order_child.sql</span><br></pre></td></tr></table></figure></div><p>或者</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n -e <span class="string">'/DROP TABLE IF EXISTS `biz_product`/,/UNLOCK TABLES/p'</span> cloudmes20241121000001.sql &gt; biz_product.sql</span><br></pre></td></tr></table></figure></div><ul><li><p>mysql还原备份的sql时，可能由于字符集编码和转义问题会报错</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql --database=dengqimesprod --user=root --host=127.0.0.1 --port=3306 &lt; C:\Users\zhiyin\Downloads\dengqimes20240311.sql</span><br><span class="line">ERROR at line 33162: Unknown <span class="built_in">command</span> <span class="string">'\"'</span>.</span><br></pre></td></tr></table></figure></div><p>需要指定字符集和数据库的字符集一样</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql --database=dengqimes --user=root -p --host=127.0.0.1 --port=3306  --default-character-set=utf8mb4 &lt; C:\Users\zhiyin\Downloads\dengqimes20240413.sql</span><br></pre></td></tr></table></figure></div></li></ul>]]></content>
    
    
      
      
    <summary type="html"></summary>
      
    
    
    
    
    <category term="SQL" scheme="https://xiaoyan94.github.io/tags/SQL/"/>
    
    <category term="数据库" scheme="https://xiaoyan94.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>使用Node.js后台读取串口数据并通过WebSocket实时显示在网页上</title>
    <link href="https://xiaoyan94.github.io/2023/02/13/%E4%BD%BF%E7%94%A8Node-js%E5%90%8E%E5%8F%B0%E8%AF%BB%E5%8F%96%E4%B8%B2%E5%8F%A3%E6%95%B0%E6%8D%AE%E5%B9%B6%E9%80%9A%E8%BF%87WebSocket%E5%AE%9E%E6%97%B6%E6%98%BE%E7%A4%BA%E5%9C%A8%E7%BD%91%E9%A1%B5%E4%B8%8A/"/>
    <id>https://xiaoyan94.github.io/2023/02/13/%E4%BD%BF%E7%94%A8Node-js%E5%90%8E%E5%8F%B0%E8%AF%BB%E5%8F%96%E4%B8%B2%E5%8F%A3%E6%95%B0%E6%8D%AE%E5%B9%B6%E9%80%9A%E8%BF%87WebSocket%E5%AE%9E%E6%97%B6%E6%98%BE%E7%A4%BA%E5%9C%A8%E7%BD%91%E9%A1%B5%E4%B8%8A/</id>
    <published>2023-02-13T07:27:39.000Z</published>
    <updated>2023-02-25T00:19:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>记录一下使用 Node.js 后台读取串口数据并通过 WebSocket 实时显示在网页上的方法，可以使用以下步骤：</p><ol><li>使用第三方库 serialport 读取串口数据</li><li>安装 WebSocket 服务器，例如 ws 库</li><li>创建 WebSocket 服务器，并监听客户端连接</li><li>在每次读取到串口数据时，通过 WebSocket 发送数据到客户端</li><li>在客户端，使用 JavaScript 更新 HTML 元素的属性值</li></ol><p>以下是一个简单的示例：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Node.js 后台代码</span></span><br><span class="line"><span class="keyword">const</span> SerialPort = <span class="built_in">require</span>(<span class="string">'serialport'</span>);</span><br><span class="line"><span class="keyword">const</span> ReadLine = <span class="built_in">require</span>(<span class="string">'@serialport/parser-readline'</span>);</span><br><span class="line"><span class="keyword">const</span> WebSocket = <span class="built_in">require</span>(<span class="string">'ws'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个串口解析器</span></span><br><span class="line"><span class="keyword">const</span> port = <span class="keyword">new</span> SerialPort(<span class="string">'COM3'</span>, &#123; <span class="attr">baudRate</span>: <span class="number">9600</span> &#125;);</span><br><span class="line"><span class="keyword">const</span> parser = port.pipe(<span class="keyword">new</span> ReadLine(&#123; <span class="attr">delimiter</span>: <span class="string">'\r\n'</span> &#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建 WebSocket 服务器</span></span><br><span class="line"><span class="keyword">const</span> server = <span class="keyword">new</span> WebSocket.Server(&#123; <span class="attr">port</span>: <span class="number">8080</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听客户端连接</span></span><br><span class="line">server.on(<span class="string">'connection'</span>, (socket) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 在读取到串口数据时，发送数据到客户端</span></span><br><span class="line">  parser.on(<span class="string">'data'</span>, (data) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 解析读取到的数据</span></span><br><span class="line">    <span class="keyword">const</span> target = data.split(<span class="string">'  '</span>)[<span class="number">2</span>];</span><br><span class="line">    <span class="comment">// 通过 WebSocket 发送数据到客户端</span></span><br><span class="line">    socket.send(target);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 客户端 JavaScript 代码</span></span><br><span class="line"><span class="keyword">const</span> socket = <span class="keyword">new</span> WebSocket(<span class="string">'ws://localhost:8080'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听 WebSocket 接收到的数据</span></span><br><span class="line">socket.onmessage = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 更新 HTML 元素的属性值</span></span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'test'</span>).value = event.data;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>注意：在这个示例代码中，我们假设“数据格式为文本字符，形如0  00   xxx  00，获取其中的xxx”</p>]]></content>
    
    
      
      
    <summary type="html"></summary>
      
    
    
    
    
    <category term="WebSocket" scheme="https://xiaoyan94.github.io/tags/WebSocket/"/>
    
    <category term="Node.js" scheme="https://xiaoyan94.github.io/tags/Node-js/"/>
    
    <category term="Serial Port" scheme="https://xiaoyan94.github.io/tags/Serial-Port/"/>
    
  </entry>
  
  <entry>
    <title>作为用户，修改Cookie有效期，延长Cookie期限</title>
    <link href="https://xiaoyan94.github.io/2023/02/09/%E4%BD%9C%E4%B8%BA%E7%94%A8%E6%88%B7%EF%BC%8C%E4%BF%AE%E6%94%B9Cookie%E6%9C%89%E6%95%88%E6%9C%9F%EF%BC%8C%E5%BB%B6%E9%95%BFCookie%E6%9C%9F%E9%99%90/"/>
    <id>https://xiaoyan94.github.io/2023/02/09/%E4%BD%9C%E4%B8%BA%E7%94%A8%E6%88%B7%EF%BC%8C%E4%BF%AE%E6%94%B9Cookie%E6%9C%89%E6%95%88%E6%9C%9F%EF%BC%8C%E5%BB%B6%E9%95%BFCookie%E6%9C%9F%E9%99%90/</id>
    <published>2023-02-09T03:21:12.000Z</published>
    <updated>2023-02-09T04:43:44.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="浏览器中手动修改cookie的有效期"><a href="#浏览器中手动修改cookie的有效期" class="headerlink" title="浏览器中手动修改cookie的有效期"></a>浏览器中手动修改cookie的有效期</h2><p>网站可以使用Cookie验证身份，从而可以实现关闭游客访问。</p><p>作为用户，若网站关闭了游客访问，且Cookie到期以后，就无法继续访问该网站。</p><p>可以在浏览器客户端手动设置Cookie的过期时间，从而延长登录有效期。</p><p>以Chrome浏览器为例，按<code>F12</code>打开开发者工具，找到网站Cookie手动修改过期时间。</p><p><img src="/2023/02/09/%E4%BD%9C%E4%B8%BA%E7%94%A8%E6%88%B7%EF%BC%8C%E4%BF%AE%E6%94%B9Cookie%E6%9C%89%E6%95%88%E6%9C%9F%EF%BC%8C%E5%BB%B6%E9%95%BFCookie%E6%9C%9F%E9%99%90/2023-02-09-12-19-19.png" alt="按`F12`打开开发者工具，找到网站Cookie手动修改过期时间。"></p><h2 id="相关知识之会话cookie"><a href="#相关知识之会话cookie" class="headerlink" title="相关知识之会话cookie"></a>相关知识之会话cookie</h2><a id="more"></a><p>HTTP响应标头 <strong><code>Set-Cookie</code></strong> 字段被用来由服务器端向用户代理发送 cookie，所以用户代理可在后续的请求中将其发送回服务器。</p><p>PS：服务器要发送多个 cookie，则应该在同一响应中发送多个 <strong><code>Set-Cookie</code></strong> 标头。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie#%E8%AF%AD%E6%B3%95" target="_blank" rel="noopener">HTTP响应头中设置Cookie的语法:</a></p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="HTTP"><figure class="iseeu highlight /http"><figcaption><span>response header</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Set-Cookie</span>: &lt;cookie-name&gt;=&lt;cookie-value&gt;</span><br><span class="line"><span class="attribute">Set-Cookie</span>: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Expires=&lt;date&gt;</span><br><span class="line"><span class="attribute">Set-Cookie</span>: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Max-Age=&lt;number&gt;</span><br><span class="line"><span class="attribute">Set-Cookie</span>: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Domain=&lt;domain-value&gt;</span><br><span class="line"><span class="attribute">Set-Cookie</span>: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Path=&lt;path-value&gt;</span><br><span class="line"><span class="attribute">Set-Cookie</span>: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Secure</span><br><span class="line"><span class="attribute">Set-Cookie</span>: &lt;cookie-name&gt;=&lt;cookie-value&gt;; HttpOnly</span><br><span class="line"></span><br><span class="line"><span class="attribute">Set-Cookie</span>: &lt;cookie-name&gt;=&lt;cookie-value&gt;; SameSite=Strict</span><br><span class="line"><span class="attribute">Set-Cookie</span>: &lt;cookie-name&gt;=&lt;cookie-value&gt;; SameSite=Lax</span><br><span class="line"><span class="attribute">Set-Cookie</span>: &lt;cookie-name&gt;=&lt;cookie-value&gt;; SameSite=None; Secure</span><br><span class="line"></span><br><span class="line">// Multiple attributes are also possible, for example:</span><br><span class="line"><span class="attribute">Set-Cookie</span>: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Domain=&lt;domain-value&gt;; Secure; HttpOnly</span><br></pre></td></tr></table></figure></div><p><strong>Cookie有效期</strong>相关属性的介绍：</p><ul><li><p><code>Expires=&lt;date&gt;</code> <em>可选</em></p><ul><li><p>: cookie 的最长有效时间，形式为符合 HTTP-date 规范的时间戳。参见 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Date" target="_blank" rel="noopener"><code>Date</code></a> 可以获取详细信息。</p><p>如果没有设置这个属性，那么表示这是一个<strong>会话期 cookie</strong>。一个会话结束于客户端被关闭时，这意味着会话期 cookie 在彼时会被移除。</p><p><strong>警告：</strong> 然而，很多 Web 浏览器支持会话恢复功能，这个功能可以使浏览器保留所有的 tab 标签，然后在重新打开浏览器的时候将其还原。与此同时，cookie 也会恢复，就跟从来没有关闭浏览器一样。</p><p>如果设置了 <code>Expires</code> 属性，其截止时间与<em>客户端</em>相关，而非服务器的时间。</p></li></ul></li><li><p><code>Max-Age=&lt;number&gt;</code> <em>可选</em></p><ul><li>: 在 cookie 失效之前需要经过的秒数。秒数为 0 或 -1 将会使 cookie 直接过期。假如 <code>Expires</code> 和 <code>Max-Age</code> 属性均存在，那么 <code>Max-Age</code> 的优先级更高。</li></ul></li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;浏览器中手动修改cookie的有效期&quot;&gt;&lt;a href=&quot;#浏览器中手动修改cookie的有效期&quot; class=&quot;headerlink&quot; title=&quot;浏览器中手动修改cookie的有效期&quot;&gt;&lt;/a&gt;浏览器中手动修改cookie的有效期&lt;/h2&gt;&lt;p&gt;网站可以使用Cookie验证身份，从而可以实现关闭游客访问。&lt;/p&gt;
&lt;p&gt;作为用户，若网站关闭了游客访问，且Cookie到期以后，就无法继续访问该网站。&lt;/p&gt;
&lt;p&gt;可以在浏览器客户端手动设置Cookie的过期时间，从而延长登录有效期。&lt;/p&gt;
&lt;p&gt;以Chrome浏览器为例，按&lt;code&gt;F12&lt;/code&gt;打开开发者工具，找到网站Cookie手动修改过期时间。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2023/02/09/%E4%BD%9C%E4%B8%BA%E7%94%A8%E6%88%B7%EF%BC%8C%E4%BF%AE%E6%94%B9Cookie%E6%9C%89%E6%95%88%E6%9C%9F%EF%BC%8C%E5%BB%B6%E9%95%BFCookie%E6%9C%9F%E9%99%90/2023-02-09-12-19-19.png&quot; alt=&quot;按`F12`打开开发者工具，找到网站Cookie手动修改过期时间。&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;相关知识之会话cookie&quot;&gt;&lt;a href=&quot;#相关知识之会话cookie&quot; class=&quot;headerlink&quot; title=&quot;相关知识之会话cookie&quot;&gt;&lt;/a&gt;相关知识之会话cookie&lt;/h2&gt;</summary>
    
    
    
    
    <category term="JavaScript" scheme="https://xiaoyan94.github.io/tags/JavaScript/"/>
    
    <category term="Cookie" scheme="https://xiaoyan94.github.io/tags/Cookie/"/>
    
  </entry>
  
  <entry>
    <title>终端命令网络设置</title>
    <link href="https://xiaoyan94.github.io/2023/02/08/%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4%E4%BB%A3%E7%90%86/"/>
    <id>https://xiaoyan94.github.io/2023/02/08/%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4%E4%BB%A3%E7%90%86/</id>
    <published>2023-02-08T06:17:51.000Z</published>
    <updated>2023-02-08T07:32:44.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="终端设置代理"><a href="#终端设置代理" class="headerlink" title="终端设置代理"></a>终端设置代理</h2><ol><li><p>Linux&#x2F;macOS bash&#x2F;Windows Git Bash终端</p><ol><li>使用 <code>export https_proxy=http://127.0.0.1:7890;export http_proxy=http://127.0.0.1:7890;export all_proxy=socks5://127.0.0.1:7890</code> 设置环境变量</li><li>使用 <code>curl -verbose ip.gs</code> 命令进行检查是否设置成功。</li></ol><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> https_proxy=http://127.0.0.1:7890;<span class="built_in">export</span> http_proxy=http://127.0.0.1:7890;<span class="built_in">export</span> all_proxy=socks5://127.0.0.1:7890</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> curl -verbose ip.gs</span></span><br><span class="line">* Uses proxy env variable http_proxy == 'http://127.0.0.1:7890'</span><br><span class="line">*   Trying 127.0.0.1:7890...</span><br><span class="line">* Connected to 127.0.0.1 (127.0.0.1) port 7890 (#0)</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> GET http://ip.gs/ HTTP/1.1</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Host: ip.gs</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> User-Agent: curl/7.84.0</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Accept: */*</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Referer: rbose</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Proxy-Connection: Keep-Alive</span></span><br><span class="line"><span class="meta">&gt;</span></span><br><span class="line">* Mark bundle as not supporting multiuse</span><br><span class="line">&lt; HTTP/1.1 200 OK</span><br><span class="line">&lt; Transfer-Encoding: chunked</span><br><span class="line">&lt; Cache-Control: no-cache</span><br><span class="line">&lt; Connection: keep-alive</span><br><span class="line">&lt; Content-Type: text/plain</span><br><span class="line">&lt; Date: Wed, 08 Feb 2023 06:01:21 GMT</span><br><span class="line">&lt; Keep-Alive: timeout=4</span><br><span class="line">&lt; Proxy-Connection: keep-alive</span><br><span class="line">&lt; Server: nginx</span><br><span class="line">&lt; Vary: Accept-Encoding</span><br><span class="line">&lt;</span><br><span class="line">2607:f130:0:手动马赛克::d891:eccc</span><br><span class="line">* Connection #0 to host 127.0.0.1 left intact</span><br></pre></td></tr></table></figure></div></li><li><p>Windows CMD终端</p><ol><li>使用 <code>set http_proxy=http://127.0.0.1:7890 &amp; set https_proxy=http://127.0.0.1:7890</code> 设置环境变量</li><li>使用 <code>curl -vvvk https://google.com</code> 命令进行检查是否设置成功。 <a id="more"></a><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="CMD"><figure class="iseeu highlight /cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">Users</span>\<span class="title">R00004050</span>&gt;<span class="title">set</span> <span class="title">http_proxy</span>=<span class="title">http</span>://127.0.0.1:7890 &amp; <span class="title">set</span> <span class="title">https_proxy</span>=<span class="title">http</span>://127.0.0.1:7890</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">C</span>:\<span class="title">Users</span>\<span class="title">R00004050</span>&gt;<span class="title">curl</span> -<span class="title">vvvk</span> <span class="title">https</span>://<span class="title">google.com</span></span></span><br><span class="line"><span class="function">* <span class="title">Uses</span> <span class="title">proxy</span> <span class="title">env</span> <span class="title">variable</span> <span class="title">https_proxy</span> == '<span class="title">http</span>://127.0.0.1:7890'</span></span><br><span class="line"><span class="function">*   <span class="title">Trying</span> 127.0.0.1:7890...</span></span><br><span class="line"><span class="function">* <span class="title">Connected</span> <span class="title">to</span> 127.0.0.1 (127.0.0.1) <span class="title">port</span> 7890 (#0)</span></span><br><span class="line"><span class="function">* <span class="title">allocate</span> <span class="title">connect</span> <span class="title">buffer</span></span></span><br><span class="line"><span class="function">* <span class="title">Establish</span> <span class="title">HTTP</span> <span class="title">proxy</span> <span class="title">tunnel</span> <span class="title">to</span> <span class="title">google.com</span>:443</span></span><br><span class="line"><span class="function">&gt; <span class="title">CONNECT</span> <span class="title">google.com</span>:443 <span class="title">HTTP</span>/1.1</span></span><br><span class="line"><span class="function">&gt; <span class="title">Host</span>: <span class="title">google.com</span>:443</span></span><br><span class="line"><span class="function">&gt; <span class="title">User</span>-<span class="title">Agent</span>: <span class="title">curl</span>/7.83.1</span></span><br><span class="line"><span class="function">&gt; <span class="title">Proxy</span>-<span class="title">Connection</span>: <span class="title">Keep</span>-<span class="title">Alive</span></span></span><br><span class="line"><span class="function">&gt;</span></span><br><span class="line"><span class="function">&lt; <span class="title">HTTP</span>/1.1 200 <span class="title">Connection</span> <span class="title">established</span></span></span><br><span class="line"><span class="function">&lt;</span></span><br><span class="line"><span class="function">* <span class="title">Proxy</span> <span class="title">replied</span> 200 <span class="title">to</span> <span class="title">CONNECT</span> <span class="title">request</span></span></span><br><span class="line"><span class="function">* <span class="title">CONNECT</span> <span class="title">phase</span> <span class="title">completed</span></span></span><br><span class="line"><span class="function">* <span class="title">schannel</span>: <span class="title">disabled</span> <span class="title">automatic</span> <span class="title">use</span> <span class="title">of</span> <span class="title">client</span> <span class="title">certificate</span></span></span><br><span class="line"><span class="function">* <span class="title">ALPN</span>: <span class="title">offers</span> <span class="title">http</span>/1.1</span></span><br><span class="line"><span class="function">* <span class="title">ALPN</span>: <span class="title">server</span> <span class="title">accepted</span> <span class="title">http</span>/1.1</span></span><br><span class="line"><span class="function">&gt; <span class="title">GET</span> / <span class="title">HTTP</span>/1.1</span></span><br><span class="line"><span class="function">&gt; <span class="title">Host</span>: <span class="title">google.com</span></span></span><br><span class="line"><span class="function">&gt; <span class="title">User</span>-<span class="title">Agent</span>: <span class="title">curl</span>/7.83.1</span></span><br><span class="line"><span class="function">&gt; <span class="title">Accept</span>: */*</span></span><br><span class="line"><span class="function">&gt;</span></span><br><span class="line"><span class="function">* <span class="title">Mark</span> <span class="title">bundle</span> <span class="title">as</span> <span class="title">not</span> <span class="title">supporting</span> <span class="title">multiuse</span></span></span><br><span class="line"><span class="function">&lt; <span class="title">HTTP</span>/1.1 301 <span class="title">Moved</span> <span class="title">Permanently</span></span></span><br><span class="line"><span class="function">&lt; <span class="title">Location</span>: <span class="title">https</span>://<span class="title">www.google.com</span>/</span></span><br><span class="line"><span class="function">&lt; <span class="title">Content</span>-<span class="title">Type</span>: <span class="title">text</span>/<span class="title">html</span>; <span class="title">charset</span>=<span class="title">UTF</span>-8</span></span><br><span class="line"><span class="function">&lt; <span class="title">Date</span>: <span class="title">Wed</span>, 08 <span class="title">Feb</span> 2023 06:52:11 <span class="title">GMT</span></span></span><br><span class="line"><span class="function">&lt; <span class="title">Expires</span>: <span class="title">Fri</span>, 10 <span class="title">Mar</span> 2023 06:52:11 <span class="title">GMT</span></span></span><br><span class="line"><span class="function">&lt; <span class="title">Cache</span>-<span class="title">Control</span>: <span class="title">public</span>, <span class="title">max</span>-<span class="title">age</span>=2592000</span></span><br><span class="line"><span class="function">&lt; <span class="title">Server</span>: <span class="title">gws</span></span></span><br><span class="line"><span class="function">&lt; <span class="title">Content</span>-<span class="title">Length</span>: 220</span></span><br><span class="line"><span class="function">&lt; <span class="title">X</span>-<span class="title">XSS</span>-<span class="title">Protection</span>: 0</span></span><br><span class="line"><span class="function">&lt; <span class="title">X</span>-<span class="title">Frame</span>-<span class="title">Options</span>: <span class="title">SAMEORIGIN</span></span></span><br><span class="line"><span class="function">&lt; <span class="title">Alt</span>-<span class="title">Svc</span>: <span class="title">h3</span>=":443"; <span class="title">ma</span>=2592000,<span class="title">h3</span>-29=":443"; <span class="title">ma</span>=2592000</span></span><br><span class="line"><span class="function">&lt;</span></span><br><span class="line"><span class="function">&lt;<span class="title">HTML</span>&gt;&lt;<span class="title">HEAD</span>&gt;&lt;<span class="title">meta</span> <span class="title">http</span>-<span class="title">equiv</span>="<span class="title">content</span>-<span class="title">type</span>" <span class="title">content</span>="<span class="title">text</span>/<span class="title">html</span>;<span class="title">charset</span>=<span class="title">utf</span>-8"&gt;</span></span><br><span class="line"><span class="function">&lt;<span class="title">TITLE</span>&gt;301 <span class="title">Moved</span>&lt;/<span class="title">TITLE</span>&gt;&lt;/<span class="title">HEAD</span>&gt;&lt;<span class="title">BODY</span>&gt;</span></span><br><span class="line"><span class="function">&lt;<span class="title">H1</span>&gt;301 <span class="title">Moved</span>&lt;/<span class="title">H1</span>&gt;</span></span><br><span class="line"><span class="function"><span class="title">The</span> <span class="title">document</span> <span class="title">has</span> <span class="title">moved</span></span></span><br><span class="line"><span class="function">&lt;<span class="title">A</span> <span class="title">HREF</span>="<span class="title">https</span>://<span class="title">www.google.com</span>/"&gt;<span class="title">here</span>&lt;/<span class="title">A</span>&gt;.</span></span><br><span class="line"><span class="function">&lt;/<span class="title">BODY</span>&gt;&lt;/<span class="title">HTML</span>&gt;</span></span><br><span class="line"><span class="function">* <span class="title">Connection</span> #0 <span class="title">to</span> <span class="title">host</span> 127.0.0.1 <span class="title">left</span> <span class="title">intact</span></span></span><br></pre></td></tr></table></figure></div></li></ol><p> 一些参数解释</p><ul><li>-v verbose (print errors&#x2F;warnings while in event loop)</li><li>-vv very verbose (also print client commands&#x2F;reponses)</li><li>-vvv extremely verbose (also print internal state transitions)</li><li>-k 关闭SSL证书检查</li></ul></li></ol>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;终端设置代理&quot;&gt;&lt;a href=&quot;#终端设置代理&quot; class=&quot;headerlink&quot; title=&quot;终端设置代理&quot;&gt;&lt;/a&gt;终端设置代理&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Linux&amp;#x2F;macOS bash&amp;#x2F;Windows Git Bash终端&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;使用 &lt;code&gt;export https_proxy=http://127.0.0.1:7890;export http_proxy=http://127.0.0.1:7890;export all_proxy=socks5://127.0.0.1:7890&lt;/code&gt; 设置环境变量&lt;/li&gt;
&lt;li&gt;使用 &lt;code&gt;curl -verbose ip.gs&lt;/code&gt; 命令进行检查是否设置成功。&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; https_proxy=http://127.0.0.1:7890;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; http_proxy=http://127.0.0.1:7890;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; all_proxy=socks5://127.0.0.1:7890&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; curl -verbose ip.gs&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* Uses proxy env variable http_proxy == &#39;http://127.0.0.1:7890&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*   Trying 127.0.0.1:7890...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* Connected to 127.0.0.1 (127.0.0.1) port 7890 (#0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; GET http://ip.gs/ HTTP/1.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; Host: ip.gs&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; User-Agent: curl/7.84.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; Accept: */*&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; Referer: rbose&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; Proxy-Connection: Keep-Alive&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* Mark bundle as not supporting multiuse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt; HTTP/1.1 200 OK&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt; Transfer-Encoding: chunked&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt; Cache-Control: no-cache&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt; Connection: keep-alive&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt; Content-Type: text/plain&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt; Date: Wed, 08 Feb 2023 06:01:21 GMT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt; Keep-Alive: timeout=4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt; Proxy-Connection: keep-alive&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt; Server: nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt; Vary: Accept-Encoding&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2607:f130:0:手动马赛克::d891:eccc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* Connection #0 to host 127.0.0.1 left intact&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Windows CMD终端&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;使用 &lt;code&gt;set http_proxy=http://127.0.0.1:7890 &amp;amp; set https_proxy=http://127.0.0.1:7890&lt;/code&gt; 设置环境变量&lt;/li&gt;
&lt;li&gt;使用 &lt;code&gt;curl -vvvk https://google.com&lt;/code&gt; 命令进行检查是否设置成功。&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;/ol&gt;</summary>
    
    
    
    
    <category term="Git Bash" scheme="https://xiaoyan94.github.io/tags/Git-Bash/"/>
    
    <category term="终端" scheme="https://xiaoyan94.github.io/tags/%E7%BB%88%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>Windows系统C盘清理工具FreeMove及文件占用进程查看软件LockHunter配合使用</title>
    <link href="https://xiaoyan94.github.io/2023/01/18/Windows%E7%B3%BB%E7%BB%9FC%E7%9B%98%E6%B8%85%E7%90%86%E5%B7%A5%E5%85%B7FreeMove%E5%8F%8A%E6%96%87%E4%BB%B6%E5%8D%A0%E7%94%A8%E8%BF%9B%E7%A8%8B%E6%9F%A5%E7%9C%8B%E8%BD%AF%E4%BB%B6LockHunter%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8/"/>
    <id>https://xiaoyan94.github.io/2023/01/18/Windows%E7%B3%BB%E7%BB%9FC%E7%9B%98%E6%B8%85%E7%90%86%E5%B7%A5%E5%85%B7FreeMove%E5%8F%8A%E6%96%87%E4%BB%B6%E5%8D%A0%E7%94%A8%E8%BF%9B%E7%A8%8B%E6%9F%A5%E7%9C%8B%E8%BD%AF%E4%BB%B6LockHunter%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8/</id>
    <published>2023-01-18T01:32:29.000Z</published>
    <updated>2023-01-18T03:27:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>三款软件、按顺序使用即可，无损移动C盘文件至其他盘，不影响使用。</p><ol><li><a href="http://www.uderzo.it/main_products/space_sniffer/download.html" target="_blank" rel="noopener">SpaceSniffer 磁盘文件大小可视化分析，找到大文件夹</a></li><li><a href="https://lockhunter.com/download.htm" target="_blank" rel="noopener">LockHunter 解除文件进程占用</a></li><li><a href="https://github.com/imDema/FreeMove/releases" target="_blank" rel="noopener">FreeMove 建立软链接的方式移动C盘大文件夹至其他盘</a></li></ol><p><img src="/2023/01/18/Windows%E7%B3%BB%E7%BB%9FC%E7%9B%98%E6%B8%85%E7%90%86%E5%B7%A5%E5%85%B7FreeMove%E5%8F%8A%E6%96%87%E4%BB%B6%E5%8D%A0%E7%94%A8%E8%BF%9B%E7%A8%8B%E6%9F%A5%E7%9C%8B%E8%BD%AF%E4%BB%B6LockHunter%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8/2023-01-18-11-02-47.png" alt="SpaceSniffer软件截图"></p><a id="more"></a><p><img src="/2023/01/18/Windows%E7%B3%BB%E7%BB%9FC%E7%9B%98%E6%B8%85%E7%90%86%E5%B7%A5%E5%85%B7FreeMove%E5%8F%8A%E6%96%87%E4%BB%B6%E5%8D%A0%E7%94%A8%E8%BF%9B%E7%A8%8B%E6%9F%A5%E7%9C%8B%E8%BD%AF%E4%BB%B6LockHunter%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8/2023-01-18-11-24-09.png" alt="LockHunter查看文件被进程占用情况"></p><p><img src="/2023/01/18/Windows%E7%B3%BB%E7%BB%9FC%E7%9B%98%E6%B8%85%E7%90%86%E5%B7%A5%E5%85%B7FreeMove%E5%8F%8A%E6%96%87%E4%BB%B6%E5%8D%A0%E7%94%A8%E8%BF%9B%E7%A8%8B%E6%9F%A5%E7%9C%8B%E8%BD%AF%E4%BB%B6LockHunter%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8/2023-01-18-11-25-53.png" alt="解除进程占用后，使用FreeMove移动文件夹"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;三款软件、按顺序使用即可，无损移动C盘文件至其他盘，不影响使用。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://www.uderzo.it/main_products/space_sniffer/download.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;SpaceSniffer 磁盘文件大小可视化分析，找到大文件夹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://lockhunter.com/download.htm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;LockHunter 解除文件进程占用&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/imDema/FreeMove/releases&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;FreeMove 建立软链接的方式移动C盘大文件夹至其他盘&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;/2023/01/18/Windows%E7%B3%BB%E7%BB%9FC%E7%9B%98%E6%B8%85%E7%90%86%E5%B7%A5%E5%85%B7FreeMove%E5%8F%8A%E6%96%87%E4%BB%B6%E5%8D%A0%E7%94%A8%E8%BF%9B%E7%A8%8B%E6%9F%A5%E7%9C%8B%E8%BD%AF%E4%BB%B6LockHunter%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8/2023-01-18-11-02-47.png&quot; alt=&quot;SpaceSniffer软件截图&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    
    <category term="电脑" scheme="https://xiaoyan94.github.io/tags/%E7%94%B5%E8%84%91/"/>
    
  </entry>
  
  <entry>
    <title>检测断网自动重连WiFi脚本</title>
    <link href="https://xiaoyan94.github.io/2023/01/14/AutoReconnectWiFi/"/>
    <id>https://xiaoyan94.github.io/2023/01/14/AutoReconnectWiFi/</id>
    <published>2023-01-14T00:46:32.000Z</published>
    <updated>2023-01-14T00:46:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近公司网络出毛病老是隔段时间就自动断开连接，写了这个批处理脚本可以自动检测网络状态、断网自动重连WiFi，并记录断网重连日志。</p><a id="more"></a><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BAT"><figure class="iseeu highlight /bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="keyword">if</span> "%<span class="number">1</span>"=="h" <span class="keyword">goto</span> begin</span><br><span class="line"><span class="built_in">start</span> mshta vbscript:createobject("wscript.shell").run("""%~nx0"" h",<span class="number">0</span>)(window.close)&amp;&amp;<span class="keyword">exit</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">%DATE%</span><span class="variable">%TIME%</span></span><br><span class="line"><span class="built_in">echo</span> WIFI自动重连服务正在进行中.......</span><br><span class="line"><span class="built_in">echo</span> 停止服务请按 Ctrl+C</span><br><span class="line">:begin</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">%date%</span> <span class="variable">%time%</span></span><br><span class="line"><span class="built_in">ping</span> google.com</span><br><span class="line"><span class="comment">rem echo %errorlevel%</span></span><br><span class="line"><span class="keyword">if</span> <span class="variable">%errorlevel%</span>==<span class="number">1</span> <span class="keyword">goto</span> flushdns</span><br><span class="line"><span class="keyword">if</span> <span class="variable">%errorlevel%</span>==<span class="number">0</span> <span class="built_in">echo</span> DNS google.com 解析正常...</span><br><span class="line"><span class="keyword">goto</span> loop</span><br><span class="line"></span><br><span class="line">:flushdns</span><br><span class="line"><span class="built_in">echo</span> 尝试刷新DNS.......</span><br><span class="line"><span class="built_in">ipconfig</span> /flushdns</span><br><span class="line"><span class="comment">rem echo %errorlevel%</span></span><br><span class="line"><span class="keyword">if</span> <span class="variable">%errorlevel%</span>==<span class="number">0</span> <span class="keyword">goto</span> ping2</span><br><span class="line"><span class="keyword">goto</span> loop</span><br><span class="line"></span><br><span class="line">:ping2</span><br><span class="line"><span class="comment">@REM ping 10.20.30.40</span></span><br><span class="line"><span class="built_in">ping</span> baidu.com</span><br><span class="line"><span class="comment">rem echo %errorlevel%</span></span><br><span class="line"><span class="keyword">if</span> <span class="variable">%errorlevel%</span>==<span class="number">1</span> <span class="keyword">goto</span> reconnect</span><br><span class="line"><span class="keyword">if</span> <span class="variable">%errorlevel%</span>==<span class="number">0</span> <span class="built_in">echo</span> baidu.com 连接检测正常...</span><br><span class="line"><span class="keyword">goto</span> loop</span><br><span class="line"></span><br><span class="line">:reconnect</span><br><span class="line"><span class="built_in">echo</span> ------------------------------------------------------------------ &gt;&gt; log.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">%date%</span> <span class="variable">%time%</span> 检测到断网状态，尝试重连中... &gt;&gt; log.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">%date%</span> <span class="variable">%time%</span> 执行网络主动断开命令 &gt;&gt; log.txt</span><br><span class="line">netsh wlan disconnect</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">%date%</span> <span class="variable">%time%</span> 正在重新连接中.... &gt;&gt; log.txt</span><br><span class="line">netsh wlan connect ssid=Google name=Google</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">%date%</span> <span class="variable">%time%</span> 已发送连接请求....ssid=Google &gt;&gt; log.txt</span><br><span class="line"><span class="keyword">goto</span> loop</span><br><span class="line"> </span><br><span class="line">:loop</span><br><span class="line">timeout <span class="number">60</span></span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line"><span class="keyword">goto</span> begin</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
    <summary type="html">&lt;p&gt;最近公司网络出毛病老是隔段时间就自动断开连接，写了这个批处理脚本可以自动检测网络状态、断网自动重连WiFi，并记录断网重连日志。&lt;/p&gt;</summary>
    
    
    
    
    <category term="脚本" scheme="https://xiaoyan94.github.io/tags/%E8%84%9A%E6%9C%AC/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript使用 Web Serial API获取串行设备端口数据(地磅串口数据)</title>
    <link href="https://xiaoyan94.github.io/2022/11/18/JavaScript%E4%BD%BF%E7%94%A8-Web-Serial-API%E8%8E%B7%E5%8F%96%E4%B8%B2%E8%A1%8C%E8%AE%BE%E5%A4%87%E7%AB%AF%E5%8F%A3%E6%95%B0%E6%8D%AE-%E5%9C%B0%E7%A3%85%E4%B8%B2%E5%8F%A3%E6%95%B0%E6%8D%AE/"/>
    <id>https://xiaoyan94.github.io/2022/11/18/JavaScript%E4%BD%BF%E7%94%A8-Web-Serial-API%E8%8E%B7%E5%8F%96%E4%B8%B2%E8%A1%8C%E8%AE%BE%E5%A4%87%E7%AB%AF%E5%8F%A3%E6%95%B0%E6%8D%AE-%E5%9C%B0%E7%A3%85%E4%B8%B2%E5%8F%A3%E6%95%B0%E6%8D%AE/</id>
    <published>2022-11-18T13:10:15.000Z</published>
    <updated>2023-02-08T05:39:24.000Z</updated>
    
    <content type="html"><![CDATA[<ul><li><a href="#%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87">前期准备</a></li><li><a href="#%E8%B5%84%E6%BA%90%E9%93%BE%E6%8E%A5">资源链接</a></li><li><a href="#%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B">代码示例</a><ul><li><a href="#%E6%A3%80%E6%9F%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E6%98%AF%E5%90%A6%E6%94%AF%E6%8C%81">检查浏览器是否支持</a></li><li><a href="#%E6%89%93%E5%BC%80%E4%B8%B2%E8%A1%8C%E7%AB%AF%E5%8F%A3">打开串行端口</a></li></ul></li><li><a href="#%E5%9C%B0%E7%A3%85%E8%AF%BB%E6%95%B0%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B">地磅读数代码示例</a></li><li><a href="#chrome%E6%B5%8F%E8%A7%88%E5%99%A8%E9%85%8D%E7%BD%AE%E5%9C%A8http%E5%8D%8F%E8%AE%AE%E4%BD%BF%E7%94%A8web%E4%B8%B2%E8%A1%8Capi">chrome浏览器配置在http协议使用web串行api</a></li></ul><a id="more"></a><h2 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h2><ol><li>学习 <strong>Web Serial API</strong></li><li>下载串口模拟工具 VSPD，用于建立虚拟串口对</li><li>下载串口调试精灵，用于调试，包括打开、关闭串口，发送、接收数据等</li><li>编写 js 代码，读取串口数据</li></ol><h2 id="资源链接"><a href="#资源链接" class="headerlink" title="资源链接"></a>资源链接</h2><ol><li><a href="https://cn.bing.com/search?q=VSPD" target="_blank" rel="noopener">VSPD</a></li><li><a href="https://cn.bing.com/search?q=%E4%B8%B2%E5%8F%A3%E8%B0%83%E8%AF%95%E7%B2%BE%E7%81%B5" target="_blank" rel="noopener">串口调试精灵</a></li><li><a href="https://cn.bing.com/search?q=Chrome%20Web%20Serial%20API" target="_blank" rel="noopener">Web Serial API</a></li></ol><h2 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h2><h3 id="检查浏览器是否支持"><a href="#检查浏览器是否支持" class="headerlink" title="检查浏览器是否支持"></a>检查浏览器是否支持</h3><p>只有浏览器支持 <strong>Web Serial API</strong> 才能通过 JavaScript 代码访问串口设备。要检查是否支持 Web Serial API，请使用：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">"serial"</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">  <span class="comment">// 支持 Web 串行 API。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="打开串行端口"><a href="#打开串行端口" class="headerlink" title="打开串行端口"></a>打开串行端口</h3><p>Web Serial API 在设计上是异步的。这可以防止网站 UI 在等待输入时阻塞。要打开串行端口，首先访问一个 SerialPort 对象。为此，可以通过调用 <code>navigator.serial.requestPort()</code> 以响应用户手势（例如触摸或鼠标单击）来提示用户选择单个串行端口，或者从返回的 <code>navigator.serial.getPorts()</code> 中选择一个网站已被授予访问权限的串行端口列表。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'button'</span>).addEventListener(<span class="string">'click'</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="comment">// 提示用户选择任意串口。</span></span><br><span class="line">  <span class="keyword">const</span> port = <span class="keyword">await</span> navigator.serial.requestPort();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取用户之前授予网站访问权限的所有串行端口。</span></span><br><span class="line"><span class="keyword">const</span> ports = <span class="keyword">await</span> navigator.serial.getPorts();</span><br></pre></td></tr></table></figure></div><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 提示用户选择任意串口。</span></span><br><span class="line"><span class="keyword">const</span> port = <span class="keyword">await</span> navigator.serial.requestPort();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等待串口打开。波特率 9600</span></span><br><span class="line"><span class="keyword">await</span> port.open(&#123; <span class="attr">baudRate</span>: <span class="number">9600</span> &#125;);</span><br></pre></td></tr></table></figure></div><p>还可以在打开串行端口时指定以下任何选项。这些选项是可选的，<a href="https://wicg.github.io/serial/#serialoptions-dictionary" target="_blank" rel="noopener">查看默认值</a>。</p><ul><li><code>dataBits</code>: 每帧的数据位数（7 或 8）。</li><li><code>stopBits</code>: 帧末尾的停止位数（1 或 2）。</li><li><code>parity</code>: 奇偶校验模式（<code>&quot;none&quot;</code>, <code>&quot;even&quot;</code> 或者 <code>&quot;odd&quot;</code>）。</li><li><code>bufferSize</code>: 应创建的读写缓冲区的大小（必须小于 16MB）。</li><li><code>flowControl</code>：流量控制模式（<code>&quot;none&quot;</code> 或 <code>&quot;hardware&quot;</code>）。</li></ul><h2 id="地磅读数代码示例"><a href="#地磅读数代码示例" class="headerlink" title="地磅读数代码示例"></a>地磅读数代码示例</h2><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $ = <span class="built_in">window</span>.$;</span><br><span class="line">$find = <span class="built_in">window</span>.$find;</span><br><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!(<span class="string">"serial"</span> <span class="keyword">in</span> navigator)) &#123;</span><br><span class="line">        alertError(<span class="string">"无法使用"</span>, <span class="string">"该浏览器不支持读取串口设备，请更换Chrome浏览器！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置全局变量</span></span><br><span class="line">    <span class="built_in">window</span>.weightValues = []; <span class="comment">//存储最近三次称重值</span></span><br><span class="line">    <span class="built_in">window</span>.sameCount = <span class="number">3</span>; <span class="comment">//3 // weightValues数组的大小</span></span><br><span class="line">    <span class="built_in">window</span>.r1 = <span class="regexp">/\)0\s&#123;1,9&#125;(\d*)\s&#123;1,9&#125;\d\d/g</span>; <span class="comment">//使用正则表达式匹配读数</span></span><br><span class="line"></span><br><span class="line">    setRadRadioButtonList();</span><br><span class="line">    setHideOrShow();</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setRadRadioButtonList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//if ($find("RadRadioButtonList").get_selectedIndex() === -1) &#123;</span></span><br><span class="line">    <span class="comment">//    //若未选，则选中第一次称重</span></span><br><span class="line">    <span class="comment">//    //$find("RadRadioButtonList").set_selectedIndex(0);</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">////添加切换事件</span></span><br><span class="line">    <span class="comment">//$find("RadRadioButtonList").add_selectedIndexChanged(setHideOrShow);</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断第几次称重要显示的控件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setHideOrShow</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">/*const label = $("#RadLabelReadingTip")[0];*/</span></span><br><span class="line">    <span class="comment">//console.log(i.get_selectedIndex());</span></span><br><span class="line">    <span class="comment">//switch ($find("RadRadioButtonList").get_selectedIndex()) &#123;</span></span><br><span class="line">    <span class="comment">//    case 0:</span></span><br><span class="line">    <span class="comment">//        //第一次称重 毛重读数</span></span><br><span class="line">    <span class="comment">//        //label.setHTML(label.getInnerHTML().replace("皮重", "毛重"));</span></span><br><span class="line">    <span class="comment">//        $("#carNumberDiv").show();</span></span><br><span class="line">    <span class="comment">//        $("#containerDeductionDiv").show();</span></span><br><span class="line">    <span class="comment">//        $("#trayDeductionDiv").hide();</span></span><br><span class="line">    <span class="comment">//        $("#InputArea").css("background-color", "orange");</span></span><br><span class="line">    <span class="comment">//        $("#tareWeightDiv").hide();</span></span><br><span class="line">    <span class="comment">//        $("#grossWeightDiv").show();</span></span><br><span class="line">    <span class="comment">//        break;</span></span><br><span class="line">    <span class="comment">//    case 1:</span></span><br><span class="line">    <span class="comment">//        //第二次称重 皮重</span></span><br><span class="line">    <span class="comment">//        //label.setHTML(label.getInnerHTML().replace("毛重", "皮重"));</span></span><br><span class="line">    <span class="comment">//        $("#carNumberDiv").hide();</span></span><br><span class="line">    <span class="comment">//        $("#containerDeductionDiv").hide();</span></span><br><span class="line">    <span class="comment">//        $("#trayDeductionDiv").show();</span></span><br><span class="line">    <span class="comment">//        $("#InputArea").css("background-color", "lightcoral");</span></span><br><span class="line">    <span class="comment">//        $("#tareWeightDiv").show();</span></span><br><span class="line">    <span class="comment">//        $("#grossWeightDiv").hide();</span></span><br><span class="line">    <span class="comment">//        break;</span></span><br><span class="line">    <span class="comment">//    default:</span></span><br><span class="line">    <span class="comment">//        break;</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//保存</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">savePounds</span>(<span class="params">saveBtn</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(saveBtn.name);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//第几次称重</span></span><br><span class="line">    <span class="comment">//const times = $find("RadRadioButtonList").get_selectedIndex();</span></span><br><span class="line">    <span class="keyword">const</span> times = $(<span class="string">"#HiddenFieldTimes"</span>).val();</span><br><span class="line">    <span class="comment">//if (times === -1) &#123;</span></span><br><span class="line">    <span class="comment">//    //若未选，则选中第一次称重</span></span><br><span class="line">    <span class="comment">//    alertBasic("请选择第几次称重");</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//    return false;</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line">    <span class="comment">/*readPounds();*/</span></span><br><span class="line">    <span class="comment">//集装箱号</span></span><br><span class="line">    <span class="comment">/*const containerNumber = $find("RadTextBoxContainerNumber").get_value().trim();*/</span></span><br><span class="line">    <span class="keyword">const</span> containerNumber = (<span class="keyword">new</span> URL(<span class="built_in">window</span>.location)).searchParams.get(<span class="string">"ContainerNumber"</span>)?.trim();</span><br><span class="line">    <span class="comment">//车牌号</span></span><br><span class="line">    <span class="keyword">const</span> carNumber = $find(<span class="string">"RadTextBoxCarNumber"</span>).get_value().trim();</span><br><span class="line">    <span class="keyword">if</span> (!carNumber) &#123;</span><br><span class="line">        alertError(<span class="string">"输入有误"</span>, <span class="string">"车牌号不能为空！"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//if (!</span></span><br><span class="line">        <span class="comment">//    /^([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]&#123;1&#125;[a-zA-Z](([DF]((?![IO])[a-zA-Z0-9](?![IO]))[0-9]&#123;4&#125;)|([0-9]&#123;5&#125;[DF]))|[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]&#123;1&#125;[A-Z]&#123;1&#125;[A-Z0-9]&#123;4&#125;[A-Z0-9挂学警港澳]&#123;1&#125;)$/</span></span><br><span class="line">        <span class="comment">//        .test(carNumber)) &#123;</span></span><br><span class="line">        <span class="comment">//    alertError("输入有误", "请重新输入有效的车牌号！");</span></span><br><span class="line">        <span class="comment">//    return false;</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">        <span class="keyword">if</span> (carNumber.length &lt; <span class="number">3</span>) &#123;</span><br><span class="line">            alertError(<span class="string">"输入有误"</span>, <span class="string">"请重新输入有效的车牌号！"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//集装箱扣重</span></span><br><span class="line">    <span class="keyword">const</span> containerDeduction = $find(<span class="string">"RadNumericTextBoxContainerDeduction"</span>).get_value();</span><br><span class="line">    <span class="comment">//集装箱重范围检查</span></span><br><span class="line">    <span class="keyword">if</span> (times === <span class="string">"1"</span> &amp;&amp; !containerDeduction) &#123;</span><br><span class="line">        alertError(<span class="string">"输入有误"</span>, <span class="string">"集装箱扣重不能为空！"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//干货箱（钢）                     门尺寸(mm)             内部尺寸(mm)     载重(Kg)                 体积(m3)</span></span><br><span class="line">        <span class="comment">//箱型     尺寸                 宽度     高度     长度     宽度     高度     最大重量 自重     最大载重 最大装载体积</span></span><br><span class="line">        <span class="comment">//20"普柜 20' x 8' x 8' 6" 2, 340 2, 274 5, 896 2, 350 2, 385 27, 000 2, 150 24, 850 33</span></span><br><span class="line">        <span class="comment">//40"普柜 40' x 8' x 8' 6" 2, 339 2, 274 12, 035 2, 350 2, 393 32, 500 3, 700 28, 800 67</span></span><br><span class="line">        <span class="comment">//40" 高柜 40' x 8' x 9' 6" 2, 340 2, 577 12, 035 2, 350 2, 697 34, 000 3, 800 30, 200 76</span></span><br><span class="line">        <span class="comment">//45" 高柜 45' x 8' x 9' 6" 2, 340 2, 585 13, 556 2, 352 2, 697 32, 500 4, 800 27, 820 86</span></span><br><span class="line">        <span class="comment">//柜型</span></span><br><span class="line">        <span class="built_in">window</span>.params = (<span class="keyword">new</span> URL(<span class="built_in">document</span>.location)).searchParams; <span class="comment">// URL接口的searchParams只读属性返回URLSearchParams对象，允许访问URL中包含的GET解码查询参数。</span></span><br><span class="line">        <span class="built_in">window</span>.containerType = params.get(<span class="string">"ContainerType"</span>);</span><br><span class="line">        <span class="keyword">switch</span> (containerType) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">`20'GP`</span>:</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(containerDeduction - <span class="number">2150</span>) &gt;= <span class="number">1000</span>) &#123;</span><br><span class="line">                    alertError(<span class="string">"集装箱重范围检查"</span>, <span class="string">"请检查输入的集装箱扣重！"</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">`40'GP`</span>:</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(containerDeduction - <span class="number">3700</span>) &gt;= <span class="number">1000</span>) &#123;</span><br><span class="line">                    alertError(<span class="string">"集装箱重范围检查"</span>, <span class="string">"请检查输入的集装箱扣重！"</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">`40'HQ`</span>:</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(containerDeduction - <span class="number">3800</span>) &gt;= <span class="number">1000</span>) &#123;</span><br><span class="line">                    <span class="comment">// 40'HQ自重3.8吨 允许输入误差范围1000kg</span></span><br><span class="line">                    alertError(<span class="string">"集装箱重范围检查"</span>, <span class="string">"请检查输入的集装箱扣重！"</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">`45'HQ`</span>:</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(containerDeduction - <span class="number">4800</span>) &gt;= <span class="number">1000</span>) &#123;</span><br><span class="line">                    alertError(<span class="string">"集装箱重范围检查"</span>, <span class="string">"请检查输入的集装箱扣重！"</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">`53'HQ`</span>:</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(containerDeduction - <span class="number">5380</span>) &gt;= <span class="number">1000</span>) &#123;</span><br><span class="line">                    alertError(<span class="string">"集装箱重范围检查"</span>, <span class="string">"请检查输入的集装箱扣重！"</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//托盘扣重</span></span><br><span class="line">    <span class="keyword">const</span> trayDeduction = $find(<span class="string">"RadNumericTextBoxTrayDeduction"</span>).get_value();</span><br><span class="line">    <span class="keyword">if</span> (times === <span class="string">"2"</span> &amp;&amp; !trayDeduction) &#123;</span><br><span class="line">        alertError(<span class="string">"输入有误"</span>, <span class="string">"托盘扣重不能为空！"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!containerNumber) &#123;</span><br><span class="line">        alertError(<span class="string">"输入有误"</span>, <span class="string">"集装箱号不能为空！"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//(async function() &#123;</span></span><br><span class="line">    <span class="comment">//    const result = await readPounds();</span></span><br><span class="line">    <span class="comment">//    return result;</span></span><br><span class="line">    <span class="comment">//&#125;)();</span></span><br><span class="line">    <span class="keyword">const</span> isSuccess = readPounds();</span><br><span class="line">    isSuccess.then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">Promise</span>.resolve(res)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//毛重读数</span></span><br><span class="line">            <span class="keyword">const</span> grossWeight = $(<span class="string">"#RadLabelGrossWeight2"</span>)[<span class="number">0</span>].innerText;</span><br><span class="line">            <span class="keyword">if</span> (times === <span class="string">"1"</span> &amp;&amp; !grossWeight) &#123;</span><br><span class="line">                alertError(<span class="string">"读数有误"</span>, <span class="string">"毛重读数不能为空！"</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//皮重读数</span></span><br><span class="line">            <span class="comment">//const tareWeight = $find("RadNumericTextBoxTareWeight").get_textBoxValue();</span></span><br><span class="line">            <span class="keyword">const</span> tareWeight = $(<span class="string">"#RadLabelTareWeight2"</span>)[<span class="number">0</span>].innerText;</span><br><span class="line">            <span class="keyword">if</span> (times === <span class="string">"2"</span> &amp;&amp; !tareWeight) &#123;</span><br><span class="line">                alertError(<span class="string">"读数有误"</span>, <span class="string">"皮重读数不能为空！"</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// TODO 异步请求：保存</span></span><br><span class="line">            <span class="comment">//window.$find("BtnSave").set_enabled(false);</span></span><br><span class="line">            $(<span class="string">`#<span class="subst">$&#123;saveBtn.name&#125;</span>`</span>)[<span class="number">0</span>].disabled = <span class="literal">false</span>;</span><br><span class="line">            $.ajax(</span><br><span class="line">                &#123;</span><br><span class="line">                    type: <span class="string">"POST"</span>,</span><br><span class="line">                    url: <span class="string">"MLWeightReadPounds.aspx/AjaxSavePounds"</span>,</span><br><span class="line">                    data: <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">                        containerNumber: containerNumber,</span><br><span class="line">                        times: times,</span><br><span class="line">                        grossWeight: grossWeight,</span><br><span class="line">                        tareWeight: tareWeight,</span><br><span class="line">                        value: times === <span class="string">"1"</span> ? grossWeight : tareWeight,</span><br><span class="line">                        userId: $(<span class="string">"#HiddenFieldUserId"</span>).val(),</span><br><span class="line">                        carNumber: carNumber,</span><br><span class="line">                        containerType: containerType,</span><br><span class="line">                        containerDeduction: containerDeduction,</span><br><span class="line">                        trayDeduction: trayDeduction,</span><br><span class="line">                        purchaseOrder: params.get(<span class="string">"PurchaseOrder"</span>),</span><br><span class="line">                        declarationId: params.get(<span class="string">"DeclarationId"</span>)</span><br><span class="line">                    &#125;),</span><br><span class="line">                    dataType: <span class="string">"json"</span>,</span><br><span class="line">                    <span class="comment">// async: false,</span></span><br><span class="line">                    contentType: <span class="string">"application/json; charset=utf-8"</span>,</span><br><span class="line">                    success: <span class="function"><span class="keyword">function</span> (<span class="params">infos</span>) </span>&#123;</span><br><span class="line">                        <span class="keyword">const</span> jsonRes = <span class="built_in">JSON</span>.parse(infos.d);</span><br><span class="line">                        <span class="built_in">console</span>.log(jsonRes);</span><br><span class="line">                        <span class="keyword">if</span> (jsonRes.status === <span class="string">"200"</span>) &#123;</span><br><span class="line">                            alertSuccess(<span class="string">"保存成功！"</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="comment">//alert(infos.d.errMsg);</span></span><br><span class="line">                            <span class="built_in">console</span>.log(jsonRes);</span><br><span class="line">                            alertError(jsonRes.errMsg, jsonRes.exception);</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        <span class="built_in">window</span>.location.reload();</span><br><span class="line">                        <span class="comment">//window.$find("BtnSave").set_enabled(true);</span></span><br><span class="line">                        $(<span class="string">`#<span class="subst">$&#123;saveBtn.name&#125;</span>`</span>)[<span class="number">0</span>].disabled = <span class="literal">false</span>;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    error: <span class="function"><span class="keyword">function</span> (<span class="params">exception</span>) </span>&#123;</span><br><span class="line">                        alertError(<span class="string">"浏览器Ajax请求错误"</span>, exception.responseText);</span><br><span class="line">                        <span class="comment">//window.$find("BtnSave").set_enabled(true);</span></span><br><span class="line">                        $(<span class="string">`#<span class="subst">$&#123;saveBtn.name&#125;</span>`</span>)[<span class="number">0</span>].disabled = <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 临时保存读数至会话存储</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">savePoundsToLocalStorage</span>(<span class="params">weightValue</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> userId = $(<span class="string">"#HiddenFieldUserId"</span>)[<span class="number">0</span>].value; <span class="comment">// 工号</span></span><br><span class="line">    <span class="keyword">const</span> containerId = $(<span class="string">"#HiddenFieldContainerId"</span>)[<span class="number">0</span>].value; <span class="comment">// 集装箱Id</span></span><br><span class="line">    <span class="comment">//第几次称重</span></span><br><span class="line">    <span class="comment">//const times = $find("RadRadioButtonList").get_selectedIndex();</span></span><br><span class="line">    <span class="keyword">const</span> times = $(<span class="string">"#HiddenFieldTimes"</span>).val();</span><br><span class="line">    sessionStorage.setItem(<span class="string">"ML_WEIGHT_USERID"</span>, userId);</span><br><span class="line">    sessionStorage.setItem(<span class="string">"ML_WEIGHT_CONTAINER_ID"</span>, containerId);</span><br><span class="line">    sessionStorage.setItem(<span class="string">`ML_WEIGHT_VALUE_<span class="subst">$&#123;times&#125;</span>`</span>, weightValue);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">readPounds</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 判断是否支持Web串行API。</span></span><br><span class="line">    <span class="keyword">if</span> (!(<span class="string">"serial"</span> <span class="keyword">in</span> navigator)) &#123;</span><br><span class="line">        alertError(<span class="string">"Web串行接口无法使用"</span>, <span class="string">"该浏览器不支持读取串口设备，请更换Chrome浏览器！"</span>);</span><br><span class="line">        <span class="comment">//alert("该浏览器不支持读取串口设备，请更换Chrome浏览器！");</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 获取用户之前授予网站访问权限的所有串行端口。</span></span><br><span class="line">        <span class="keyword">const</span> ports = <span class="keyword">await</span> navigator.serial.getPorts();</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`已授权的串行端口：<span class="subst">$&#123;ports.length&#125;</span> 个`</span>);</span><br><span class="line">        ports.forEach(<span class="function"><span class="params">p</span> =&gt;</span> <span class="built_in">console</span>.log(p));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> port;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// TODO 闫伟明 串行端口选错连接不上异常处理；串行端口选择过滤</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (ports.length === <span class="number">1</span>) &#123;</span><br><span class="line">            port = ports[<span class="number">0</span>];</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"选择第一个端口打开"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"请选择一个端口打开"</span>);</span><br><span class="line">            <span class="comment">// 提示用户选择任意串口。</span></span><br><span class="line">            port = <span class="keyword">await</span> navigator.serial.requestPort();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 等待串口打开。</span></span><br><span class="line">            <span class="keyword">await</span> port.open(&#123;</span><br><span class="line">                baudRate: <span class="number">9600</span>,<span class="comment">/*建立串行通信的波特率*/</span></span><br><span class="line">                dataBits: <span class="number">8</span>,<span class="comment">/*每帧的数据位数*/</span></span><br><span class="line">                stopBits: <span class="number">1</span>,<span class="comment">/*帧末尾的停止位数*/</span></span><br><span class="line">                parity: <span class="string">"even"</span>,<span class="comment">/*奇偶校验模式*/</span></span><br><span class="line">                bufferSize: <span class="number">255</span>,<span class="comment">/*缓冲区大小*/</span></span><br><span class="line">                flowControl: <span class="string">"none"</span><span class="comment">/*流量控制模式*/</span></span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">`等待串口打开中...<span class="subst">$&#123;e&#125;</span>`</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"端口打开成功！"</span>);</span><br><span class="line"></span><br><span class="line">        toast(<span class="string">"打开串口"</span>, <span class="string">`<span class="subst">$&#123;port&#125;</span>端口打开成功！`</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">window</span>.weightValues = []; <span class="comment">//存储最近三次称重值</span></span><br><span class="line">        <span class="comment">//window.sameCount = 10; //3 // weightValues数组的大小</span></span><br><span class="line">        <span class="comment">//window.r1 = /\)0\s&#123;5&#125;(\d*)\s&#123;5&#125;00/g; //使用正则表达式匹配读数</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> s = <span class="keyword">new</span> <span class="built_in">String</span>(); <span class="comment">// 储存地磅串行接口传来的数据 一个完整的数据是十六进制字符串</span></span><br><span class="line">        <span class="keyword">while</span> (port.readable) &#123;</span><br><span class="line">            <span class="keyword">const</span> reader = port.readable.getReader();</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">`获取到串行输出流：<span class="subst">$&#123;reader&#125;</span>`</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"开始监听串行流..."</span>);</span><br><span class="line">                <span class="comment">// 监听来自串行设备的数据。</span></span><br><span class="line">                outerWhileLoop: <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"正等待读取串行输出流..."</span>);</span><br><span class="line">                    <span class="keyword">const</span> &#123; value, done &#125; = <span class="keyword">await</span> reader.read();</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"读取串行输出流..."</span>);</span><br><span class="line">                    <span class="keyword">if</span> (done) &#123;</span><br><span class="line">                        <span class="comment">// 允许稍后关闭串口。</span></span><br><span class="line">                        reader.releaseLock();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 值是一个 Uint8Array.</span></span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">`接收数据 Uint8Array 中...<span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">`转换数据 Uint8ArrayToString 中...<span class="subst">$&#123;Uint8ArrayToString(value)&#125;</span>`</span>);</span><br><span class="line">                    <span class="built_in">console</span>.log(s);</span><br><span class="line">                    s += Uint8ArrayToString(value);</span><br><span class="line">                    <span class="keyword">if</span> (s.length &lt; <span class="number">200</span>) &#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">"累计收到字符串长度小于200，继续读取..."</span>);</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s.length &gt; <span class="number">10000</span>) &#123;</span><br><span class="line">                        s = <span class="string">""</span>;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">"累计收到字符串长度大于10000，清空..."</span>);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 2022年12月16日13:32:54 新数据格式解析 -- START</span></span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">`使用 <span class="subst">$&#123;r1&#125;</span> 进行正则匹配...`</span>);</span><br><span class="line">                    <span class="keyword">while</span> (r1.exec(s)) &#123;</span><br><span class="line">                        <span class="keyword">const</span> curWeight = <span class="built_in">RegExp</span>.$<span class="number">1</span>;</span><br><span class="line">                        <span class="built_in">console</span>.log(curWeight + <span class="string">" "</span> + <span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">                        <span class="built_in">window</span>.showWeight(curWeight);</span><br><span class="line">                        <span class="comment">// 取值3次，3次相等即为结果</span></span><br><span class="line">                        <span class="keyword">if</span> (weightValues.length &lt; sameCount) &#123;</span><br><span class="line">                            <span class="comment">//称重值小于3个，入队</span></span><br><span class="line">                            weightValues.push(curWeight);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="comment">//称重值3个，先出队再入队</span></span><br><span class="line">                            weightValues.shift();</span><br><span class="line">                            weightValues.push(curWeight);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">`weightValues:<span class="subst">$&#123;weightValues&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">if</span> (weightValues.length === sameCount) &#123;</span><br><span class="line">                            <span class="comment">//判断最近三次值是否相等</span></span><br><span class="line">                            <span class="keyword">const</span> elementsAreEqual = weightValues.every(<span class="function"><span class="params">weightValue</span> =&gt;</span> weightValue === weightValues[<span class="number">0</span>]);</span><br><span class="line">                            <span class="keyword">if</span> (elementsAreEqual) &#123;</span><br><span class="line">                                <span class="comment">//三次值相等 确定称重结果</span></span><br><span class="line">                                <span class="comment">//console.log(`weightValues:$&#123;weightValues&#125;`);</span></span><br><span class="line">                                <span class="built_in">console</span>.log(<span class="string">`weightValues[0]:<span class="subst">$&#123;weightValues[<span class="number">0</span>]&#125;</span>`</span>);</span><br><span class="line">                                <span class="comment">//window.setWeight(weightValues[0]);</span></span><br><span class="line">                                <span class="keyword">const</span> times = $(<span class="string">"#HiddenFieldTimes"</span>).val();</span><br><span class="line">                                <span class="keyword">switch</span> (times) &#123;</span><br><span class="line">                                    <span class="keyword">case</span> <span class="string">"1"</span>:</span><br><span class="line">                                        <span class="comment">//第一次称重 毛重读数</span></span><br><span class="line">                                        <span class="comment">//$("#RadNumericTextBoxGrossWeight").val(weightValues[0]);</span></span><br><span class="line">                                        $(<span class="string">"#RadLabelGrossWeight2"</span>)[<span class="number">0</span>].innerText = weightValues[<span class="number">0</span>];</span><br><span class="line">                                        <span class="keyword">break</span>;</span><br><span class="line">                                    <span class="keyword">case</span> <span class="string">"2"</span>:</span><br><span class="line">                                        <span class="comment">//第二次称重 皮重</span></span><br><span class="line">                                        <span class="comment">//$("#RadNumericTextBoxTareWeight").val(weightValues[0]);</span></span><br><span class="line">                                        $(<span class="string">"#RadLabelTareWeight2"</span>)[<span class="number">0</span>].innerText = weightValues[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">                                        <span class="keyword">break</span>;</span><br><span class="line">                                    <span class="keyword">default</span>:</span><br><span class="line">                                        <span class="keyword">break</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                toast(<span class="string">`读数成功：<span class="subst">$&#123;weightValues[<span class="number">0</span>]&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">                                <span class="comment">// 存储至localstorage</span></span><br><span class="line">                                <span class="comment">//savePoundsToLocalStorage(weightValues[0]);</span></span><br><span class="line"></span><br><span class="line">                                <span class="comment">// 清空接收到的数据，准备下次读取</span></span><br><span class="line">                                s = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">                                <span class="comment">//若要停止读数</span></span><br><span class="line">                                <span class="comment">//允许稍后关闭串口。</span></span><br><span class="line">                                <span class="built_in">console</span>.log(<span class="string">"releasing Lock"</span>);</span><br><span class="line">                                reader.releaseLock();</span><br><span class="line">                                <span class="comment">//关闭串口</span></span><br><span class="line">                                <span class="keyword">await</span> port.close();</span><br><span class="line">                                <span class="comment">//跳出监听循环，退出读磅函数</span></span><br><span class="line">                                <span class="built_in">console</span>.log(<span class="string">"已经关闭串口"</span>);</span><br><span class="line">                                <span class="keyword">break</span> outerWhileLoop;</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                <span class="comment">//三次值不等 继续</span></span><br><span class="line">                                <span class="comment">//console.log(`weightValues:$&#123;weightValues&#125;`);</span></span><br><span class="line">                                <span class="built_in">console</span>.log(<span class="string">"weightMsg三次值不相等"</span>);</span><br><span class="line">                            &#125;</span><br><span class="line"></span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (weightValues.length &gt; sameCount) &#123;</span><br><span class="line">                            <span class="built_in">console</span>.error(<span class="string">"执行错误，队列溢出"</span>);</span><br><span class="line">                            <span class="built_in">window</span>.weightValues = [];</span><br><span class="line">                            <span class="built_in">console</span>.error(<span class="string">"已重置队列为空"</span>);</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        <span class="comment">// 实时显示本次称重值</span></span><br><span class="line">                        <span class="comment">// 因为$("#&lt;%=ReadingPounds.ClientID %&gt;").text(`$&#123;weightMsg&#125;`);只能在aspx文件中，放在独立js文件中无法正确编译，故抽取成方法，使用windows对象调用。</span></span><br><span class="line">                        <span class="built_in">window</span>.showWeight(weightValues[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// -- END 新数据格式解析</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// START T800数据帧解析</span></span><br><span class="line">                    <span class="comment">/*//s1储存地磅传来一个完整数据帧的数据部分，应是15个字节</span></span><br><span class="line"><span class="comment">                    const s1 = s.substring(s.lastIndexOf("02") + 2, s.lastIndexOf("0D"));</span></span><br><span class="line"><span class="comment">                    if (s1.length === 30) &#123;</span></span><br><span class="line"><span class="comment">                        //转换过程：十六进制字符串-- &gt; 十进制int数-- &gt; 二进制表示字符串</span></span><br><span class="line"><span class="comment">                        const dec = parseInt(s1.substring(0, 2), 16).toString(2);</span></span><br><span class="line"><span class="comment">                        //状态字A部分</span></span><br><span class="line"><span class="comment">                        console.log(dec);</span></span><br><span class="line"><span class="comment">                        //状态字A的Bits 0,1,2 小数点位</span></span><br><span class="line"><span class="comment">                        const flag = dec.substring(dec.length - 3);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                        // 用于确定小数点位置</span></span><br><span class="line"><span class="comment">                        let flag2 = "";</span></span><br><span class="line"><span class="comment">                        for (let k = flag.length - 1; k &gt;= 0; k--) &#123;</span></span><br><span class="line"><span class="comment">                            flag2 += flag[k];</span></span><br><span class="line"><span class="comment">                        &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                        //显示重量、毛重或者净重</span></span><br><span class="line"><span class="comment">                        //共6个字节，表示6位不带符号不带小数点的数字</span></span><br><span class="line"><span class="comment">                        //转换过程：十六进制字符串 --&gt; 十进制整数int（Unicode值） --&gt; 数字（ascii字符）</span></span><br><span class="line"><span class="comment">                        const ss = s1.substring(6, 18);</span></span><br><span class="line"><span class="comment">                        console.log(`ss:$&#123;ss&#125;`);</span></span><br><span class="line"><span class="comment">                        // 临时存储最终结果的6位数字</span></span><br><span class="line"><span class="comment">                        let buffer = "";</span></span><br><span class="line"><span class="comment">                        for (let i = 0; i &lt; ss.length; i += 2) &#123;</span></span><br><span class="line"><span class="comment">                            console.log(`十六进制字符串 --&gt; 十进制整数int（Unicode值）：$&#123;ss.substring(i, i + 2)&#125; --&gt; $&#123;parseInt(ss.substring(i, i + 2), 16)&#125;`);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                            //先十六进制字符串 --&gt; 十进制整数int（Unicode值），再将 Unicode 值转换为字符:</span></span><br><span class="line"><span class="comment">                            buffer += String.fromCharCode(parseInt(ss.substring(i, i + 2), 16));</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                            console.log(`buffer:$&#123;buffer&#125;`);</span></span><br><span class="line"><span class="comment">                        &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                        console.log(`buffer 临时存储最终结果的6位数字:$&#123;buffer&#125;`);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                        let weightMsg = "";</span></span><br><span class="line"><span class="comment">                        // 判断小数点的位置</span></span><br><span class="line"><span class="comment">                        switch (flag) &#123;</span></span><br><span class="line"><span class="comment">                            case "111":</span></span><br><span class="line"><span class="comment">                                weightMsg = `$&#123;buffer.substring(0, 1)&#125;.$&#123;buffer.substring(1, 6)&#125;`;</span></span><br><span class="line"><span class="comment">                                break;</span></span><br><span class="line"><span class="comment">                            case "011":</span></span><br><span class="line"><span class="comment">                                weightMsg = `$&#123;buffer.substring(0, 2)&#125;.$&#123;buffer.substring(2, 6)&#125;`;</span></span><br><span class="line"><span class="comment">                                break;</span></span><br><span class="line"><span class="comment">                            case "101":</span></span><br><span class="line"><span class="comment">                                weightMsg = `$&#123;buffer.substring(0, 3)&#125;.$&#123;buffer.substring(3, 6)&#125;`;</span></span><br><span class="line"><span class="comment">                                break;</span></span><br><span class="line"><span class="comment">                            case "001":</span></span><br><span class="line"><span class="comment">                                weightMsg = `$&#123;buffer.substring(0, 4)&#125;.$&#123;buffer.substring(4, 6)&#125;`;</span></span><br><span class="line"><span class="comment">                                break;</span></span><br><span class="line"><span class="comment">                            case "110":</span></span><br><span class="line"><span class="comment">                                weightMsg = `$&#123;buffer.substring(0, 5)&#125;.$&#123;buffer.substring(5, 6)&#125;`;</span></span><br><span class="line"><span class="comment">                                break;</span></span><br><span class="line"><span class="comment">                            case "010":</span></span><br><span class="line"><span class="comment">                                weightMsg = `$&#123;buffer.substring(0, 6)&#125;`;</span></span><br><span class="line"><span class="comment">                                break;</span></span><br><span class="line"><span class="comment">                            case "100":</span></span><br><span class="line"><span class="comment">                                weightMsg = `$&#123;buffer.substring(1, 6)&#125;0`;</span></span><br><span class="line"><span class="comment">                                break;</span></span><br><span class="line"><span class="comment">                            case "000":</span></span><br><span class="line"><span class="comment">                                weightMsg = `$&#123;buffer.substring(2, 6)&#125;00`;</span></span><br><span class="line"><span class="comment">                                break;</span></span><br><span class="line"><span class="comment">                        &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                        // 取值3次，3次相等即为结果</span></span><br><span class="line"><span class="comment">                        if (weightValues.length &lt; 3) &#123;</span></span><br><span class="line"><span class="comment">                            //称重值小于3个，入队</span></span><br><span class="line"><span class="comment">                            weightValues.push(weightMsg);</span></span><br><span class="line"><span class="comment">                        &#125; else &#123;</span></span><br><span class="line"><span class="comment">                            //称重值3个，先出队再入队</span></span><br><span class="line"><span class="comment">                            weightValues.shift();</span></span><br><span class="line"><span class="comment">                            weightValues.push(weightMsg);</span></span><br><span class="line"><span class="comment">                        &#125;</span></span><br><span class="line"><span class="comment">                        console.log(`weightValues:$&#123;weightValues&#125;`);</span></span><br><span class="line"><span class="comment">                        </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                        if (weightValues.length === 3) &#123;</span></span><br><span class="line"><span class="comment">                            //判断最近三次值是否相等</span></span><br><span class="line"><span class="comment">                            const elementsAreEqual = weightValues.every(weightValue =&gt; weightValue === weightValues[0]);</span></span><br><span class="line"><span class="comment">                            if (elementsAreEqual) &#123;</span></span><br><span class="line"><span class="comment">                                //三次值相等 确定称重结果</span></span><br><span class="line"><span class="comment">                                //console.log(`weightValues:$&#123;weightValues&#125;`);</span></span><br><span class="line"><span class="comment">                                console.log(`weightValues[0]:$&#123;weightValues[0]&#125;`);</span></span><br><span class="line"><span class="comment">                                alert("读数成功！");</span></span><br><span class="line"><span class="comment">                                window.setWeight(weightValues[0]);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                                // 存储至localstorage</span></span><br><span class="line"><span class="comment">                                //savePoundsToLocalStorage(weightValues[0]);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                                //若要停止读数</span></span><br><span class="line"><span class="comment">                                //允许稍后关闭串口。</span></span><br><span class="line"><span class="comment">                                console.log("releasing Lock");</span></span><br><span class="line"><span class="comment">                                reader.releaseLock();</span></span><br><span class="line"><span class="comment">                                //关闭串口</span></span><br><span class="line"><span class="comment">                                await port.close();</span></span><br><span class="line"><span class="comment">                                //跳出监听循环，退出读磅函数</span></span><br><span class="line"><span class="comment">                                console.log("已经关闭串口");</span></span><br><span class="line"><span class="comment">                                break;</span></span><br><span class="line"><span class="comment">                            &#125; else &#123;</span></span><br><span class="line"><span class="comment">                                //三次值不等 继续</span></span><br><span class="line"><span class="comment">                                //console.log(`weightValues:$&#123;weightValues&#125;`);</span></span><br><span class="line"><span class="comment">                                console.log("weightMsg三次值不相等");</span></span><br><span class="line"><span class="comment">                            &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                        &#125; else if (weightValues.length &gt; 3) &#123;</span></span><br><span class="line"><span class="comment">                            alert("执行错误，队列溢出");</span></span><br><span class="line"><span class="comment">                        &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                        // 实时显示本次称重值</span></span><br><span class="line"><span class="comment">                        // 因为$("#&lt;%=ReadingPounds.ClientID %&gt;").text(`$&#123;weightMsg&#125;`);只能在aspx文件中，放在独立js文件中无法正确编译，故抽取成方法，使用windows对象调用。</span></span><br><span class="line"><span class="comment">                        window.showWeight(weightValues[0]);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                        // 清空接收到的数据，准备下次读取</span></span><br><span class="line"><span class="comment">                        s = "";</span></span><br><span class="line"><span class="comment">                    &#125;*/</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                <span class="built_in">console</span>.error(error);</span><br><span class="line">                alertError(<span class="string">"监听串行流输出遇到错误"</span>, error);</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                reader.releaseLock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 获取用户之前授予网站访问权限的所有串行端口。</span></span><br><span class="line">        <span class="comment">//const ports = await navigator.serial.getPorts();</span></span><br><span class="line">        <span class="comment">//alert(ports);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Uint8ArrayToString</span>(<span class="params">fileData</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dataString = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; fileData.length; i++) &#123;</span><br><span class="line">        dataString += <span class="built_in">String</span>.fromCharCode(fileData[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dataString;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查浏览器版本</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkBrowserVersion</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> browserName = getBrowserName(navigator.userAgent);</span><br><span class="line">    <span class="keyword">const</span> protocol = <span class="built_in">window</span>.location.protocol;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`You are using: <span class="subst">$&#123;browserName&#125;</span> over <span class="subst">$&#123;protocol&#125;</span> protocol.`</span>);</span><br><span class="line">    <span class="keyword">if</span> (!(<span class="string">"serial"</span> <span class="keyword">in</span> navigator)) &#123;</span><br><span class="line">        alertError(<span class="string">"无法使用"</span>, <span class="string">"请更换Chrome或Edge浏览器访问此页面（该浏览器不支持读取串口设备）！"</span>);</span><br><span class="line">        <span class="comment">//$("body").html(`&lt;div class="container"&gt;&lt;h1&gt;$&#123;`You are using: $&#123;browserName&#125; over $&#123;protocol&#125;// protocol.`</span></span><br><span class="line">        <span class="comment">//    &#125;&lt;/h1&gt;&lt;hr/&gt;&lt;h2&gt;检测到该浏览器不支持读取串口设备！&lt;/h2&gt;&lt;h3&gt;Please change your Chrome or Edge browser to visit this page (as this browser does not support accessing and reading serial port devices)!&lt;/h3&gt;&lt;/div&gt;`);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBrowserName</span>(<span class="params">userAgent</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// The order matters here, and this may report false positives for unlisted browsers.</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (userAgent.includes(<span class="string">"Firefox"</span>)) &#123;</span><br><span class="line">        <span class="comment">// "Mozilla/5.0 (X11; Linux i686; rv:104.0) Gecko/20100101 Firefox/104.0"</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Mozilla Firefox"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (userAgent.includes(<span class="string">"SamsungBrowser"</span>)) &#123;</span><br><span class="line">        <span class="comment">// "Mozilla/5.0 (Linux; Android 9; SAMSUNG SM-G955F Build/PPR1.180610.011) AppleWebKit/537.36 (KHTML, like Gecko) SamsungBrowser/9.4 Chrome/67.0.3396.87 Mobile Safari/537.36"</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Samsung Internet"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (userAgent.includes(<span class="string">"Opera"</span>) || userAgent.includes(<span class="string">"OPR"</span>)) &#123;</span><br><span class="line">        <span class="comment">// "Mozilla/5.0 (Macintosh; Intel Mac OS X 12_5_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36 OPR/90.0.4480.54"</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Opera"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (userAgent.includes(<span class="string">"Trident"</span>)) &#123;</span><br><span class="line">        <span class="comment">// "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 10.0; WOW64; Trident/7.0; .NET4.0C; .NET4.0E; .NET CLR 2.0.50727; .NET CLR 3.0.30729; .NET CLR 3.5.30729)"</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Microsoft Internet Explorer"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (userAgent.includes(<span class="string">"Edge"</span>)) &#123;</span><br><span class="line">        <span class="comment">// "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36 Edge/16.16299"</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Microsoft Edge (Legacy)"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (userAgent.includes(<span class="string">"Edg"</span>)) &#123;</span><br><span class="line">        <span class="comment">// "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36 Edg/104.0.1293.70"</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Microsoft Edge (Chromium)"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (userAgent.includes(<span class="string">"Chrome"</span>)) &#123;</span><br><span class="line">        <span class="comment">// "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36"</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Google Chrome or Chromium"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (userAgent.includes(<span class="string">"Safari"</span>)) &#123;</span><br><span class="line">        <span class="comment">// "Mozilla/5.0 (iPhone; CPU iPhone OS 15_6_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.6 Mobile/15E148 Safari/604.1"</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Apple Safari"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"unknown"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// my弹窗封装</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">alertPro</span>(<span class="params">type, title, text</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.Swal.fire(&#123;</span><br><span class="line">        icon: type,</span><br><span class="line">        title: title,</span><br><span class="line">        text: text<span class="comment">//,</span></span><br><span class="line">        <span class="comment">//footer: '&lt;a href=""&gt;测试弹窗&lt;/a&gt;'</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 错误弹窗提示</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">alertError</span>(<span class="params">title, text</span>) </span>&#123;</span><br><span class="line">    alertPro(<span class="string">"error"</span>, title, text);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 简单弹窗提示</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">alertBasic</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.Swal.fire(text);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 成功弹窗提示</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">alertSuccess</span>(<span class="params">title, text</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.Swal.fire(</span><br><span class="line">        title,</span><br><span class="line">        text,</span><br><span class="line">        <span class="string">"success"</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Toast</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toast</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">window</span>.Swal.mixin(&#123;</span><br><span class="line">        toast: <span class="literal">true</span>,</span><br><span class="line">        position: <span class="string">"top-end"</span>,</span><br><span class="line">        showConfirmButton: <span class="literal">false</span>,</span><br><span class="line">        timer: <span class="number">3000</span>,</span><br><span class="line">        timerProgressBar: <span class="literal">true</span>,</span><br><span class="line">        didOpen: <span class="function">(<span class="params">toast</span>) =&gt;</span> &#123;</span><br><span class="line">            toast.addEventListener(<span class="string">"mouseenter"</span>, <span class="built_in">window</span>.Swal.stopTimer);</span><br><span class="line">            toast.addEventListener(<span class="string">"mouseleave"</span>, <span class="built_in">window</span>.Swal.resumeTimer);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).fire(&#123;</span><br><span class="line">        icon: <span class="string">"success"</span>,</span><br><span class="line">        title: text</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="chrome浏览器配置在http协议使用web串行api"><a href="#chrome浏览器配置在http协议使用web串行api" class="headerlink" title="chrome浏览器配置在http协议使用web串行api"></a>chrome浏览器配置在http协议使用web串行api</h2><p>Web串行Api需要域是HTTPS协议的，否则该api被Chrome屏蔽，无法被调用。仅在本地localhost调试开发时可以使用http域，Chrome浏览器会暴露该api。</p><p>可以通过配置Chrome浏览器解除这个限制，需要配置两个地方：</p><ol><li>打开<code>chrome://flags/</code>，设置<code>Insecure origins treated as secure</code>为<code>Enabeld</code>，填入要配置的域名<code>http://192.168.80.53:9000</code><br><img src="/2022/11/18/JavaScript%E4%BD%BF%E7%94%A8-Web-Serial-API%E8%8E%B7%E5%8F%96%E4%B8%B2%E8%A1%8C%E8%AE%BE%E5%A4%87%E7%AB%AF%E5%8F%A3%E6%95%B0%E6%8D%AE-%E5%9C%B0%E7%A3%85%E4%B8%B2%E5%8F%A3%E6%95%B0%E6%8D%AE/2023-02-08-10-58-04.png" alt="配置chrome://flags/"><ul><li>Enable Bluetooth Serial Port Profile in Serial API为开启蓝牙设备串行api。</li></ul></li><li>在桌面<code>Google Chrome</code>图标的快捷方式上，鼠标右键点<code>属性</code>，修改<code>目标</code>字段加上启动参数，修改后为<code>&quot;C:\Program Files\Google\Chrome\Application\chrome.exe&quot; --unsafely-treat-insecure-origin-as-secure=&quot;http://192.168.80.53:9000&quot;</code><br><img src="/2022/11/18/JavaScript%E4%BD%BF%E7%94%A8-Web-Serial-API%E8%8E%B7%E5%8F%96%E4%B8%B2%E8%A1%8C%E8%AE%BE%E5%A4%87%E7%AB%AF%E5%8F%A3%E6%95%B0%E6%8D%AE-%E5%9C%B0%E7%A3%85%E4%B8%B2%E5%8F%A3%E6%95%B0%E6%8D%AE/2023-02-08-10-59-40.png" alt="快捷方式——目标添加启动参数"></li></ol>]]></content>
    
    
    <summary type="html">&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87&quot;&gt;前期准备&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E8%B5%84%E6%BA%90%E9%93%BE%E6%8E%A5&quot;&gt;资源链接&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B&quot;&gt;代码示例&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%E6%A3%80%E6%9F%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E6%98%AF%E5%90%A6%E6%94%AF%E6%8C%81&quot;&gt;检查浏览器是否支持&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E6%89%93%E5%BC%80%E4%B8%B2%E8%A1%8C%E7%AB%AF%E5%8F%A3&quot;&gt;打开串行端口&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%9C%B0%E7%A3%85%E8%AF%BB%E6%95%B0%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B&quot;&gt;地磅读数代码示例&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#chrome%E6%B5%8F%E8%A7%88%E5%99%A8%E9%85%8D%E7%BD%AE%E5%9C%A8http%E5%8D%8F%E8%AE%AE%E4%BD%BF%E7%94%A8web%E4%B8%B2%E8%A1%8Capi&quot;&gt;chrome浏览器配置在http协议使用web串行api&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    
    <category term="JavaScript" scheme="https://xiaoyan94.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript 之函数</title>
    <link href="https://xiaoyan94.github.io/2022/09/07/JavaScript%E4%B9%8B%E5%87%BD%E6%95%B0/"/>
    <id>https://xiaoyan94.github.io/2022/09/07/JavaScript%E4%B9%8B%E5%87%BD%E6%95%B0/</id>
    <published>2022-09-07T15:20:16.000Z</published>
    <updated>2022-09-21T00:56:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="参数传递"><a href="#参数传递" class="headerlink" title="参数传递"></a>参数传递</h2><p>JavaScript 在传递参数时，其实是一个数组，其实<strong>所有的参数都会被装载到函数内部一个叫作 <code>arguments</code> 的数组里面</strong>。</p><p>代码示例：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// window.alert('Hello World')</span></span></span><br><span class="line"><span class="actionscript">      <span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (<span class="built_in">arguments</span>.length &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.length);</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// alert(arguments[0])</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> sum = <span class="number">0</span>;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">//   arguments.forEach(element =&gt; &#123;</span></span></span><br><span class="line"><span class="actionscript">          <span class="comment">//     sum+=element;</span></span></span><br><span class="line"><span class="actionscript">          <span class="comment">//   &#125;);</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; <span class="built_in">arguments</span>.length; index++) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> element = <span class="built_in">arguments</span>[index];</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(element);</span></span></span><br><span class="line">            sum += element;</span><br><span class="line">          &#125;</span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(sum);</span></span><br><span class="line"><span class="actionscript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">          alert(<span class="string">"参数为空"</span>);</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      add();</span><br><span class="line"><span class="actionscript">      <span class="comment">// var a = [1, 2];</span></span></span><br><span class="line">      add(1, 2, 3, 4, 5);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>如上所示，即使在定义函数 <code>add</code> 时，没有声明参数，在调用时传入任意参数都是会被装载到 <code>arguments</code> 数组的。</p><p>只是需要注意的是，只能使用 <code>for</code> 循环遍历 <code>arguments</code> ，不能在其上使用 <code>forEach</code> 遍历（会报错，不存在 <code>forEach</code> ）。</p><h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><a id="more"></a><p>在函数中用 <code>return</code> 语句返回另一个函数。</p><p>如下所示，返回的函数中可以一直保存捕获到的函数内的局部变量 <code>a</code> ，再次调用 <code>test()()</code> 的时候在任意地方都可以访问到变量 <code>a</code>。</p><p>之所以使用 <code>test()()</code> ，<code>test</code> 函数返回的结果是一个函数，既然是函数，不去调用的话就不会执行里面的代码，所以如果需要执行内部函数的函数体，就必须要这样。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">test()(); <span class="comment">// 输出 0</span></span><br></pre></td></tr></table></figure></div><p>调试控制台：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">test</span><br><span class="line">        ƒ test() &#123;</span><br><span class="line">            <span class="keyword">var</span> a = <span class="number">0</span>;</span><br><span class="line">             <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(a);</span><br><span class="line">             &#125;</span><br><span class="line">        &#125;</span><br><span class="line">test()</span><br><span class="line">        ƒ f1() &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(a);</span><br><span class="line">             &#125;</span><br><span class="line">test()()</span><br><span class="line">        <span class="number">0</span></span><br><span class="line">        <span class="literal">undefined</span></span><br></pre></td></tr></table></figure></div><p>第一个小括号是调用 <code>test</code> 函数，这个 <code>test</code> 函数中定义了一个局部变量 <code>a</code>，还返回了一个内部函数。因此，第一次调用的结果就是返回一个内部函数，而第二个圆括号才会调用那个内部函数。</p><p>正常情况下，我们调用一个函数，其里面的局部变量会在函数调用结束后销毁，这也是我们在全局作用域里面无法访问函数局部变量的原因。但是，如果你使用了<strong>闭包</strong>，那么就会让这个局部变量不随着原函数的销毁而销毁，而是继续存在。比如我反复调用这个内部函数，就会发现这个变量 <code>a</code> 一直存在，就好像是一个全局作用域里面的变量似的。</p><p>闭包函数的这种写法就相当于在全局作用域里面定义了一个变量 <code>a</code>， 然后在函数中操作全局变量。但是用这样的形式操作，也就是利用闭包操作可以减少很多不必要的全局变量。全局作用域是一块公共区域，如果为了某个单一的功能而定义一个全局变量，则会导致全局变量过多，代码就变得一团糟了。因此在这种情况下，还是要优先考虑使用闭包。</p><h2 id="自执行函数"><a href="#自执行函数" class="headerlink" title="自执行函数"></a>自执行函数</h2><p>自执行函数的例子：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'测试自执行函数'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">)();</span><br></pre></td></tr></table></figure></div><p>以上会立即执行函数输出语句。</p><p>定义一个自执行函数的语法是：<code>(定义一个没有名字的函数)();</code></p><p>也可以给一个名字，但是没有必要，因为<strong>自执行函数会立即执行且只会执行一次</strong>。</p><p>自执行函数一般配合闭包使用，因为这样一来，就可以直接得到闭包环境下的内部函数了，外部函数只是为了产生闭包环境而临时定义的函数。正因为如此，所以根本没有必要给外部函数取一个名字。</p><p>因此，可以将<a href="#%E9%97%AD%E5%8C%85">闭包</a>中的例子改成如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> innertest = (</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> a = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(a);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">)();</span><br><span class="line">innertest();</span><br></pre></td></tr></table></figure></div><h2 id="“new”一个函数"><a href="#“new”一个函数" class="headerlink" title="“new”一个函数"></a>“new”一个函数</h2><p>看个🌰：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">hello(); <span class="comment">// Window</span></span><br><span class="line"><span class="keyword">new</span> hello(); <span class="comment">// Object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> newObject = <span class="keyword">new</span> hello();</span><br><span class="line"><span class="built_in">console</span>.log(newObject);</span><br></pre></td></tr></table></figure></div><p><code>this</code> 也是 JavaScript 中的一个关键字，它是什么意思呢？其实很简单，**<code>this</code> 永远指向当前函数的调用者**。</p><p>因此 <code>hello();</code> 会打印出 <code>this</code> 所指向的 <code>window</code> 对象。而 <code>new hello();</code> 会打印出 <code>Object</code> 对象。</p><p>比如上面代码， <code>new</code> 一个函数，会返回函数的真实调用者即 <code>this</code> 所指向的对象，这个对象哪里来的呢？其实是<strong>函数内部产生了一个新的对象，并且 <code>this</code> 指向了这个对象，然后函数默认返回了这个新的对象</strong>。这种函数还有一个别称，叫作<strong>构造函数</strong>。</p><p>构造函数的函数名称首字母一般大写。</p><p>比如定义一个水果的构造函数：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fruit</span>(<span class="params">name,smell,color</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.smell = smell;</span><br><span class="line">    <span class="keyword">this</span>.color = color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> redApple = <span class="keyword">new</span> Fruit(<span class="string">'苹果'</span>,<span class="string">'苹果味'</span>,<span class="string">'红色'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(redApple);</span><br></pre></td></tr></table></figure></div><p>不仅可以有属性，还可以有方法：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fruit</span>(<span class="params">name, smell, color</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.smell = smell;</span><br><span class="line">    <span class="keyword">this</span>.color = color;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.eat = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'吃'</span>+<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> redApple = <span class="keyword">new</span> Fruit(<span class="string">'苹果'</span>, <span class="string">'苹果味'</span>, <span class="string">'红色'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(redApple);</span><br><span class="line">redApple.eat();</span><br></pre></td></tr></table></figure></div><h2 id="回调函数"><a href="#回调函数" class="headerlink" title="回调函数"></a>回调函数</h2><p>所谓回调函数，就是指把一个函数的定义当作参数传递给另一个函数。</p><p>看个🌰：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">data, callback</span>) </span>&#123;</span><br><span class="line">    callback(data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>以上代码，定义了一个函数 <code>test (data, callback)</code>，函数 <code>test</code> 有两个参数，一个 <code>data</code>，一个 <code>callback</code>，其中 <code>callback</code> 是一个函数的定义，可以在 <code>test</code> 函数中调用 <code>callback (data)</code> 方法，<code>data</code> 是参数。</p><p>回调函数与匿名函数结合起来就是：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">data, callback</span>) </span>&#123;</span><br><span class="line">    callback(data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test(<span class="string">'world'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'hello,'</span>+data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>更多关于回调函数，参考 <a href="https://cnodejs.org/topic/564dd2881ba2ef107f854e0b" target="_blank" rel="noopener">JavaScript回调函数 - CNode技术社区</a></p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    sum: <span class="number">0</span>,</span><br><span class="line">    add: <span class="function"><span class="keyword">function</span> (<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sum = num1 + num2;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>, <span class="keyword">this</span>.sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">add(<span class="number">1</span>, <span class="number">2</span>, obj.add);</span><br><span class="line"><span class="built_in">console</span>.log(obj.sum);   <span class="comment">//=&gt;0</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.sum);  <span class="comment">//=&gt;3</span></span><br></pre></td></tr></table></figure></div><p>上述代码调用回调函数的时候是在全局环境下，因此 <code>this</code> 指向的是 <code>window</code>，所以 <code>sum</code> 的值是赋值给 <code>window</code> 的。</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;参数传递&quot;&gt;&lt;a href=&quot;#参数传递&quot; class=&quot;headerlink&quot; title=&quot;参数传递&quot;&gt;&lt;/a&gt;参数传递&lt;/h2&gt;&lt;p&gt;JavaScript 在传递参数时，其实是一个数组，其实&lt;strong&gt;所有的参数都会被装载到函数内部一个叫作 &lt;code&gt;arguments&lt;/code&gt; 的数组里面&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;代码示例：&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;actionscript&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;// window.alert(&#39;Hello World&#39;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;actionscript&quot;&gt;      &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;javascript&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt;.length &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;javascript&quot;&gt;          &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt;.length);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;actionscript&quot;&gt;          &lt;span class=&quot;comment&quot;&gt;// alert(arguments[0])&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;actionscript&quot;&gt;          &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; sum = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;actionscript&quot;&gt;          &lt;span class=&quot;comment&quot;&gt;//   arguments.forEach(element =&amp;gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;actionscript&quot;&gt;          &lt;span class=&quot;comment&quot;&gt;//     sum+=element;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;actionscript&quot;&gt;          &lt;span class=&quot;comment&quot;&gt;//   &amp;#125;);&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;javascript&quot;&gt;          &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; index = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; index &amp;lt; &lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt;.length; index++) &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;javascript&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; element = &lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt;[index];&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;actionscript&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// console.log(element);&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            sum += element;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;javascript&quot;&gt;          &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(sum);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;actionscript&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;actionscript&quot;&gt;          alert(&lt;span class=&quot;string&quot;&gt;&quot;参数为空&quot;&lt;/span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      add();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;actionscript&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;// var a = [1, 2];&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      add(1, 2, 3, 4, 5);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;如上所示，即使在定义函数 &lt;code&gt;add&lt;/code&gt; 时，没有声明参数，在调用时传入任意参数都是会被装载到 &lt;code&gt;arguments&lt;/code&gt; 数组的。&lt;/p&gt;
&lt;p&gt;只是需要注意的是，只能使用 &lt;code&gt;for&lt;/code&gt; 循环遍历 &lt;code&gt;arguments&lt;/code&gt; ，不能在其上使用 &lt;code&gt;forEach&lt;/code&gt; 遍历（会报错，不存在 &lt;code&gt;forEach&lt;/code&gt; ）。&lt;/p&gt;
&lt;h2 id=&quot;闭包&quot;&gt;&lt;a href=&quot;#闭包&quot; class=&quot;headerlink&quot; title=&quot;闭包&quot;&gt;&lt;/a&gt;闭包&lt;/h2&gt;</summary>
    
    
    
    
    <category term="JavaScript" scheme="https://xiaoyan94.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>.NET 数据并行性（任务并行库） Data Parallelism (Task Parallel Library)</title>
    <link href="https://xiaoyan94.github.io/2022/09/01/NET-Data-Parallelism-Task-Parallel-Library/"/>
    <id>https://xiaoyan94.github.io/2022/09/01/NET-Data-Parallelism-Task-Parallel-Library/</id>
    <published>2022-09-01T15:31:10.000Z</published>
    <updated>2022-09-01T15:36:06.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Data-Parallelism-数据并行性"><a href="#Data-Parallelism-数据并行性" class="headerlink" title="Data Parallelism (数据并行性)"></a>Data Parallelism (数据并行性)</h2><p><em>Data parallelism</em> refers to scenarios in which the same operation is performed concurrently (that is, in parallel) on elements in a source collection or array. In data parallel operations, the source collection is partitioned so that multiple threads can operate on different segments concurrently.</p><p>The Task Parallel Library (TPL) supports data parallelism through the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.parallel" target="_blank" rel="noopener">System.Threading.Tasks.Parallel</a> class. This class provides method-based parallel implementations of <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/statements/iteration-statements#the-for-statement" target="_blank" rel="noopener">for</a> and <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/statements/iteration-statements#the-foreach-statement" target="_blank" rel="noopener">foreach</a> loops (<code>For</code> and <code>For Each</code> in Visual Basic). You write the loop logic for a <a href="https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.parallel.for" target="_blank" rel="noopener">Parallel.For</a> or <a href="https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.parallel.foreach" target="_blank" rel="noopener">Parallel.ForEach</a> loop much as you would write a sequential loop. You do not have to create threads or queue work items. In basic loops, you do not have to take locks. The TPL handles all the low-level work for you. For in-depth information about the use of <a href="https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.parallel.for" target="_blank" rel="noopener">Parallel.For</a> and <a href="https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.parallel.foreach" target="_blank" rel="noopener">Parallel.ForEach</a>, download the document <a href="https://www.microsoft.com/download/details.aspx?id=19222" target="_blank" rel="noopener">Patterns for Parallel Programming: Understanding and Applying Parallel Patterns with the .NET Framework 4</a>. The following code example shows a simple <code>foreach</code> loop and its parallel equivalent.</p><h2 id="Parallel-ForEach"><a href="#Parallel-ForEach" class="headerlink" title="Parallel.ForEach"></a>Parallel.ForEach</h2>]]></content>
    
    
      
      
    <summary type="html"></summary>
      
    
    
    
    
    <category term=".NET" scheme="https://xiaoyan94.github.io/tags/NET/"/>
    
    <category term="并行编程" scheme="https://xiaoyan94.github.io/tags/%E5%B9%B6%E8%A1%8C%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript获取网页URL地址的查询参数(QueryString)的方法</title>
    <link href="https://xiaoyan94.github.io/2022/08/31/JavaScript%E8%8E%B7%E5%8F%96%E7%BD%91%E9%A1%B5URL%E5%9C%B0%E5%9D%80%E7%9A%84%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0-QueryString-%E7%9A%84%E6%96%B9%E6%B3%95/"/>
    <id>https://xiaoyan94.github.io/2022/08/31/JavaScript%E8%8E%B7%E5%8F%96%E7%BD%91%E9%A1%B5URL%E5%9C%B0%E5%9D%80%E7%9A%84%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0-QueryString-%E7%9A%84%E6%96%B9%E6%B3%95/</id>
    <published>2022-08-31T13:27:39.000Z</published>
    <updated>2022-08-31T15:44:03.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="需求：获取-URL-查询参数"><a href="#需求：获取-URL-查询参数" class="headerlink" title="需求：获取 URL 查询参数"></a>需求：获取 URL 查询参数</h2><p>需求详情</p><p>请求URL: <code>http://example.com:80/method?id=1&amp;name=xy</code></p><p>获取请求参数id、name的值1、xy。</p><h2 id="方法一：URLSearchParams"><a href="#方法一：URLSearchParams" class="headerlink" title="方法一：URLSearchParams"></a>方法一：<code>URLSearchParams</code></h2><p>使用 <code>URLSearchParams</code> 对象的 <code>get</code> 方法。参考：</p><a id="more"></a><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/URLSearchParams/URLSearchParams" target="_blank" rel="noopener">URLSearchParams() - Web API 接口参考 | MDN</a></p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> urlParams = <span class="keyword">new</span> URLSearchParams(<span class="built_in">window</span>.location.search);</span><br><span class="line"><span class="built_in">console</span>.log(urlParams.has(<span class="string">'id'</span>)); <span class="comment">// 打印是否包含QueryString：line</span></span><br><span class="line"><span class="keyword">var</span> id = urlParams.get(<span class="string">'id'</span>); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure></div><h2 id="方法二：正则表达式"><a href="#方法二：正则表达式" class="headerlink" title="方法二：正则表达式"></a>方法二：正则表达式</h2><p>方法如下（<code>getQueryString</code>）：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">    <span class="comment">// 自定义获取URL查询参数QueryString</span></span><br><span class="line">    <span class="comment">// 函数参数 name：URL查询参数名称</span></span><br><span class="line">    <span class="comment">// 函数返回值：URL查询参数值或null（不存在的话）</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getQueryString</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(^|&amp;)'</span> + name + <span class="string">'=([^&amp;]*)(&amp;|$)'</span>, <span class="string">'i'</span>);</span><br><span class="line">        <span class="keyword">var</span> r = <span class="built_in">window</span>.location.search.substr(<span class="number">1</span>).match(reg);</span><br><span class="line">        <span class="keyword">if</span> (r != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">unescape</span>(r[<span class="number">2</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> line;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 360极速模式/Chromium/火狐内核支持 URLSearchParams</span></span><br><span class="line">        <span class="keyword">var</span> urlParams = <span class="keyword">new</span> URLSearchParams(<span class="built_in">window</span>.location.search);</span><br><span class="line">        <span class="built_in">console</span>.log(urlParams.has(<span class="string">'line'</span>)); <span class="comment">// 打印是否包含QueryString：line</span></span><br><span class="line">        line = urlParams.get(<span class="string">'line'</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="comment">// IE/兼容模式：尝试使用自定义函数获取查询参数line</span></span><br><span class="line">        line = getQueryString(<span class="string">'line'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(line);</span><br><span class="line">    <span class="keyword">if</span> (line == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(<span class="string">"未获取到line参数。"</span>);</span><br><span class="line">        alert(<span class="string">"页面查询参数错误！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (line == <span class="string">'1'</span>) &#123;</span><br><span class="line">        $(<span class="string">".specialDiv"</span>).show();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'show'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $(<span class="string">".specialDiv"</span>).hide();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"hide"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></div>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;需求：获取-URL-查询参数&quot;&gt;&lt;a href=&quot;#需求：获取-URL-查询参数&quot; class=&quot;headerlink&quot; title=&quot;需求：获取 URL 查询参数&quot;&gt;&lt;/a&gt;需求：获取 URL 查询参数&lt;/h2&gt;&lt;p&gt;需求详情&lt;/p&gt;
&lt;p&gt;请求URL: &lt;code&gt;http://example.com:80/method?id=1&amp;amp;name=xy&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;获取请求参数id、name的值1、xy。&lt;/p&gt;
&lt;h2 id=&quot;方法一：URLSearchParams&quot;&gt;&lt;a href=&quot;#方法一：URLSearchParams&quot; class=&quot;headerlink&quot; title=&quot;方法一：URLSearchParams&quot;&gt;&lt;/a&gt;方法一：&lt;code&gt;URLSearchParams&lt;/code&gt;&lt;/h2&gt;&lt;p&gt;使用 &lt;code&gt;URLSearchParams&lt;/code&gt; 对象的 &lt;code&gt;get&lt;/code&gt; 方法。参考：&lt;/p&gt;</summary>
    
    
    
    
    <category term="JavaScript" scheme="https://xiaoyan94.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>.NET Framework 连接 Oracle数据库：找不到请求的 .Net Framework Data Provider。可能没有安装</title>
    <link href="https://xiaoyan94.github.io/2022/08/29/NET-Framework-%E8%BF%9E%E6%8E%A5-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <id>https://xiaoyan94.github.io/2022/08/29/NET-Framework-%E8%BF%9E%E6%8E%A5-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93/</id>
    <published>2022-08-29T08:13:41.000Z</published>
    <updated>2022-08-31T13:01:59.000Z</updated>
    
    <content type="html"><![CDATA[<ul><li><a href="#1-%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF">1. 错误信息</a><ul><li><a href="#11-%E9%94%99%E8%AF%AF%E8%AF%A6%E6%83%85">1.1. 错误详情</a></li></ul></li><li><a href="#2-%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0">2. 问题原因</a></li><li><a href="#3-%E6%9F%A5%E7%9C%8B%E4%B8%8E%E8%AE%BE%E7%BD%AEoracle_home%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">3. 查看与设置ORACLE_HOME环境变量</a><ul><li><a href="#31-windows%E4%B8%8B%E6%9F%A5%E7%9C%8B%E4%B8%8E%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">3.1. Windows下查看与设置环境变量</a></li></ul></li><li><a href="#4-%E4%B8%8B%E8%BD%BD%E4%B8%8E%E5%AE%89%E8%A3%85odpnet%E9%A9%B1%E5%8A%A8">4. 下载与安装ODP.NET驱动</a></li><li><a href="#5-oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E9%85%8D%E7%BD%AE">5. Oracle数据库连接配置</a><ul><li><a href="#51-%E5%88%86%E6%9E%90%E4%B8%8E%E8%A7%A3%E5%86%B3%E9%94%99%E8%AF%AF">5.1. 分析与解决错误</a><ul><li><a href="#511-%E5%85%88%E4%BA%86%E8%A7%A3%E4%B8%8B-oracle-tnsnamesora-%E6%96%87%E4%BB%B6%E7%94%A8%E6%B3%95">5.1.1. 先了解下 oracle <code>tnsnames.ora</code> 文件用法</a><ul><li><a href="#5111-1%E7%94%A8%E9%80%94">5.1.1.1. 1.用途</a></li><li><a href="#5112-2%E7%94%A8%E6%B3%95">5.1.1.2. 2.用法</a></li></ul></li></ul></li><li><a href="#52-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95">5.2. 解决方法</a></li></ul></li></ul><h2 id="1-错误信息"><a href="#1-错误信息" class="headerlink" title="1. 错误信息"></a>1. 错误信息</h2><p>解决错误信息：<strong>找不到请求的 .Net Framework Data Provider。可能没有安装</strong></p><h3 id="1-1-错误详情"><a href="#1-1-错误详情" class="headerlink" title="1.1. 错误详情"></a>1.1. 错误详情</h3><p><img src="/2022/08/29/NET-Framework-%E8%BF%9E%E6%8E%A5-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93/2022-08-30-08-53-43.png" alt="找不到请求的 .Net Framework Data Provider。可能没有安装。"></p><a id="more"></a><hr><p>“&#x2F;”应用程序中的服务器错误</p><p><em>找不到请求的 .Net Framework Data Provider。可能没有安装。</em></p><p><strong>说明:</strong> 执行当前 Web 请求期间，出现未经处理的异常。请检查堆栈跟踪信息，以了解有关该错误以及代码中导致错误的出处的详细信息。</p><p><strong>异常详细信息:</strong> System.ArgumentException: 找不到请求的 .Net Framework Data Provider。可能没有安装。</p><p><strong>源错误:</strong></p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">行 3216:</span><br><span class="line">行 3217:            var arr &#x3D; list.Select(s &#x3D;&gt; s.SoMainId).ToArray();</span><br><span class="line">行 3218:            var query &#x3D; _ncdataEntities.Database.SqlQuery&lt;SOMainCustomerInfo&gt;(string.Format( </span><br><span class="line">行 3219:                            @&quot;select a.csaleorderid AS SOMainId</span><br><span class="line">,a.vbillcode AS SOCode</span><br></pre></td></tr></table></figure></div><p><strong>源文件:</strong> <code>D:\\Portal-VS2013-NC\\Portal-VS2013-NC\\DataAccess\\Bom\\DASOBom.cs</code> <strong>行:</strong> 3218</p><p><strong>堆栈跟踪:</strong></p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[ArgumentException: 找不到请求的 .Net Framework Data Provider。可能没有安装。]</span><br><span class="line">   System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName) +1025375</span><br><span class="line">   System.Data.EntityClient.EntityConnection.GetFactory(String providerString) +27</span><br><span class="line"></span><br><span class="line">[ArgumentException: 指定的存储区提供程序在配置中找不到，或者无效。]</span><br><span class="line">   System.Data.EntityClient.EntityConnection.GetFactory(String providerString) +90</span><br><span class="line">   System.Data.EntityClient.EntityConnection.ChangeConnectionString(String newConnectionString) +503</span><br><span class="line">   System.Data.EntityClient.EntityConnection..ctor(String connectionString) +47</span><br><span class="line">   System.Data.Entity.Internal.LazyInternalConnection.InitializeFromConnectionStringSetting(ConnectionStringSettings appConfigConnection) +78</span><br><span class="line">   System.Data.Entity.Internal.LazyInternalConnection.TryInitializeFromAppConfig(String name, AppConfig config) +32</span><br><span class="line">   System.Data.Entity.Internal.LazyInternalConnection.Initialize() +129</span><br><span class="line">   System.Data.Entity.Internal.LazyInternalConnection.CreateObjectContextFromConnectionModel() +13</span><br><span class="line">   System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +274</span><br><span class="line">   System.Data.Entity.Internal.InternalContext.ExecuteSqlQuery(String sql, Object[] parameters) +26</span><br><span class="line">   System.Data.Entity.Internal.InternalContext.ExecuteSqlQueryAsIEnumerable(String sql, Object[] parameters) +63</span><br><span class="line">   System.Data.Entity.Internal.InternalContext.ExecuteSqlQuery(Type elementType, String sql, Object[] parameters) +175</span><br><span class="line">   System.Data.Entity.Internal.InternalSqlNonSetQuery.GetEnumerator() +26</span><br><span class="line">   System.Data.Entity.Internal.InternalSqlQuery&#96;1.GetEnumerator() +17</span><br><span class="line">   System.Collections.Generic.List&#96;1..ctor(IEnumerable&#96;1 collection) +174</span><br><span class="line">   System.Linq.Enumerable.ToList(IEnumerable&#96;1 source) +61</span><br><span class="line">   Portal.DataAccess.Bom.DASOBom.GetCPSOBomMainList(List&#96;1 soBomList, Int32&amp; pageid, Int32 pagesize) in D:\Portal-VS2013-NC\Portal-VS2013-NC\DataAccess\Bom\DASOBom.cs:3218</span><br><span class="line">   Portal.BLL.Bom.SOBom.GetCPSOBomMainObjectList(List&#96;1 soBomList, Int32&amp; pageid, Int32 pagesize) in D:\Portal-VS2013-NC\Portal-VS2013-NC\BLL\Bom\SOBom.cs:2611</span><br><span class="line">   Portal.Web.bom.SOBomMain_CP.InitData(String strSearchText) in D:\Portal-VS2013-NC\Portal-VS2013-NC\web\bom\SOBomMain_CP.aspx.cs:108</span><br><span class="line">   Portal.Web.bom.SOBomMain_CP.BtnSearchClick(Object sender, EventArgs e) in D:\Portal-VS2013-NC\Portal-VS2013-NC\web\bom\SOBomMain_CP.aspx.cs:151</span><br><span class="line">   Portal.Web.bom.SOBomMain_CP.Page_Load(Object sender, EventArgs e) in D:\Portal-VS2013-NC\Portal-VS2013-NC\web\bom\SOBomMain_CP.aspx.cs:49</span><br><span class="line">   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +52</span><br><span class="line">   System.Web.UI.Control.OnLoad(EventArgs e) +97</span><br><span class="line">   System.Web.UI.Control.LoadRecursive() +61</span><br><span class="line">   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +693</span><br></pre></td></tr></table></figure></div><p><strong>版本信息:</strong> Microsoft .NET Framework 版本:4.0.30319; ASP.NET 版本:4.8.4494.0</p><hr><h2 id="2-问题原因"><a href="#2-问题原因" class="headerlink" title="2. 问题原因"></a>2. 问题原因</h2><p>出现此错误的原因是：<strong>Oracle数据库的ODP.NET驱动没有安装</strong>。</p><p>ps:</p><blockquote><p><strong>首先考虑 ODP.NET 是否安装成功</strong>的，其次，考虑x86&#x2F;x64的原因，您的项目的build target(x86&#x2F;x64)设定要与本机安装的ODP.NET的驱动版本(x86&#x2F;x64)要一致。</p></blockquote><hr><h2 id="3-查看与设置ORACLE-HOME环境变量"><a href="#3-查看与设置ORACLE-HOME环境变量" class="headerlink" title="3. 查看与设置ORACLE_HOME环境变量"></a>3. 查看与设置ORACLE_HOME环境变量</h2><p>查看设置的环境变量是否正确: <code>echo %ORACLE_HOME%</code></p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="CMD"><figure class="iseeu highlight /cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\<span class="title">Downloads</span>\压缩文件\<span class="title">ODP.NET_Managed_ODAC122cR1_3</span>&gt;<span class="title">echo</span> %<span class="title">ORACLE_HOME</span>%</span></span><br><span class="line"><span class="function"><span class="title">D</span>:\<span class="title">app</span>\<span class="title">R00004050</span>\<span class="title">product</span>\11.2.0\<span class="title">client_1</span></span></span><br></pre></td></tr></table></figure></div><p>若没有定义，去系统环境变量中添加，<code>D:\app\R00004050\product\11.2.0\client_1</code></p><p><img src="/2022/08/29/NET-Framework-%E8%BF%9E%E6%8E%A5-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93/2022-08-30-10-58-26.png" alt="添加环境变量"></p><h3 id="3-1-Windows下查看与设置环境变量"><a href="#3-1-Windows下查看与设置环境变量" class="headerlink" title="3.1. Windows下查看与设置环境变量"></a>3.1. Windows下查看与设置环境变量</h3><p>使用命令或在系统环境变量中设置 <code>ORACLE_HOME</code> 环境变量。</p><p>命令设置方式参考：</p><p><a href="https://blog.csdn.net/csdjia11/article/details/107773757" target="_blank" rel="noopener">Windows10通过cmd命令行添加环境变量_code_god_1024的博客-CSDN博客_命令行添加环境变量</a></p><hr><h2 id="4-下载与安装ODP-NET驱动"><a href="#4-下载与安装ODP-NET驱动" class="headerlink" title="4. 下载与安装ODP.NET驱动"></a>4. 下载与安装ODP.NET驱动</h2><p>.Net应用程序与ODP.Net处理器类型保持一致。</p><p>查看<code>web.config</code>文件</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TargetFrameworkVersion</span>&gt;</span>v4.0<span class="tag">&lt;/<span class="name">TargetFrameworkVersion</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">PlatformTarget</span>&gt;</span>x86<span class="tag">&lt;/<span class="name">PlatformTarget</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>我是32位x86版本，.Net Framework 4.0, 所以下载<code>32位版ODP.NET</code>。</p><p>下载地址(总揽):<br><a href="http://www.oracle.com/technetwork/topics/dotnet/downloads/index.html" target="_blank" rel="noopener">http://www.oracle.com/technetwork/topics/dotnet/downloads/index.html</a></p><p>64位ODP.Net下载地址:<br><a href="http://www.oracle.com/technetwork/database/windows/downloads/index-090165.html" target="_blank" rel="noopener">http://www.oracle.com/technetwork/database/windows/downloads/index-090165.html</a></p><p><strong>32位ODP.Net下载地址</strong>:<br><a href="http://www.oracle.com/technetwork/database/windows/downloads/utilsoft-087491.html" target="_blank" rel="noopener">http://www.oracle.com/technetwork/database/windows/downloads/utilsoft-087491.html</a></p><p>注意下载的时候,跟你的数据库版本保持一致.</p><p>下载解压后，打开文件 <code>readme.htm</code> 查看安装方法（管理员模式CMD命令安装）。</p><p>CMD（管理员模式打开），<code>cd</code> 进入<code>ODP.NET</code>解压目录（如果解压目录在D盘，需要先输入<code>D:\</code>进入D盘，再输入<code>cd D:\你的解压目录\</code>）：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="CMD"><figure class="iseeu highlight /cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\</span></span><br><span class="line"><span class="function"><span class="title">cd</span> 你的解压目录</span></span><br><span class="line"><span class="function"><span class="title">install_odpm.bat</span> %<span class="title">ORACLE_HOME</span>% <span class="title">both</span> <span class="title">true</span></span></span><br></pre></td></tr></table></figure></div><p>使用命令安装完成后，查看是否生成节点信息:在对应的.NetFramework版本下查看 <code>machine.config</code>里面的<code>&lt;system.data&gt;&lt;DbProviderFactories&gt;</code>节点。</p><p>我的文件在：<code>C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\machine.config</code>，如下图：</p><p><a href="https://imgse.com/i/vhE8HI" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2022/08/30/vhE8HI.png" alt="vhE8HI.png"></a></p><p>生成的节点信息：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">system.data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">DbProviderFactories</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">add</span> <span class="attr">name</span>=<span class="string">"ODP.NET, Managed Driver"</span> <span class="attr">invariant</span>=<span class="string">"Oracle.ManagedDataAccess.Client"</span> <span class="attr">description</span>=<span class="string">"Oracle Data Provider for .NET, Managed Driver"</span> <span class="attr">type</span>=<span class="string">"Oracle.ManagedDataAccess.Client.OracleClientFactory, Oracle.ManagedDataAccess, Version=4.122.1.0, Culture=neutral, PublicKeyToken=89b483f429c47342"</span> /&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="tag">&lt;<span class="name">add</span> <span class="attr">name</span>=<span class="string">"Microsoft SQL Server Compact Data Provider 4.0"</span> <span class="attr">invariant</span>=<span class="string">"System.Data.SqlServerCe.4.0"</span> <span class="attr">description</span>=<span class="string">".NET Framework Data Provider for Microsoft SQL Server Compact"</span> <span class="attr">type</span>=<span class="string">"System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">DbProviderFactories</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">system.data</span>&gt;</span></span><br></pre></td></tr></table></figure></div><hr><p>至此，<strong>驱动应该安装完成了</strong>。这个错误也解决了。下面的错误和ODP.NET驱动实际上没关系。</p><hr><h2 id="5-Oracle数据库连接配置"><a href="#5-Oracle数据库连接配置" class="headerlink" title="5. Oracle数据库连接配置"></a>5. Oracle数据库连接配置</h2><p>安装ODP.NET后重启应用</p><p><img src="/2022/08/29/NET-Framework-%E8%BF%9E%E6%8E%A5-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93/2022-08-30-08-52-27.png" alt="“/”应用程序中的服务器错误"></p><p>“&#x2F;”应用程序中的服务器错误</p><hr><p>ORA-01017: <em>invalid username&#x2F;password; logon denied</em></p><p><strong>说明:</strong> 执行当前 Web 请求期间，出现未经处理的异常。请检查堆栈跟踪信息，以了解有关该错误以及代码中导致错误的出处的详细信息。</p><p><strong>异常详细信息:</strong> Oracle.ManagedDataAccess.Client.OracleException: ORA-01017: invalid username&#x2F;password; logon denied</p><p><strong>源错误:</strong></p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">行 3216:</span><br><span class="line">行 3217:            var arr &#x3D; list.Select(s &#x3D;&gt; s.SoMainId).ToArray();</span><br><span class="line">行 3218:            var query &#x3D; _ncdataEntities.Database.SqlQuery&lt;SOMainCustomerInfo&gt;(string.Format( 行 3219:                            @&quot;select a.csaleorderid AS SOMainId</span><br><span class="line">行 3220:                                    ,a.vbillcode AS SOCode</span><br></pre></td></tr></table></figure></div><p><strong>源文件:</strong> D:\Portal-VS2013-NC\Portal-VS2013-NC\DataAccess\Bom\DASOBom.cs <strong>行:</strong> 3218</p><p><strong>堆栈跟踪:</strong></p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[OracleException (0x80004005): ORA-01017: invalid username&#x2F;password; logon denied]</span><br><span class="line">   OracleInternal.ConnectionPool.PoolManager&#96;3.Get(ConnectionString csWithDiffOrNewPwd, Boolean bGetForApp, CriteriaCtx criteriaCtx, String affinityInstanceName, Boolean bForceMatch) +10977</span><br><span class="line">   OracleInternal.ConnectionPool.OraclePoolManager.Get(ConnectionString csWithNewPassword, Boolean bGetForApp, CriteriaCtx criteriaCtx, String affinityInstanceName, Boolean bForceMatch) +964</span><br><span class="line">   OracleInternal.ConnectionPool.OracleConnectionDispenser&#96;3.Get(ConnectionString cs, PM conPM, ConnectionString pmCS, SecureString securedPassword, SecureString securedProxyPassword, CriteriaCtx criteriaCtx) +1065</span><br><span class="line">   Oracle.ManagedDataAccess.Client.OracleConnection.Open() +3399</span><br><span class="line">   System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean&amp; closeStoreConnectionOnFailure) +41</span><br><span class="line"></span><br><span class="line">[EntityException: 基础提供程序在 Open 上失败。]</span><br><span class="line">   System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean&amp; closeStoreConnectionOnFailure) +220</span><br><span class="line">   System.Data.EntityClient.EntityConnection.Open() +105</span><br><span class="line">   System.Data.Objects.ObjectContext.EnsureConnection() +77</span><br><span class="line">   System.Data.Objects.ObjectContext.ExecuteStoreQueryInternal(String commandText, String entitySetName, MergeOption mergeOption, Object[] parameters) +95</span><br><span class="line">   System.Data.Objects.ObjectContext.ExecuteStoreQuery(String commandText, Object[] parameters) +61</span><br><span class="line">   System.Data.Entity.Internal.InternalContext.ExecuteSqlQuery(String sql, Object[] parameters) +93</span><br><span class="line">   System.Data.Entity.Internal.InternalContext.ExecuteSqlQueryAsIEnumerable(String sql, Object[] parameters) +63</span><br><span class="line">   System.Data.Entity.Internal.InternalContext.ExecuteSqlQuery(Type elementType, String sql, Object[] parameters) +175</span><br><span class="line">   System.Data.Entity.Internal.InternalSqlNonSetQuery.GetEnumerator() +26</span><br><span class="line">   System.Data.Entity.Internal.InternalSqlQuery&#96;1.GetEnumerator() +17</span><br><span class="line">   System.Collections.Generic.List&#96;1..ctor(IEnumerable&#96;1 collection) +174</span><br><span class="line">   System.Linq.Enumerable.ToList(IEnumerable&#96;1 source) +61</span><br><span class="line">   Portal.DataAccess.Bom.DASOBom.GetCPSOBomMainList(List&#96;1 soBomList, Int32&amp; pageid, Int32 pagesize) in D:\Portal-VS2013-NC\Portal-VS2013-NC\DataAccess\Bom\DASOBom.cs:3218</span><br><span class="line">   Portal.BLL.Bom.SOBom.GetCPSOBomMainObjectList(List&#96;1 soBomList, Int32&amp; pageid, Int32 pagesize) in D:\Portal-VS2013-NC\Portal-VS2013-NC\BLL\Bom\SOBom.cs:2611</span><br><span class="line">   Portal.Web.bom.SOBomMain_CP.InitData(String strSearchText) in D:\Portal-VS2013-NC\Portal-VS2013-NC\web\bom\SOBomMain_CP.aspx.cs:108</span><br><span class="line">   Portal.Web.bom.SOBomMain_CP.BtnSearchClick(Object sender, EventArgs e) in D:\Portal-VS2013-NC\Portal-VS2013-NC\web\bom\SOBomMain_CP.aspx.cs:151</span><br><span class="line">   Portal.Web.bom.SOBomMain_CP.Page_Load(Object sender, EventArgs e) in D:\Portal-VS2013-NC\Portal-VS2013-NC\web\bom\SOBomMain_CP.aspx.cs:49</span><br><span class="line">   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +52</span><br><span class="line">   System.Web.UI.Control.OnLoad(EventArgs e) +97</span><br><span class="line">   System.Web.UI.Control.LoadRecursive() +61</span><br><span class="line">   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +693</span><br></pre></td></tr></table></figure></div><h3 id="5-1-分析与解决错误"><a href="#5-1-分析与解决错误" class="headerlink" title="5.1. 分析与解决错误"></a>5.1. 分析与解决错误</h3><p>出现此错误，说明前面安装Oracle连接驱动正常，但是连接配置有问题，所以报用户名密码无效。</p><p>查看源码中<code>_ncdataEntities</code>对象在初始化时所使用的连接字符串<code>NCDATAEntities</code>在<code>app.config</code>中的配置内容：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">add</span> <span class="attr">name</span>=<span class="string">"NCDATAEntities"</span> <span class="attr">connectionString</span>=<span class="string">"metadata=res://*/NCDATAModel.csdl|res://*/NCDATAModel.ssdl|res://*/NCDATAModel.msl;provider=Oracle.ManagedDataAccess.Client;provider connection string=<span class="symbol">&amp;quot;</span>data source=ORCL;password=******;user id=NCDB<span class="symbol">&amp;quot;</span>"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">providerName</span>=<span class="string">"System.Data.EntityClient"</span> /&gt;</span></span><br></pre></td></tr></table></figure></div><p>这是一种连接字符串的写法，Oracle 对 微软 实体框架 EF6 的支持，在 ODP.NET 的新版本中才有实现。</p><p>关注这里的 <code>data source</code>, <code>password</code>, <code>user id</code> 几个关键属性。我们的报错信息 <code>Oracle.ManagedDataAccess.Client.OracleException: ORA-01017: invalid username/password; logon denied</code> 主要和这几个参数配置有关。</p><h4 id="5-1-1-先了解下-oracle-tnsnames-ora-文件用法"><a href="#5-1-1-先了解下-oracle-tnsnames-ora-文件用法" class="headerlink" title="5.1.1. 先了解下 oracle tnsnames.ora 文件用法"></a>5.1.1. 先了解下 oracle <code>tnsnames.ora</code> 文件用法</h4><h5 id="5-1-1-1-1-用途"><a href="#5-1-1-1-1-用途" class="headerlink" title="5.1.1.1. 1.用途"></a>5.1.1.1. 1.用途</h5><p>Oracle客户端所需要的一个文件，通过该文件可以配置数据库的连接地址，配好后，Oracle地址了，直接用简易的字符串代替。</p><p>如：本该是数据库地址为：<code>127.0.0.1:1521/orcl</code>,通过设置<code>tnsnames.ora</code>,为它起的别名为：<code>dataBaseAddr</code>,就可以用 <code>dataBaseAddr</code> 代替了。</p><h5 id="5-1-1-2-2-用法"><a href="#5-1-1-2-2-用法" class="headerlink" title="5.1.1.2. 2.用法"></a>5.1.1.2. 2.用法</h5><p>用以管理员方式运行文本编辑器，打开Oracle客户端目录的<code>D:\app\R00004050\product\11.2.0\client_1\network\admin\tnsnames.ora</code>文件，内容如下：</p><p><a href="https://imgse.com/i/vhEt4f" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2022/08/30/vhEt4f.png" alt="vhEt4f.png"></a></p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ORCL &#x3D;</span><br><span class="line">   (DESCRIPTION &#x3D;</span><br><span class="line">    (ADDRESS &#x3D; (PROTOCOL &#x3D; TCP)(HOST &#x3D; 192.168.80.50)(PORT &#x3D; 1521))</span><br><span class="line">    (CONNECT_DATA &#x3D;</span><br><span class="line">      (SERVER &#x3D; DEDICATED)</span><br><span class="line">      (SERVICE_NAME &#x3D; ORCL) </span><br><span class="line">    )</span><br><span class="line">  )</span><br></pre></td></tr></table></figure></div><p>在我们的项目中的连接字符串所设置的<code>data source=ORCL</code> 属性，这里的<code>ORCL</code>就是<code>tnsnames.ora</code>文件中所配置的别名 <code>ORCL = (...)</code>。</p><h3 id="5-2-解决方法"><a href="#5-2-解决方法" class="headerlink" title="5.2. 解决方法"></a>5.2. 解决方法</h3><p>解决方法：检查项目 <code>app.config</code> 的 <code>user id</code>, <code>password</code> 以及这里<code>tnsnames.ora</code>文件的 <code>HOST</code>,<code>PORT</code> 是否正确。</p><p>本例中 HOST 地址配置错误，使用了测试环境 Oracle 的 IP 地址，所以将 <code>HOST</code> 改为生产环境 IP 地址后 Oracle 数据库连接正确。</p><hr><p>参考文章：</p><ol><li><a href="https://www.cnblogs.com/gudi/p/6110875.html" target="_blank" rel="noopener"><strong>错误:找不到请求的 .Net Framework Data Provider。可能没有安装.</strong></a></li><li><a href="https://blog.51cto.com/iteyer/3239259" target="_blank" rel="noopener">.net中使用ODP.net访问Oracle数据库（无客户端部署方法）_iteyer的技术博客_51CTO博客</a></li><li><a href="https://social.msdn.microsoft.com/Forums/vstudio/zh-CN/b408efcb-d03f-4ddb-b9a5-e1db2d5b793d/252141998121040358312771430340-net-framework-data?forum=wpfzhchs" target="_blank" rel="noopener">找不到请求的 .Net Framework Data Provider。可能没有安装。</a></li><li><a href="https://www.cnblogs.com/Marydon20170307/p/9453064.html" target="_blank" rel="noopener"><strong>oracle tnsnames.ora文件用法说明</strong></a></li><li><a href="https://www.oracle.com/ocom/groups/public/@otn/documents/webcontent/229640_zhs.htm" target="_blank" rel="noopener">Oracle Data Provider for .NET（C# 版）入门</a></li><li><a href="https://blog.csdn.net/WuLex/article/details/87303446" target="_blank" rel="noopener">ODP.NET_风神修罗使的博客-CSDN博客</a></li><li><a href="https://docs.oracle.com/cd/E63277_01/win.121/e63268/installODPmd.htm#ODPNT8149" target="_blank" rel="noopener">Installing Oracle Data Provider for .NET, Managed Driver</a></li><li><a href="https://blog.csdn.net/csdjia11/article/details/107773757" target="_blank" rel="noopener">Windows10通过cmd命令行添加环境变量_code_god_1024的博客-CSDN博客_命令行添加环境变量</a></li></ol>]]></content>
    
    
    <summary type="html">&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#1-%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF&quot;&gt;1. 错误信息&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#11-%E9%94%99%E8%AF%AF%E8%AF%A6%E6%83%85&quot;&gt;1.1. 错误详情&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#2-%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0&quot;&gt;2. 问题原因&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#3-%E6%9F%A5%E7%9C%8B%E4%B8%8E%E8%AE%BE%E7%BD%AEoracle_home%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F&quot;&gt;3. 查看与设置ORACLE_HOME环境变量&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#31-windows%E4%B8%8B%E6%9F%A5%E7%9C%8B%E4%B8%8E%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F&quot;&gt;3.1. Windows下查看与设置环境变量&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#4-%E4%B8%8B%E8%BD%BD%E4%B8%8E%E5%AE%89%E8%A3%85odpnet%E9%A9%B1%E5%8A%A8&quot;&gt;4. 下载与安装ODP.NET驱动&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#5-oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E9%85%8D%E7%BD%AE&quot;&gt;5. Oracle数据库连接配置&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#51-%E5%88%86%E6%9E%90%E4%B8%8E%E8%A7%A3%E5%86%B3%E9%94%99%E8%AF%AF&quot;&gt;5.1. 分析与解决错误&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#511-%E5%85%88%E4%BA%86%E8%A7%A3%E4%B8%8B-oracle-tnsnamesora-%E6%96%87%E4%BB%B6%E7%94%A8%E6%B3%95&quot;&gt;5.1.1. 先了解下 oracle &lt;code&gt;tnsnames.ora&lt;/code&gt; 文件用法&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#5111-1%E7%94%A8%E9%80%94&quot;&gt;5.1.1.1. 1.用途&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#5112-2%E7%94%A8%E6%B3%95&quot;&gt;5.1.1.2. 2.用法&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#52-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95&quot;&gt;5.2. 解决方法&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;1-错误信息&quot;&gt;&lt;a href=&quot;#1-错误信息&quot; class=&quot;headerlink&quot; title=&quot;1. 错误信息&quot;&gt;&lt;/a&gt;1. 错误信息&lt;/h2&gt;&lt;p&gt;解决错误信息：&lt;strong&gt;找不到请求的 .Net Framework Data Provider。可能没有安装&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;1-1-错误详情&quot;&gt;&lt;a href=&quot;#1-1-错误详情&quot; class=&quot;headerlink&quot; title=&quot;1.1. 错误详情&quot;&gt;&lt;/a&gt;1.1. 错误详情&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/2022/08/29/NET-Framework-%E8%BF%9E%E6%8E%A5-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93/2022-08-30-08-53-43.png&quot; alt=&quot;找不到请求的 .Net Framework Data Provider。可能没有安装。&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>电脑BIOS热键U盘启动快捷键表</title>
    <link href="https://xiaoyan94.github.io/2022/08/27/%E7%94%B5%E8%84%91BIOS%E7%83%AD%E9%94%AEU%E7%9B%98%E5%90%AF%E5%8A%A8%E5%BF%AB%E6%8D%B7%E9%94%AE%E8%A1%A8/"/>
    <id>https://xiaoyan94.github.io/2022/08/27/%E7%94%B5%E8%84%91BIOS%E7%83%AD%E9%94%AEU%E7%9B%98%E5%90%AF%E5%8A%A8%E5%BF%AB%E6%8D%B7%E9%94%AE%E8%A1%A8/</id>
    <published>2022-08-27T07:28:48.000Z</published>
    <updated>2022-08-27T07:50:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>U盘做好启动盘后，我们要从电脑上按快捷键来设置从U盘启动电脑，而不同的电脑快捷键是不同的，所以如果你感觉到设置BIOS比较麻烦困难，根据你的电脑类型，选择热键，直接启动一键U盘装系统工具（重要提醒：选择热键前，请先插入U盘）</p><table><thead><tr><th>组装机主板</th><th>组装机主板</th><th>品牌笔记本</th><th>品牌笔记本</th><th>品牌台式机</th><th>品牌台式机</th></tr></thead><tbody><tr><td>主板品牌</td><td>启动按键</td><td>笔记本品牌</td><td>启动按键</td><td>台式机品牌</td><td>启动按键</td></tr><tr><td>华硕主板</td><td>F8</td><td>联想笔记本</td><td>F12</td><td>联想台式机</td><td>F12</td></tr><tr><td>技嘉主板</td><td>F12</td><td>宏基笔记本</td><td>F12</td><td>惠普台式机</td><td>F12</td></tr><tr><td>微星主板</td><td>F11</td><td>华硕笔记本</td><td>ESC</td><td>宏基台式机</td><td>F12</td></tr><tr><td>映泰主板</td><td>F9</td><td>惠普笔记本</td><td>F9</td><td>戴尔台式机</td><td>ESC</td></tr><tr><td>梅捷主板</td><td>ESC 或 F12</td><td>联想 Thinkpad</td><td>F12</td><td>神舟台式机</td><td>F12</td></tr><tr><td>七彩虹主板</td><td>ESC 或 F11</td><td>戴尔笔记本</td><td>F12</td><td>华硕台式机</td><td>F8</td></tr><tr><td>华擎主板</td><td>F11</td><td>神舟笔记本</td><td>F12</td><td>方正台式机</td><td>F12</td></tr><tr><td>斯巴达卡主板</td><td>ESC</td><td>东芝笔记本</td><td>F12</td><td>清华同方台式机</td><td>F12</td></tr><tr><td>昂达主板</td><td>F11</td><td>三星笔记本</td><td>F12</td><td>海尔台式机</td><td>F12</td></tr><tr><td>双敏主板</td><td>ESC</td><td>IBM 笔记本</td><td>F12</td><td>明基台式机</td><td>F8</td></tr><tr><td>翔升主板</td><td>F10</td><td>富士通笔记本</td><td>F12</td><td></td><td></td></tr><tr><td>精英主板</td><td>ESC 或 F11</td><td>海尔笔记本</td><td>F12</td><td></td><td></td></tr><tr><td>冠盟主板</td><td>F11 或 F12</td><td>方正笔记本</td><td>F12</td><td></td><td></td></tr><tr><td>富士康主板</td><td>ESC 或 F12</td><td>清华同方笔记本</td><td>F12</td><td></td><td></td></tr><tr><td>顶星主板</td><td>F11 或 F12</td><td>微星笔记本</td><td>F11</td><td></td><td></td></tr><tr><td>铭瑄主板</td><td>ESC</td><td>明基笔记本</td><td>F9</td><td></td><td></td></tr><tr><td>盈通主板</td><td>F8</td><td>技嘉笔记本</td><td>F12</td><td></td><td></td></tr><tr><td>捷波主板</td><td>ESC</td><td>Gateway 笔记本</td><td>F12</td><td></td><td></td></tr><tr><td>Intel 主板</td><td>F12</td><td>eMachines 笔记本</td><td>F12</td><td></td><td></td></tr><tr><td>杰微主板</td><td>ESC 或 F8</td><td>索尼笔记本</td><td>ESC</td><td></td><td></td></tr><tr><td>致铭主板</td><td>F12</td><td></td><td></td><td></td><td></td></tr><tr><td>磐英主板</td><td>ESC</td><td></td><td></td><td></td><td></td></tr><tr><td>磐正主板</td><td>ESC</td><td></td><td></td><td></td><td></td></tr><tr><td>冠铭主板</td><td>F9</td><td></td><td></td><td></td><td></td></tr></tbody></table><a id="more"></a><blockquote><p>注意：其它机型请尝试或参考以上品牌常用启动热键<br>注意：苹果笔记本，开机&#x2F;重启时按住 “option”键[即Alt键]不放，进入选择启动方式。</p></blockquote><table cellpadding="0" cellspacing="0" width="676" data-sort="sortDisabled" style="margin:0px 0px 10px;padding:0px;width:654px;max-width:100%;color:#333333;font-family:-apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:17px;letter-spacing:0.544px;text-align:justify;box-sizing:border-box !important;word-wrap:break-word !important;"><tbody style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;overflow-wrap:break-word !important;"><tr style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;overflow-wrap:break-word !important;"><th rowspan="1" colspan="2" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-width:2px 1px 1px;border-style:solid;border-color:#dddddd;border-image:initial;background:#f7f7f7;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;"><h2><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;font-size:20px;color:#007aaa;overflow-wrap:break-word !important;">开机进BIOS按键查询</span></h2></th></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td colspan="2" height="13" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-width:1px 0.5pt 1px 1px;border-style:solid;border-color:#dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;background-color:#ff4c41;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;color:#ffffff;overflow-wrap:break-word !important;">组装机主板</span></td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="367" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">主板品牌</td><td width="116" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">启动按键</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="543" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">Award BIOS</td><td width="144" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">Del</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="568" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">Ami BIOS</td><td width="162" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">Del或ESC</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="559" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">Phoenix BIOS</td><td width="176" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F2</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" rowspan="1" colspan="2" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">大部分是F2或Del或ESC，还有一少部分是F9或F10或F12。<br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;overflow-wrap:break-word !important;"></td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td colspan="2" height="13" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-width:1px 0.5pt 1px 1px;border-style:solid;border-color:#dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;background-color:#007aaa;overflow-wrap:break-word !important;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;color:#ffffff;overflow-wrap:break-word !important;">品牌笔记本</span></td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">笔记本品牌</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">启动按键</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">戴尔Dell</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F2</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">宏基Acer</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F2</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">东芝Toshiba</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">*ESC/F1</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">富士通Fujitsu</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F2</td></tr><tr height="30" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:22.5pt;overflow-wrap:break-word !important;"><td height="22" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">联想Thinkpad</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F12</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">IBM</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F1</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">HP(惠普)</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F2或F10</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">SONY(索尼)</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F2</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">Compaq(康柏)</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F10</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">lenovo(联想)</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F2</td></tr><tr height="30" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:22.5pt;overflow-wrap:break-word !important;"><td height="22" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">enq(明基)</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F2</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td colspan="2" height="13" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-width:1px 0.5pt 1px 1px;border-style:solid;border-color:#dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;background-color:#ffa900;overflow-wrap:break-word !important;">品牌台式机</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">台式机品牌</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">启动按键</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">IBM</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F1</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">惠普HP</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F2</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">索尼SONY</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F2</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">戴尔Dell</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F2</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">宏碁Acer</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F2</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">东芝Toshiba</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">*ESC/F1</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">康柏Compaq</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F10</td></tr><tr height="30" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:22.5pt;overflow-wrap:break-word !important;"><td height="22" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">富士通Fujitsu</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F2</td></tr><tr height="18" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box !important;word-wrap:break-word !important;height:13.5pt;overflow-wrap:break-word !important;"><td height="13" width="528" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:1px solid #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">大多数国产品牌</td><td width="207" style="margin:5px 10px;padding:5px 10px;word-wrap:break-word !important;word-break:break-all;border-top:none #dddddd;border-right:1px solid #dddddd;border-bottom:1px solid #dddddd;border-left:none #dddddd;border-image:initial;max-width:100%;box-sizing:border-box !important;overflow-wrap:break-word !important;">F2<br><br></td></tr></tbody></table>]]></content>
    
    
    <summary type="html">&lt;p&gt;U盘做好启动盘后，我们要从电脑上按快捷键来设置从U盘启动电脑，而不同的电脑快捷键是不同的，所以如果你感觉到设置BIOS比较麻烦困难，根据你的电脑类型，选择热键，直接启动一键U盘装系统工具（重要提醒：选择热键前，请先插入U盘）&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;组装机主板&lt;/th&gt;
&lt;th&gt;组装机主板&lt;/th&gt;
&lt;th&gt;品牌笔记本&lt;/th&gt;
&lt;th&gt;品牌笔记本&lt;/th&gt;
&lt;th&gt;品牌台式机&lt;/th&gt;
&lt;th&gt;品牌台式机&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;主板品牌&lt;/td&gt;
&lt;td&gt;启动按键&lt;/td&gt;
&lt;td&gt;笔记本品牌&lt;/td&gt;
&lt;td&gt;启动按键&lt;/td&gt;
&lt;td&gt;台式机品牌&lt;/td&gt;
&lt;td&gt;启动按键&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;华硕主板&lt;/td&gt;
&lt;td&gt;F8&lt;/td&gt;
&lt;td&gt;联想笔记本&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;联想台式机&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;技嘉主板&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;宏基笔记本&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;惠普台式机&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;微星主板&lt;/td&gt;
&lt;td&gt;F11&lt;/td&gt;
&lt;td&gt;华硕笔记本&lt;/td&gt;
&lt;td&gt;ESC&lt;/td&gt;
&lt;td&gt;宏基台式机&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;映泰主板&lt;/td&gt;
&lt;td&gt;F9&lt;/td&gt;
&lt;td&gt;惠普笔记本&lt;/td&gt;
&lt;td&gt;F9&lt;/td&gt;
&lt;td&gt;戴尔台式机&lt;/td&gt;
&lt;td&gt;ESC&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;梅捷主板&lt;/td&gt;
&lt;td&gt;ESC 或 F12&lt;/td&gt;
&lt;td&gt;联想 Thinkpad&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;神舟台式机&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;七彩虹主板&lt;/td&gt;
&lt;td&gt;ESC 或 F11&lt;/td&gt;
&lt;td&gt;戴尔笔记本&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;华硕台式机&lt;/td&gt;
&lt;td&gt;F8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;华擎主板&lt;/td&gt;
&lt;td&gt;F11&lt;/td&gt;
&lt;td&gt;神舟笔记本&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;方正台式机&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;斯巴达卡主板&lt;/td&gt;
&lt;td&gt;ESC&lt;/td&gt;
&lt;td&gt;东芝笔记本&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;清华同方台式机&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;昂达主板&lt;/td&gt;
&lt;td&gt;F11&lt;/td&gt;
&lt;td&gt;三星笔记本&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;海尔台式机&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;双敏主板&lt;/td&gt;
&lt;td&gt;ESC&lt;/td&gt;
&lt;td&gt;IBM 笔记本&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;明基台式机&lt;/td&gt;
&lt;td&gt;F8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;翔升主板&lt;/td&gt;
&lt;td&gt;F10&lt;/td&gt;
&lt;td&gt;富士通笔记本&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;精英主板&lt;/td&gt;
&lt;td&gt;ESC 或 F11&lt;/td&gt;
&lt;td&gt;海尔笔记本&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;冠盟主板&lt;/td&gt;
&lt;td&gt;F11 或 F12&lt;/td&gt;
&lt;td&gt;方正笔记本&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;富士康主板&lt;/td&gt;
&lt;td&gt;ESC 或 F12&lt;/td&gt;
&lt;td&gt;清华同方笔记本&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;顶星主板&lt;/td&gt;
&lt;td&gt;F11 或 F12&lt;/td&gt;
&lt;td&gt;微星笔记本&lt;/td&gt;
&lt;td&gt;F11&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;铭瑄主板&lt;/td&gt;
&lt;td&gt;ESC&lt;/td&gt;
&lt;td&gt;明基笔记本&lt;/td&gt;
&lt;td&gt;F9&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;盈通主板&lt;/td&gt;
&lt;td&gt;F8&lt;/td&gt;
&lt;td&gt;技嘉笔记本&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;捷波主板&lt;/td&gt;
&lt;td&gt;ESC&lt;/td&gt;
&lt;td&gt;Gateway 笔记本&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Intel 主板&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;eMachines 笔记本&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;杰微主板&lt;/td&gt;
&lt;td&gt;ESC 或 F8&lt;/td&gt;
&lt;td&gt;索尼笔记本&lt;/td&gt;
&lt;td&gt;ESC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;致铭主板&lt;/td&gt;
&lt;td&gt;F12&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;磐英主板&lt;/td&gt;
&lt;td&gt;ESC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;磐正主板&lt;/td&gt;
&lt;td&gt;ESC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;冠铭主板&lt;/td&gt;
&lt;td&gt;F9&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;</summary>
    
    
    
    
    <category term="电脑" scheme="https://xiaoyan94.github.io/tags/%E7%94%B5%E8%84%91/"/>
    
  </entry>
  
  <entry>
    <title>MySQL优化技巧</title>
    <link href="https://xiaoyan94.github.io/2022/08/27/MySQL%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7/"/>
    <id>https://xiaoyan94.github.io/2022/08/27/MySQL%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7/</id>
    <published>2022-08-27T05:56:46.000Z</published>
    <updated>2022-08-27T07:05:55.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/bg.jpg" alt="SQL优化"></p><a id="more"></a><p>SQL 优化已经成为衡量程序猿优秀与否的硬性指标，甚至在各大厂招聘岗位职能上都有明码标注，如果是你，在这个问题上能吊打面试官还是会被吊打呢？</p><p>有朋友疑问到，SQL 优化真的有这么重要么？如下图所示，SQL 优化在提升系统性能中是：成本最低和优化效果最明显的途径。</p><p>如果你的团队在 SQL 优化这方面搞得很优秀，对你们整个大型系统可用性方面无疑是一个质的跨越，真的能让你们老板省下不止几沓子钱。</p><p><img src="https://s1.51cto.com/oss/202008/19/734e0d75c12e4026751e71dd2d7b0812.png" alt="2"></p><p><strong>优化成本：</strong> 硬件&gt;系统配置&gt;数据库表结构&gt;SQL 及索引。</p><p><strong>优化效果：</strong> 硬件&lt;系统配置&lt;数据库表结构&lt;SQL 及索引。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">String result = <span class="string">"嗯，不错，"</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="string">"SQL 优化经验足"</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">"熟悉事务锁"</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"并发场景处理 666"</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">"会打王者荣耀"</span>) &#123;</span><br><span class="line">                result += <span class="string">"明天入职"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result += <span class="string">"先回去等消息吧"</span>;</span><br><span class="line">&#125;</span><br><span class="line">Logger.info (<span class="string">"面试官："</span> + result );</span><br></pre></td></tr></table></figure></div><p>别看了，上面这是一道送命题。</p><p>好了我们言归正传，首先，对于 MySQL 层优化我一般遵从五个原则：</p><ul><li><p><strong>减少数据访问：</strong> 设置合理的字段类型，启用压缩，通过索引访问等减少磁盘 IO。</p></li><li><p><strong>返回更少的数据：</strong> 只返回需要的字段和数据分页处理，减少磁盘 IO 及网络 IO。</p></li><li><p><strong>减少交互次数：</strong> 批量 DML 操作，函数存储等减少数据连接次数。</p></li><li><p><strong>减少服务器 CPU 开销：</strong> 尽量减少数据库排序操作以及全表查询，减少 CPU 内存占用。</p></li><li><p><strong>利用更多资源：</strong> 使用表分区，可以增加并行操作，更大限度利用 CPU 资源。</p></li></ul><p>总结到 SQL 优化中，就如下三点：</p><ul><li><p><strong>最大化利用索引。</strong></p></li><li><p><strong>尽可能避免全表扫描。</strong></p></li><li><p><strong>减少无效数据的查询。</strong></p></li></ul><p>理解 SQL 优化原理 ，首先要搞清楚 SQL 执行顺序。</p><h2 id="SELECT-语句，语法顺序如下"><a href="#SELECT-语句，语法顺序如下" class="headerlink" title="SELECT 语句，语法顺序如下"></a>SELECT 语句，语法顺序如下</h2><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="keyword">DISTINCT</span> &lt; select_list &gt;</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  &lt; left_table &gt; &lt; join_type &gt;</span><br><span class="line">  <span class="keyword">JOIN</span> &lt; right_table &gt; <span class="keyword">ON</span> &lt; join_condition &gt;</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  &lt; where_condition &gt;</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  &lt; group_by_list &gt;</span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">  &lt; having_condition &gt;</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  &lt; order_by_condition &gt;</span><br><span class="line"><span class="keyword">LIMIT</span></span><br><span class="line">  &lt; limit_number &gt;</span><br></pre></td></tr></table></figure></div><h2 id="SELECT-语句，执行顺序如下"><a href="#SELECT-语句，执行顺序如下" class="headerlink" title="SELECT 语句，执行顺序如下"></a>SELECT 语句，执行顺序如下</h2><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">FROM</span><br><span class="line">&lt;表名&gt; # 选取表，将多个表数据通过笛卡尔积变成一个表。</span><br><span class="line">ON</span><br><span class="line">&lt;筛选条件&gt; # 对笛卡尔积的虚表进行筛选</span><br><span class="line">JOIN &lt;join, left join, right join...&gt;</span><br><span class="line">&lt;join表&gt; # 指定join，用于添加数据到on之后的虚表中，例如left join会将左表的剩余数据添加到虚表中</span><br><span class="line">WHERE</span><br><span class="line">&lt;where条件&gt; # 对上述虚表进行筛选</span><br><span class="line">GROUP BY</span><br><span class="line">&lt;分组条件&gt; # 分组</span><br><span class="line">&lt;SUM()等聚合函数&gt; # 用于having子句进行判断，在书写上这类聚合函数是写在having判断里面的</span><br><span class="line">HAVING</span><br><span class="line">&lt;分组筛选&gt; # 对分组后的结果进行聚合筛选</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">&lt;返回数据列表&gt; <span class="comment"># 返回的单列必须在group by子句中，聚合函数除外</span></span><br><span class="line"><span class="keyword">DISTINCT</span></span><br><span class="line"><span class="comment"># 数据除重</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">&lt;排序条件&gt; <span class="comment"># 排序</span></span><br><span class="line"><span class="keyword">LIMIT</span></span><br><span class="line">&lt;行数限制&gt;</span><br></pre></td></tr></table></figure></div><p>以下 SQL 优化策略适用于数据量较大的场景下，如果数据量较小，没必要以此为准，以免画蛇添足</p><h3 id="避免不走索引的场景"><a href="#避免不走索引的场景" class="headerlink" title="避免不走索引的场景"></a>避免不走索引的场景</h3><h4 id="①-尽量避免在字段开头模糊查询，会导致数据库引擎放弃索引进行全表扫描"><a href="#①-尽量避免在字段开头模糊查询，会导致数据库引擎放弃索引进行全表扫描" class="headerlink" title="① 尽量避免在字段开头模糊查询，会导致数据库引擎放弃索引进行全表扫描"></a>① <strong>尽量避免在字段开头模糊查询，会导致数据库引擎放弃索引进行全表扫描</strong></h4><p>如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> username <span class="keyword">LIKE</span> <span class="string">'%陈%'</span></span><br></pre></td></tr></table></figure></div><p><strong>优化方式：</strong> 尽量在字段 <strong>后面</strong> 使用模糊查询。</p><p>如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> username <span class="keyword">LIKE</span> <span class="string">'陈%'</span></span><br></pre></td></tr></table></figure></div><p>如果需求是要在前面使用模糊查询：</p><ul><li><p>使用 MySQL 内置函数 INSTR（str，substr）来匹配，作用类似于 Java 中的 indexOf()，查询字符串出现的角标位置。</p></li><li><p>使用 FullText 全文索引，用 match against 检索。</p></li><li><p>数据量较大的情况，建议引用 ElasticSearch、Solr，亿级数据量检索速度秒级。</p></li><li><p>当表数据量较少（几千条儿那种），别整花里胡哨的，直接用 like ‘%xx%’。</p></li></ul><h4 id="②-尽量避免使用-in-和-not-in，会导致引擎走全表扫描"><a href="#②-尽量避免使用-in-和-not-in，会导致引擎走全表扫描" class="headerlink" title="② 尽量避免使用 in 和 not in，会导致引擎走全表扫描"></a>② <strong>尽量避免使用 in 和 not in，会导致引擎走全表扫描</strong></h4><p>如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> <span class="keyword">id</span> <span class="keyword">IN</span> (<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure></div><p><strong>优化方式：</strong> 如果是连续数值，可以用 <code>between</code> 代替。</p><p>如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> <span class="keyword">id</span> <span class="keyword">BETWEEN</span> <span class="number">2</span> <span class="keyword">AND</span> <span class="number">3</span></span><br></pre></td></tr></table></figure></div><p>如果是子查询，可以用 <code>exists</code> 代替。</p><p>如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 不走索引</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">  *</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  A</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  A.id <span class="keyword">in</span> (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">      <span class="keyword">id</span></span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">      B</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 走索引</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">  *</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  A</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  <span class="keyword">exists</span> (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">      *</span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">      B</span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">      B.id = A.id</span><br><span class="line">  );</span><br></pre></td></tr></table></figure></div><h4 id="③-尽量避免使用-or，会导致数据库引擎放弃索引进行全表扫描"><a href="#③-尽量避免使用-or，会导致数据库引擎放弃索引进行全表扫描" class="headerlink" title="③ 尽量避免使用 or，会导致数据库引擎放弃索引进行全表扫描"></a>③ <strong>尽量避免使用 or，会导致数据库引擎放弃索引进行全表扫描</strong></h4><p>如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> <span class="keyword">id</span> = <span class="number">1</span> <span class="keyword">OR</span> <span class="keyword">id</span> = <span class="number">3</span></span><br></pre></td></tr></table></figure></div><p><strong>优化方式：</strong> 可以用 union 代替 or。</p><p>如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  *</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  t</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="keyword">id</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  *</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  t</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="keyword">id</span> = <span class="number">3</span></span><br></pre></td></tr></table></figure></div><h4 id="④-尽量避免进行-null-值的判断，会导致数据库引擎放弃索引进行全表扫描"><a href="#④-尽量避免进行-null-值的判断，会导致数据库引擎放弃索引进行全表扫描" class="headerlink" title="④ 尽量避免进行 null 值的判断，会导致数据库引擎放弃索引进行全表扫描"></a>④ <strong>尽量避免进行 null 值的判断，会导致数据库引擎放弃索引进行全表扫描</strong></h4><p>如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> score <span class="keyword">IS</span> <span class="literal">NULL</span></span><br></pre></td></tr></table></figure></div><p><strong>优化方式：</strong> 可以给字段添加默认值 0，对 0 值进行判断。</p><p>如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> score = <span class="number">0</span></span><br></pre></td></tr></table></figure></div><h4 id="⑤-尽量避免在-where-条件中等号的左侧进行表达式、函数操作，会导致数据库引擎放弃索引进行全表扫描"><a href="#⑤-尽量避免在-where-条件中等号的左侧进行表达式、函数操作，会导致数据库引擎放弃索引进行全表扫描" class="headerlink" title="⑤ 尽量避免在 where 条件中等号的左侧进行表达式、函数操作，会导致数据库引擎放弃索引进行全表扫描"></a>⑤ <strong>尽量避免在 where 条件中等号的左侧进行表达式、函数操作，会导致数据库引擎放弃索引进行全表扫描</strong></h4><p>可以将表达式、函数操作移动到等号右侧，如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 全表扫描</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> T <span class="keyword">WHERE</span> score/<span class="number">10</span> = <span class="number">9</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 走索引</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> T <span class="keyword">WHERE</span> score = <span class="number">10</span>*<span class="number">9</span></span><br></pre></td></tr></table></figure></div><h4 id="⑥-当数据量大时，避免使用-where-1-x3D-1-的条件"><a href="#⑥-当数据量大时，避免使用-where-1-x3D-1-的条件" class="headerlink" title="⑥ 当数据量大时，避免使用 where 1&#x3D;1 的条件"></a>⑥ <strong>当数据量大时，避免使用 where 1&#x3D;1 的条件</strong></h4><p>通常为了方便拼装查询条件，我们会默认使用该条件，数据库引擎会放弃索引进行全表扫描。</p><p>如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> username, age, sex <span class="keyword">FROM</span> T <span class="keyword">WHERE</span> <span class="number">1</span>=<span class="number">1</span></span><br></pre></td></tr></table></figure></div><p><strong>优化方式：</strong> 用代码拼装 SQL 时进行判断，没 where 条件就去掉 where，有 where 条件就加 and。</p><h4 id="⑦-查询条件不能用-lt-gt-或者-x3D"><a href="#⑦-查询条件不能用-lt-gt-或者-x3D" class="headerlink" title="⑦ 查询条件不能用 &lt;&gt; 或者 !&#x3D;"></a>⑦ <strong>查询条件不能用 &lt;&gt; 或者 !&#x3D;</strong></h4><p>使用索引列作为条件进行查询时，需要避免使用&lt;&gt;或者!&#x3D;等判断条件。</p><p>如确实业务需要，使用到不等于符号，需要在重新评估索引建立，避免在此字段上建立索引，改由查询条件中其他索引字段代替。</p><h4 id="⑧-where-条件仅包含复合索引非前置列"><a href="#⑧-where-条件仅包含复合索引非前置列" class="headerlink" title="⑧ where 条件仅包含复合索引非前置列"></a>⑧ <strong>where 条件仅包含复合索引非前置列</strong></h4><p>如下：复合（联合）索引包含 key_part1，key_part2，key_part3 三列，但 SQL 语句没有包含索引前置列”key_part1”，按照 MySQL 联合索引的最左匹配原则，不会走联合索引。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> col1 <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">where</span> key_part2=<span class="number">1</span> <span class="keyword">and</span> key_part3=<span class="number">2</span></span><br></pre></td></tr></table></figure></div><h4 id="⑨-隐式类型转换造成不使用索引"><a href="#⑨-隐式类型转换造成不使用索引" class="headerlink" title="⑨ 隐式类型转换造成不使用索引"></a>⑨ <strong>隐式类型转换造成不使用索引</strong></h4><p>如下 SQL 语句由于索引对列类型为 varchar，但给定的值为数值，涉及隐式类型转换，造成不能正确走索引。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> col1 <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">where</span> col_varchar=<span class="number">123</span>;</span><br></pre></td></tr></table></figure></div><h4 id="⑩-order-by-条件要与-where-中条件一致，否则-order-by-不会利用索引进行排序"><a href="#⑩-order-by-条件要与-where-中条件一致，否则-order-by-不会利用索引进行排序" class="headerlink" title="⑩ order by 条件要与 where 中条件一致，否则 order by 不会利用索引进行排序"></a>⑩ <strong>order by 条件要与 where 中条件一致，否则 order by 不会利用索引进行排序</strong></h4><p>如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 不走age索引</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t <span class="keyword">order</span> <span class="keyword">by</span> age;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 走age索引</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t <span class="keyword">where</span> age &gt; <span class="number">0</span> <span class="keyword">order</span> <span class="keyword">by</span> age;</span><br></pre></td></tr></table></figure></div><p>对于上面的语句，数据库的处理顺序是：</p><ul><li><p><strong>第一步：</strong> 根据 where 条件和统计信息生成执行计划，得到数据。</p></li><li><p><strong>第二步：</strong> 将得到的数据排序。当执行处理数据（order by）时，数据库会先查看第一步的执行计划，看 order by 的字段是否在执行计划中利用了索引。如果是，则可以利用索引顺序而直接取得已经排好序的数据。如果不是，则重新进行排序操作。</p></li><li><p><strong>第三步：</strong> 返回排序后的数据。</p></li></ul><p>当 order by 中的字段出现在 where 条件中时，才会利用索引而不再二次排序，更准确的说，order by 中的字段在执行计划中利用了索引时，不用排序操作。</p><p>这个结论不仅对 order by 有效，对其他需要排序的操作也有效。比如 group by 、union 、distinct 等。</p><h4 id="⑪-正确使用-hint-优化语句"><a href="#⑪-正确使用-hint-优化语句" class="headerlink" title="⑪ 正确使用 hint 优化语句"></a>⑪ <strong>正确使用 hint 优化语句</strong></h4><p>MySQL 中可以使用 hint 指定优化器在执行时选择或忽略特定的索引。</p><p>一般而言，处于版本变更带来的表结构索引变化，更建议避免使用 hint，而是通过 Analyze table 多收集统计信息。</p><p>但在特定场合下，指定 hint 可以排除其他索引干扰而指定更优的执行计划：</p><ul><li><p>USE INDEX 在你查询语句中表名的后面，添加 USE INDEX 来提供希望 MySQL 去参考的索引列表，就可以让 MySQL 不再考虑其他可用的索引。</p><p>例子: <code>SELECT col1 FROM table USE INDEX (mod_time, name)...</code></p></li><li><p>IGNORE INDEX 如果只是单纯的想让 MySQL 忽略一个或者多个索引，可以使用 IGNORE INDEX 作为 Hint。</p><p>例子: <code>SELECT col1 FROM table IGNORE INDEX (priority) ...</code></p></li><li><p>FORCE INDEX 为强制 MySQL 使用一个特定的索引，可在查询中使用 FORCE INDEX 作为 Hint。</p><p>例子: <code>SELECT col1 FROM table FORCE INDEX (mod_time) ...</code></p></li></ul><p>在查询的时候，数据库系统会自动分析查询语句，并选择一个最合适的索引。但是很多时候，数据库系统的查询优化器并不一定总是能使用最优索引。</p><p>如果我们知道如何选择索引，可以使用 FORCE INDEX 强制查询使用指定的索引。</p><p>例如：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  *</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  students <span class="keyword">FORCE</span> <span class="keyword">INDEX</span> (idx_class_id)</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  class_id = <span class="number">1</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  <span class="keyword">id</span> <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></div><h3 id="SELECT-语句其他优化"><a href="#SELECT-语句其他优化" class="headerlink" title="SELECT 语句其他优化"></a>SELECT 语句其他优化</h3><h4 id="①-避免出现-select"><a href="#①-避免出现-select" class="headerlink" title="① 避免出现 select *"></a>① <strong>避免出现 select *</strong></h4><p>首先，select * 操作在任何类型数据库中都不是一个好的 SQL 编写习惯。</p><p>使用 select * 取出全部列，会让优化器无法完成索引覆盖扫描这类优化，会影响优化器对执行计划的选择，也会增加网络带宽消耗，更会带来额外的 I&#x2F;O，内存和 CPU 消耗。</p><p>建议提出业务实际需要的列数，将指定列名以取代 select *。具体详情见<a href="http://mp.weixin.qq.com/s?__biz=MzU5NDgyMjc0OQ==&mid=2247489808&idx=3&sn=a12f311695bf33c60e09fe8a85c50081&chksm=fe7a0a22c90d8334347c27d72a54da2aa36308bed2f39347467aee56e680fb09087f92a78178&scene=21#wechat_redirect" target="_blank" rel="noopener">为什么大家都说 SELECT * 效率低</a></p><h4 id="②-避免出现不确定结果的函数"><a href="#②-避免出现不确定结果的函数" class="headerlink" title="② 避免出现不确定结果的函数"></a>② <strong>避免出现不确定结果的函数</strong></h4><p>特定针对主从复制这类业务场景。由于原理上从库复制的是主库执行的语句，使用如 now()、rand()、sysdate()、current_user() 等不确定结果的函数很容易导致主库与从库相应的数据不一致。</p><p>另外不确定值的函数，产生的 SQL 语句无法利用 query cache。</p><h4 id="③-多表关联查询时，小表在前，大表在后"><a href="#③-多表关联查询时，小表在前，大表在后" class="headerlink" title="③ 多表关联查询时，小表在前，大表在后"></a>③ <strong>多表关联查询时，小表在前，大表在后</strong></h4><p>在 MySQL 中，执行 from 后的表关联查询是从左往右执行的（Oracle 相反），第一张表会涉及到全表扫描。</p><p>所以将小表放在前面，先扫小表，扫描快效率较高，在扫描后面的大表，或许只扫描大表的前 100 行就符合返回条件并 return 了。</p><p>例如：表 1 有 50 条数据，表 2 有 30 亿条数据；如果全表扫描表 2，你品，那就先去吃个饭再说吧是吧。</p><h4 id="④-使用表的别名"><a href="#④-使用表的别名" class="headerlink" title="④ 使用表的别名"></a>④ <strong>使用表的别名</strong></h4><p>当在 SQL 语句中连接多个表时，请使用表的别名并把别名前缀于每个列名上。这样就可以减少解析的时间并减少哪些友列名歧义引起的语法错误。</p><h4 id="⑤-用-where-字句替换-HAVING-字句"><a href="#⑤-用-where-字句替换-HAVING-字句" class="headerlink" title="⑤ 用 where 字句替换 HAVING 字句"></a>⑤ <strong>用 where 字句替换 HAVING 字句</strong></h4><p>避免使用 HAVING 字句，因为 HAVING 只会在检索出所有记录之后才对结果集进行过滤，而 where 则是在聚合前刷选记录，如果能通过 where 字句限制记录的数目，那就能减少这方面的开销。</p><p>HAVING 中的条件一般用于聚合函数的过滤，除此之外，应该将条件写在 where 字句中。</p><p>where 和 having 的区别：where 后面不能使用组函数。</p><h4 id="⑥-调整-Where-字句中的连接顺序"><a href="#⑥-调整-Where-字句中的连接顺序" class="headerlink" title="⑥ 调整 Where 字句中的连接顺序"></a>⑥ <strong>调整 Where 字句中的连接顺序</strong></h4><p>MySQL 采用从左往右，自上而下的顺序解析 where 子句。根据这个原理，应将过滤数据多的条件往前放，最快速度缩小结果集。</p><h3 id="增删改-DML-语句优化"><a href="#增删改-DML-语句优化" class="headerlink" title="增删改 DML 语句优化"></a>增删改 DML 语句优化</h3><h4 id="①-大批量插入数据"><a href="#①-大批量插入数据" class="headerlink" title="① 大批量插入数据"></a>① <strong>大批量插入数据</strong></h4><p>如果同时执行大量的插入，建议使用多个值的 INSERT 语句（方法二）。这比使用分开 INSERT 语句快（方法一），一般情况下批量插入效率有几倍的差别。</p><p>方法一：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span></span><br><span class="line">  T</span><br><span class="line"><span class="keyword">values</span></span><br><span class="line">  (<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span></span><br><span class="line">  T</span><br><span class="line"><span class="keyword">values</span></span><br><span class="line">  (<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span></span><br><span class="line">  T</span><br><span class="line"><span class="keyword">values</span></span><br><span class="line">  (<span class="number">1</span>, <span class="number">4</span>);</span><br></pre></td></tr></table></figure></div><p>方法二：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> T <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">2</span>),(<span class="number">1</span>,<span class="number">3</span>),(<span class="number">1</span>,<span class="number">4</span>);</span><br></pre></td></tr></table></figure></div><p>选择后一种方法的原因有三：</p><ul><li><p>减少 SQL 语句解析的操作，MySQL 没有类似 Oracle 的 share pool，采用方法二，只需要解析一次就能进行数据的插入操作。</p></li><li><p>在特定场景可以减少对 DB 连接次数。</p></li><li><p>SQL 语句较短，可以减少网络传输的 IO。</p></li></ul><h4 id="②-适当使用-commit"><a href="#②-适当使用-commit" class="headerlink" title="② 适当使用 commit"></a>② <strong>适当使用 commit</strong></h4><p>适当使用 commit 可以释放事务占用的资源而减少消耗，commit 后能释放的资源如下：</p><ul><li><p>事务占用的 undo 数据块。</p></li><li><p>事务在 redo log 中记录的数据块。</p></li><li><p>释放事务施加的，减少锁争用影响性能。特别是在需要使用 delete 删除大量数据的时候，必须分解删除量并定期 commit。</p></li></ul><h4 id="③-避免重复查询更新的数据"><a href="#③-避免重复查询更新的数据" class="headerlink" title="③ 避免重复查询更新的数据"></a>③ <strong>避免重复查询更新的数据</strong></h4><p>针对业务中经常出现的更新行同时又希望获得改行信息的需求，MySQL 并不支持 PostgreSQL 那样的 UPDATE RETURNING 语法，在 MySQL 中可以通过变量实现。</p><p>例如，更新一行记录的时间戳，同时希望查询当前记录中存放的时间戳是什么？</p><p>简单方法实现：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Update</span></span><br><span class="line">  t1</span><br><span class="line"><span class="keyword">set</span></span><br><span class="line">  <span class="built_in">time</span> = <span class="keyword">now</span>()</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  col1 = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">Select</span></span><br><span class="line">  <span class="built_in">time</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  t1</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  <span class="keyword">id</span> = <span class="number">1</span>;</span><br></pre></td></tr></table></figure></div><p>使用变量，可以重写为以下方式：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Update</span></span><br><span class="line">  t1</span><br><span class="line"><span class="keyword">set</span></span><br><span class="line">  <span class="built_in">time</span> = <span class="keyword">now</span> ()</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  col1 = <span class="number">1</span></span><br><span class="line">  <span class="keyword">and</span> @ <span class="keyword">now</span>: = <span class="keyword">now</span> ();</span><br><span class="line"></span><br><span class="line"><span class="keyword">Select</span></span><br><span class="line">  @ <span class="keyword">now</span>;</span><br></pre></td></tr></table></figure></div><p>前后二者都需要两次网络来回，但使用变量避免了再次访问数据表，特别是当 t1 表数据量较大时，后者比前者快很多。</p><h4 id="④-查询优先还是更新（insert、update、delete）优先"><a href="#④-查询优先还是更新（insert、update、delete）优先" class="headerlink" title="④ 查询优先还是更新（insert、update、delete）优先"></a>④ <strong>查询优先还是更新（insert、update、delete）优先</strong></h4><p>MySQL 还允许改变语句调度的优先级，它可以使来自多个客户端的查询更好地协作，这样单个客户端就不会由于锁定而等待很长时间。改变优先级还可以确保特定类型的查询被处理得更快。</p><p>我们首先应该确定应用的类型，判断应用是以查询为主还是以更新为主的，是确保查询效率还是确保更新的效率，决定是查询优先还是更新优先。</p><p>下面我们提到的改变调度策略的方法主要是针对只存在表锁的存储引擎，比如  MyISAM 、MEMROY、MERGE，对于 Innodb 存储引擎，语句的执行是由获得行锁的顺序决定的。</p><p>MySQL 的默认的调度策略可用总结如下：</p><ul><li><p>写入操作优先于读取操作。</p></li><li><p>对某张数据表的写入操作某一时刻只能发生一次，写入请求按照它们到达的次序来处理。</p></li><li><p>对某张数据表的多个读取操作可以同时地进行。</p></li></ul><p>MySQL 提供了几个语句调节符，允许你修改它的调度策略：</p><ul><li><p>LOW_PRIORITY 关键字应用于 DELETE、INSERT、LOAD DATA、REPLACE 和 UPDATE。</p></li><li><p>HIGH_PRIORITY 关键字应用于 SELECT 和 INSERT 语句。</p></li><li><p>DELAYED 关键字应用于 INSERT 和 REPLACE 语句。</p></li></ul><p>如果写入操作是一个 LOW_PRIORITY（低优先级）请求，那么系统就不会认为它的优先级高于读取操作。</p><p>在这种情况下，如果写入者在等待的时候，第二个读取者到达了，那么就允许第二个读取者插到写入者之前。</p><p>只有在没有其它的读取者的时候，才允许写入者开始操作。这种调度修改可能存在 LOW_PRIORITY 写入操作永远被阻塞的情况。</p><p>SELECT 查询的 HIGH_PRIORITY（高优先级）关键字也类似。它允许 SELECT 插入正在等待的写入操作之前，即使在正常情况下写入操作的优先级更高。</p><p>另外一种影响是，高优先级的 SELECT 在正常的 SELECT 语句之前执行，因为这些语句会被写入操作阻塞。</p><p>如果希望所有支持 LOW_PRIORITY 选项的语句都默认地按照低优先级来处理，那么请使用–low-priority-updates 选项来启动服务器。</p><p>通过使用 INSERTHIGH_PRIORITY 来把 INSERT 语句提高到正常的写入优先级，可以消除该选项对单个 INSERT 语句的影响。</p><h3 id="查询条件优化"><a href="#查询条件优化" class="headerlink" title="查询条件优化"></a>查询条件优化</h3><h4 id="①-对于复杂的查询，可以使用中间临时表暂存数据"><a href="#①-对于复杂的查询，可以使用中间临时表暂存数据" class="headerlink" title="① 对于复杂的查询，可以使用中间临时表暂存数据"></a>① <strong>对于复杂的查询，可以使用中间临时表暂存数据</strong></h4><h4 id="②-优化-group-by-语句"><a href="#②-优化-group-by-语句" class="headerlink" title="② 优化 group by 语句"></a>② <strong>优化 group by 语句</strong></h4><p>默认情况下，MySQL 会对 GROUP BY 分组的所有值进行排序，如 “GROUP BY col1，col2，….;” 查询的方法如同在查询中指定 “ORDER BY col1，col2，…;” 。</p><p>如果显式包括一个包含相同的列的 ORDER BY 子句，MySQL 可以毫不减速地对它进行优化，尽管仍然进行排序。</p><p>因此，如果查询包括 GROUP BY 但你并不想对分组的值进行排序，你可以指定 ORDER BY NULL 禁止排序。</p><p>例如：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  col1,</span><br><span class="line">  col2,</span><br><span class="line">  <span class="keyword">COUNT</span>(*)</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  <span class="keyword">table</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  col1,</span><br><span class="line">  col2</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure></div><h4 id="③-优化-join-语句"><a href="#③-优化-join-语句" class="headerlink" title="③ 优化 join 语句"></a>③ <strong>优化 join 语句</strong></h4><p>MySQL 中可以通过子查询来使用 SELECT 语句来创建一个单列的查询结果，然后把这个结果作为过滤条件用在另一个查询中。</p><p>使用子查询可以一次性的完成很多逻辑上需要多个步骤才能完成的 SQL 操作，同时也可以避免事务或者表锁死，并且写起来也很容易。但是，有些情况下，子查询可以被更有效率的连接（JOIN）..替代。</p><p>例子：假设要将所有没有订单记录的用户取出来，可以用下面这个查询完成：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  col1</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  customerinfo</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  CustomerID <span class="keyword">NOT</span> <span class="keyword">in</span> (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">      CustomerID</span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">      salesinfo</span><br><span class="line">  )</span><br></pre></td></tr></table></figure></div><p>如果使用连接（JOIN）..来完成这个查询工作，速度将会有所提升。</p><p>尤其是当 salesinfo 表中对 CustomerID 建有索引的话，性能将会更好，查询如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  col1</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  customerinfo</span><br><span class="line">  <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> salesinfoON customerinfo.CustomerID = salesinfo.CustomerID</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  salesinfo.CustomerID <span class="keyword">IS</span> <span class="literal">NULL</span></span><br></pre></td></tr></table></figure></div><p>连接（JOIN）..之所以更有效率一些，是因为 MySQL 不需要在内存中创建临时表来完成这个逻辑上的需要两个步骤的查询工作。</p><h4 id="④-优化-union-查询"><a href="#④-优化-union-查询" class="headerlink" title="④ 优化 union 查询"></a>④ <strong>优化 union 查询</strong></h4><p>MySQL 通过创建并填充临时表的方式来执行 union 查询。除非确实要消除重复的行，否则建议使用 union all。</p><p>原因在于如果没有 all 这个关键词，MySQL 会给临时表加上 distinct 选项，这会导致对整个临时表的数据做唯一性校验，这样做的消耗相当高。</p><p>高效：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  COL1,</span><br><span class="line">  COL2,</span><br><span class="line">  COL3</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  <span class="keyword">TABLE</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  COL1 = <span class="number">10</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  COL1,</span><br><span class="line">  COL2,</span><br><span class="line">  COL3</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  <span class="keyword">TABLE</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  COL3 = <span class="string">'TEST'</span>;</span><br></pre></td></tr></table></figure></div><p>低效：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  COL1,</span><br><span class="line">  COL2,</span><br><span class="line">  COL3</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  <span class="keyword">TABLE</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  COL1 = <span class="number">10</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  COL1,</span><br><span class="line">  COL2,</span><br><span class="line">  COL3</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  <span class="keyword">TABLE</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  COL3 = <span class="string">'TEST'</span>;</span><br></pre></td></tr></table></figure></div><h4 id="⑤-拆分复杂-SQL-为多个小-SQL，避免大事务"><a href="#⑤-拆分复杂-SQL-为多个小-SQL，避免大事务" class="headerlink" title="⑤ 拆分复杂 SQL 为多个小 SQL，避免大事务"></a>⑤ <strong>拆分复杂 SQL 为多个小 SQL，避免大事务</strong></h4><p>如下：</p><ul><li><p>简单的 SQL 容易使用到 MySQL 的 QUERY CACHE。</p></li><li><p>减少锁表时间特别是使用 MyISAM 存储引擎的表。</p></li><li><p>可以使用多核 CPU。</p></li></ul><h4 id="⑥-使用-truncate-代替-delete"><a href="#⑥-使用-truncate-代替-delete" class="headerlink" title="⑥ 使用 truncate 代替 delete"></a>⑥ <strong>使用 truncate 代替 delete</strong></h4><p>当删除全表中记录时，使用 delete 语句的操作会被记录到 undo 块中，删除记录也记录 binlog。</p><p>当确认需要删除全表时，会产生很大量的 binlog 并占用大量的 undo 数据块，此时既没有很好的效率也占用了大量的资源。</p><p>使用 truncate 替代，不会记录可恢复的信息，数据不能被恢复。也因此使用 truncate 操作有其极少的资源占用与极快的时间。另外，使用 truncate 可以回收表的水位，使自增字段值归零。</p><h4 id="⑦-使用合理的分页方式以提高分页效率"><a href="#⑦-使用合理的分页方式以提高分页效率" class="headerlink" title="⑦ 使用合理的分页方式以提高分页效率"></a>⑦ <strong>使用合理的分页方式以提高分页效率</strong></h4><p>使用合理的分页方式以提高分页效率 针对展现等分页需求，合适的分页方式能够提高分页的效率。</p><p>案例 1：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  *</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  t</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  thread_id = <span class="number">10000</span></span><br><span class="line">  <span class="keyword">and</span> deleted = <span class="number">0</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">  gmt_create <span class="keyword">asc</span></span><br><span class="line"><span class="keyword">limit</span></span><br><span class="line">  <span class="number">0</span>, <span class="number">15</span>;</span><br></pre></td></tr></table></figure></div><p>上述例子通过一次性根据过滤条件取出所有字段进行排序返回。数据访问开销&#x3D;索引 IO+索引全部记录结果对应的表数据 IO。</p><p>因此，该种写法越翻到后面执行效率越差，时间越长，尤其表数据量很大的时候。</p><p>适用场景：当中间结果集很小（10000 行以下）或者查询条件复杂（指涉及多个不同查询字段或者多表连接）时适用。</p><p>案例 2：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  t.*</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">      <span class="keyword">id</span></span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">      t</span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">      thread_id = <span class="number">10000</span></span><br><span class="line">      <span class="keyword">and</span> deleted = <span class="number">0</span></span><br><span class="line">    <span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">      gmt_create <span class="keyword">asc</span></span><br><span class="line">    <span class="keyword">limit</span></span><br><span class="line">      <span class="number">0</span>, <span class="number">15</span></span><br><span class="line">  ) a,</span><br><span class="line">  t</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  a.id = t.id;</span><br></pre></td></tr></table></figure></div><p>上述例子必须满足 t 表主键是 id 列，且有覆盖索引 secondary key：（thread_id, deleted, gmt_create）。</p><p>通过先根据过滤条件利用覆盖索引取出主键 id 进行排序，再进行 join 操作取出其他字段。</p><p>数据访问开销&#x3D;索引 IO+索引分页后结果（例子中是 15 行）对应的表数据 IO。因此，该写法每次翻页消耗的资源和时间都基本相同，就像翻第一页一样。</p><p><strong>适用场景：</strong> 当查询和排序字段（即 where 子句和 order by 子句涉及的字段）有对应覆盖索引时，且中间结果集很大的情况时适用。</p><h3 id="建表优化"><a href="#建表优化" class="headerlink" title="建表优化"></a>建表优化</h3><p>① <strong>在表中建立索引，优先考虑 where、order by 使用到的字段。</strong></p><p>② <strong>尽量使用数字型字段（如性别，男：1 女：2），若只含数值信息的字段尽量不要设计为字符型，这会降低查询和连接的性能，并会增加存储开销。</strong></p><p>这是因为引擎在处理查询和连接时会 逐个比较字符串中每一个字符，而对于数字型而言只需要比较一次就够了。</p><p>③ <strong>查询数据量大的表 会造成查询缓慢。主要的原因是扫描行数过多。这个时候可以通过程序，分段分页进行查询，循环遍历，将结果合并处理进行展示。</strong></p><p>要查询 100000 到 100050 的数据，如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  *</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">      ROW_NUMBER() <span class="keyword">OVER</span>(</span><br><span class="line">        <span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">          <span class="keyword">ID</span> <span class="keyword">ASC</span></span><br><span class="line">      ) <span class="keyword">rowid</span>,</span><br><span class="line">      *</span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">      infoTab</span><br><span class="line">  ) t</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  t.rowid &gt; <span class="number">100000</span></span><br><span class="line">  <span class="keyword">AND</span> t.rowid &lt;= <span class="number">100050</span></span><br></pre></td></tr></table></figure></div><p>④ <strong>用 varchar&#x2F;nvarchar 代替 char&#x2F;nchar。</strong></p><p>尽可能的使用 varchar&#x2F;nvarchar 代替 char&#x2F;nchar ，因为首先变长字段存储空间小，可以节省存储空间，其次对于查询来说，在一个相对较小的字段内搜索效率显然要高些。</p><p>不要以为 NULL 不需要空间，比如：char(100) 型，在字段建立时，空间就固定了， 不管是否插入值（NULL 也包含在内），都是占用 100 个字符的空间的，如果是 varchar 这样的变长字段， null 不占用空间。</p><p><em>作者：</em>_陈哈哈</p><p><em>出处：<a href="https://sohu.gg/FGG98i" target="_blank" rel="noopener">https://sohu.gg/FGG98i</a></em></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;/images/bg.jpg&quot; alt=&quot;SQL优化&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    
    <category term="SQL" scheme="https://xiaoyan94.github.io/tags/SQL/"/>
    
    <category term="转载" scheme="https://xiaoyan94.github.io/tags/%E8%BD%AC%E8%BD%BD/"/>
    
  </entry>
  
  <entry>
    <title>SQL学习笔记</title>
    <link href="https://xiaoyan94.github.io/2022/08/27/SQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>https://xiaoyan94.github.io/2022/08/27/SQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2022-08-27T01:26:20.000Z</published>
    <updated>2025-02-25T01:47:17.340Z</updated>
    
    <content type="html"><![CDATA[<ul><li><a href="#sql%E5%9F%BA%E7%A1%80%E5%87%BD%E6%95%B0%E7%94%A8%E6%B3%95">sql基础函数用法</a><ul><li><a href="#round%E5%87%BD%E6%95%B0-%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5%E4%BF%9D%E7%95%99%E5%B0%8F%E6%95%B0">round函数 四舍五入保留小数</a></li><li><a href="#limit%E5%85%B3%E9%94%AE%E5%AD%97">limit关键字</a><ul><li><a href="#top%E5%85%B3%E9%94%AE%E5%AD%97">top关键字</a></li><li><a href="#limit">limit</a></li><li><a href="#rownum">rownum</a></li><li><a href="#%E5%9C%A8-sql-server-%E4%B8%AD%E5%AE%9E%E7%8E%B0-limit-m-n-%E7%9A%84%E5%8A%9F%E8%83%BD">在 sql server 中实现 limit m, n 的功能</a></li></ul></li><li><a href="#left%E5%87%BD%E6%95%B0-right%E5%87%BD%E6%95%B0-%E4%B8%8Eoracle%E4%B8%AD%E7%9A%84substr%E5%87%BD%E6%95%B0">left函数 right函数 与oracle中的substr函数</a></li></ul></li></ul><a id="more"></a><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">String result &#x3D; &quot;嗯，不错，&quot;;</span><br><span class="line">if (&quot;SQL 优化经验足&quot;) &#123;</span><br><span class="line">    if (&quot;熟悉事务锁&quot;) &#123;</span><br><span class="line">        if (&quot;并发场景处理 666&quot;) &#123;</span><br><span class="line">            if (&quot;会打王者荣耀&quot;) &#123;</span><br><span class="line">                result +&#x3D; &quot;明天入职&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    result +&#x3D; &quot;先回去等消息吧&quot;;</span><br><span class="line">&#125;</span><br><span class="line">Logger.info (&quot;面试官：&quot; + result );</span><br></pre></td></tr></table></figure></div><h2 id="sql基础函数用法"><a href="#sql基础函数用法" class="headerlink" title="sql基础函数用法"></a>sql基础函数用法</h2><h3 id="round函数-四舍五入保留小数"><a href="#round函数-四舍五入保留小数" class="headerlink" title="round函数 四舍五入保留小数"></a>round函数 四舍五入保留小数</h3><p>保留一位小数</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  gender,</span><br><span class="line">  university,</span><br><span class="line">  <span class="keyword">count</span>(<span class="number">1</span>) user_num,</span><br><span class="line">  <span class="keyword">round</span>(<span class="keyword">avg</span>(active_days_within_30),<span class="number">1</span>) avg_active_day,</span><br><span class="line">  <span class="keyword">round</span>(<span class="keyword">avg</span>(question_cnt),<span class="number">1</span>) avg_question_cnt</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  user_profile</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">  gender,</span><br><span class="line">  university</span><br></pre></td></tr></table></figure></div><h3 id="limit关键字"><a href="#limit关键字" class="headerlink" title="limit关键字"></a>limit关键字</h3><p>在 SQL Server 中替代 MySQL 中的 limit 关键字</p><h4 id="top关键字"><a href="#top关键字" class="headerlink" title="top关键字"></a>top关键字</h4><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TOP n <span class="keyword">FROM</span> <span class="keyword">table</span></span><br></pre></td></tr></table></figure></div><p>TOP <code>n</code>: 指定从查询结果集中输出前 n 行，n 是介于 0 - 4294967295 之间的整数(只可以在 sql server 数据库中使用)</p><p>eg：<code>SELECT TOP 5 FROM table1</code></p><p>查询结果：从 table1 中拿到前 5 条数据</p><h4 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h4><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">LIMIT</span> n</span><br></pre></td></tr></table></figure></div><p>LIMIT <code>n</code>: 指定从查询结果集中输出前 n 行。(只可以在 Mysql 数据库中使用)</p><p>eg: <code>SELECT * FROM table1 LIMIT 10</code></p><p>查询结果：从 table1 中拿到前 10 条数据</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">LIMIT</span> a,b</span><br></pre></td></tr></table></figure></div><p><code>LIMIT a,b</code>: a 是开始读取的第一条记录的编号(是从 0 开始计算编号，比如：a&#x3D;2，则是从第三条开始计算)，b 是要查询记录的个数。(只可以在 Mysql 数据库中使用)</p><p>eg: <code>SELECT * FROM table1 LIMIT 2,5</code></p><p>查询结果：从 table1 中拿到第 3 条开始之后的 5 条数据 (一共 5 条数据)</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">LIMIT</span> n <span class="keyword">OFFSET</span> m</span><br></pre></td></tr></table></figure></div><p><code>LIMIT n OFFSET m</code>: n 是查询的行数，m 是查询的初始位置(是从 0 开始计算编号，比如：m&#x3D;2，则是从第三条开始计算)。</p><p>eg: <code>SELECT * FROM table1 LIMIT 2 OFFSET 3</code></p><p>查询结果:从 table1 中拿到第 4 条开始之后的 2 条数据 (一共 2 条数据)</p><h4 id="rownum"><a href="#rownum" class="headerlink" title="rownum"></a>rownum</h4><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">WHERE</span> <span class="keyword">ROWNUM</span> &lt;= n</span><br></pre></td></tr></table></figure></div><p><code>ROWNUM &lt;= n</code>: 配合 where 使用，指定从查询结果集中输出前 n 行 (只可以在 Oracle 数据库中使用)</p><p>eg: <code>SELECT * FROM table1 WHERE ROWNUM &lt;= 20</code></p><p>查询结果:从 table1 中拿到前 20 条数据</p><p>总结：<strong>sql server、mysql、orcale 数据库用方法是不同的，要区别使用</strong></p><h4 id="在-sql-server-中实现-limit-m-n-的功能"><a href="#在-sql-server-中实现-limit-m-n-的功能" class="headerlink" title="在 sql server 中实现 limit m, n 的功能"></a>在 sql server 中实现 limit m, n 的功能</h4><p>在 MySQL 中，可以用 Limit 来查询第 m 列到第 n 列的记录，例如：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tablename <span class="keyword">limit</span> m, n</span><br></pre></td></tr></table></figure></div><p>但是，在 SQL Server 中，不支持 Limit 语句。怎么办呢？</p><p>解决方案：<br>虽然 SQL Server 不支持 Limit ，但是它支持 TOP。<br>我们以 SQL Server 2005 为例，就以它自带的示范数据库 AdventureWorks 作为测试数据：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> tablename</span><br></pre></td></tr></table></figure></div><p>如果要查询上述结果中前 6 条记录，则相应的 SQL 语句是：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> top <span class="number">6</span> <span class="keyword">id</span> <span class="keyword">from</span> tablename</span><br></pre></td></tr></table></figure></div><p>如果要查询上述结果中第 7 条到第 9 条记录，则相应的 SQL 语句是：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  top <span class="number">3</span> <span class="keyword">as</span> <span class="keyword">id</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  tablenamewhere <span class="keyword">id</span> <span class="keyword">not</span> <span class="keyword">in</span> (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">      top <span class="number">6</span> <span class="keyword">as</span> <span class="keyword">id</span></span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">      tablename</span><br><span class="line">  )</span><br></pre></td></tr></table></figure></div><p>取第 m 条到第 n 条记录：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  top (n - m + <span class="number">1</span>) <span class="keyword">id</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  tablenamewhere <span class="keyword">id</span> <span class="keyword">not</span> <span class="keyword">in</span> (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">      top m <span class="number">-1</span> <span class="keyword">as</span> <span class="keyword">id</span></span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">      tablename</span><br><span class="line">  )</span><br></pre></td></tr></table></figure></div><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  top @ pageSize <span class="keyword">as</span> <span class="keyword">id</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  tablenamewhere <span class="keyword">id</span> <span class="keyword">not</span> <span class="keyword">in</span> (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">      top @</span><br><span class="line">    <span class="keyword">offset</span></span><br><span class="line">      <span class="keyword">id</span></span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">      tablename</span><br><span class="line">  )</span><br></pre></td></tr></table></figure></div><h3 id="left函数-right函数-与oracle中的substr函数"><a href="#left函数-right函数-与oracle中的substr函数" class="headerlink" title="left函数 right函数 与oracle中的substr函数"></a>left函数 right函数 与oracle中的substr函数</h3><p>从字符串左边或右边开始截取指定数量的字符</p><p>在SQL Server中：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">left</span>(<span class="string">'Hello world!'</span>,<span class="number">8</span>); <span class="comment">--输出 'Hello wo'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">right</span>(N<span class="string">'Hello world!你好世界！'</span>,<span class="number">8</span>); <span class="comment">--输出 'ld!你好世界！'</span></span><br></pre></td></tr></table></figure></div><p>Oracle：</p><p>Oracle 中实现left、right函数使用substr函数。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">substr</span>(<span class="string">'Hello world!'</span>,<span class="number">0</span>,<span class="number">8</span>) <span class="keyword">from</span> dual; <span class="comment">--Hello wo</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">substr</span>(<span class="string">'Hello world!'</span>,<span class="number">1</span>,<span class="number">8</span>) <span class="keyword">from</span> dual; <span class="comment">--Hello wo</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">substr</span>(<span class="string">'Hello world!'</span>,<span class="number">2</span>,<span class="number">8</span>) <span class="keyword">from</span> dual; <span class="comment">--ello wor</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">substr</span>(<span class="string">'Hello world!你好世界！'</span>,<span class="number">8</span>,<span class="number">8</span>) <span class="keyword">from</span> dual; <span class="comment">--orld!你好世</span></span><br></pre></td></tr></table></figure></div><p>注意position参数不是下标从0开始，而是从1开始，代表第几个字符。在Oracle的substr函数中，position参数为0、为1时结果一样，因为position为0是被看作1来处理的。</p>]]></content>
    
    
    <summary type="html">&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#sql%E5%9F%BA%E7%A1%80%E5%87%BD%E6%95%B0%E7%94%A8%E6%B3%95&quot;&gt;sql基础函数用法&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#round%E5%87%BD%E6%95%B0-%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5%E4%BF%9D%E7%95%99%E5%B0%8F%E6%95%B0&quot;&gt;round函数 四舍五入保留小数&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#limit%E5%85%B3%E9%94%AE%E5%AD%97&quot;&gt;limit关键字&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#top%E5%85%B3%E9%94%AE%E5%AD%97&quot;&gt;top关键字&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#limit&quot;&gt;limit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#rownum&quot;&gt;rownum&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%9C%A8-sql-server-%E4%B8%AD%E5%AE%9E%E7%8E%B0-limit-m-n-%E7%9A%84%E5%8A%9F%E8%83%BD&quot;&gt;在 sql server 中实现 limit m, n 的功能&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#left%E5%87%BD%E6%95%B0-right%E5%87%BD%E6%95%B0-%E4%B8%8Eoracle%E4%B8%AD%E7%9A%84substr%E5%87%BD%E6%95%B0&quot;&gt;left函数 right函数 与oracle中的substr函数&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    
    <category term="SQL" scheme="https://xiaoyan94.github.io/tags/SQL/"/>
    
    <category term="数据库" scheme="https://xiaoyan94.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>VSCode终端提示Shell集成无法激活的解决方法</title>
    <link href="https://xiaoyan94.github.io/2022/08/26/VSCode%E7%BB%88%E7%AB%AF%E6%8F%90%E7%A4%BAShell%E9%9B%86%E6%88%90%E6%97%A0%E6%B3%95%E6%BF%80%E6%B4%BB%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
    <id>https://xiaoyan94.github.io/2022/08/26/VSCode%E7%BB%88%E7%AB%AF%E6%8F%90%E7%A4%BAShell%E9%9B%86%E6%88%90%E6%97%A0%E6%B3%95%E6%BF%80%E6%B4%BB%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</id>
    <published>2022-08-26T06:16:31.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p><img src="/2022/08/26/VSCode%E7%BB%88%E7%AB%AF%E6%8F%90%E7%A4%BAShell%E9%9B%86%E6%88%90%E6%97%A0%E6%B3%95%E6%BF%80%E6%B4%BB%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/2022-08-26-14-21-56.png" alt="Shell 集成无法激活"></p><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><a id="more"></a><p>不同的终端设置方式不同。</p><p>首先设置 <code>settings.json</code> 文件，添加如下设置</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"terminal.integrated.shellIntegration.enabled":false,</span><br></pre></td></tr></table></figure><h3 id="bash"><a href="#bash" class="headerlink" title="bash"></a>bash</h3><p>Add the following to your <code>~/.bashrc</code> file. Run <code>code ~/.bashrc</code> in bash to open the file in VS Code.</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[ <span class="string">"<span class="variable">$TERM_PROGRAM</span>"</span> == <span class="string">"vscode"</span> ]] &amp;&amp; . <span class="string">"<span class="variable">$(code --locate-shell-integration-path bash)</span>"</span></span><br></pre></td></tr></table></figure></div><p>重启终端，结果如下：</p><p><img src="/2022/08/26/VSCode%E7%BB%88%E7%AB%AF%E6%8F%90%E7%A4%BAShell%E9%9B%86%E6%88%90%E6%97%A0%E6%B3%95%E6%BF%80%E6%B4%BB%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/2022-08-26-14-28-00.png" alt="bash已激活Shell集成"></p><p>参考官方文档：<a href="https://code.visualstudio.com/docs/terminal/shell-integration#_manual-installation" target="_blank" rel="noopener">https://code.visualstudio.com/docs/terminal/shell-integration#_manual-installation</a></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;问题描述&quot;&gt;&lt;a href=&quot;#问题描述&quot; class=&quot;headerlink&quot; title=&quot;问题描述&quot;&gt;&lt;/a&gt;问题描述&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/2022/08/26/VSCode%E7%BB%88%E7%AB%AF%E6%8F%90%E7%A4%BAShell%E9%9B%86%E6%88%90%E6%97%A0%E6%B3%95%E6%BF%80%E6%B4%BB%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/2022-08-26-14-21-56.png&quot; alt=&quot;Shell 集成无法激活&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;解决方法&quot;&gt;&lt;a href=&quot;#解决方法&quot; class=&quot;headerlink&quot; title=&quot;解决方法&quot;&gt;&lt;/a&gt;解决方法&lt;/h2&gt;</summary>
    
    
    
    
    <category term="VSCode" scheme="https://xiaoyan94.github.io/tags/VSCode/"/>
    
  </entry>
  
  <entry>
    <title>MacOS 安装 PowerLine 字体并在 VSCode 和 iTerm zsh 终端里设置字体解决乱码问题</title>
    <link href="https://xiaoyan94.github.io/2022/08/25/MacOS-%E5%AE%89%E8%A3%85-PowerLine-%E5%AD%97%E4%BD%93%E5%B9%B6%E5%9C%A8-VSCode-%E5%92%8C-iTerm-zsh-%E7%BB%88%E7%AB%AF%E9%87%8C%E8%AE%BE%E7%BD%AE%E5%AD%97%E4%BD%93%E8%A7%A3%E5%86%B3%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98/"/>
    <id>https://xiaoyan94.github.io/2022/08/25/MacOS-%E5%AE%89%E8%A3%85-PowerLine-%E5%AD%97%E4%BD%93%E5%B9%B6%E5%9C%A8-VSCode-%E5%92%8C-iTerm-zsh-%E7%BB%88%E7%AB%AF%E9%87%8C%E8%AE%BE%E7%BD%AE%E5%AD%97%E4%BD%93%E8%A7%A3%E5%86%B3%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98/</id>
    <published>2022-08-25T15:14:04.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="macOS-安装字体"><a href="#macOS-安装字体" class="headerlink" title="macOS 安装字体"></a>macOS 安装字体</h2><ol><li><p>以下载安装 PowerLine 字体为例，下载仓库为 <a href="https://github.com/powerline/fonts" target="_blank" rel="noopener">https://github.com/powerline/fonts</a></p> <div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> \</span><br><span class="line">--depth 1 \</span><br><span class="line">--filter=blob:none \</span><br><span class="line">--no-checkout \</span><br><span class="line">https://github.com/powerline/fonts \ <span class="comment"># 仓库地址</span></span><br><span class="line">;</span><br><span class="line"><span class="built_in">cd</span> fonts</span><br><span class="line">git checkout master Meslo\ Dotted</span><br><span class="line">git checkout master Meslo\ Slashed</span><br></pre></td></tr></table></figure></div></li><li><p>进入字体文件夹，可以手动打开字体ttf文件进行安装，亦可以批量安装</p> <div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> Meslo\ Dotted</span><br><span class="line">ll *.ttf</span><br><span class="line">cp *.ttf ~/Library/Fonts</span><br></pre></td></tr></table></figure></div><p> <img src="/2022/08/25/MacOS-%E5%AE%89%E8%A3%85-PowerLine-%E5%AD%97%E4%BD%93%E5%B9%B6%E5%9C%A8-VSCode-%E5%92%8C-iTerm-zsh-%E7%BB%88%E7%AB%AF%E9%87%8C%E8%AE%BE%E7%BD%AE%E5%AD%97%E4%BD%93%E8%A7%A3%E5%86%B3%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98/2022-08-25-23-26-42.png" alt="macOS 批量安装字体"></p></li></ol><h2 id="VSCode-设置里的终端字体修改"><a href="#VSCode-设置里的终端字体修改" class="headerlink" title="VSCode 设置里的终端字体修改"></a>VSCode 设置里的终端字体修改</h2><p>VSCode 用户设置部分，编辑 <code>settings.json</code> 文件</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">"terminal.integrated.fontFamily": "Meslo LG L DZ for Powerline", // 需安装字体</span><br><span class="line">"terminal.integrated.defaultProfile.osx": "zsh",</span><br><span class="line">"terminal.external.osxExec": "iTerm.app",</span><br><span class="line">"terminal.integrated.profiles.osx": &#123;</span><br><span class="line">    "zsh": &#123;</span><br><span class="line">        "path": "/bin/zsh",</span><br><span class="line">        "args": ["-l"], // 若为空数组 [], 则环境变量有问题；为 ["-l"] 或则不配置 "args" 参数</span><br><span class="line">        "icon": "terminal-powershell"</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">"settingsSync.ignoredSettings": [</span><br><span class="line">    <span class="string">"terminal.integrated.fontFamily"</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><blockquote><p>ps：需要确保指定字体已安装，且字体名称正确。（注意: 字体文件名和字体名称可能不同）</p></blockquote><h2 id="iTerm-终端字体"><a href="#iTerm-终端字体" class="headerlink" title="iTerm 终端字体"></a>iTerm 终端字体</h2><p>iTerm 终端的字体设置方法比较简单</p><p><img src="/2022/08/25/MacOS-%E5%AE%89%E8%A3%85-PowerLine-%E5%AD%97%E4%BD%93%E5%B9%B6%E5%9C%A8-VSCode-%E5%92%8C-iTerm-zsh-%E7%BB%88%E7%AB%AF%E9%87%8C%E8%AE%BE%E7%BD%AE%E5%AD%97%E4%BD%93%E8%A7%A3%E5%86%B3%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98/2022-08-25-23-43-10.png" alt="iTerm 终端的字体设置"></p><hr>]]></content>
    
    
      
      
    <summary type="html"></summary>
      
    
    
    
    
    <category term="macOS" scheme="https://xiaoyan94.github.io/tags/macOS/"/>
    
    <category term="终端" scheme="https://xiaoyan94.github.io/tags/%E7%BB%88%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>Github 只克隆/下载/同步部分指定文件夹的方法</title>
    <link href="https://xiaoyan94.github.io/2022/08/25/Github-%E5%8F%AA%E5%85%8B%E9%9A%86-%E4%B8%8B%E8%BD%BD-%E5%90%8C%E6%AD%A5%E9%83%A8%E5%88%86%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E6%96%B9%E6%B3%95/"/>
    <id>https://xiaoyan94.github.io/2022/08/25/Github-%E5%8F%AA%E5%85%8B%E9%9A%86-%E4%B8%8B%E8%BD%BD-%E5%90%8C%E6%AD%A5%E9%83%A8%E5%88%86%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E6%96%B9%E6%B3%95/</id>
    <published>2022-08-25T14:39:42.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>需要从 <a href="https://github.com/powerline/fonts" target="_blank" rel="noopener">GitHub 仓库</a> 安装 PowerLine 系列字体，然而字体太多，不想全部克隆下来，又不想一个一个下载单个文件。</p><a id="more"></a><h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><ol><li><p>终端输入以下命令，克隆仓库</p> <div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> \</span><br><span class="line">--depth 1 \</span><br><span class="line">--filter=blob:none \</span><br><span class="line">--no-checkout \</span><br><span class="line">https://github.com/powerline/fonts \ <span class="comment"># 仓库地址</span></span><br></pre></td></tr></table></figure></div><blockquote><p>ps: 不包含任何文件，只包含仓库索引文件）</p></blockquote></li><li><p>进入克隆的仓库</p> <div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> fonts</span><br></pre></td></tr></table></figure></div></li><li><p>克隆远程仓库里的指定文件夹</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout master Meslo\ Dotted</span><br><span class="line">git checkout master Meslo\ Slashed</span><br></pre></td></tr></table></figure></div></li><li><p>查看</p><p> <img src="/2022/08/25/Github-%E5%8F%AA%E5%85%8B%E9%9A%86-%E4%B8%8B%E8%BD%BD-%E5%90%8C%E6%AD%A5%E9%83%A8%E5%88%86%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E6%96%B9%E6%B3%95/2022-08-25-23-08-30.png" alt="只从 GitHub 上克隆指定文件夹"></p></li></ol><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://blog.csdn.net/fjh1997/article/details/110074907" target="_blank" rel="noopener">最新git clone 克隆部分文件的方法</a></p><hr>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h2&gt;&lt;p&gt;需要从 &lt;a href=&quot;https://github.com/powerline/fonts&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GitHub 仓库&lt;/a&gt; 安装 PowerLine 系列字体，然而字体太多，不想全部克隆下来，又不想一个一个下载单个文件。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Github" scheme="https://xiaoyan94.github.io/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>SQL中Max函数查询效率问题与优化</title>
    <link href="https://xiaoyan94.github.io/2022/08/25/SQL%E4%B8%ADMax%E5%87%BD%E6%95%B0%E6%9F%A5%E8%AF%A2%E6%95%88%E7%8E%87%E9%97%AE%E9%A2%98%E4%B8%8E%E4%BC%98%E5%8C%96/"/>
    <id>https://xiaoyan94.github.io/2022/08/25/SQL%E4%B8%ADMax%E5%87%BD%E6%95%B0%E6%9F%A5%E8%AF%A2%E6%95%88%E7%8E%87%E9%97%AE%E9%A2%98%E4%B8%8E%E4%BC%98%E5%8C%96/</id>
    <published>2022-08-25T01:37:52.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQL中使用order-by-…-limit-1替换Max函数"><a href="#MySQL中使用order-by-…-limit-1替换Max函数" class="headerlink" title="MySQL中使用order by … limit 1替换Max函数"></a>MySQL中使用order by … limit 1替换Max函数</h2><p>测试环境：</p><p><img src="/2022/08/25/SQL%E4%B8%ADMax%E5%87%BD%E6%95%B0%E6%9F%A5%E8%AF%A2%E6%95%88%E7%8E%87%E9%97%AE%E9%A2%98%E4%B8%8E%E4%BC%98%E5%8C%96/%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83.png" alt="测试环境"></p><p>测试Sql：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(sscode) <span class="keyword">from</span> sm_sku_show <span class="keyword">where</span> del_flag = <span class="string">"0"</span>;</span><br><span class="line"><span class="keyword">select</span> sscode <span class="keyword">from</span> sm_sku_show <span class="keyword">where</span> del_flag = <span class="string">"0"</span> <span class="keyword">order</span> <span class="keyword">by</span> sscode <span class="keyword">desc</span> <span class="keyword">limit</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure></div><p>测试耗时：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[SQL]</span><br><span class="line">select max(sscode) from sm_sku_show where del_flag = "0";</span><br><span class="line">受影响的行: 0</span><br><span class="line">时间: 19.503s</span><br><span class="line"></span><br><span class="line">[SQL]</span><br><span class="line">select sscode from sm_sku_show where del_flag = "0" order by sscode desc limit 1;</span><br><span class="line">受影响的行: 0</span><br><span class="line">时间: 0.001s</span><br></pre></td></tr></table></figure></div><p>测试结果：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+---------------------+</span><br><span class="line">| max(sscode)         |</span><br><span class="line">+---------------------+</span><br><span class="line">| SS20180120101925999 |</span><br><span class="line">+---------------------+</span><br><span class="line">1 row in set</span><br><span class="line"></span><br><span class="line">+---------------------+</span><br><span class="line">| sscode              |</span><br><span class="line">+---------------------+</span><br><span class="line">| SS20180120101925999 |</span><br><span class="line">+---------------------+</span><br><span class="line">1 row in set</span><br></pre></td></tr></table></figure></div><p><strong>结论</strong>：</p><p>max() 函数的需扫描where条件过滤后的所有行。</p><p>请慎用max()函数，特别是频繁执行的sql，若需用到可转化为测试中的  order by id desc limit 1</p><a id="more"></a><hr><h2 id="SQL-Server中Max函数查询优化与查看执行计划"><a href="#SQL-Server中Max函数查询优化与查看执行计划" class="headerlink" title="SQL Server中Max函数查询优化与查看执行计划"></a>SQL Server中Max函数查询优化与查看执行计划</h2><p>SQL语句：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="number">1</span>) <span class="keyword">FROM</span> northwind.dbo.OrderDetails</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(UnitPrice) <span class="keyword">from</span> northwind.dbo.OrderDetails</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> TOP <span class="number">1</span> UnitPrice <span class="keyword">from</span> northwind.dbo.OrderDetails <span class="keyword">order</span> <span class="keyword">by</span> UnitPrice <span class="keyword">desc</span></span><br></pre></td></tr></table></figure></div><p>执行结果：<br><img src="/2022/08/25/SQL%E4%B8%ADMax%E5%87%BD%E6%95%B0%E6%9F%A5%E8%AF%A2%E6%95%88%E7%8E%87%E9%97%AE%E9%A2%98%E4%B8%8E%E4%BC%98%E5%8C%96/2022-08-25-09-40-47.png" alt="执行结果"></p><p>查看执行计划：<br><img src="/2022/08/25/SQL%E4%B8%ADMax%E5%87%BD%E6%95%B0%E6%9F%A5%E8%AF%A2%E6%95%88%E7%8E%87%E9%97%AE%E9%A2%98%E4%B8%8E%E4%BC%98%E5%8C%96/%E6%9F%A5%E7%9C%8B%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92.png" alt="查看执行计划"></p><p>预估的执行计划：<br><img src="/2022/08/25/SQL%E4%B8%ADMax%E5%87%BD%E6%95%B0%E6%9F%A5%E8%AF%A2%E6%95%88%E7%8E%87%E9%97%AE%E9%A2%98%E4%B8%8E%E4%BC%98%E5%8C%96/%E9%A2%84%E4%BC%B0%E7%9A%84%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92.png" alt="预估的执行计划"></p><ul><li><a href="https://codeantenna.com/a/dPHrkc3gb1" target="_blank" rel="noopener">参考1</a></li><li><a href="https://blog.csdn.net/aumgla/article/details/79125979" target="_blank" rel="noopener">参考2</a></li></ul><hr>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;MySQL中使用order-by-…-limit-1替换Max函数&quot;&gt;&lt;a href=&quot;#MySQL中使用order-by-…-limit-1替换Max函数&quot; class=&quot;headerlink&quot; title=&quot;MySQL中使用order by … limit 1替换Max函数&quot;&gt;&lt;/a&gt;MySQL中使用order by … limit 1替换Max函数&lt;/h2&gt;&lt;p&gt;测试环境：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/08/25/SQL%E4%B8%ADMax%E5%87%BD%E6%95%B0%E6%9F%A5%E8%AF%A2%E6%95%88%E7%8E%87%E9%97%AE%E9%A2%98%E4%B8%8E%E4%BC%98%E5%8C%96/%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83.png&quot; alt=&quot;测试环境&quot;&gt;&lt;/p&gt;
&lt;p&gt;测试Sql：&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;max&lt;/span&gt;(sscode) &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; sm_sku_show &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; del_flag = &lt;span class=&quot;string&quot;&gt;&quot;0&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; sscode &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; sm_sku_show &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; del_flag = &lt;span class=&quot;string&quot;&gt;&quot;0&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; sscode &lt;span class=&quot;keyword&quot;&gt;desc&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;limit&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;测试耗时：&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[SQL]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;select max(sscode) from sm_sku_show where del_flag = &quot;0&quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;受影响的行: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;时间: 19.503s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[SQL]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;select sscode from sm_sku_show where del_flag = &quot;0&quot; order by sscode desc limit 1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;受影响的行: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;时间: 0.001s&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;测试结果：&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+---------------------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| max(sscode)         |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+---------------------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| SS20180120101925999 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+---------------------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1 row in set&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+---------------------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| sscode              |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+---------------------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| SS20180120101925999 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+---------------------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1 row in set&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;结论&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;max() 函数的需扫描where条件过滤后的所有行。&lt;/p&gt;
&lt;p&gt;请慎用max()函数，特别是频繁执行的sql，若需用到可转化为测试中的  order by id desc limit 1&lt;/p&gt;</summary>
    
    
    
    
    <category term="SQL" scheme="https://xiaoyan94.github.io/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>VMware Workstation Pro v16.2.4 官方版+16激活密钥</title>
    <link href="https://xiaoyan94.github.io/2022/08/24/VMware-Workstation-Pro-v16-2-4-%E5%AE%98%E6%96%B9%E7%89%88-16%E6%BF%80%E6%B4%BB%E5%AF%86%E9%92%A5/"/>
    <id>https://xiaoyan94.github.io/2022/08/24/VMware-Workstation-Pro-v16-2-4-%E5%AE%98%E6%96%B9%E7%89%88-16%E6%BF%80%E6%B4%BB%E5%AF%86%E9%92%A5/</id>
    <published>2022-08-24T08:59:36.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="VMware-Workstation-Pro-v16-2-4-激活"><a href="#VMware-Workstation-Pro-v16-2-4-激活" class="headerlink" title="VMware Workstation Pro v16.2.4 激活"></a>VMware Workstation Pro v16.2.4 激活</h2><p>下载方式：VMware官网<br>激活方式：输入密钥 <code>ZF3R0-FHED2-M80TY-8QYGC-NPKYF</code></p><a id="more"></a><h2 id="激活方式"><a href="#激活方式" class="headerlink" title="激活方式"></a>激活方式</h2><h3 id="16版本"><a href="#16版本" class="headerlink" title="16版本"></a>16版本</h3><p>ZF3R0-FHED2-M80TY-8QYGC-NPKYF</p><h3 id="15版本"><a href="#15版本" class="headerlink" title="15版本"></a>15版本</h3><p>可以使用网盘附带的注册机算key激活，或者直接使用下面的一组激活即可</p><p>FG78K-0UZ15-085TQ-TZQXV-XV0CD</p><p>ZA11U-DVY97-M81LP-4MNEZ-X3AW0</p><p>YU102-44D86-48D2Z-Z4Q5C-MFAWD</p><h2 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h2><p>官网下载：</p><p><a href="https://www.vmware.com/go/getworkstation-win" target="_blank" rel="noopener">https://www.vmware.com/go/getworkstation-win</a></p><p>已高速(如有密码：3519)<a href="http://ct.ghpym.com/d/7369060-41496370-0d53b8" target="_blank" rel="noopener">http://ct.ghpym.com/d/7369060-41496370-0d53b8</a></p><p><a href="https://pan.quark.cn/s/1679072c6d07" target="_blank" rel="noopener">https://pan.quark.cn/s/1679072c6d07</a></p><p>已高速<a href="http://www.123pan.com/s/HQeA-aX1Sh" target="_blank" rel="noopener">http://www.123pan.com/s/HQeA-aX1Sh</a></p><p>链接：<a href="https://pan.baidu.com/s/1sa7Fq9AW2Nsx4tsM5CrFXA" target="_blank" rel="noopener">https://pan.baidu.com/s/1sa7Fq9AW2Nsx4tsM5CrFXA</a><br>提取码：fpii</p><h2 id="VMware虚拟机设置U盘启动与BIOS设置教程"><a href="#VMware虚拟机设置U盘启动与BIOS设置教程" class="headerlink" title="VMware虚拟机设置U盘启动与BIOS设置教程"></a><a href="https://blog.csdn.net/awfiihmmmm/article/details/105543257" target="_blank" rel="noopener">VMware虚拟机设置U盘启动与BIOS设置教程</a></h2><hr><p><a href="https://www.ghxi.com/vmware15.html" target="_blank" rel="noopener">参考文章</a></p><hr>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;VMware-Workstation-Pro-v16-2-4-激活&quot;&gt;&lt;a href=&quot;#VMware-Workstation-Pro-v16-2-4-激活&quot; class=&quot;headerlink&quot; title=&quot;VMware Workstation Pro v16.2.4 激活&quot;&gt;&lt;/a&gt;VMware Workstation Pro v16.2.4 激活&lt;/h2&gt;&lt;p&gt;下载方式：VMware官网&lt;br&gt;激活方式：输入密钥 &lt;code&gt;ZF3R0-FHED2-M80TY-8QYGC-NPKYF&lt;/code&gt;&lt;/p&gt;</summary>
    
    
    
    
    <category term="软件" scheme="https://xiaoyan94.github.io/tags/%E8%BD%AF%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>mermaid测试</title>
    <link href="https://xiaoyan94.github.io/2022/08/18/mermaid%E6%B5%8B%E8%AF%95/"/>
    <id>https://xiaoyan94.github.io/2022/08/18/mermaid%E6%B5%8B%E8%AF%95/</id>
    <published>2022-08-18T00:42:25.000Z</published>
    <updated>2023-01-14T00:48:54.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="mermaid-流程图"><a href="#mermaid-流程图" class="headerlink" title="mermaid 流程图"></a>mermaid 流程图</h2><p><img src="/2022/08/18/mermaid%E6%B5%8B%E8%AF%95/2022-08-18-10-05-35.png" alt="写法不同"></p><h3 id="graph测试"><a href="#graph测试" class="headerlink" title="graph测试"></a>graph测试</h3><p>垂直流程图 <code>graph TD</code>：</p><pre class="mermaid">graph TD;    好好摸鱼-->辞职;    好好摸鱼-->跑路;    跑路-->赚钱;    辞职-->赚钱;    跑路-->高薪;    辞职-->高薪;    赚钱-->人生巅峰;    高薪-->人生巅峰;            人生巅峰-->好好摸鱼;</pre><p>水平流程图</p><pre class="mermaid">graph LR;    A-->B;    A-->C;    B-->D;    C-->D;</pre><pre class="mermaid">graph TD;    A-->B;    A-->C;    B-->D;    C-->D;</pre><hr><p>flowchart 测试</p><pre class="mermaid">gantt    title A Gantt Diagram    dateFormat  YYYY-MM-DD    section Section    A task           :a1, 2014-01-01, 30d    Another task     :after a1  , 20d    section Another    Task in sec      :2014-01-12  , 12d    another task      : 24d</pre><pre class="mermaid">graph TB    id1(圆角矩形)--普通线-->id2[矩形]    subgraph 子图表        id2==粗线==>id3{菱形}        id3-.虚线.->id4>右向旗帜]        id3--无箭头---id5((圆形))    end    style id1 fill:#f9f,stroke:#333,stroke-width:4px</pre><pre class="mermaid">sequenceDiagram    participant z as 张    participant l as 刘    loop 中秋三天假        z->>l: 吃了吗您呐？        l-->>z: 没吃，您呢？        activate z        Note left of z: 想了一下        alt 还没吃            z-xl: 还没呢，正准备回去吃        else 已经吃了            z-xl: 我也吃过了，哈哈        end        opt 大过节的            l-->z: 祝您中秋快乐啊        end    end</pre><hr><pre class="mermaid">sequenceDiagram    Alice->>+John: Hello John, how are you?    Alice->>+John: John, can you hear me?    John-->>-Alice: Hi Alice, I can hear you!    John-->>-Alice: I feel great!</pre><hr><p>sequenceDiagram测试</p><pre class="mermaid">sequenceDiagram;Alice->>John: Hello John, how are you?loop Healthcheck    John->>John: Fight against hypochondriaendNote right of John: Rational thoughts!John-->>Alice: Great!John->>Bob: How about you?Bob-->>John: Jolly good!</pre><hr>]]></content>
    
    
      
      
    <summary type="html"></summary>
      
    
    
    
    
    <category term="Markdown" scheme="https://xiaoyan94.github.io/tags/Markdown/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 使用教程</title>
    <link href="https://xiaoyan94.github.io/2022/08/16/2022%E6%B5%8B%E8%AF%95/"/>
    <id>https://xiaoyan94.github.io/2022/08/16/2022%E6%B5%8B%E8%AF%95/</id>
    <published>2022-08-16T13:37:52.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Hexo-使用教程"><a href="#Hexo-使用教程" class="headerlink" title="Hexo 使用教程"></a>Hexo 使用教程</h2><h3 id="1-新建页面"><a href="#1-新建页面" class="headerlink" title="1.新建页面"></a>1.新建页面</h3><p>命令：<code>hexo new post 2022测试</code></p><p>添加 Tags：修改 tags 内容为<code>tags: [Github,hexo]</code></p><h3 id="2-添加图片"><a href="#2-添加图片" class="headerlink" title="2.添加图片"></a>2.添加图片</h3><p><img src="/2022/08/16/2022%E6%B5%8B%E8%AF%95/test%20img.jpeg" alt="引用方法 1"></p><a id="more"></a><p><img src="/2022/08/16/2022%E6%B5%8B%E8%AF%95/test.jpeg" alt="引用方法 2"></p><p>引用方法 3 不可用：<code><img src="/2022/08/16/2022%E6%B5%8B%E8%AF%95/08/16/2022%E6%B5%8B%E8%AF%95/test.jpeg" class title="test"></code><br><img src="/2022/08/16/2022%E6%B5%8B%E8%AF%95/2022-08-17-00-19-33.png" alt="截图后一键粘贴图片 Cmd+Alt+V"></p><h3 id="本地启动"><a href="#本地启动" class="headerlink" title="本地启动"></a>本地启动</h3><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g -d</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure></div><h2 id="Hexo-升级"><a href="#Hexo-升级" class="headerlink" title="Hexo 升级"></a>Hexo 升级</h2><p>升级 hexo：<code>npm install hexo-cli -g</code><br>安装插件：<code>npm install hexo-renderer-marked --save</code><br>删除插件：<code>npm remove hexo-renderer-marked</code></p><blockquote><p><a href="https://stackoverflow.com/questions/58972251/what-does-x-packages-are-looking-for-funding-mean-when-running-npm-install" target="_blank" rel="noopener">What does ‘x packages are looking for funding’ mean when running `npm install`?</a></p></blockquote><h2 id="在Windows上同步使用"><a href="#在Windows上同步使用" class="headerlink" title="在Windows上同步使用"></a>在Windows上同步使用</h2><ol><li>安装Node.js</li><li>安装GitHub Desktop、克隆自己的hexo源代码仓库到本地（不是克隆GitHub Pages仓库到本地）</li><li>安装Hexo<ul><li>执行<code>npm install hexo</code>、<code>npm install -g hexo-cli</code>、<code>npm install</code>、主题已包含，不需要执行<code>npm install hexo-deployer-git</code>；（不需要hexo init）</li></ul></li><li>生成秘钥：<code>ssh-keygen</code>；在GitHub和Gitee设置添加公钥；连接测试：<code>ssh -T git@gitee.com</code>、<code>ssh -T git@github.com</code></li></ol><p><a href="https://hexo.io/zh-cn/docs/#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener">参考文档:官方</a></p><p><a href="https://www.jianshu.com/p/937bda9123da" target="_blank" rel="noopener">参考文档:多设备同步</a></p><h2 id="使用-Gitee-Pages-Action-自动部署至-Gitee"><a href="#使用-Gitee-Pages-Action-自动部署至-Gitee" class="headerlink" title="使用 Gitee Pages Action 自动部署至 Gitee"></a>使用 Gitee Pages Action 自动部署至 Gitee</h2><h2 id="VSCode-插件"><a href="#VSCode-插件" class="headerlink" title="VSCode 插件"></a>VSCode 插件</h2><h3 id="复制粘贴图片：Paste-Image"><a href="#复制粘贴图片：Paste-Image" class="headerlink" title="复制粘贴图片：Paste Image"></a>复制粘贴图片：Paste Image</h3><p>插件设置将图片保存到 md 文件同名文件夹资源目录：</p><p><code>Base Path</code> 保持默认值：<code>${currentFileDir}</code></p><p><code>Path</code> 修改为：<code>${currentFileNameWithoutExt}</code></p><p><code>&quot;pasteImage.path&quot;: &quot;${currentFileNameWithoutExt}&quot;</code></p><p>使用 <code>Ctrl/Cmd+Alt+V</code> 自动粘贴图片</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;Hexo-使用教程&quot;&gt;&lt;a href=&quot;#Hexo-使用教程&quot; class=&quot;headerlink&quot; title=&quot;Hexo 使用教程&quot;&gt;&lt;/a&gt;Hexo 使用教程&lt;/h2&gt;&lt;h3 id=&quot;1-新建页面&quot;&gt;&lt;a href=&quot;#1-新建页面&quot; class=&quot;headerlink&quot; title=&quot;1.新建页面&quot;&gt;&lt;/a&gt;1.新建页面&lt;/h3&gt;&lt;p&gt;命令：&lt;code&gt;hexo new post 2022测试&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;添加 Tags：修改 tags 内容为&lt;code&gt;tags: [Github,hexo]&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;2-添加图片&quot;&gt;&lt;a href=&quot;#2-添加图片&quot; class=&quot;headerlink&quot; title=&quot;2.添加图片&quot;&gt;&lt;/a&gt;2.添加图片&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/2022/08/16/2022%E6%B5%8B%E8%AF%95/test%20img.jpeg&quot; alt=&quot;引用方法 1&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    
    <category term="Github" scheme="https://xiaoyan94.github.io/tags/Github/"/>
    
    <category term="hexo" scheme="https://xiaoyan94.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>Vue.js学习笔记</title>
    <link href="https://xiaoyan94.github.io/2021/12/05/Vue-js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>https://xiaoyan94.github.io/2021/12/05/Vue-js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2021-12-05T13:11:33.000Z</published>
    <updated>2023-02-25T00:19:06.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="nvm"><a href="#nvm" class="headerlink" title="nvm"></a>nvm</h2><h3 id="windows环境安装nvm"><a href="#windows环境安装nvm" class="headerlink" title="windows环境安装nvm"></a>windows环境安装nvm</h3><p>安装 <a href="https://github.com/coreybutler/nvm-windows/releases" target="_blank" rel="noopener">nvm-setup.exe</a></p><p><em>安装路径不能包含空格</em>。</p><ol><li>NVM安装路径设置为 <strong><code>D:\nvm</code></strong></li><li>Node.js Symlink路径设置为 <strong><code>D:\nvm\node.js</code></strong></li></ol><p>安装nvm前不必卸载之前已安装的node.js环境，安装nvm时会提示“是否允许nvm控制已安装的node.js版本？”，点同意即可。nvm会自动把已安装的Node.js文件夹移动到设置好的Node.js Symlink路径，即 <code>**D:\nvm\node.js**</code>。</p><p><img src="/2021/12/05/Vue-js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/nvm%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6%E5%A4%B9.png" alt="nvm安装文件夹"></p><h3 id="使用nvm解决nodejs版本不兼容造成的hexo警告信息"><a href="#使用nvm解决nodejs版本不兼容造成的hexo警告信息" class="headerlink" title="使用nvm解决nodejs版本不兼容造成的hexo警告信息"></a>使用nvm解决nodejs版本不兼容造成的hexo警告信息</h3><p><a href="https://hexo.io/docs/#Required-Node-js-version" target="_blank" rel="noopener">根据Hexo官网介绍，不同版本的Hexo依赖不同版本的Node.js</a></p><p>If you are stuck with older Node.js, you can consider installing a past version of Hexo.</p><p>Please note we do not provide bugfixes to past versions of Hexo.</p><p>We highly recommend to always install the <a href="https://www.npmjs.com/package/hexo?activeTab=versions" target="_blank" rel="noopener">latest version</a> of Hexo and the <a href="https://hexo.io/docs/#Requirements" target="_blank" rel="noopener">recommended version</a> of Node.js, whenever possible.</p><table><thead><tr><th>Hexo version</th><th>Minimum (Node.js version)</th><th>Less than (Node.js version)</th></tr></thead><tbody><tr><td>6.2+</td><td>12.13.0</td><td>latest</td></tr><tr><td>6.0+</td><td>12.13.0</td><td>18.5.0</td></tr><tr><td>5.0+</td><td>10.13.0</td><td>12.0.0</td></tr><tr><td>4.1 - 4.2</td><td>8.10</td><td>10.0.0</td></tr><tr><td>4.0</td><td>8.6</td><td>8.10.0</td></tr><tr><td>3.3 - 3.9</td><td>6.9</td><td>8.0.0</td></tr><tr><td>3.2 - 3.3</td><td>0.12</td><td>unknown</td></tr><tr><td>3.0 - 3.1</td><td>0.10 or iojs</td><td>unknown</td></tr><tr><td>0.0.1 - 2.8</td><td>0.10</td><td>unknown</td></tr></tbody></table><p>hexo在较高版本的node.js环境下运行时的警告：</p><p><img src="/2021/12/05/Vue-js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/2023-02-09-14-10-27.png" alt="hexo在较高版本的node.js环境下运行时的警告"></p><p>使用nvm命令安装（<code>nvm install v12</code>）并使用<code>nvm use</code>命令切换node.js版本为v12，警告消失：</p><p><img src="/2021/12/05/Vue-js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/2023-02-09-14-11-09.png" alt="hexo在切换node.js版本后运行警告消失"></p><a id="more"></a><h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><p>npm安装 vue-cli: <code>npm install -g vue-cli</code></p><p>当前 index.html 路径下安装 vue.js: <code>npm i vue --save</code></p><p><code>vue init webpack-simple Demo5</code></p><p>好多，不想写了…</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;nvm&quot;&gt;&lt;a href=&quot;#nvm&quot; class=&quot;headerlink&quot; title=&quot;nvm&quot;&gt;&lt;/a&gt;nvm&lt;/h2&gt;&lt;h3 id=&quot;windows环境安装nvm&quot;&gt;&lt;a href=&quot;#windows环境安装nvm&quot; class=&quot;headerlink&quot; title=&quot;windows环境安装nvm&quot;&gt;&lt;/a&gt;windows环境安装nvm&lt;/h3&gt;&lt;p&gt;安装 &lt;a href=&quot;https://github.com/coreybutler/nvm-windows/releases&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;nvm-setup.exe&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;安装路径不能包含空格&lt;/em&gt;。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;NVM安装路径设置为 &lt;strong&gt;&lt;code&gt;D:\nvm&lt;/code&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Node.js Symlink路径设置为 &lt;strong&gt;&lt;code&gt;D:\nvm\node.js&lt;/code&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;安装nvm前不必卸载之前已安装的node.js环境，安装nvm时会提示“是否允许nvm控制已安装的node.js版本？”，点同意即可。nvm会自动把已安装的Node.js文件夹移动到设置好的Node.js Symlink路径，即 &lt;code&gt;**D:\nvm\node.js**&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2021/12/05/Vue-js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/nvm%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6%E5%A4%B9.png&quot; alt=&quot;nvm安装文件夹&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;使用nvm解决nodejs版本不兼容造成的hexo警告信息&quot;&gt;&lt;a href=&quot;#使用nvm解决nodejs版本不兼容造成的hexo警告信息&quot; class=&quot;headerlink&quot; title=&quot;使用nvm解决nodejs版本不兼容造成的hexo警告信息&quot;&gt;&lt;/a&gt;使用nvm解决nodejs版本不兼容造成的hexo警告信息&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://hexo.io/docs/#Required-Node-js-version&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;根据Hexo官网介绍，不同版本的Hexo依赖不同版本的Node.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;If you are stuck with older Node.js, you can consider installing a past version of Hexo.&lt;/p&gt;
&lt;p&gt;Please note we do not provide bugfixes to past versions of Hexo.&lt;/p&gt;
&lt;p&gt;We highly recommend to always install the &lt;a href=&quot;https://www.npmjs.com/package/hexo?activeTab=versions&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;latest version&lt;/a&gt; of Hexo and the &lt;a href=&quot;https://hexo.io/docs/#Requirements&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;recommended version&lt;/a&gt; of Node.js, whenever possible.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Hexo version&lt;/th&gt;
&lt;th&gt;Minimum (Node.js version)&lt;/th&gt;
&lt;th&gt;Less than (Node.js version)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;6.2+&lt;/td&gt;
&lt;td&gt;12.13.0&lt;/td&gt;
&lt;td&gt;latest&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6.0+&lt;/td&gt;
&lt;td&gt;12.13.0&lt;/td&gt;
&lt;td&gt;18.5.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5.0+&lt;/td&gt;
&lt;td&gt;10.13.0&lt;/td&gt;
&lt;td&gt;12.0.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4.1 - 4.2&lt;/td&gt;
&lt;td&gt;8.10&lt;/td&gt;
&lt;td&gt;10.0.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4.0&lt;/td&gt;
&lt;td&gt;8.6&lt;/td&gt;
&lt;td&gt;8.10.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3.3 - 3.9&lt;/td&gt;
&lt;td&gt;6.9&lt;/td&gt;
&lt;td&gt;8.0.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3.2 - 3.3&lt;/td&gt;
&lt;td&gt;0.12&lt;/td&gt;
&lt;td&gt;unknown&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3.0 - 3.1&lt;/td&gt;
&lt;td&gt;0.10 or iojs&lt;/td&gt;
&lt;td&gt;unknown&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;0.0.1 - 2.8&lt;/td&gt;
&lt;td&gt;0.10&lt;/td&gt;
&lt;td&gt;unknown&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;hexo在较高版本的node.js环境下运行时的警告：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2021/12/05/Vue-js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/2023-02-09-14-10-27.png&quot; alt=&quot;hexo在较高版本的node.js环境下运行时的警告&quot;&gt;&lt;/p&gt;
&lt;p&gt;使用nvm命令安装（&lt;code&gt;nvm install v12&lt;/code&gt;）并使用&lt;code&gt;nvm use&lt;/code&gt;命令切换node.js版本为v12，警告消失：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2021/12/05/Vue-js%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/2023-02-09-14-11-09.png&quot; alt=&quot;hexo在切换node.js版本后运行警告消失&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    
    <category term="JavaScript" scheme="https://xiaoyan94.github.io/tags/JavaScript/"/>
    
    <category term="Vue" scheme="https://xiaoyan94.github.io/tags/Vue/"/>
    
    <category term="Node" scheme="https://xiaoyan94.github.io/tags/Node/"/>
    
    <category term="Hexo" scheme="https://xiaoyan94.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>ES6新语法中的Promise</title>
    <link href="https://xiaoyan94.github.io/2021/02/28/ES6%E6%96%B0%E8%AF%AD%E6%B3%95%E4%B8%AD%E7%9A%84Promise/"/>
    <id>https://xiaoyan94.github.io/2021/02/28/ES6%E6%96%B0%E8%AF%AD%E6%B3%95%E4%B8%AD%E7%9A%84Promise/</id>
    <published>2021-02-28T11:16:00.000Z</published>
    <updated>2023-02-25T00:19:06.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><h3 id="1-Promise-的定义和使用"><a href="#1-Promise-的定义和使用" class="headerlink" title="1 Promise 的定义和使用"></a>1 Promise 的定义和使用</h3><p><strong>Promise</strong> 是 ES6 引入的异步编程的新解决方案，语法上 Promise 是一个构造函数，用来封装异步操作并可以获取其成功或失败的结果</p><p>一个 Promise 必然处于以下几种状态之一</p><ul><li>待定 pending：初始状态，既没有被兑现，也没有被拒绝</li><li>已兑现 fulfilled：意味着操作成功完成</li><li>已拒绝 rejected：意味着操作失败</li></ul><p>Promise 的使用</p><ul><li>Promise 构造函数new Promise((resolve, reject) &#x3D;&gt; {})</li><li>Promise.prototype.then()方法</li><li>Promise.prototype.catch()方法</li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 使用 setTimeout 模拟请求数据库数据操作</span></span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> isRight = <span class="literal">true</span>; <span class="comment">// 这个异步请求数据库数据操作是否正确返回数据</span></span><br><span class="line">        <span class="keyword">if</span> (isRight) &#123;</span><br><span class="line">            <span class="keyword">let</span> data = <span class="string">'数据库中的数据'</span>;</span><br><span class="line">            resolve(data); <span class="comment">// 设置 Promise 对象的状态为操作成功</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> err = <span class="string">'数据读取失败！'</span></span><br><span class="line">            reject(err); <span class="comment">// 设置 Promise 对象的状态为操作失败</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line">p.then(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">reason</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.error(reason);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div><h3 id="2-Promise-封装读取文件"><a href="#2-Promise-封装读取文件" class="headerlink" title="2 Promise 封装读取文件"></a>2 Promise 封装读取文件</h3><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用 nodejs 的 fs 读取文件模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    fs.readFile(<span class="string">'./resources/为学.txt'</span>, (err, data) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) reject(err); <span class="comment">// err 是一个异常对象</span></span><br><span class="line">        resolve(data);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p.then(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value.toString()); <span class="comment">// 转为字符串输出</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">reason</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'读取失败!!'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div><h3 id="3-Promise-封装-Ajax-请求"><a href="#3-Promise-封装-Ajax-请求" class="headerlink" title="3 Promise 封装 Ajax 请求"></a>3 Promise 封装 Ajax 请求</h3><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xhr.open(<span class="string">'get'</span>, <span class="string">'https://api.apiopen.top/getJoke'</span>);</span><br><span class="line">    xhr.send();</span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (xhr.status &gt;= <span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">300</span>) &#123;</span><br><span class="line">                resolve(xhr.response); <span class="comment">// 成功</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                reject(xhr.status); <span class="comment">// 失败</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定回调</span></span><br><span class="line">p.then(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">reason</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.error(reason);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div><h3 id="4-Promise-prototype-then-方法"><a href="#4-Promise-prototype-then-方法" class="headerlink" title="4 Promise.prototype.then 方法"></a>4 Promise.prototype.then 方法</h3><p>Promise.prototype.then 方法返回的结果依然是 Promise 对象，对象状态由回调函数的执行结果决定</p><p>具体情况如下</p><ul><li>若 then 方法写返回值，则 then 方法返回的对象的状态值为成功 fulfilled，返回结果值为 undefined</li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// resolve('用户数据')</span></span><br><span class="line">        reject(<span class="string">'出错了'</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 未设定返回值</span></span><br><span class="line"><span class="keyword">const</span> res = p.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;, (reason) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.warn(reason);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 打印 then 方法的返回值</span></span><br><span class="line"><span class="built_in">console</span>.log(res);</span><br></pre></td></tr></table></figure></div><ul><li>如果回调函数中返回的结果是非 Promise 类型的属性，则 then 方法返回的对象，其状态为成功 fulfilled，返回结果值取决于 then 方法所执行的是哪个函数（resolve 或 reject）</li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// resolve('用户数据')</span></span><br><span class="line">        reject(<span class="string">'出错了'</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;)</span><br><span class="line"> <span class="comment">// 返回的非 Promise 对象</span></span><br><span class="line"><span class="keyword">const</span> res = p.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'成功了！！'</span>;</span><br><span class="line">&#125;, (reason) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.warn(reason);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'出错啦！！'</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 打印 then 方法的返回值</span></span><br><span class="line"><span class="built_in">console</span>.log(res);</span><br></pre></td></tr></table></figure></div><ul><li>如果回调函数中返回的结果是 Promise 类型 return new Promise()，则 then 方法返回的 Promise 对象状态与该返回结果的状态相同，返回值也相同</li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(<span class="string">'用户数据'</span>)</span><br><span class="line">        <span class="comment">// reject('出错了');</span></span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> res = p.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">    <span class="comment">// 返回 Promise 对象</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        resolve(<span class="string">'（1）成功了！！！'</span>);</span><br><span class="line">        <span class="comment">// reject('（1）出错了！！！')</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;, (reason) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.warn(reason);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// resolve('（2）成功了！！！');</span></span><br><span class="line">        reject(<span class="string">'（2）出错了！！！'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 打印 then 方法的返回值</span></span><br><span class="line"><span class="built_in">console</span>.log(res);</span><br></pre></td></tr></table></figure></div><ul><li>如果回调函数中返回的结果是 throw 语句抛出异常，则 then 方法的对象的状态值为 rejected，返回结果值为 throw 抛出的字面量或者 Error 对象</li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(<span class="string">'用户数据'</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> res = p.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'错误了！！'</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 打印结果</span></span><br><span class="line"><span class="built_in">console</span>.log(res);</span><br></pre></td></tr></table></figure></div><h3 id="4-链式调用"><a href="#4-链式调用" class="headerlink" title="4 链式调用"></a>4 链式调用</h3><p>Promise.prototype.then 方法返回的结果还是 Promise 对象，这意味着我们可以继续在该结果上使用 then 方法，也就是链式调用，杜绝回调地狱</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span>=&gt;</span>&#123;&#125;, reject=&gt;&#123;&#125;);</span><br><span class="line">p.then(<span class="function"><span class="params">value</span>=&gt;</span>&#123;&#125;, reason=&gt;&#123;&#125;)</span><br><span class="line">.then(<span class="function"><span class="params">value</span>=&gt;</span>&#123;&#125;, reason=&gt;&#123;&#125;)</span><br><span class="line">.then(<span class="function"><span class="params">value</span>=&gt;</span>&#123;&#125;, reason=&gt;&#123;&#125;)</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div><h3 id="5-Promise-prototype-catch"><a href="#5-Promise-prototype-catch" class="headerlink" title="5 Promise.prototype.catch"></a>5 Promise.prototype.catch</h3><p>catch() 方法返回一个 Promise，并且处理拒绝的情况<br>它的行为与调用 Promise.prototype.then(undefined, onRejected) 相同</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">obj.catch(onRejected);</span><br><span class="line">等同于</span><br><span class="line">obj.then(<span class="literal">undefined</span>, onRejected);</span><br></pre></td></tr></table></figure></div><p>语法</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p.catch(onRejected);</span><br><span class="line"></span><br><span class="line">p.catch(<span class="function"><span class="keyword">function</span>(<span class="params">reason</span>) </span>&#123;</span><br><span class="line">   <span class="comment">// 拒绝</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>举例</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    resolve(<span class="string">'Success'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p1.then(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value); <span class="comment">// "Success!"</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="string">'oh, no!'</span>;</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e); <span class="comment">// "oh, no!"</span></span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'有 catch 捕获异常，所以这句输出'</span>);</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'没有 catch 捕获异常，这句将不会输出'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果</span></span><br><span class="line">Success</span><br><span class="line">oh, no!</span><br><span class="line">有 <span class="keyword">catch</span> 捕获异常，所以这句输出</span><br></pre></td></tr></table></figure></div><h3 id="6-链式调用练习-多个文件读取"><a href="#6-链式调用练习-多个文件读取" class="headerlink" title="6 链式调用练习-多个文件读取"></a>6 链式调用练习-多个文件读取</h3><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 回调方式</span></span><br><span class="line">fs.readFile(<span class="string">'./resources/为学.md'</span>, (err, data1)=&gt;&#123;</span><br><span class="line">    fs.readFile(<span class="string">'./resources/插秧诗.md'</span>, (err, data2)=&gt;&#123;</span><br><span class="line">        fs.readFile(<span class="string">'./resources/观书有感.md'</span>, (err, data3)=&gt;&#123;</span><br><span class="line">            <span class="keyword">let</span> result = data1 + <span class="string">'\r\n'</span> +data2  +<span class="string">'\r\n'</span>+ data3;</span><br><span class="line">            <span class="built_in">console</span>.log(result);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// promise 方式</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFile(<span class="string">'./resources/users.md'</span>, (err, data) =&gt; &#123;</span><br><span class="line">        resolve(data); <span class="comment">// 设置状态</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// value 为第一次读取的文件数据，data 为第二次（当前）读取的数据</span></span><br><span class="line">        fs.readFile(<span class="string">'./resources/orders.md'</span>, (err, data) =&gt; &#123;</span><br><span class="line">            resolve([value, data]); <span class="comment">// 将上轮读取结果和本轮合并传到下一轮轮读取操作</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fs.readFile(<span class="string">'./resources/goods.md'</span>, (err, data) =&gt; &#123;</span><br><span class="line">            <span class="comment">// value 为上一轮传递过来的文件数据数组</span></span><br><span class="line">            value.push(data);</span><br><span class="line">            <span class="comment">// 传给下一轮操作</span></span><br><span class="line">            resolve(value);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 合并数组元素，输出</span></span><br><span class="line">    <span class="built_in">console</span>.log(value.join(<span class="string">'\r\n'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>以上只是 Promise 的入门，更多还要进一步深入学习</p>]]></content>
    
    
      
      
    <summary type="html"></summary>
      
    
    
    
    
    <category term="JavaScript" scheme="https://xiaoyan94.github.io/tags/JavaScript/"/>
    
    <category term="ES6" scheme="https://xiaoyan94.github.io/tags/ES6/"/>
    
  </entry>
  
  <entry>
    <title>一点关于WebSocket</title>
    <link href="https://xiaoyan94.github.io/2021/02/23/%E4%B8%80%E7%82%B9%E5%85%B3%E4%BA%8EWebSocket/"/>
    <id>https://xiaoyan94.github.io/2021/02/23/%E4%B8%80%E7%82%B9%E5%85%B3%E4%BA%8EWebSocket/</id>
    <published>2021-02-23T10:51:41.000Z</published>
    <updated>2023-02-25T00:19:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>HTTP协议本身不是为了长连接而开发的。所谓长连接，指的是TCP连接建立之后，长时间持续保持连接状态并进行通讯。</p><p>虽然HTTP协议后来引入的<code>Connection: keep-alive</code>机制有保持连接的效果，但设计初衷却是为了在几个连续的HTTP请求之间共享TCP连接以加快页面加载速度。</p><p>而在浏览器中实现类似于TCP长连接的需求，进行实时双向通讯，是有着诸多实际需要的。这催生了WebSocket的产生。</p><h2 id="WebSocket连接的建立"><a href="#WebSocket连接的建立" class="headerlink" title="WebSocket连接的建立"></a>WebSocket连接的建立</h2><p>客户端向Web服务器发起HTTP请求，寻求Upgrade为WebSocket。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="MAKEFILE"><figure class="iseeu highlight /makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET /chat HTTP/1.1</span><br><span class="line"><span class="section">Host: example.com:8000</span></span><br><span class="line"><span class="section">Upgrade: websocket</span></span><br><span class="line"><span class="section">Connection: Upgrade</span></span><br><span class="line"><span class="section">Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==</span></span><br><span class="line"><span class="section">Sec-WebSocket-Version: 13</span></span><br></pre></td></tr></table></figure></div><p>如果服务器支持并允许这个WebSocket请求的话，返回一个类似于下面这样的HTTP相应：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="MAKEFILE"><figure class="iseeu highlight /makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 101 Switching Protocols</span><br><span class="line"><span class="section">Upgrade: websocket</span></span><br><span class="line"><span class="section">Connection: Upgrade</span></span><br><span class="line"><span class="section">Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=</span></span><br></pre></td></tr></table></figure></div><p>(以上示例来源于 <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers" target="_blank" rel="noopener">Writing WebSocket Servers</a>)</p><p>接下来，客户端和服务器端开始根据WebSocket协议进行数据传送和接收。</p><h3 id="握手过程中的“口令”"><a href="#握手过程中的“口令”" class="headerlink" title="握手过程中的“口令”"></a>握手过程中的“口令”</h3><p>上面的握手过程中，客户端通过”Sec-WebSocket-Key”发送了一个随机字符串。</p><p>服务器端返回的验证字段”Sec-WebSocket-Accept”的计算过程如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="TCL"><figure class="iseeu highlight /tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> key    [web::request <span class="string">"Sec-WebSocket-Key"</span>]</span><br><span class="line"><span class="keyword">set</span> magic  <span class="string">"258EAFA5-E914-47DA-95CA-C5AB0DC85B11"</span></span><br><span class="line"><span class="keyword">set</span> secret [::base64::encode [sha1::sha1 -bin <span class="string">"$key$magic"</span>]]</span><br><span class="line">web::response -<span class="keyword">set</span> <span class="string">"Sec-WebSocket-Accept"</span> $secret</span><br></pre></td></tr></table></figure></div><h2 id="浏览器里的WebSocket"><a href="#浏览器里的WebSocket" class="headerlink" title="浏览器里的WebSocket"></a>浏览器里的WebSocket</h2><p>浏览器里的WebSocket主要作为客户端。其接口本身倒并不复杂，主要是建立连接，监听处理4个事件，发送消息，和关闭连接这几个操作。</p><ul><li><code>new WebSocket(url)</code> # 建立连接</li><li><code>onopen</code> # 连接建立时的回调函数</li><li><code>onmessage</code> # 收到消息时的回调函数</li><li><code>onclose</code> # 连接关闭时的回调函数</li><li><code>onerror</code> # 发生错误时的回调函数</li><li><code>send(message)</code> # 发送消息</li><li><code>close(code?, reason?)</code> # 关闭连接</li></ul><p>相关文档可以参考 <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket" target="_blank" rel="noopener">WebSocket @ Mozilla Web Docs</a></p><p>代码轮廓如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> socket = <span class="keyword">new</span> WebSocket(<span class="string">'ws://some.host.com:8080/'</span>);</span><br><span class="line"></span><br><span class="line">socket.onopen = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    socket.send(<span class="string">'Hello Server!'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">socket.onmessage = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Message from server'</span>, event.data);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">socket.onclose = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Good Bye Server!'</span>, event.data);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">socket.onerror = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Oh! Some Error!'</span>, event.data);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">socket.send(<span class="string">"Message to server"</span>);</span><br><span class="line"></span><br><span class="line">socket.close();</span><br></pre></td></tr></table></figure></div><h2 id="为什么不用HTTP的keep-alive机制"><a href="#为什么不用HTTP的keep-alive机制" class="headerlink" title="为什么不用HTTP的keep-alive机制"></a>为什么不用HTTP的keep-alive机制</h2><ul><li>Web服务器对于<code>keep-alive</code>很多时候有timeout限制。</li><li>每次HTTP请求“冗余”的头部信息也是一种传输负担。</li><li>HTTP请求依赖于客户端的”Pull”。</li><li>服务器端的主动”Push”无法实现。需要客户端通过轮询（polling）来变通。</li></ul><h2 id="相关资源"><a href="#相关资源" class="headerlink" title="相关资源"></a>相关资源</h2><ul><li><a href="https://tools.ietf.org/html/rfc6455" target="_blank" rel="noopener">rfc6455: The WebSocket Protocol</a></li><li><a href="https://tools.ietf.org/html/rfc2616" target="_blank" rel="noopener">rfc2616: Hypertext Transfer Protocol – HTTP&#x2F;1.1</a></li></ul>]]></content>
    
    
      
      
    <summary type="html"></summary>
      
    
    
    
    
    <category term="HTTP" scheme="https://xiaoyan94.github.io/tags/HTTP/"/>
    
    <category term="WebSocket" scheme="https://xiaoyan94.github.io/tags/WebSocket/"/>
    
  </entry>
  
  <entry>
    <title>TCP握手和HTTP/HTTPS建立连接流程，HTTP/1.1和HTTP/2的区别</title>
    <link href="https://xiaoyan94.github.io/2021/02/20/TCP%E5%92%8CHTTP%E6%8F%A1%E6%89%8B/"/>
    <id>https://xiaoyan94.github.io/2021/02/20/TCP%E5%92%8CHTTP%E6%8F%A1%E6%89%8B/</id>
    <published>2021-02-20T13:40:28.000Z</published>
    <updated>2023-02-25T00:19:06.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="TCP和HTTP握手"><a href="#TCP和HTTP握手" class="headerlink" title="TCP和HTTP握手"></a>TCP和HTTP握手</h2><h3 id="TCP三次握手建立连接"><a href="#TCP三次握手建立连接" class="headerlink" title="TCP三次握手建立连接"></a>TCP三次握手建立连接</h3><p>TCP 是传输控制协议（Transmission Control Protocol）的缩写，用于在计算机之间可靠地传输数据。在建立 TCP 连接时，需要进行三次握手，即客户端发送 SYN 报文，服务器返回 SYN-ACK 报文，客户端再发送 ACK 报文，从而建立连接。这个过程的目的是确保双方都能够接收和发送数据，以保证数据传输的可靠性和完整性。</p><p>具体来说，TCP 连接的三次握手过程如下：</p><ol><li>客户端发送 SYN 报文：客户端向服务器发送 SYN（同步）报文，请求建立连接，并选择一个随机的初始序列号（sequence number）。</li><li>服务器返回 SYN-ACK 报文：服务器收到客户端的 SYN 报文后，向客户端发送 SYN-ACK（同步-确认）报文，表示已收到客户端的请求，并确认客户端的初始序列号。服务器同时也选择一个随机的初始序列号。</li><li>客户端发送 ACK 报文：客户端收到服务器的 SYN-ACK 报文后，向服务器发送 ACK（确认）报文，确认收到了服务器的确认，并发送自己的初始序列号。此时，TCP 连接已建立。</li></ol><p>以下是 TCP 连接三次握手的 Mermaid 代码和图示：</p><pre class="mermaid">sequenceDiagram    participant Client    participant Server    Client->>Server: SYN(同步报文)    Server->>Client: SYN-ACK(同步-确认报文)    Client->>Server: ACK(确认报文)</pre><h3 id="基于TCP的HTTP"><a href="#基于TCP的HTTP" class="headerlink" title="基于TCP的HTTP"></a>基于TCP的HTTP</h3><a id="more"></a><p>HTTP 是超文本传输协议（Hypertext Transfer Protocol）的缩写，用于在 Web 上传输数据。HTTP 建立在 TCP 上，因此 HTTP 的建立过程需要先建立 TCP 连接。因此，HTTP 连接的建立过程包含了 TCP 连接的三次握手过程。</p><p>在 HTTP&#x2F;1.1 中，每个连接只能处理一个请求和响应，也就是说，在处理完一个请求和响应后，连接会立即关闭。因此，在 HTTP&#x2F;1.1 中，每个连接都需要进行一次完整的三次握手和四次挥手。HTTP&#x2F;2 引入了多路复用机制，可以在一个连接上同时处理多个请求和响应，从而减少了建立和关闭连接的开销。</p><p>以下是 HTTP 连接建立过程的 Mermaid 代码和图示：</p><pre class="mermaid">sequenceDiagram    participant Client    participant Server    Client->>Server: SYN    Server->>Client: SYN-ACK    Client->>Server: ACK    Client->>Server: HTTP Request    Server->>Client: HTTP Response    Client->>Server: FIN    Server->>Client: ACK    Server->>Client: FIN    Client->>Server: ACK</pre><h3 id="TCP四次挥手关闭连接"><a href="#TCP四次挥手关闭连接" class="headerlink" title="TCP四次挥手关闭连接"></a>TCP四次挥手关闭连接</h3><p>TCP 连接的四次挥手（Four-way handshake）用于关闭已建立的 TCP 连接，以确保数据的可靠传输。四次挥手的过程如下：</p><ol><li>客户端发送 FIN 报文：客户端请求关闭连接，向服务器发送 FIN（结束）报文。</li><li>服务器返回 ACK 报文：服务器收到客户端的 FIN 报文后，向客户端发送 ACK（确认）报文，表示已收到关闭请求。</li><li>服务器发送 FIN 报文：服务器确认可以关闭连接后，向客户端发送 FIN 报文，请求关闭连接。</li><li>客户端返回 ACK 报文：客户端收到服务器的 FIN 报文后，向服务器发送 ACK 报文，表示已收到服务器的关闭请求，并确认可以关闭连接。此时，TCP 连接关闭。</li></ol><p>以下是 TCP 连接四次挥手的 Mermaid 代码和图示：</p><pre class="mermaid">sequenceDiagram    participant Client    participant Server    Client->>Server: FIN    Server->>Client: ACK    Server->>Client: FIN    Client->>Server: ACK</pre><h3 id="HTTP协议版本"><a href="#HTTP协议版本" class="headerlink" title="HTTP协议版本"></a>HTTP协议版本</h3><p><strong>HTTP&#x2F;1.1</strong> 和 <strong>HTTP&#x2F;2</strong> 都是应用层协议，用于在 Web 上传输数据。它们的主要区别在于传输数据的方式和性能方面。</p><h4 id="HTTP-x2F-1-1-和-HTTP-x2F-2-的区别"><a href="#HTTP-x2F-1-1-和-HTTP-x2F-2-的区别" class="headerlink" title="HTTP&#x2F;1.1 和 HTTP&#x2F;2 的区别"></a><strong>HTTP&#x2F;1.1</strong> 和 <strong>HTTP&#x2F;2</strong> 的区别</h4><table><thead><tr><th>特性</th><th>HTTP&#x2F;1.1</th><th>HTTP&#x2F;2</th></tr></thead><tbody><tr><td>多路复用</td><td>不支持</td><td>支持</td></tr><tr><td>二进制分帧</td><td>不支持</td><td>支持</td></tr><tr><td>首部压缩</td><td>不支持</td><td>支持</td></tr><tr><td>服务器推送</td><td>不支持</td><td>支持</td></tr><tr><td>安全性</td><td>需要 TLS&#x2F;SSL</td><td>需要 TLS&#x2F;SSL</td></tr><tr><td>建立连接</td><td>需要三次握手</td><td>需要TLS&#x2F;SSL的加密握手</td></tr><tr><td>请求优先级</td><td>不支持</td><td>支持</td></tr><tr><td>语义</td><td>每个请求都需要一个新的 TCP 连接</td><td>多个请求可以共享一个 TCP 连接</td></tr><tr><td>性能</td><td>每个请求都需要一个新的 TCP 连接，带来了较高的延迟和消耗</td><td>可以在同一个连接中同时处理多个请求，降低了延迟和消耗</td></tr></tbody></table><p><strong>HTTP&#x2F;1.1</strong> 是顺序传输的，每个请求和响应都需要建立一个 TCP 连接，而且每个连接只能处理一个请求和响应。因此，每个请求和响应都需要经过完整的 HTTP&#x2F;1.1 的三次握手和四次挥手的过程。这样的方式导致了以下问题：</p><ul><li>每次连接的建立和关闭都需要时间，增加了网络延迟。</li><li>每个连接都需要消耗服务器和客户端的资源，限制了并发请求的数量。</li><li>每个请求都需要发送一些重复的数据，例如请求头，增加了数据传输的开销。</li></ul><p><strong>HTTP&#x2F;2</strong> 引入了多路复用机制，可以在一个连接上同时处理多个请求和响应。HTTP&#x2F;2 使用二进制协议，将请求和响应的数据划分为多个帧，每个帧都有一个独立的 ID，可以根据 ID 重新组装数据。这种方式的好处包括：</p><ul><li>可以复用连接，减少建立和关闭连接的开销。</li><li>可以在一个连接上同时处理多个请求和响应，提高并发性能。</li><li>可以发送多个请求和响应的数据帧，减少了数据传输的开销。</li></ul><h4 id="HTTP-x2F-1-1和HTTP-x2F-2建立连接流程图"><a href="#HTTP-x2F-1-1和HTTP-x2F-2建立连接流程图" class="headerlink" title="HTTP&#x2F;1.1和HTTP&#x2F;2建立连接流程图"></a>HTTP&#x2F;1.1和HTTP&#x2F;2建立连接流程图</h4><p>下面是使用 Mermaid 绘制的 HTTP&#x2F;1.1 从建立 TCP 连接到关闭 TCP 连接的流程图：</p><pre class="mermaid">sequenceDiagram    participant Client    participant Server    Client->>Server: SYN    Server->>Client: SYN-ACK    Client->>Server: ACK    Client->>Server: HTTP Request    Server->>Client: HTTP Response    Client->>Server: FIN    Server->>Client: ACK    Server->>Client: FIN    Client->>Server: ACK</pre><p>HTTP&#x2F;1.1 的流程图可以分为三个主要阶段：建立连接、发送请求和关闭连接。在建立连接阶段，客户端向服务器发送一个 SYN 报文，服务器收到后会回复一个 SYN-ACK 报文，客户端再回复一个 ACK 报文，建立起 TCP 连接。在发送请求阶段，客户端向服务器发送一个 HTTP 请求报文，服务器收到后会回复一个 HTTP 响应报文。在关闭连接阶段，客户端发送一个 FIN 报文表示不再发送数据，服务器回复一个 ACK 报文确认，然后服务器也发送一个 FIN 报文表示不再发送数据，客户端再回复一个 ACK 报文确认。这样连接就被完全关闭了。</p><p>下面是使用 Mermaid 绘制的 HTTP&#x2F;2 的流程图：</p><pre class="mermaid">sequenceDiagram    participant Client    participant Server    Client->>Server: ClientHello    Server->>Client: ServerHello    Client->>Server: Settings    Server->>Client: Settings    Client->>Server: Request 1    Client->>Server: Request 2    Server->>Client: Response 1    Server->>Client: Response 2</pre><p>HTTP&#x2F;2 的流程图也可以分为三个主要阶段：建立连接、发送请求和关闭连接。但是 HTTP&#x2F;2 的建立连接阶段和 HTTP&#x2F;1.1 不同，需要进行 TLS&#x2F;SSL 加密握手，建立安全的连接。在发送请求阶段，客户端可以同时发送多个请求，在同一个连接中进行多路复用。在接收请求阶段，服务器可以同时发送多个响应，在同一个连接中进行多路复用。在关闭连接阶段，客户端和服务器都可以发送一个 GOAWAY 帧来关闭连接。</p><p>以下是 HTTP&#x2F;2 的建立连接阶段的流程图，使用 Mermaid 语法：</p><pre class="mermaid">sequenceDiagram    participant Client    participant Server    Client->>Server: ClientHello    Server->>Client: ServerHello, Certificate, ServerHelloDone    Client->>Server: ClientKeyExchange, ChangeCipherSpec, Finished    Server->>Client: ChangeCipherSpec, Finished</pre><p>解释如下：</p><ul><li>首先，客户端向服务器发送 <code>ClientHello</code> 报文，其中包含客户端支持的协议版本、加密套件、压缩算法等信息。</li><li>服务器收到 <code>ClientHello</code> 报文后，会回复一个 <code>ServerHello</code> 报文，其中包含协商好的协议版本、加密套件、压缩算法等信息，以及服务器的数字证书和一个 <code>ServerHelloDone</code> 报文。</li><li>客户端收到 <code>ServerHello</code> 报文后，会向服务器发送 <code>ClientKeyExchange</code> 报文，该报文中包含一个随机数、加密协议中使用的密钥等信息。接着，客户端会发送一个 <code>ChangeCipherSpec</code> 报文，告诉服务器接下来的通信会使用协商好的密钥。最后，客户端发送一个 <code>Finished</code> 报文，其中包含用于校验通信数据完整性的摘要值。</li><li>服务器收到 <code>ClientKeyExchange</code> 报文后，会根据其中的信息生成一个会话密钥，并使用该密钥对 <code>ChangeCipherSpec</code> 报文进行加密。服务器也会发送一个 <code>ChangeCipherSpec</code> 报文告诉客户端接下来的通信会使用协商好的密钥。接着，服务器会发送一个 <code>Finished</code> 报文，其中包含用于校验通信数据完整性的摘要值。</li></ul><p>这样，客户端和服务器就成功建立了安全的连接，并开始进行数据传输。</p><p>所以，若有以下问题：</p><p>问：HTTP&#x2F;2 的建立连接阶段需要几次连接？</p><p>答：HTTP&#x2F;2 的建立连接阶段需要一次 TCP 连接，类似于 HTTP&#x2F;1.1，但是在建立 TCP 连接后，HTTP&#x2F;2 会使用一些新的协议和技术来优化数据传输，从而提高性能和安全性。具体而言，HTTP&#x2F;2 采用了二进制协议，引入了多路复用、帧、流等概念，可以更高效地利用一个 TCP 连接来传输多个请求和响应，而不是像 HTTP&#x2F;1.1 那样每个请求都需要建立一个 TCP 连接。因此，HTTP&#x2F;2 可以减少网络延迟和资源占用，提高页面加载速度和用户体验。</p><p>问：HTTP&#x2F;2请求需要几次 TCP 连接？</p><p>答：在 <strong>HTTP&#x2F;2 中，一个客户端和一个服务器之间只需要建立一次 TCP 连接，即可进行多个请求和响应的交互</strong>。这是因为 HTTP&#x2F;2 引入了多路复用技术，通过在一个 TCP 连接上同时进行多个流（stream）的请求和响应，从而避免了 HTTP&#x2F;1.1 中一个请求需要建立一个 TCP 连接的缺点，提高了网络性能和资源利用率。同时，HTTP&#x2F;2 还支持服务器推送（server push）等新特性，使得客户端可以在不发送请求的情况下接收服务器主动推送的资源，进一步提高了性能。</p><h2 id="HTTPS协议"><a href="#HTTPS协议" class="headerlink" title="HTTPS协议"></a>HTTPS协议</h2><p>HTTPS（Hypertext Transfer Protocol Secure）是在 HTTP 协议基础上加入 SSL&#x2F;TLS 安全层的加密协议，通过使用 SSL&#x2F;TLS 加密和认证机制，确保客户端和服务器之间的通信安全。HTTPS 的建立连接流程可以概括为以下几个步骤：</p><ol><li><p><strong>客户端发起 HTTPS 请求</strong>：客户端通过 URL 或者地址栏输入请求地址，并选择 HTTPS 协议。</p></li><li><p><strong>服务端返回证书</strong>：服务端接收到客户端请求后，会将自己的 SSL&#x2F;TLS 证书返回给客户端。证书中包含了服务器的公钥、证书颁发机构的信息和证书有效期等信息。</p></li><li><p><strong>客户端验证证书</strong>：客户端收到服务端的证书后，会验证证书的合法性。首先会检查证书是否过期，然后会查看证书颁发机构是否可信。如果证书未过期且颁发机构可信，则客户端会<strong>使用证书中的公钥加密</strong>一个随机数，并将加密后的随机数发送给服务端。</p></li><li><p><strong>服务端解密随机数</strong>：服务端接收到客户端发送的加密随机数后，会<strong>使用自己的私钥进行解密</strong>，得到客户端发来的随机数。</p></li><li><p><strong>客户端和服务端协商加密算法和密钥</strong>：客户端和服务端使用这个随机数作为对称加密算法中的密钥，对后续的通信进行加密。在这一步中，客户端和服务端会协商使用哪种加密算法和密钥长度，以及其他一些安全相关的参数。常用的加密算法有 AES、RC4、3DES 等。</p></li><li><p><strong>客户端发送加密请求</strong>：客户端使用协商好的加密算法和密钥，对请求进行加密，并发送给服务端。</p></li><li><p><strong>服务端解密请求</strong>：服务端接收到客户端发送的加密请求后，会使用协商好的密钥和加密算法进行解密，得到客户端发送的原始请求数据。</p></li><li><p><strong>服务端加密响应</strong>：服务端使用协商好的加密算法和密钥，对响应进行加密，并发送给客户端。</p></li><li><p><strong>客户端解密响应</strong>：客户端接收到服务端发送的加密响应后，会使用协商好的密钥和加密算法进行解密，得到服务端发送的原始响应数据。</p></li></ol><p>在上述过程中，SSL&#x2F;TLS 扮演了重要的角色，保证了通信过程的安全。具体而言，<strong>SSL&#x2F;TLS 通过使用非对称加密算法和数字证书来验证服务器的身份，保证通信双方的身份真实可信</strong>；<em>通过使用对称加密算法来加密请求和响应数据，防止中间攻击者截取和篡改数据</em>。下面是具体的过程：</p><ol><li><p>首先，客户端向服务器发送一个加密套件列表，该列表包含客户端支持的加密算法和协议版本等信息。</p></li><li><p>服务器从加密套件列表中选择一个加密套件，并向客户端返回服务器的数字证书和一些其他的信息，比如服务器支持的协议版本等。数字证书包含了服务器的公钥，以及一些其他的信息，比如服务器的域名等。</p></li><li><p>客户端收到服务器返回的数字证书后，首先要验证该数字证书的合法性。具体来说，客户端会检查证书的签名是否合法，证书中的信息是否与服务器提供的其他信息一致，证书是否已过期等。如果数字证书合法，那么客户端会提取其中的公钥。</p></li><li><p>接下来，客户端生成一个随机数（称为 Pre-Master Secret），并使用服务器的公钥将其加密，然后将加密后的 Pre-Master Secret 发送给服务器。</p></li><li><p>服务器收到客户端发送的加密后的 Pre-Master Secret 后，<strong>使用自己的私钥将其解密</strong>，得到 Pre-Master Secret。接着，服务器和客户端会分别根据一些预定的规则，使用 Pre-Master Secret 和之前的一些信息，生成出用于加密和解密数据的对称密钥。</p></li><li><p>客户端和服务器双方现在都有了用于加密和解密数据的对称密钥，通信双方将使用这个对称密钥来加密和解密请求和响应数据。</p></li></ol><p>通过上述过程，SSL&#x2F;TLS 建立了一个安全的通信渠道，确保了通信过程中数据的隐私性和完整性。中间攻击者即使能够截获通信过程中的数据，也由于<strong>缺乏合法的数字证书</strong>和<strong>私钥无法解密和篡改数据</strong>，从而保证了通信的安全。</p><p>下面是 HTTPS 的建立连接和数据传输阶段的流程图：</p><pre class="mermaid">sequenceDiagram    participant Client    participant Server    Client->>Server: 发送 Client Hello，包含加密套件列表和随机数    Server->>Client: 返回 Server Hello，选择加密套件，发送数字证书和随机数    Client->>Client: 验证数字证书，生成 Pre-Master Secret    Client->>Server: 发送加密的 Pre-Master Secret    Server->>Server: 解密 Pre-Master Secret，生成对称密钥    Server->>Client: 发送加密的连接建立完成消息    Client->>Client: 解密连接建立完成消息    Client->>Server: 发送加密的 HTTP 请求    Server->>Server: 解密 HTTP 请求    Server->>Server: 处理请求，发送加密的 HTTP 响应    Server->>Client: 发送加密的 HTTP 响应    Client->>Client: 解密 HTTP 响应</pre><p>其中，Client 和 Server 分别代表客户端和服务器，在流程图中表示为两个连续的竖直线。流程图中包含两个部分，第一部分为 HTTPS 建立连接阶段，第二部分为 HTTPS 数据传输阶段。在建立连接阶段，客户端和服务器之间交换加密套件列表、数字证书、随机数等信息，最终生成用于加密和解密数据的对称密钥。在数据传输阶段，客户端和服务器使用该对称密钥来加密和解密 HTTP 请求和响应数据。</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;TCP和HTTP握手&quot;&gt;&lt;a href=&quot;#TCP和HTTP握手&quot; class=&quot;headerlink&quot; title=&quot;TCP和HTTP握手&quot;&gt;&lt;/a&gt;TCP和HTTP握手&lt;/h2&gt;&lt;h3 id=&quot;TCP三次握手建立连接&quot;&gt;&lt;a href=&quot;#TCP三次握手建立连接&quot; class=&quot;headerlink&quot; title=&quot;TCP三次握手建立连接&quot;&gt;&lt;/a&gt;TCP三次握手建立连接&lt;/h3&gt;&lt;p&gt;TCP 是传输控制协议（Transmission Control Protocol）的缩写，用于在计算机之间可靠地传输数据。在建立 TCP 连接时，需要进行三次握手，即客户端发送 SYN 报文，服务器返回 SYN-ACK 报文，客户端再发送 ACK 报文，从而建立连接。这个过程的目的是确保双方都能够接收和发送数据，以保证数据传输的可靠性和完整性。&lt;/p&gt;
&lt;p&gt;具体来说，TCP 连接的三次握手过程如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;客户端发送 SYN 报文：客户端向服务器发送 SYN（同步）报文，请求建立连接，并选择一个随机的初始序列号（sequence number）。&lt;/li&gt;
&lt;li&gt;服务器返回 SYN-ACK 报文：服务器收到客户端的 SYN 报文后，向客户端发送 SYN-ACK（同步-确认）报文，表示已收到客户端的请求，并确认客户端的初始序列号。服务器同时也选择一个随机的初始序列号。&lt;/li&gt;
&lt;li&gt;客户端发送 ACK 报文：客户端收到服务器的 SYN-ACK 报文后，向服务器发送 ACK（确认）报文，确认收到了服务器的确认，并发送自己的初始序列号。此时，TCP 连接已建立。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;以下是 TCP 连接三次握手的 Mermaid 代码和图示：&lt;/p&gt;
&lt;pre class=&quot;mermaid&quot;&gt;sequenceDiagram
    participant Client
    participant Server
    Client-&gt;&gt;Server: SYN(同步报文)
    Server-&gt;&gt;Client: SYN-ACK(同步-确认报文)
    Client-&gt;&gt;Server: ACK(确认报文)&lt;/pre&gt;

&lt;h3 id=&quot;基于TCP的HTTP&quot;&gt;&lt;a href=&quot;#基于TCP的HTTP&quot; class=&quot;headerlink&quot; title=&quot;基于TCP的HTTP&quot;&gt;&lt;/a&gt;基于TCP的HTTP&lt;/h3&gt;</summary>
    
    
    
    
    <category term="TCP" scheme="https://xiaoyan94.github.io/tags/TCP/"/>
    
    <category term="HTTP" scheme="https://xiaoyan94.github.io/tags/HTTP/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot项目相关知识点</title>
    <link href="https://xiaoyan94.github.io/2021/02/09/SpringBoot%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    <id>https://xiaoyan94.github.io/2021/02/09/SpringBoot%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9/</id>
    <published>2021-02-09T06:22:09.000Z</published>
    <updated>2023-02-25T00:19:06.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Spring与SpringBoot"><a href="#Spring与SpringBoot" class="headerlink" title="Spring与SpringBoot"></a>Spring与SpringBoot</h2><p>Spring框架，它的主要功能包括IoC容器、AOP支持、事务支持、MVC开发以及强大的第三方集成功能等。</p><p>那么，Spring Boot又是什么？<strong>它和Spring是什么关系</strong>？</p><p><a href="https://spring.io/projects/spring-boot" target="_blank" rel="noopener">Spring Boot</a>是一个基于Spring的套件，它帮我们预组装了Spring的一系列组件，以便以尽可能少的代码和配置来开发基于Spring的Java应用程序。</p><a id="more"></a><ul><li><a href="#spring%E4%B8%8Espringboot">Spring与SpringBoot</a></li><li><a href="#springboot%E9%85%8D%E7%BD%AE">springboot配置</a><ul><li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F">配置文件格式</a></li><li><a href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%92%8C%E8%87%AA%E5%8A%A8%E6%89%AB%E6%8F%8F">自动配置和自动扫描</a></li><li><a href="#springboot%E8%87%AA%E5%8A%A8%E9%87%8D%E6%96%B0%E5%8A%A0%E8%BD%BD">springboot自动重新加载</a><ul><li><a href="#%E8%A7%A3%E5%86%B3idea%E4%B8%AD%E8%87%AA%E5%8A%A8%E9%87%8D%E5%90%AF%E4%B8%8D%E7%94%9F%E6%95%88">解决idea中自动重启不生效</a></li></ul></li><li><a href="#%E6%89%93%E5%8C%85springboot%E5%BA%94%E7%94%A8">打包springboot应用</a><ul><li><a href="#%E6%89%93jar%E5%8C%85%E5%92%8C%E8%BF%90%E8%A1%8Cjar%E5%8C%85">打jar包和运行jar包</a></li><li><a href="#%E6%89%93%E5%8C%85%E6%97%B6%E6%8E%92%E9%99%A4%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7">打包时排除开发者工具</a></li><li><a href="#%E6%8C%87%E5%AE%9A%E6%89%93%E5%8C%85%E6%96%87%E4%BB%B6%E5%90%8D%E7%A7%B0">指定打包文件名称</a></li></ul></li><li><a href="#%E7%98%A6%E8%BA%AB%E6%89%93%E5%8C%85%E5%BA%94%E7%94%A8%E5%87%8F%E5%B0%8Fjar%E5%8C%85%E4%BD%93%E7%A7%AF"><strong>瘦身打包</strong>应用减小jar包体积</a><ul><li><a href="#%E6%89%93%E5%8C%85%E5%90%8E%E4%BD%93%E7%A7%AF%E8%BF%87%E5%A4%A7%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0">打包后体积过大问题原因</a></li><li><a href="#%E7%98%A6%E8%BA%AB%E6%89%93%E5%8C%85%E9%85%8D%E7%BD%AE"><strong>瘦身打包配置</strong></a></li><li><a href="#%E7%98%A6%E8%BA%AB%E6%89%93%E5%8C%85%E6%8F%92%E4%BB%B6%E5%8E%9F%E7%90%86">瘦身打包插件原理</a><ul><li><a href="#%E7%98%A6%E8%BA%AB%E6%89%93%E5%8C%85%E9%A2%84%E7%83%AD">瘦身打包——预热</a></li></ul></li></ul></li><li><a href="#%E4%BD%BF%E7%94%A8%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">使用环境变量</a></li><li><a href="#%E4%BD%BF%E7%94%A8profiles%E8%BF%9B%E8%A1%8C%E4%B8%8D%E5%90%8C%E7%8E%AF%E5%A2%83%E7%9A%84%E9%85%8D%E7%BD%AE">使用profiles进行不同环境的配置</a><ul><li><a href="#%E4%BD%BF%E7%94%A8profiles%E8%BF%9B%E8%A1%8C%E6%9D%A1%E4%BB%B6%E8%A3%85%E9%85%8D">使用profiles进行条件装配</a></li></ul></li><li><a href="#%E4%BD%BF%E7%94%A8conditional%E8%BF%9B%E8%A1%8C%E6%9D%A1%E4%BB%B6%E8%A3%85%E9%85%8D">使用conditional进行条件装配</a></li><li><a href="#%E5%8A%A0%E8%BD%BD%E9%85%8D%E7%BD%AE%E5%88%B0bean%E4%B8%AD">加载配置到bean中</a></li></ul></li></ul><p>本文Spring Boot版本是3.x版，如果使用Spring Boot 2.x则需注意，两者有以下不同：</p><table><thead><tr><th></th><th>Spring Boot 2.x</th><th>Spring Boot 3.x</th></tr></thead><tbody><tr><td>Spring版本</td><td>Spring 5.x</td><td>Spring 6.x</td></tr><tr><td>JDK版本</td><td>&gt;&#x3D; 1.8</td><td>&gt;&#x3D; 17</td></tr><tr><td>Tomcat版本</td><td>9.x</td><td>10.x</td></tr><tr><td>Annotation包</td><td>javax.annotation</td><td>jakarta.annotation</td></tr><tr><td>Servlet包</td><td>javax.servlet</td><td>jakarta.servlet</td></tr><tr><td>JMS包</td><td>javax.jms</td><td>jakarta.jms</td></tr><tr><td>JavaMail包</td><td>javax.mail</td><td>jakarta.mail</td></tr></tbody></table><h2 id="springboot配置"><a href="#springboot配置" class="headerlink" title="springboot配置"></a>springboot配置</h2><h3 id="配置文件格式"><a href="#配置文件格式" class="headerlink" title="配置文件格式"></a>配置文件格式</h3><p><code>application.properties</code>作为默认配置文件。也可以使用YAML格式，将前者删除，再新建<code>application.yml</code>文件即可，SpringBoot 会自动识别和读取该配置文件。</p><h3 id="自动配置和自动扫描"><a href="#自动配置和自动扫描" class="headerlink" title="自动配置和自动扫描"></a>自动配置和自动扫描</h3><p>Spring Boot是一个基于Spring提供了开箱即用的一组套件，它可以让我们基于很少的配置和代码快速搭建出一个完整的应用程序。</p><p>Spring Boot有非常强大的<code>AutoConfiguration</code>功能，它是通过<strong>自动扫描+条件装配</strong>实现的。</p><p>启动Spring Boot应用程序只需要一行代码加上一个注解<code>@SpringBootApplication</code>，这样一个注解就相当于启动了<strong>自动配置和自动扫描</strong>。</p><h3 id="springboot自动重新加载"><a href="#springboot自动重新加载" class="headerlink" title="springboot自动重新加载"></a>springboot自动重新加载</h3><p>只需添加如下依赖到<code>pom.xml</code>：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>直接启动应用程序，然后试着修改源码，保存，观察日志输出，Spring Boot会自动重新加载。</p><p>默认配置下，针对<code>/static</code>、<code>/public</code>和<code>/templates</code>目录中的文件修改，不会自动重启，因为禁用缓存后，这些文件的修改可以实时更新。</p><p>经常要修改代码，然后重启Spring Boot应用。经常手动停止再启动，比较麻烦。</p><p>Spring Boot 提供的 <code>devtools</code> 可以监控 classpath 路径上的文件。只要源码或配置文件发生修改，Spring Boot 应用可以自动重启。在开发阶段，这个功能比较有用。</p><h4 id="解决idea中自动重启不生效"><a href="#解决idea中自动重启不生效" class="headerlink" title="解决idea中自动重启不生效"></a>解决idea中自动重启不生效</h4><p>修改了类文件后，idea不会自动编译，得修改idea设置。需要两步操作：</p><ol><li>打开 Idea 的<code>偏好设置——构建、执行、部署——编译器</code>，勾选<code>自动构建项目</code></li><li>打开 Idea 的<code>运行——编辑配置——（构建并运行）修改选项——Spring Boot——执行“更新”操作时</code>，选择<code>更新类和资源</code></li></ol><p>以上在IntelliJ IDEA 2022.3.2中测试ok。</p><h3 id="打包springboot应用"><a href="#打包springboot应用" class="headerlink" title="打包springboot应用"></a>打包springboot应用</h3><p>Spring Boot提供了一个Maven插件用于打包所有依赖到单一jar文件，此插件十分易用，无需配置。</p><h4 id="打jar包和运行jar包"><a href="#打jar包和运行jar包" class="headerlink" title="打jar包和运行jar包"></a>打jar包和运行jar包</h4><p>在Spring Boot应用中，打包更加简单，因为Spring Boot自带一个更简单的<code>spring-boot-maven-plugin</code>插件用来打包，我们只需要在<code>pom.xml</code>中加入以下配置：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>无需任何配置，Spring Boot的这款插件会自动定位应用程序的入口Class，执行以下Maven命令即可打包：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean package</span><br></pre></td></tr></table></figure></div><p>使用<code>java -jar</code>命令即可运行。</p><h4 id="打包时排除开发者工具"><a href="#打包时排除开发者工具" class="headerlink" title="打包时排除开发者工具"></a>打包时排除开发者工具</h4><p>使用早期的Spring Boot版本时，需要配置一下才能排除<code>spring-boot-devtools</code>这个依赖：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">excludeDevtools</span>&gt;</span>true<span class="tag">&lt;/<span class="name">excludeDevtools</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h4 id="指定打包文件名称"><a href="#指定打包文件名称" class="headerlink" title="指定打包文件名称"></a>指定打包文件名称</h4><p>如果不喜欢默认的项目名+版本号作为文件名，可以加一个配置指定文件名：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>awesome-app<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>这样打包后的文件名就是<code>awesome-app.jar</code>。</p><h3 id="瘦身打包应用减小jar包体积"><a href="#瘦身打包应用减小jar包体积" class="headerlink" title="瘦身打包应用减小jar包体积"></a><strong>瘦身打包</strong>应用减小jar包体积</h3><h4 id="打包后体积过大问题原因"><a href="#打包后体积过大问题原因" class="headerlink" title="打包后体积过大问题原因"></a>打包后体积过大问题原因</h4><p>使用Spring Boot提供的<code>spring-boot-maven-plugin</code>打包Spring Boot应用，可以直接获得一个完整的可运行的jar包，把它上传到服务器上再运行就极其方便。</p><p>但是这种方式也不是没有缺点。最大的缺点就是包太大了，动不动几十MB，在网速不给力的情况下，上传服务器非常耗时。并且，其中我们引用到的Tomcat、Spring和其他第三方组件，只要版本号不变，这些jar就相当于每次都重复打进去，再重复上传了一遍。</p><p>真正经常改动的代码其实是我们自己编写的代码。如果只打包我们自己编写的代码，通常jar包也就几百KB。但是，运行的时候，classpath中没有依赖的jar包，肯定会报错。</p><p>所以问题来了：如何只打包我们自己编写的代码，同时又自动把依赖包下载到某处，并自动引入到classpath中。解决方案就是使用<code>spring-boot-thin-launcher</code>。</p><h4 id="瘦身打包配置"><a href="#瘦身打包配置" class="headerlink" title="瘦身打包配置"></a><strong>瘦身打包配置</strong></h4><p>给原来的<code>spring-boot-maven-plugin</code>增加一个<code>&lt;dependency&gt;</code>：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">excludeDevtools</span>&gt;</span>true<span class="tag">&lt;/<span class="name">excludeDevtools</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot.experimental<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-thin-layout<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--瘦身插件:版本应该是和org.springframework.boot版本有关系,版本不匹配会运行报错--&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.28.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--java -Dthin.root=. -jar target/springboot-hello-1.0-SNAPSHOT.jar--&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--java -Dthin.dryrun=true -Dthin.root=. -jar</span></span><br><span class="line"><span class="comment">           target/springboot-hello-1.0-SNAPSHOT.jar--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><strong>注意版本问题</strong>：</p><ul><li>SpringBoot版本：<code>3.0.2</code></li><li>spring-boot-thin-layout版本：<code>1.0.28.RELEASE</code></li></ul><p>打包命令：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mvn clean package </span><br><span class="line">ll target # 查看打包输出</span><br></pre></td></tr></table></figure></div><h4 id="瘦身打包插件原理"><a href="#瘦身打包插件原理" class="headerlink" title="瘦身打包插件原理"></a>瘦身打包插件原理</h4><p>利用<code>spring-boot-thin-launcher</code>可以给Spring Boot应用瘦身。其原理是<strong>记录app依赖的jar包，在首次运行时先下载依赖项并缓存到本地</strong>。</p><p>实际上<code>spring-boot-thin-launcher</code>这个插件改变了<code>spring-boot-maven-plugin</code>的默认行为。它输出的jar包只包含我们自己代码编译后的class，一个很小的<code>ThinJarWrapper</code>，以及解析<code>pom.xml</code>后得到的所有依赖jar的列表。</p><p>运行的时候，入口实际上是<code>ThinJarWrapper</code>，它会先在指定目录搜索看看依赖的jar包是否都存在，如果不存在，先从Maven中央仓库下载到本地，然后，再执行我们自己编写的<code>main()</code>入口方法。这种方式有点类似很多在线安装程序：用户下载后得到的是一个很小的exe安装程序，执行安装程序时，会首先在线下载所需的若干巨大的文件，再进行真正的安装。</p><p>这个<code>spring-boot-thin-launcher</code>在启动时搜索的默认目录是用户主目录的<code>.m2</code>，我们也可以指定下载目录，例如，将下载目录指定为当前目录：</p><p>运行命令：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -Dthin.root=. -jar awesome-app.jar</span><br></pre></td></tr></table></figure></div><p>上述命令通过环境变量<code>thin.root</code>传入当前目录，执行后发现当前目录下自动生成了一个<code>repository</code>目录，这和Maven的默认下载目录<code>~/.m2/repository</code>的结构是完全一样的，只是它仅包含<code>awesome-app.jar</code>所需的运行期依赖项。</p><p>注意：只有首次运行时会自动下载依赖项，再次运行时由于无需下载，所以启动速度会大大加快。如果删除了repository目录，再次运行时就会再次触发下载。</p><h5 id="瘦身打包——预热"><a href="#瘦身打包——预热" class="headerlink" title="瘦身打包——预热"></a>瘦身打包——预热</h5><p>把79KB大小的<code>awesome-app.jar</code>直接扔到服务器执行，上传过程就非常快。但是，第一次在服务器上运行<code>awesome-app.jar</code>时，仍需要从Maven中央仓库下载大量的jar包，所以，<code>spring-boot-thin-launcher</code>还提供了一个<code>dryrun</code>选项，专门用来下载依赖项而不执行实际代码：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -Dthin.dryrun=true -Dthin.root=. -jar awesome-app.jar</span><br></pre></td></tr></table></figure></div><p><em><strong>如果执行报错，可能是版本的原因，换个版本试试</strong></em>。</p><p>执行上述代码会在当前目录创建<code>repository</code>目录，并下载所有依赖项，但并不会运行我们编写的<code>main()</code>方法。此过程称之为“预热”（warm up）。</p><p>如果服务器由于安全限制不允许从外网下载文件，那么可以在本地预热，然后把<code>awesome-app.jar</code>和<code>repository</code>目录上传到服务器。只要依赖项没有变化，后续改动只需要上传<code>awesome-app.jar</code>即可。</p><h3 id="使用环境变量"><a href="#使用环境变量" class="headerlink" title="使用环境变量"></a>使用环境变量</h3><p>在配置文件中，我们经常使用如下的格式对某个key进行配置：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: $&#123;APP_PORT:18081&#125;</span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: $&#123;APP_NAME:unnamed&#125;</span><br></pre></td></tr></table></figure></div><p>这种<code>${APP_PORT:18081}</code>意思是，首先从环境变量查找<code>APP_PORT</code>，如果环境变量定义了，那么使用环境变量的值，否则，使用默认值<code>18081</code>。</p><p>这使得我们在开发和部署时更加方便，因为开发时无需设定任何环境变量，直接使用默认值即本地数据库，而实际线上运行的时候，只需要传入环境变量即可：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">APP_PORT=801 java -Dthin.dryrun=false -Dthin.root=. -jar target/springboot-hello-1.0-SNAPSHOT.jar</span><br></pre></td></tr></table></figure></div><h3 id="使用profiles进行不同环境的配置"><a href="#使用profiles进行不同环境的配置" class="headerlink" title="使用profiles进行不同环境的配置"></a>使用profiles进行不同环境的配置</h3><ul><li>通过Profile可以实现一套代码在不同环境启用不同的配置和功能。</li><li>Spring Boot允许在一个配置文件中针对不同Profile进行配置；</li><li>Spring Boot在未指定Profile时默认为default。</li></ul><p>Profile本身是Spring提供的功能，Profile表示一个环境的概念，如开发、测试和生产这3个环境：</p><ul><li>native</li><li>test</li><li>production</li></ul><p>或者按git分支定义master、dev这些环境：</p><ul><li>master</li><li>dev</li></ul><p>在启动一个Spring应用程序的时候，可以传入一个或多个环境，例如：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Dspring.profiles.active=test,master</span><br></pre></td></tr></table></figure></div><p>Spring Boot对Profiles的支持在于，可以在application.yml中为每个环境进行配置。下面是一个示例配置：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="YML"><figure class="iseeu highlight /yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="string">$&#123;APP_PORT:18081&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">$&#123;APP_NAME:unnamed&#125;</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:hsqldb:file:testdb</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">sa</span></span><br><span class="line">    <span class="attr">password:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">org.hsqldb.jdbc.JDBCDriver</span></span><br><span class="line">    <span class="comment"># HikariCP配置:</span></span><br><span class="line">    <span class="attr">hikari:</span></span><br><span class="line">      <span class="attr">auto-commit:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">connection-timeout:</span> <span class="number">3000</span></span><br><span class="line">      <span class="attr">validation-timeout:</span> <span class="number">3000</span></span><br><span class="line">      <span class="attr">max-lifetime:</span> <span class="number">60000</span></span><br><span class="line">      <span class="attr">maximum-pool-size:</span> <span class="number">20</span></span><br><span class="line">      <span class="attr">minimum-idle:</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="attr">pebble:</span></span><br><span class="line">  <span class="attr">suffix:</span></span><br><span class="line">  <span class="attr">cache:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  Spring Boot对Profiles的支持在于，可以在application.yml中为每个环境进行配置。下面是一个示例配置：</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="attr">activate:</span></span><br><span class="line">      <span class="attr">on-profile:</span> <span class="string">test,debug</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">info,</span> <span class="string">health,</span> <span class="string">beans,</span> <span class="string">env,</span> <span class="string">metrics</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="string">$&#123;APP_PORT:8000&#125;</span></span><br><span class="line">  <span class="comment"># 使用环境变量: APP_PORT=801 java -Dthin.dryrun=false -Dthin.root=. -Dspring.profiles.active=test -jar target/springboot-hello-1.0-SNAPSHOT.jar</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="attr">activate:</span></span><br><span class="line">      <span class="attr">on-profile:</span> <span class="string">production</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="attr">pebble:</span></span><br><span class="line">  <span class="attr">cache:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment">#  注意到分隔符---，最前面的配置是默认配置，不需要指定Profile，后面的每段配置都必须以spring.config.activate.on-profile.profiles: xxx开头，表示一个Profile。</span></span><br><span class="line"><span class="comment">#  上述配置默认使用的前面配置的端口，但是在test环境下，使用8000端口，在production环境下，使用80端口，并且启用Pebble的缓存。</span></span><br><span class="line"><span class="comment">#  如果不指定任何Profile，直接启动应用程序，那么Profile实际上就是default，可以从Spring Boot启动日志看</span></span><br><span class="line"><span class="comment">#  可以使用条件装配 @Profile("default") @Profile("test") @Profile("production")实现不同环境下使用不同的bean</span></span><br></pre></td></tr></table></figure></div><p>指定了<code>-Dspring.profiles.active=test</code>，那么Profile实际上就是<code>test</code>，，可以从Spring Boot启动日志看出：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  APP_PORT=801 java -Dthin.dryrun=false -Dthin.root=. -Dspring.profiles.active=test -jar target/springboot-hello-1.0-SNAPSHOT.jar</span><br><span class="line"></span><br><span class="line">  .   ____          _            __ _ _</span><br><span class="line"> /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \</span><br><span class="line">( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \</span><br><span class="line"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br><span class="line">  '  |____| .__|_| |_|_| |_\__, | / / / /</span><br><span class="line"> =========|_|==============|___/=/_/_/_/</span><br><span class="line"> :: Spring Boot ::                (v3.0.2)</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">2023-02-06T22:44:23.010+08:00  INFO 2452 --- [           main] com.itranswarp.learnjava.Application     : The following 1 profile is active: "test"</span><br><span class="line">...</span><br><span class="line">2023-02-06T22:44:24.419+08:00  INFO 2452 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 801 (http)</span><br><span class="line">...</span><br><span class="line">2023-02-06T22:44:25.837+08:00  INFO 2452 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 801 (http) with context path ''</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div><h4 id="使用profiles进行条件装配"><a href="#使用profiles进行条件装配" class="headerlink" title="使用profiles进行条件装配"></a>使用profiles进行条件装配</h4><p>在接口实现类的 Bean 上使用<code>@Profile(&quot;default&quot;)</code>注解，即默认启用该 Bean；在另一个实现类上使用<code>@Profile(&quot;!default&quot;)</code>注解，即非<code>default</code>环境时，启用该 Bean。</p><p>这样，一套代码，就实现了不同环境启用不同的配置。根据<code>Component</code>的不同<code>@Profile</code>注解，决定装配哪个<code>Component</code>的过程就是<strong>条件装配</strong>。</p><h3 id="使用conditional进行条件装配"><a href="#使用conditional进行条件装配" class="headerlink" title="使用conditional进行条件装配"></a>使用conditional进行条件装配</h3><h3 id="加载配置到bean中"><a href="#加载配置到bean中" class="headerlink" title="加载配置到bean中"></a>加载配置到bean中</h3>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;Spring与SpringBoot&quot;&gt;&lt;a href=&quot;#Spring与SpringBoot&quot; class=&quot;headerlink&quot; title=&quot;Spring与SpringBoot&quot;&gt;&lt;/a&gt;Spring与SpringBoot&lt;/h2&gt;&lt;p&gt;Spring框架，它的主要功能包括IoC容器、AOP支持、事务支持、MVC开发以及强大的第三方集成功能等。&lt;/p&gt;
&lt;p&gt;那么，Spring Boot又是什么？&lt;strong&gt;它和Spring是什么关系&lt;/strong&gt;？&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://spring.io/projects/spring-boot&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Spring Boot&lt;/a&gt;是一个基于Spring的套件，它帮我们预组装了Spring的一系列组件，以便以尽可能少的代码和配置来开发基于Spring的Java应用程序。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Java" scheme="https://xiaoyan94.github.io/tags/Java/"/>
    
    <category term="SpringBoot" scheme="https://xiaoyan94.github.io/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>浏览器window对象中的本地存储和会话存储</title>
    <link href="https://xiaoyan94.github.io/2021/01/20/%E6%B5%8F%E8%A7%88%E5%99%A8window%E5%AF%B9%E8%B1%A1%E4%B8%AD%E7%9A%84%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8%E5%92%8C%E4%BC%9A%E8%AF%9D%E5%AD%98%E5%82%A8/"/>
    <id>https://xiaoyan94.github.io/2021/01/20/%E6%B5%8F%E8%A7%88%E5%99%A8window%E5%AF%B9%E8%B1%A1%E4%B8%AD%E7%9A%84%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8%E5%92%8C%E4%BC%9A%E8%AF%9D%E5%AD%98%E5%82%A8/</id>
    <published>2021-01-20T11:00:33.000Z</published>
    <updated>2023-02-25T00:19:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>为了满足各种各样的需求，会经常性在本地存储大量的数据，HTML5规范提出了相关解决方案<br>本地存储特性。</p><ul><li>1 数据存储在用户浏览器中</li><li>2 设置、读取方便、甚至页面刷新不丢失数据</li><li>3 容量较大，sessionStorage约5M、localStorage约20M</li><li>4 只能存储字符串，可以将对象JSON.stringify() 编码后存储</li></ul><h2 id="1-window-sessionStorage"><a href="#1-window-sessionStorage" class="headerlink" title="1 window.sessionStorage"></a>1 window.sessionStorage</h2><p>方法：</p><ul><li>存储数据 ： sessionStorage.setItem(key, value)</li><li>获取数据 ： sessionStorage.getItem(key)</li><li>删除数据 ： sessionStorage.removeItem(key)</li><li>删除所有数据 ： sessionStorage.clear()</li></ul><ol><li>生命周期为关闭浏览器窗口</li><li>在同一个窗口（页面）下数据可以共享</li><li>以键值对的形式存储使用</li></ol><p>例子：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"set"</span>&gt;</span>存储数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"get"</span>&gt;</span>获取数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"remove"</span>&gt;</span>删除数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"del"</span>&gt;</span>清空所有数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(localStorage.getItem(<span class="string">'username'</span>));</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> ipt = <span class="built_in">document</span>.querySelector(<span class="string">'input'</span>);</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">var</span> <span class="keyword">set</span> = document.querySelector(<span class="string">'.set'</span>);</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">var</span> <span class="keyword">get</span> = document.querySelector(<span class="string">'.get'</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> remove = <span class="built_in">document</span>.querySelector(<span class="string">'.remove'</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> del = <span class="built_in">document</span>.querySelector(<span class="string">'.del'</span>);</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">set</span>.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 点击之后，可以把表单里面的值存储起来</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> val = ipt.value;</span></span><br><span class="line"><span class="actionscript">    sessionStorage.setItem(<span class="string">'uname'</span>, val);</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// sessionStorage.setItem('pwd', val);</span></span></span><br><span class="line">  &#125;);</span><br><span class="line"><span class="actionscript">  <span class="keyword">get</span>.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 当我们点击了之后，就可以把表单里面的值获取过来</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(sessionStorage.getItem(<span class="string">'uname'</span>));</span></span><br><span class="line">  &#125;);</span><br><span class="line"><span class="actionscript">  remove.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    sessionStorage.removeItem(<span class="string">'uname'</span>);</span></span><br><span class="line">  &#125;);</span><br><span class="line"><span class="actionscript">  del.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    sessionStorage.clear(); <span class="comment">// 清除所有的</span></span></span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h2 id="2-window-localStorage"><a href="#2-window-localStorage" class="headerlink" title="2 window.localStorage"></a>2 window.localStorage</h2><ul><li>存储数据 ： localStorage.setItem(key, value)</li><li>获取数据 ： localStorage.getItem(key)</li><li>删除数据 ： localStorage.removeItem(key)</li><li>删除所有数据 ： localStorage.clear()</li></ul><ol><li>声明周期永久生效，除非手动删除 否则关闭页面也会存在</li><li>可以多窗口（页面）共享（同一浏览器可以共享）</li><li>以键值对的形式存储使用</li></ol><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"set"</span>&gt;</span>存储数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"get"</span>&gt;</span>获取数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"remove"</span>&gt;</span>删除数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"del"</span>&gt;</span>清空所有数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> ipt = <span class="built_in">document</span>.querySelector(<span class="string">'input'</span>);</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">var</span> <span class="keyword">set</span> = document.querySelector(<span class="string">'.set'</span>);</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">var</span> <span class="keyword">get</span> = document.querySelector(<span class="string">'.get'</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> remove = <span class="built_in">document</span>.querySelector(<span class="string">'.remove'</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> del = <span class="built_in">document</span>.querySelector(<span class="string">'.del'</span>);</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">set</span>.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> val = ipt.value;</span></span><br><span class="line"><span class="actionscript">    localStorage.setItem(<span class="string">'username'</span>, val);</span></span><br><span class="line">  &#125;)</span><br><span class="line"><span class="actionscript">  <span class="keyword">get</span>.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(localStorage.getItem(<span class="string">'username'</span>));</span></span><br><span class="line">  &#125;)</span><br><span class="line"><span class="actionscript">  remove.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    localStorage.removeItem(<span class="string">'username'</span>);</span></span><br><span class="line">  &#125;)</span><br><span class="line"><span class="actionscript">  del.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">    localStorage.clear();</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"username"</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"remember"</span>&gt;</span> 记住用户名</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> username = <span class="built_in">document</span>.querySelector(<span class="string">'#username'</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> remember = <span class="built_in">document</span>.querySelector(<span class="string">'#remember'</span>);</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">if</span> (localStorage.getItem(<span class="string">'username'</span>)) &#123;</span></span><br><span class="line"><span class="actionscript">    username.value = localStorage.getItem(<span class="string">'username'</span>);</span></span><br><span class="line"><span class="actionscript">    remember.checked = <span class="literal">true</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="actionscript">  remember.addEventListener(<span class="string">'change'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">if</span> (<span class="keyword">this</span>.checked) &#123;</span></span><br><span class="line"><span class="actionscript">      localStorage.setItem(<span class="string">'username'</span>, username.value)</span></span><br><span class="line"><span class="actionscript">    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">      localStorage.removeItem(<span class="string">'username'</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html"></summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>应用系统集成——访问控制</title>
    <link href="https://xiaoyan94.github.io/2020/08/23/%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E9%9B%86%E6%88%90%E2%80%94%E2%80%94%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/"/>
    <id>https://xiaoyan94.github.io/2020/08/23/%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E9%9B%86%E6%88%90%E2%80%94%E2%80%94%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/</id>
    <published>2020-08-23T10:49:45.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="1bb7e1202d7a56ba3f9ba51803905a18787776e14e75a8d6b0aeae234a166ab3">7c793cdffb54895c1d45763e698a9f484a18f095f8234f19802045564da165e928f5a7985175caebce06753cac6befad73fdd5e4e15213e1c5dda6816485790b8af9cdbf2c532c1f2a8c059ba544868645e657fd9161741cc391eb6a4e0aa01cc85634a0fe75b9bb1957687c6b37e75b21de1e69475d0323555d38c73579fec24b86e3fb1a069307c0e8b15acc83947ee49e6f9c0aba303ffdca3173af306c12df0cde1b3f3c243a185a59517304b986a58a4dbc2eefa48dcf82f48f8b00f9f37c4cd079e6b3aedaf2f939b0616132a09fb167be0a857e90bdccfc4a4532dbc2098033d588b915cbc69675e2e4e1886c9b020535bc6dbe4bcddb6e13e0173e7f4fcb3e6587138eafe6512376dd5997ca235fd98dcb5411fc49d9be1cdd06f52366ec57c53a03919a8b8ab800a68bfc6eaae2bb4ef1114f832eb09d60ae90275f4cf912e09b9c974094142001c8e42eaefa3bd0d792ea85a8543d2c955c4c5100a50756d299d227036f95bc670fb1ed96e434f01f1da4863d68f7e0f1915005681e112117373d8174ab799ce36af15f194e6ea5eed9220a997a0bef6489aa268031565f5a503f2e8751a385fbe5bd29af37bbc0f36c206d77c5e857b10512469d3f0100301a0b0d98b8592b93f028685396ee46ac154b8bcc3e496ad1b91d9193c91665031f83536af55571155fcc7dc1dcc963fa79d144ed7dab5a4ca9d20c21d554d3e04bb8f486c9fec7b6fce6e72b867c5709b2e6950cf030747fb78a77f5c22b67fa0d45e3cd120d37524a1ac6654597e4879291682689779a074e29c0587054e76fb0758aba6ec4798a113447920c9e4a8a0e3000a7fa4ad092ccdb8f358ff79c49a2b628ac3edb5e0f3db2cebd98955c19dc0be9336edbe69e6e7c39f8de580a12a06419a7dd7d6d57b17be2033e8996160113b84ca48a93b6edd08066f4daf4bd4bf3b3d28dabe2854605ce822ff4f5c007c81ed495a386962a648072e535fcb84ec7eff8a2434b5243d7090bd73504deb6ba2d9d32f513163c2d791338f8f80b7ba55c70d134b4c4ec719d5e23dd91d1b606bf875af3cbc59035e58ff7edc12c1e79684c92c0cc5e53733bb66b1f5ea4f49e1fc91094c4b87d9fd831fbaf4d4bc0080095042aa9d2ea7c6bdd8d8276b5dd0733f5d71890f977e24cccec22f40841a367347adf32b7a0d2f0d5ba9183715a85bf269ffa9730aefc0d0234dbfecf4b77641ed176be76a66310348f29cfd5df9abe0f933d8b19e39ee7c4406b71835b66a4ad69540352cd16e9048f873eee632ca17d5c3947bf3062bb1a754c252608d8ae9b5d371ba46b06aa993f3bd729289be1514eba13700ff72f8d712a33eac72a70c60a0153f7a1430c17d12abfff1150b3db5293d4b767d1504401a5abc4360c9d8e4f5d23685345ec86fd3aa7cc4cd9becdc37704072e8be4c592046c5722c50800ea3075c673239065b598378e8de92563a7362d71b4292cc7a7faaa910dd616d8d3eb05f440159ffaa9a5be3ce8ec8aa6f02a2b82a7fc7eefcbc5a9e9b6e31699677f35e2432a621e1f8f45de2d65d0cf6cbc3b0ed31e9191cb3346238a3b1073bcddbcffc390e241ddab3b1bf3b659a2451f12c3286d5c656f1e33ed65b33ae1c943128a9ad93d2f04d01ff5b2bcdf148f561334147661769693ef93a9236ee578166297a5f654c7e32562aa5bac0bdc93b732b0525b4bf29a6879ffc47752efa9756cd74dddac02a1c773fead2d44adffc18e7bc9afac245fcb12b72f8d4a6de5599ba0d3676d68e36a4e2b6f9abca67244be2524463e23acb6902ce5bacd46531d225639b5fe9bf9851241bec3a6ec85e6250af450146229c9c0790c0082be3a2b9ba048f51e7990ea90c1c88a91a245602f4762c75e5be0e837c4bab29872a7cfe31cc4a262c79793b8eedf26b9d5d2e3b9089f9a21825c23338318359bece6a612a2ba1fc19dea45e0a393b0d730476fefafd4ee0358f217d9947b5ef1e4574c64a9af31425eb09068a5fe8ed097a1eed2fc4f2e101363626df792e5ba8a1bc4debc79e7c366beefa0da75e29d73a16a34260aa814b2b78c683a1df5529c3356c828e3ca06670dfe06037015d946639dee4fdfd4206072addccf7c3cd33eee79b62ab58988b7d158d8e2dac2a72e52c599ff35ef884f4d8416c2d8e95f03cae80bac0526d963f9901e6b7a24ea93ccf8d08a6c88613066231c8bc1aff119294ce989a98aed08709ee5292b5074b423af4e2e640491a783033fc7410c64702e68967db148ea248685a88ecefd7133dcf93a196ee140909df1de4e0f450caa69a1a66441d6038031307305fe5c87fb1a83c22a18bb50c8ebe0d3b65ddf59e0fd9918dc2f767d207c98495e3530d54013bcc340fef62850e0708504a7807e8025a430a3d0480e348c868948642d141d28a03bbf5290639edad80bba02ecac9b50dd4d65b6be12d972e976bc80993ab5ba6d50fd115702c7d699f445f497b23093e5ea4311b2a2453f05e6b2f8a119c4037cf805e37531ecbed2a9c02c25540f64f8f1c19b3c199a3ec8917bc6621d6657b12fc6c867531c909b59dfcc39dc76a9e572e23c1cbaef254d14c24078dc5095828635b29835725bbe095db7e7ce57fb0e1d40b8f33535e6370d2c54bf125853c9048986f4716aee9be493609e7550330d79bff2ab2719dff6042dcf03c685afd5cb4ab96b77124652321d5079b814edba03941debba408e5662062e3f97cb9e23e649335fc4d534df51bdb33c03fc09ee1261aedc94cd6c285db52438464b3b996c6700c5f92b2d3cb3358fe546a26d0542386d128a49284ab6ae389f46d888ff78f446ac99bfe313ec9ebfe51359c2cbf28313964a26157abc0382dbe7b4bd33766037589fff9b3dd1ba12fd1aaacfe2e2da3611f6ab2db842c1d3d529c89464e3d9c8f194a5aa12702203f327633d238e0e54300b632facf0473f91f76eb426e7344aca2d5d2c9c7629744632b56d04851d62e2d375e69f1329b3a5fa5b8ca7f92db7648523e4fefc28d91c0e5f8f3da883479def374b95d57af05dc28133d91dc15a68dfd9fb8cd701783785105e9399253d4c526a4b4fdd8bfe587c9e156a2b900701201caa1d71eceaf86f3b34b51c1701aecbeb5ac4e34fcb81bd18c173a9d725dd66ee5f2c96da9ba08ae2115556a15c65217face1e35efa99d077cb1b5341173de5fdcd1eff880172d1178345e362e740d9586e37123c8a658775c8e6a6b52e19cf7825e0fc08daa930aa39109bcc8bc3eb70f4a5f8f69a8e53f6f16fce3e3f2466a19e324c1b25734c850922e3972de369a2aa68589cc40d8f47f4ce5c13fc74266ee5beb4da4e610889f24ad7a9a2b01dcd23e1f2d900b1a9d57c7a99693f274bf21f1d551e431bb88ea0f4614631618fbe2ee746581b6a342f1d3353f7d64498c8a1e62955d6f43e70122f56588bf5119e59c94decca9284ab6f11351a234bc3b46e9c46ff7868ed0b39a9b6f2e07e56619ba62511564e9cb9995d18ebfa078e63c23617475057af4365506a1b37da32cf0ab0410da45be47e9d17d36c2b54273ebf9cf6574a6148ead76d193dda77889c2dc0b8905f80d05e2cdf668d047eef62f66c14c40d296669d781f236e0bc3bec73b0ad9cbbc2199cd680842325a03f2578be4f77d5395f96d131f2cb64c465fe44994f808d1328029a3fd9069f17c9cd8cd730a0ddd985973192dcf817efe1f6834af2587f255d2089785ce4d87075f941b901e2c8ef4bef3328127dbfe4391159564f7d5e712bbb43286557b290e3eedc900b9601937ac4ce446941a116503f74cdc80402c66063debdd33909805dd77f3c5940b0438d2e97692218113881f19355aa4f063f2465bcb072dc79925ebc2339e0efcbc3cc4699a751e6a1910586804635ff23e4cedd0db8a33cdfbd073a434ef626e32da3f07fbfb5724038dbd81918341fcb430687ff91e772dd74feb319fe46fce2da3abd0a6dc9a5bef0db22e25ba95ac73bcd3f75c616c94fd791516c793a49db5b89223d7cdbb798aebd5dd18f3ab5a835b97ab7d7328ea811e639631538227b7471dbeb0403fc9bca5c55a4cd36da7cf5b84cdb40322ee298dc9adacddba903a4f2e2b7e93bcc6d67324a08da5850133a8f0f589e850fc93eb570db16de29750a6058fb127ae1616f54566d162bf708402d2cfb315801dd17705205e3025ef65bb6cb85e384960a7be24b8eb9855036155958de7ae6125a64b80f0edf92029133159f2b2d4a64673156c84a183c40da208831f2b2f7d456e84b784ee038521c57100c1db6c7bd4100f358efda6c6c52e4667135be3eb5f6df998bc75e98fd7b9f6745b116fa292352a120a4e9d6bcda0dbd36bf7829ddffcac98c3c6f023bd0deb6d44212960588348423535f2225b20b2fde3f9d4024e5f9298e3c227aed6145a45dee9bf4e27a021d117a5a7d7a1cf11e28cf2c38e608f0baadcef153e9966a85d4b4a974264e293349966a4eb3c00146995d8af6d9a6d0dc3d6594dea1efbf1e5d6643f67132a465e5973e26e26a3b4ae4db0591271e96d9318976640308b170b3f3e1b847f6525b50a5f28aec203ce1f780b9560ace5576e5fd7f2217d2b9783c959dc0862a941be3443d28c285933bcd65682ba3b6c62339b30b2bea38334fcdf11c7097bdb52cdfa04c840e70ccf2a902949f2d1c23f1c3059d64ff8b42fff027e55d3516c55d8dcf03706a7e0156843d420f91f57df09a003ce9f6e9dbb9e3482cc17392a5b11f9186007b79c59cdea8c550b71004d7621dfcd261d9ddea75c8d2ff1a30ddf7440641a8cb09ac2fd124b0cf1edf36177c815143fbe828098965cbcf2603e57e6a789a81bd48f4857572a49cc03442120e4c0a9636a76b5a30ca2a187a8fe0e6e4e224c1957e8ad07bd6e95e33f8bc8ad859a36807bc8fedcb6f66a0f3fe450f9cbe79ccd90bacf0344ef01284c2407b94f6ff4b4a0a611b75ca57fb7353d0ae0b9c1fce5ee711ca6b0b8ec3fbef41cf8f142685f333b3462b4201c953e4578c7bcbcf8d3997d96cd79d9c3da0894f69f6ee86be49240dda28802ebc7fce9577390db98e0da20463a8f5e8c30e0cfdde7a4193ccb0edcdfd68021250bfba96eaadfc7085ffff5b953e70e09436a35f9a79bd8d2f4240589dc64fdb2beef97c75c9700a6ce91c319d86cc7882661ff5616bcb3288fa9c594a5923424b3304f802e7cdf96851aa9a32c2babff907b6a63f5ee8e6aa6d37ad8fd995baad04ddab1cd0e5cd946d7c72c36a88b8c561a324370a4f7bed43dd33d7758ae42a733513335a350e71e6f4eb3ec36dd1beeb133327c685c96d61231d997b55f16a420d691c760aaade1a01be4fa5a3a6965255c912ed6a392264df4768d575a99a88e00030dd588da07881efcbae3721441ab45e047101c217ca76acd0f013649d07be17481d53b283bd036531aabdb69e90c8d022aef3000674ca9950a601a1c5dc347ea7a0a5cd2869b9f27fae46863a02488b0520319045cf450c698f57ba50da0412bedf1497f607509e327dab6d381aff474a2ba797b9439983d1001e22f75585616ddab3619e66215ac99fce2b4ff38a92352600dbc5b71a0cdf7ffd6cae5fa3fa867a5884a0249e8410814948290caad01b66b69a05d4640946a3bfe2732c50f9264d33861485255b98f0ce45b1bdf2623d05237d81eec00442ddd41ed64aa37147bc2ac7a25b67677e3a96737b300beb104369e245c9a7263361ca481eac7d1f293b3af5b8aabc13fa4c4ff74b66714cf09ffaa7c4030dc511554f5095e066e11f5da23e65d778f25214df70fb1978a8788786f80d417a314f73116361c4842d5276ae06a42609306ff8101010a9cc5677a0d4bf2e3939989ae887796f3310c455dd8ef60fd93dad0edd9e051b6b3d31ae3b18f8720e004d32ab5ab660839cc069aea7dfa51247f5b4e86a11a3c0cbd1bcd95616f15d8901ebf5553bef00e950391129cf12d7495acb9fa56892f8e13dda2b209cdb8769d481c5f86eaa22b65d5fa37c26e01de6f96e91e1ceb081f9b20d66073fa1df78cad928e49908f9e58a983ba8bd18e0581d2905476ac2995f4ecf5415280d0fc5e1bd2541a99346516291592d735db6edf9ef1b9655ee7b260e065f97011835c88f18c438269ae5e8f4ffa57fedafae5e765771d37b1559266c466298dc199b798f5dece107b8cc7f96fe5ee4ddf35259585735386ce35c37d423cff2900529dbb5a0ef484e8f445d72360943b452a64658dd69274e2da56e71660c4e910166878cdecfc9a874b07cd34f99c7e3c804b2815c8fb342abc729ae55564a1aa63814a1f96600b6b05688464554ac128a782c50ba1784ea9caaf6eb1ecb122b006b91beff4de7ed7f131702dd61916f3829730a6e7941c366e4cee2ea02e1efd2b4ad9b327b670fbfdfebcfe8d4ae3ebd8c1cdd153ac52b2638838371e4130e26ffe5c5b5aa065e2b7428b9e8e909d9f9361c3e0c912ac5e6729390ae09dfaedb591ad6b489219d2bca89e8906db711e2a8c2fa2c09f27dcac2c0119830b8c36f322d913c49942ada449a62707c13b8cf5c0fd4ae9cdbcd8d000b2117964fa6cfac2730eeefab28118108cd1e5b7716d2cddd2c41f5c315ab75be17059aa0e6e030b387f0ecf41a1fff0f2adceceffa65a1de546f71f360d2e7438dcc618546ed81854995a36ff7e46ec0b7a41138c35cb4df793c016c470f911d064efb47f7b3acfb976db7fe0ab3f8868d2bed3257bb20f83b5f8011a8e0245603e7cac4013a9ae07f91f7c8e4fae0b476bc7a4057055dde574b966b9d53beaddadb5103dbf512ea74ffd9dd13451b108682873d73720d048c5abfc74dd2efedfdc41e8f26b3f7342ef7428a690128fdffb53f1defee693c78d6e0bf4c84c7675dad652cd53b6b4a8af8d5362176de7f57db92f1c403ee1a5dcbbeb845ed996166b3b1a1ee0624e5bb41a17eafad4e8bb8b7f70fa50586cc7b18b9c732a396df021c64c1013592b4d3c1bff8e23ee34404a40f4d0ede9434391c2ab547773e834e3f22c2d811962ff6af07a15a517f56f17314eaa569405c981f57a880d87911aa545d69ee1fabdde6b0b8032c1c885156eb010e69dbefe57e3cc7091d03e769d9937284dad3ce758a1006f7af4b089aec80d3268e8b0bd51903d640dd23497e04f2e7ed8945f4ea75106037843335751729146daf208d7ddfc4e36a4041dcdc5339ebc9dae03f36fe7f57fa3cc337c37fa3526d276c1d745c48226637f990dbd56d79b90a8da013f658fa3442e9ffb273513e02bfb3a8cb3e79cacbc7c6b20e003a92f8d0bceb499e626ae6c8a23df4797fd1140db8170c2313de47ccbf2f3e3c32ce522683b23dbad255c6fd62a0f2ff98e2733e09aac4eebef878617c31900e7dd875833c3277417615c86cb64965f10a8f043f68e398ee5ddf1dc367497a20ebeaadd392bfc2e84aad2a97187fa3cd511c03d2e9044aec48d9a08da8a0080a4d2f63a533fb393d437571667fa3c7dab8a71698aa9c7e6e3518f1fcacfeaddf03339ae04d6e4147a3fc14b1bec70dc25c571f81355f53b0c8f4df8bc19ba780596f0ad467355159f66ed19cc413e7e314cdfb4fcf11312f2e7b18a7f7a7b24f9145565c09afa1df40e55d17710d9347c4d63e9730f831fce42b6a369501936014dbe8b615f376f604b5149de4da9b72d175aadc188919108932956ffe6973e6fcbef857e03caf532acfd108a9c02f132d216042a31e1fd3a6d36c53b4b3b1af2fe8180224f0f7bb0d13095f5b92e0caea67383dbe3cb5230cf2faa8639b1e054366bd43584e8e4ab45d351d4b02427f9bf7f9502b70ab45d7c0ffcb279c658c4c46261b96dd804ed1c9f6972af2b5e92393ff420b55c10eb8e3b58c50f884f7321c1c5cb81840fbbbe3a008db90dc19b875eca72f8467b6d658bb654271e8da427d48e980131b587a9b5c6e385146e8b345a169666878b8e3f278df41bc57ae512dd070f550d8b0b01e8541c543265fa82b336247c0ba8e2c0caacff126bc35b773a3506ff962a6e77f092a8063e9676a583349b963131ac3e78178e8f9cd97e483bd5fef085c1831a2884b6a315e3962e6ce2c40cc63455f0b418d39b2d1df95b6c82dbb277eee3361080538cc4e66057a053198a1d1cdc87e1a589c789a8e9cb7402e437ea46342fd6455efcfd23be83e0905b2c7dd1212ddf801ad8c18bc311911f54e1aeaac176aae0fc244f0332142da389ba2fd136e2375e7ba6d84025cc877193adaf1bddf9869dc31ff40529ca77c41aa0484cfa10ba2dc56e51aff3a3075783e17ae049260ae640b58169a0ac63e5cbc463b8fab6d99741c344511a303a8eeadf34edddd7c3e3c797dc1d13c91ec3df668caa2aa2e56187464012de60f7a9f716c76a2d1b4e4e0fa58bf227199b9fa20f76dcec40cb1a454aa11b154b937f6c66a1fe03a24d31ada4c0425d69a874e12255d498b3fb7dab8c0df646a696389a9155c95f6c151a68efec3077fac8a88ca15f4c0f091c20b855c22e3cc59e789ec710814436b9aa569595384c948b75290792b73ec6cad91dd3301410e6989d71ebb2821bcc206bc03a6022c6102a4a590934a2572aae7d6dffa066af96c3f8bbfe59c7b4662c5719daebb9c843df693eecced5614e53e369ee87d523cb0153550f6f88fdce1cfeb000b3afaaa6b6c35cded255c03e7283960c38cd6b69298514ad09bd529c83ad533d286e81b741282701be033bbc3a6ee5eb08be1b7c483c0feb2e1905d6a364992a6dfb36f589427fccee593e82193bed06eb74df904d7ccee7cf30c9ab8213b4a7310708309913d94fa91bbe31a90ce8b75786d773a282870fd7d4a6b124351e00cabe94ebafa7ea8f27e03abcfe16889f4cb87140127e86483b6e40be85e9e29c31b46b94d6f619491f64bec33b17ba9c29dcfdde5a10f4e23d74a8cc4ac7f9e15a90c1c71239e65cd9b497349f3fc7f867dec3783511f4a646923639db0e5fc9a44d43d1396064f291de3f7782caa159cd1397a478f49192b68c05d34daf2d1681a6c301bbe935d9aab88150d901d26170a5a220e6f5837c47e1d08c9c9d3b98407987ae148eee264a2dbd038b0fb32971c293f3380d5912d46a91ad121731c1198f38c60289d9bfed6bc33b7648f147abdc4a3e226a96c9612bb1ce6febd5405bc53e4efb16b4306d73b90bb0656b1bcb14212fe389c769b3b4d37aaf8af0f5300a4cda038f7cf7633dfed8cbf1ae5789a25abe9be6252d6a8e5085a5b27accb23ff18a4be27e3b6e106364b0be37804a51ad7b692564d87e705c9278d4631239f9ed9c525c5d3c06939af3fe43fc70141e26e6b003a06c03afa40df413f6a8808f8e2bcf674d76dd9a08cafc79bf64ffe57477e2ac12169f040f2218a3f843f8389e057f62f8ad87be94785317be91628826090b783481eb786018fb505c1632757d017460135d9bc3baeadc1dcf2140ded46d95babc16e501993743936dc5dd77a764969865b6669ecfa16ab5aac3afa50fba6cee7c48db9902ef733187631a04923c34c004f432399f555b00a63c6ad0165d35fcc8c38028340aed708e2817211053ef24529dfb7e2742295297a53f7034cb6e2c0cdb41fe3e6b069ac80c3011fb41ce24515f7dbdddc6343c9af352e4d03765c844764d0570e8540745dc87a2e04a65b2bee4ddd4cad0e1dbc9604cbd80af00d0cc0a171f5f4bd27f635ed8fdab582d242d3761e1d459f739e441b54cde8d76e3adea0058c17ef9c1b01f7d9414f76cc6302f91f934872c5581689e1a02b990a373932805256d0cec431300a428b4ac6ef43bf18a650e14486ebda427e070a0e9aa5faf715ebecaae66fb738f81c6a5d1fabc990b04e55fda6a5a34e60f1a43e1948f6e0aee65f3f0c364062f35d5b864a752b9f542eec06108413c71e4af601e8cf955d24434786f932ac4d5be8b5ae22beb35b252e0d94b30d1279296c3b2a129c437deaf9fd27ab6cbfdb0dc5c10135c95a793c58ebd5529ef8b5ee75d1b20cdb5e8bcb564bba30b6d1ccdbfcc0da58452ee650d22d5da7273b8418d742c4b379cb41d0532ceeb617ce6fbfb687a59e3ab52a17e9abb2513163d36a0c13800c3fea2e378eb0c3b8a01c96fa891bd0f4ce847e4c09aab56355b0aa57d9d72a8d6c93fd2ee590fb34ae06c0acfc6b6fc4c253f53ff918ac4b129ac11b0eab1e79d9ca36d90f99691a6157e2aa6b2dca652b0a32367a4a9a607b7c0640dda181dbbbdfb64719746c301de1f4c048f7ccc4ee831fde6d360e073819fc4a7757212f6fb35f2be2932cf0f8ce83add24a4ee3caeec6b0147c1db361d07a3f13ffb6f9776fcc8731a78617d1af80aadc8025a0e51d7e37168b721f64e45d6144f7cfd5a5dfd276ff87281154b05c7855a8da0808c4d779f0d65a516478959a0d208353d8aea1d6a1fa5d6381fb8a10068c835daeffda4a1cdac0719be2e3e2849e14b760a4066d33c10900903b07148c0a3a3b47e9fea8c72ccb7afb608544c73fada22706e9337a85796f1ab37bebd8435b234159533b7432267784eb2028bb581da86758749343a95fd629070b613962bbd8e246a636f5d85644cfe36a6a0b626a183446e2ee9049a1e3879832b7120c1b026d4674c3b175e0c5fc459412f8df777613b54c95207ead49eb9479b2a691d382c12c0cc8f065c1c12b9c13c427336fb3f016d140a3bf3fa2145e2c4073e3f1a3047b13891fa98c491e4e695f05dcbfe7fe778e63c798a8cceaf6a6c00564e6de98288397b982124fb1a568c59817d47e718f7c6a4fc991123ed20d3e36d2a95e48773a7b4194efc0eac3c078a9931ac5f71a99fb9f02d6f6bf344387056096f33b1d832ac924a0151adf5189234b28dd0dcea8c514c5d0483c1505b7eb20ba2d3970d37c25da3aa33747436a03e69ae2a228afa930ec24c1f954b2752bdf024c1841512eedee860ecb181cd087e64c15fdec1c1f30b0268eccd5b4a2eddc45707cebacb486dd7a2177b98787e48cb31b3b28ae822e9f8151099b258053561114cb58e6a852340177f652eb495f5565611d8ca0ff39d9a9459d83474ae429b4171805ad1c54777003b6a0a14ea08b63f05b5da5208f601c5771dea87ac07fa0b226b3d0849ec214de4b22453fbd84449329b5cfda06e503603990eb895f0829e20e419e7cc91b0950d6bcbb3ef1682184c653ef2ca2d749acea982bab365b603cf8295a685b6baf7d130cdeb418c20401cde624ee726b187d35bb14bd5a4caa6a056df71036e80ad85f523fd0067bb222c56c9a150d4e239d6dfac3a301eeed72fa4630be6b66be05d4ef62430fbd2a7a10817c98da94890ec816daae704c86758fdb8eede9e370ff13fda56d1271ae2b4a6c561709082a75cf07f0638ba48ca9f44ef011b1dcb45c1d7d935fea67aaefd99b632e0d51c54a286518e413acfb816e6a62e6cc54a9510c2bfeb3bd9e2320718aabf20ad38a2048574d2692e76b4ca0ec5d9af215bdba591bc3367eb159a853b96d6accb9d842a7e4b4d59a8d0e170cd4b06a40621c04ab6a7772030f96ad0d6932f5c5da938dd09799d0b04ce3b509a481ce590ef7bded098e0695d1d9006d121613c9fee0ac9a253e132ae8b576efdc20bd09c3c77c7e79bee4a4601e4d5ecaf2977108e042f47c334c024a75fa3be01df4597e80e0de637a62048d1313bedbd8d538e02428c322bc8a1375a63526ff9068445ed81f584e19bcf8207235df074add677a06d0fde4409cc6aba16f1c122ad50b11c42763388f6e096859afb062dfb025abe16c92d5b4ce3101fabd804ac3cf8558b59cb8c3d59ded9c1a26a316429fcd35d56f050a86300623bdf93e444f7141b044672aff981b37b312cd416dc3f8126b743b63a02dcf15632a5cbf49fc19e75acfb03f094f5f5ff817d56190354aa566dc94ffd58099dd572e27f55d6f3a01fdd463732a3af83840b6ab509f760ff9f6eca8eeec4d35cc680c105ee929d98c8f2cf79813ff2279a0be64ca910aa44f602f223ed35e3df9f9159d65bf8adab46900c35e2b5357767f6e9f893f7217e9c05b58633a67f5bdf19eeadf06368bc3f8c1d68d477e87086e3f133254082829710355aa83d7ff6ebc5626e512021a9830064abb58a8f8effaf5e30b0a24223c7fde18ef81daa8ec09f2876c880561ac5a58700809cf7965c7b14e5506cafc848054fd66fec77933b2168ddec2c4b838ef2f45d2d503a9c04abc9e2d9782f08bbb29425da51ec6044a927249c97c84c21c352cc8913dddfb900dc7090c02d3f8e8cac56653ffa3fd20177716a4a47ce33460affb926454d0fc6dac749eeb3f441074adcf35b1d921e612e6ba6f65d1c994f9c489fb513a065fae15d2a3dff10380dedb7b48c2b5616573aa29ef8aae3df2579364279b32a89b146e184c9548f0ba3d8f458567de16f3117ac244021d91cc968c070a7a01bb7b5205d8717355ff8455e7ffe152c938f261fd13da3f0eee8a41e074e20aa69ff7d3db4e7468b3712f8d68f928bbd112e892373814048e97f58b0cfdc9ec6283dde3bbdfb206febc733f7f53d5577ca895b84127c4388b7bc2e014dae9ebbbcf0e5145ad25f23c4b448ba595aa1cf05d272a6961c6872dfd86a9e12b0c607934fb9f17286eb79286c1acf6d08aceb443dd7d29c5defeaa148c733d94d13b80ec769c4444cbd4d24bd88ae44593eaba236e1741312394f6079d3803d9e50402c4c0936a112c128a9020581e7d24f51ad3fe67a1c33dfe610e9f708c79ab69c648bfc8da4f695171fea16260b8bd71eca84c31c29ba40118b61580298cbc67c2ec9afc01163dc0f3b3479470a817610d568abc317c4415e8f64bef0d84d9c3a62b3640cb7d95a5f589edcd9850de587ec5b39d879b7be0385570ffcb150228d765d0de811fa2d6e613e2987e4f728097195d6d5bd4e024243c637499596a6861fa2dfa2fd945d4a77fa7de618f612fda6b4f58acb2a6409392fc5eff8cd7581ccb8912620491e64ddfb22daf1fb0d5817350f694053d198325dfe2cdb3e0f6957e8838ffdb21b08df93fc54643f9fd9598dba3ae19e01b5413e28a9c70ff8f3984c8826495e2201eb40eb1ed64cfeba81525c24cc331f8dee0ec22bdf8dc97af947e1c35fc94446ba3f28278b3897b435d8c054df217658ca2ff7f39fe006a0bec77aa1d04cfe0b6eeddc0f3eb5add39dc61d4701f8283900df083ad32259683f7eb8b0d3fe79fd3e13dc83d49af01c2bc7bc50e89cdf7a0ce9a480886484b30064c3a91c0960f16dffbcc82ae662c20cf9ab602180ec8f37c33bec85afe01b958a0ad13c113cd9efca3e2a5d200e86cd59eefa5c5d31027dda11f223e620a70cc0e4a3346dc80047224580963129c31e1e76cc9f536b41e496ce84a44338fd79577b4969aec01533fc374b086876164be4418ed7c54000b8822de31eb37430c9afed0aae8d9c862c60514e703e3d619bc75d35195adf7120733918fcd6c28d6d921e6463ed7a3cda5a94971d3caa4dfed2bc1469324f717540fdc8132b682415d16642424741587c0488571414fc1706162fd45deda3af73adb4603a92612c1c939b311c809d0d43e2602e800cab402934752672c86a047677ae235d390bc68f6a1724419b34232b70b000b214c52927eedd19bae47b1ef0423b0b530f28b2f6b4aef6edceff1cc21141f2b39aebdd236ad0c412c2f505160844234ce89ecd6c4143bc45d20f8a1120d1d9103fef3caec4da228dc5c124b31ffb51e905708a06bcb6a7efa1db27f3f776b7adc76ed08f5fb6e1567bc39a3524f63733a8b0b73f0d8b131992a19bd2ecb3fdcda314002553d1c55f8f8ff463c2d1473e07a1eab504264b3c1001548308e8a508b56cb46f39684890b32215716f8a7bec3da618c84221aa2a31362005c5abaf02c740fcf2bfbf766182023f8af2c6cfece6d679603a8fdcf4ecd02d85ef920d70a292cc83d99f8aa18f9c332e75e520a1de6ce383517e54d02f15976077da230423d19388f26ea55ed5097d32e510f1e468b75ec693b</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">您好, 这里需要密码.</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">有东西被加密了, 请输入密码查看.</summary>
    
    
    
    
    <category term="竹云" scheme="https://xiaoyan94.github.io/tags/%E7%AB%B9%E4%BA%91/"/>
    
  </entry>
  
  <entry>
    <title>应用系统集成 —— 身份管理</title>
    <link href="https://xiaoyan94.github.io/2020/08/23/%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E9%9B%86%E6%88%90%E2%80%94%E2%80%94%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86/"/>
    <id>https://xiaoyan94.github.io/2020/08/23/%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E9%9B%86%E6%88%90%E2%80%94%E2%80%94%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86/</id>
    <published>2020-08-23T08:28:41.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="ecd8a414eeeb5b79a3c423c7e517f2e8c5a17c121839b5d52b64410e320056e2">7c793cdffb54895c1d45763e698a9f484a18f095f8234f19802045564da165e984ba6c9f340444253dcf3399a96be58cf8ca9684936448cb7d86cf8208f0d325d38485d673ac15f14a22673e7207a9375ed74b69ceb2e794f3cea0df10cdc9c018f2f03ef4f9fddad6da17262d75fbd36b399c296699661ef504330a43cda06870e29132cd8494734dec38a4f1495cb1535c8f5a2f92f496216e4bfe094b3c26baa7ae5ead9a0ff1da824cd8cf5aecf2724889644711d470406ef5d9798c87b93a21e799cf87d018894b1dcccc6a61bb26aa25bdc1c5ea79c502fe0076f2fe6b6fa01356e9f933f037883a3397a5229d9ec47ceddc88ce26907950fc5d268a7d613fdbd97d6ca94e02bc697ff8ad63e26be13884a1376063da2046c4c283de4f75aad69b02e75214ff87712f8c8c4d4f52134e4cde852cc667b8a38af9e82db5cf56095219429bb0b0f5fabfb0a82bb6d896e3cd0d35704d0f40c3e474420b909679c5a49b102f98be0301de4e4b69093907ffaf272a02885eb0ccec4b73193b957338713be00ee4fe0c6f0a0c7417a6efb3123e63f901f356a0efa340a8c3052bf53a4d47d92b13a9eb7f08223443a396a516dc333c96ebb2656ba775129f0f13b0bdd2e5031f297827fb35add0d2886e07cc002fb3532c5cfbc0611c6debdcc8084960ab58533d689b83dc20a7dd95844b092a46703058e7d00e12c974a99dc0d087494228aef3d64f3a5c30df16e0e68d46ae776be8f1e5000c994ab6d76d53d2b6d62b4c88b3cad635713c65a2b71de1a293273122fb154e4e049fdb97da33a33d13155440f497e6cd3f9993e803beaefdca5a6418ef16c2dfcd79db669357cecd3461c31715783547fb8448773bfa5e9b812146d2e72372fcf3c2902d8ab4278e911c8203cb2ac40267c143111eea4eae0b260e24db9f4311e02f6ddb4b2bd9dac7901ba1df2cc29da3eba4a57e5c5d97b374811225aeadd5e220ea319472060fe6daddfeab74d6851432bbfed3a7d9fee327b7a83ebad871a8fe7477365ff68ba06e221fb28903a347394fe37b2daea533af704193b4201416b70cb5b32d7c4833ab721e27cbd92aca2e0ae4d46087658e677e6175aa61c39859db595e4c81e136c09ab771e6dc34c9643574d3b2f338fda6e01473f5d811801f0eb4a590e544a2338867fdcb8dd1fec4d6e961082245a9cda4b64b96e5919f1428b95c271c26c13a0ced04e878f2b7a4526a996e71c0dc4eb9a19bd904e77a6f0700b2932aeffc85333bb7ba49b4b8a29624579bbaeeb863cfe5ec640a9e147dcc72886ad665a10609df6d8b7779f55929528ddf4ca25ea452661fd868617e27c864896bd959585d29be31ec45d61c8605c5eafb8e2c042305cde52fd5e7a388432938b414f86ea8cb9ede2b5e82f1738707ecf7e0254db7092261978dfb53c0817eb303d3b07d4c396464005e043e10d2b5ce0aff7cd2c55dff13786ca310fbc0eda230bb2db81ac2ed613f8530984cc53712f8424467e8d80176b8f1d175cc8bf9d504c30aeab02246973b41ef3e4f857097beda6a0c1ce4254fb929291c7af287e4a03c166afd5b2b99f7ffaadfe9750c375f77f3d79bf0060872093a0e212bb2f00b603196871f7d5c0ee01da1da6264aca60c5fe094bddd8b9bf2723aeb0054621063541837abc1987046d350620d4eb03847d6b436deab0fd6fd1e053c5df5cd9eaca1dae7080e68a987c95d956b75a44ff9aaacc2fc042df7a8cf13899701ca65da111d72be760a69bba514cb2ac59164b21e4707ae0ecacbdcd454ea8ae5120036631ece6fc1fcf02bb1f399b6cebdab070c2af1d4c58755f32c47d29ccf7109eb5e2c1f3f74f03fbb54ca32b02cb86e2ea230f072b90526a3f14db5732170384c47a5fb10c623e74c01b3aa99da5f38c67f6b470843f11136b9fe522478132a1bb68735509c7766e971c16fdb3c3b24536c052aab6dfc77415c2f65a03c6cf978ca8820916b72d6b0ab4f1ca9b0f68316a9496488eb0e7493ab20d92c61e706c3c911449e28b16b2e8e08bb3c8410544f54b66368ae4ad8662d15f72285d066d38ddc1da4441cd3b58c0ef9e87d0664e53e644358b3c1ea561bb51d9b26f274f1e59f4fe0f907e3f7a58c51e568128620e41f4de495be5898b6f1bd08dfede400cef342e5752f2c6e359a13532962029a5ca96b576ee03409ae417d892cdfdaa5492c096482699cb878f23070560c10c13d7b804d1022bbd2a1adbc607fcb9a23517e72d427f9bdd1fd2cf687f78fa9ff64b1eaa0c587184f0982e6060bf53ead9917afd3fab968f65320bf6066e6cd85ccd1ba91f788cf5dd49b64fa5b4fd3128328f009a54c949368f1fb32a102deae9a618739221bd563f286f4e1ecf575faf1e4de06a7761a07d1dd1e7328d12ccab644ac404640cf68c23bca9012f259811ce1ed22995b6f52cefe1856f25e5236c254ef5c04e553bdad4b5265f5ef076fd79b1d6cfcef96d74344ef611fc79fef5e9f49077f9dc287f1a9ec91e41c6dbc361a03facd9e5f6ceb8c973d0e2ed2845022295d6b81ed5a6d2051fecaa667efd593d7ddafe5f6e82d12ced342e3635fabaca7d07bc1dad6f4d8d6b1e77e727f6d08f12821f8e7013686bd950615dc3363187b7f852c8bd4bb81bc50fd2042adcd57bdbf3f4c71da07536e6fb65e53f93fd090b698a230b5961b72c9d22c92fe2026519d53e4da15d1b31f1394263b53fb8fd47f21319de4981f2c6e54c600d9b9b1086c2596f781e1ab02af2ab8d17ae49dac2cc7c787115f6c12355777ce0132179727dd7517c7a8f10fb76da307615bcc4fa800896ffa17543d02c42092899acedd405293184761f994ba500fd3c90ba79d5b4017fca1f694e42b3a9312756f895e3d07ded09486d151611a646bed8676ef7e87f7b9a58e7ee64ab13bac8b30817b7bf114902aeb5048d3f69fbdf31963d0da9fb3f4e0ac94b915c2bb68ac384b18b937410699263f85ce85565f9d351b79f1f92411ecb744b63af2125fbdc493cfa1ae167503eb17ce54fc47a4a5ea6c3cc883dd6da1d984417e529d837141b6c60c4171b278fef3a219578a09fe579f11f54ef821365896681f0689afa9dcae5a0c27564c5f276a4f4b82b9fa0024e8893268264f8fd20b18404d42ebce06af82c42e3f30ee5233f51a418c5976ca7388dd8964c36945baab49ed30ddb42fb98cfb94cacf4b690597ce99f11496e8c3d6a50920a06a4a0e49738d42556da50359b5927aaa539e254c3246961dd46fdc5a704a7672fb3f496165abbeb505242ff7f0589df93348d4be4cdc9a55e79593713e04753bd943eb888c0406f528025f63cc591648fd1eb70bc26516ec61d249d1ebba66d66e063d64003507763647fa67e1461309d7e50bf8913a2253ebbc9d35c2610af09af816d113b9eafd11e988d662a7583d51457a49b72c4c064c53ad7556260cff515e5e0295669310d695e4b10054ab3545f8b219f7f8c03f2db6bfe5a66e3197840bb29ba6526ce4880ce1a0a3287a2e515a97ad8d4dcbb94fffd05f927e19f86fffe4f656d5b92244fb7afe0ff6fa2ce18c1cf396f0e26d23d5db61f84a8d98a1325a237ab8c5b2b6ade4c800cde2b4915066fb84b0b60fbf147a16f7cba1679d8d77e63ee5c04dd5d62c55c7a0ad47b420033a8134a11af2cc02b1bc0ace218b63e37cc0800251eb1611e1fc1a563a566e647232e5a4d15ee0831d9140153141f04d7ec236cb9cb8662a42afd031d55bcfdab589a2461e865bc189561a73bd179d2ba40de13b838b56f5a4d0e19d8d91501b498a5c6f6fc6d23bae0cc83b0fbf23676210f53817028a7a6e0b176aacdf4bd85547c0a52770a67e9afc4cb67420eb77c6ec60d4e7f88092c2ba8427f145406a992179b601a061d1ce8fec67d78910519c95ec6457fde82680b9fc3569bd36775f773d0ba938553a01b65649eb7d18f55c4eb7f40b8f16a752a3ac43256bfc5ea691c35d9fb1ae46f7281b8a466577884aada118ba3f3861ddb3e5fc88a6a55355469bedbf53f5ed17367e366a80cc44ee751fbf764f7fc9f8d9c56862f2680a150b0c71a559067d8607edcf3dc1c1d5e7ac9d1001d3b034b00ecc3e9bad270febe4b6c4602eb4a45672035c7cb2fc11846630589c8aadfc44afc0c79205e946ac9daece36b5920bca054f26a647d6dd635800f38fb0f56ebbb15340aacaca880268cd788bf6825142db2e91405108a7e7c9cd2dd2c292c2a8bb52c23cb2d568a233a16eb795d8fa8b410a4b9e171deb3cf7e2bff3d32dc1d01895b11a2bc6f2298074b368e21cc9857a148a27443ac980a5bb45bf6a01e1edb9dc825dfb6e38ce6e36dfc9cc485cfecbfe08486e3e1054fcc26f7c85ea29d11b5eda00606dd1b0ce8eeeb3bb5a4796ac1d49ee7011c9cbd899f3ceaed5e9a72ede602060ce5b23e70525dc164abf6250b7b2eada8dc23fdfc2d91c8513096b2d0b889c687d345ef3a483b9772e3b26ba130272d3b65cff32454f60cdd74ebb35e40016ba14822227b9d53e5f180965254616ffc1b4bb2e0a74c0898b4fc079642546a4f462310673cb6d731b4bda0ea515faee24841fe19d87994a14c69246ac43a4df4337fcbd981e3bf94f3f4bd3e4648da547abc7de81d5cc18e0106b88a2276eeaac39b680b8df5415fe1de899d8bc5f41f7b6e6d39afcb476f4e2d721c755aa30c48d1cec19bc554563940419229dbadc47b3c1a5fa37cc6e0a6c227b08c9825a1b7050a75f6ebc5570471dc1c18e2cc504439f38f0057b865a917b9bd15ad1b870181b530c3e3900a43702154652d03a1380b970714af49274a96ca1f98aaf0eef13fc903bc9e8e25f058f787bce8db4b34d595468af12b5ca8f970e6051165294ea903d9b72ff5fa2b08cde05495fa7be6f50bcdcedf85f1d1f3b53361422aa04b8fd62b129facb0ecd64c1580b4cf75707eb5dfb3cad13168465a76229a06ba74982d334c35d7aad4591d249a61488faacf51a958ef057fcffcfdd74f588e45b323c2820dd08e635fd4798ab450461202c534e6aaaa090532f7b01b62b506a64733228d2d5fc40cf37ce1fc3f43599afa35f6973ee18b1517b44edb151ee5a6841b3bef64931140148a6acdf2aa44f1301f1dd6d9f8e8cb589d2f08028940f005bc59d0444ae31faecb68c40013d1cb477ed871272467da80c478ce230799b373156a47be09cd49b646ff6671a58872acb4d0415964b70aa77d3970477e5ebecf82da29d05c480a4366ccba45a0d1b54768fe2862c9b8b9dac168f1e6bbf3940549c71fff8ab9866d8b748d10919ce96da60801fc7cf4ad4b0f9139dae84079f3760204cdc953388a7f4d32d52686cd76813b4e865919760a7dd8e6f489fd479e5372b37283957a66a4c0743b84d42476f16399513d2ffef948e16fcf8da1a090f4b164cf330278a4ffc1362cf43935a687477012dd294193bdfea8ad09deace36326e1d34e4b04857561f492598628a25a1b12e12267d85bd0ffffda637981af3ae90282755f89730fb63a25cc10ecf9684b9f0694b48a8df14f79a5f16c54536261932d16cd456313314e6a8c4ef1795374da971fb61091b4ac3b65fe7af54e844893fbd091bbc8d2b278575df19ec144ec66aaeb2b87d45a183e9b173adfb06f2b592557a11b71229e45b742bb8a05038faf1dc937b573fa0a6ea10fa747212f8336388a3a0040471537c657aeddd2921efa261f4a9624c970fd3fa7eb5668667f70d63052e7ef223648146d3520025c0ab962f00c2d5b9b1aa85edba3ef6e4f941806cc3327fe8e87fce50f40d30535d5a6ed862826539f86228910d0572ea06168a5afc5c2ca90569f21e9b32a6e9098048a4166852d1f8fcdb6ddfcc1d6b2c78492d61b9574cc38020782fbb6dee5da8f53eeb732f722e254b92cda28f78f7ae0e762428dbddd84ca8d5605601569dffef435658fe6477eb245bd170e9bcd5528b6caf5bf3f65b606f91e61c327bf600c16efe1fef992e4525fc30d4e01d1f64337e6712dd46ebb7bcd10c78866b356d87cea6ab11f4f0f3f830b92598fbed73e604fa178f9afec8e57317a03f78cddc1f67a60fa361064627f910c87b35f7c53ab97be7459a6d7292d41957ce135ee99aa84b0a9cae96264ba3653b824254ec3e7fdd007acc5178e06f71f74eb24833c1f269707de2bf8d698fd6f7dbb8c5e562a0d1f8728e5b647dd8587c0d53d96bd5ed92f82c22b407ac13c0f9f4078a02710f88615661eb92ba74308db9a004347c1c93c4e54bf833e4f9adaf5e0d357e09e7423f05db77586334e17c08deec120601db51bd68b36b1708422eaf8391c7e9bc97555685aa467406bfebc6d0bec737eff21eba6fd8782401c0951976760bd4ba7086194231e94c5594e86ce37366cf6f301ed66af7f53e03cf929f0722b567203d5fe41812c19a72c0b511516d4810f0577392839779bea3aa0a50cfac6c19c032d0b748f6b6e68931e8dc9762218eba28bd9996fe37407075141ce8be50f4cbd25c1251efd600f236a369a698529ab3780b6844fa72f69bc070597fa6e663301f067b4c767371ef7ff0dab9091f70b861c2b650e5d199f9251d30e5ef54bbc212ac9de690087b2f7920cf05ba60d73400f0ade86656d2e1dc78ee79d3e27614992a60d1138284ba5d93332d63f3fae21a74e7d44bdb0171875f7f22aac8beec7eed96aac9279c15e5b3f7012ff0f1cbe0a47b61b296ae2dbad096d0d9c347c13f2eccb81595c08d1be87f9fa298b435ffd279c8881af62dd7558870e8c1d10131981b8569e217c42a2333dad17d501bd00109584cc295b116c7c9f289ac1f40d2d31c212ff808bcf7f92daa2fe7b19c7821ebcd2c6e6f2e63e6c177f8a5138fe8ec74e1d4399cee9e578895c2451426053707f37edb2e31e1db0ac3112378e83dcc0121f55f5fcdd548da0206c7e3c1f040a60a9b651fe0c2fc93f8a35d14a698eb8b85e07d541031cb0a6a8d24bcc9a9943815f3dfeebf771fb2d2b8c3c0c93f48ae159aa13669a0757034c58af7c65083fc6af9e85edaffb77d06a4ad08c3b2ad2c97dc014f9aba8062611ac52699ca5effa8bdbe9b571d9cf65c3bbe21fae6fb664685afd43b110e4c7cc9a219a839d7af3bb35296c158ad7d743c42ae9f75a4c261a4ee4f28a771d845fd5a7412a7ff059a5f49644c90c488761b562c2dacf750f78fa4e4d5c7d9dea5379cb0bdf309a9e49c0ed4f814b8b0699045fb045e30b20e753f7a7277b7763394acbbcecdf35fb258546680fe13703e0d6112435fb3212e05770b5bdcf5cbf898d866fe14d4879882ee5d3b116f5edcf339d3c6adcb752b8bef4bfb526de08b4f5a30f25c6772792a9b6e21bf060830e7f7cd49d33c5d957e4147b81825e6a901f212e064acbdcdaa50d6b31bb0aa27dfd19e633efedefb4e55541fafb90733876939fd8aee85875e44861c5815a5d8dc086c3562fc1e731387b263ce1c79569943a8014966dec93088ca1e7cf6051464c5fd8bdf2fd5c08914b446ac43c6b9b91bdc388ef0a0c7a9abaf0ee1ea096b40e37357cdb94c75d01c13b1a374e322218833cbdb7f74a1765184e2cf9bfbeb188f106ba05641263009640251d47a31d1674e298bc3fbb2573bbaa1b5edeede88459a43d306313102cd5a30ac9565e2dd1bd93474b67d6318009d0c4b834ec2864806ec4e4ed15c248f5db9d2b56f29b64923eeb3060aeda8017fc6e6b7c2e387a680d6f95ca78b9266c639551a9c2eb75c242dba7e0fd2645dea5de0b293b658b51ca694b0d7409d2e2fb7914687100b631f8f3657f735c8f257d3c3710f5084ffce4cb876fddb5dfa0a7b89b15a15db63e502cb8b0388848cf00778e6c06eff6a7b91f6e712e794b613a464414ff99dd72083693e840bc735094bc22e0dfb270f09c7876acfc1e4794ca81d9d7fbcfe7c23f039e7654f9a3e06c2d78e7956033abd885375d8b31054936506483e491fbce375d1e4efd593202487850628c76f37b3d940edeefb44597f03e8c622e9d917c1b1f92fe5dfcc44b19f677ccb36db227d144d4aad47aa4c097fa6aafa156002be2e0599f97387a4cf2c046435c91905d54d215bd81135e756c7bfc28edc02b961cfb4d4df08d84f6184be39df8f1d0f6eb0032134b193fee25d6af159b24f55c35ee26301a7aa7d6d48389496a8bb45fba8a0811907123bd7482dd85507015e3055bc09b1e9f88f66ebee786b559647719e54af6eb035201b9f56567d61d9899b28a74a2a336ae6311d50edf8f608b1b3c1a50b2e497d1a309867a11dc0b59d0311157c0569a3858d6c76e2bafc60c385bf9aa3832b2355e1645779a798dd98f35542d8f14bfed39010492405d6c2ea124908195420265bb12a5525f6cc981e3c212ec8afdd79d904cf7a6fea74054038f8b253dc7a7508c915a14cd971e5700aefcae3329bbb5cfd2c03f9db151f2a1df7507808fe5f6c8706c179aee68396746b46c172c9b65f348947f80787252740cbec5835b6b115c9b992dadd14bec66bcbd73f1d5b2cd6d394ba5453823b6c783bb49c62968275f57143ee99da3b66966a387d0dcdbe17e2c6239255c67549cc5bc122a94606f52aa77e3578afdee5ad1d0f0a8aa4a7e800bdfafffeef1d074b84bad90a831884f84f57ef2c098e1a960d920ec35fde7230ae3fcbe55928c664b244fa8433681f4098e9249019f28cb461e5472a210f245ac8dcded2c92c33657895230307b3021c0856f965b6c7405dc074c533e4447c91081ff51e52f83348ce48994641b23437c29ceebf5f9813abae20bfec332b9763d206aa5269ffa56a43f33289eec7f3e03639935c6a0d6364829ed3e6174f3bdf0b286645c6efb9ea4f4ba1a21c5eb7eeaa8bfbc188e911448613ca116db8a6c1fb04997ddc93e556fd57d2f3572eb284561500af0d0beb95c69790045f8929a1cf652413712c4a33e973705b063dc4cd63067f8c4daea55bf5fdc2a94eb834c1760fc554f4f1363062b9d14da240ab9902c155c602dd36f5401fa8197165cc7447691a121ef1a515737adc47a80a2de6a7575d3fb981e20dd3d524ad720ff5f8ceb263c18880b08117b5f815c3e3821e29313b980aee6f36d3ad212b4d99c43c54ee417cd5a541a5b872e87b781178cbd28015f60ae97b6675e3232d095241e6a45c8f0f75809f2e80a8ab81ced3162b0292966026a8ff0ed057c77ae1a7e88b972b756d35cb8d356a5ea448a95bb659f7e1956e4ee22e2164f00e0c4159b0b5f14bca2295338a1519cc5949636e7cfb659335c367dc14bbeaa66a7dc87cd1b2b23b27635d372a0c0a26f466310c4411ba90dd34b1b35f58b5b66736295f5b215692bf95493b4e8920f9b4ebeb2102d1f8bb5c298db903133e0061cf109e6818342065fc38f9978dca5870ca0924ea1265cd36cdbbbb09acd39536b373ddfdb013d475f99903b7b7f71c637a627ff8b884e7f7ca5a00cc861d6b0a91f79b775dac251a1034332551b943f20b334178a0506510e42ed50922593d2b8724a6e5863e4130d90744788c49b515d4b74c9e1bff413b2554870322b540775bd040c30cc9b5e35d7de556e19d8d2c4d6ad13e92de3d804bde8d1651ab325602928d6cf08cbf0e1ed846f3b891ca592158a41489e611146647e9ad0fe4a2fd7916b16a270649584f17e2d84f57bfea5a2177fe505eb16adb803805b90d2db255799524f24ac402e23d0714207bce1372b064048643b93d464b947438a686235e2f1c97dcac5214e4b302b6a056161715034761426bba4ab1c2ea7ed12d90fe4ade38b441c3e9f3ecc22afffb62ef4e0d66585e7fd7beac9a5ad9591a86b0cd319358d6e16651381509844675103b729e23a6a99860c46a878d284cadd2471577ee8e631380da9d8a92557613988a8f7a7689ca808c5b436c19805f5fad3ff69ddfe03c6e1e3d024c646f9bfe97965f02eeef96969de7ac6442635f6d2f81a3ccdcffef734f2af964ea01711f7a7029ccf2d74ef203ea88e6fae269e11ab3aafacdd11992fcb8a82d5f426b7d34673c9471c2529c34953845cd5d49f46f97029234bef2aa9a8eb1ef46c20d76a130c928401e9cfba827315978cc4a4c82707431fe65953c410be7fe0dd77c1c086217cffb666cfef5ca0ad5b9d1300316299293b8d9c5b00aa894b7ee100d32316ffda343986efb32a350038dfdd8d9b33e9ecc8b93ccd6141f280a838c6d278dc487a1a2d33dd7ad5bf83035e741ad1a9ece8e72d5ecd44d8fd978cb45db28f5c918a0bf3f15607a16835203c993acf8b2ba9bf1ce7d8b691b05e823a2d432ef97232f589b1b2637ad25b6b7976c59cff91c40d954678da38a1f33a46a02eefa09cdd008925b038e9bc2d1062525ca75f29f92b4a273d64f1dfee93f84c0f4b16db8e5583704d3c3120877c440f20a71f25335231e8edb6e0579f942346b7628f88ba5a49709d8fe3c0f2c5f6499b75324b9bff277e6aca060952984a29d49f32cf97a4ab0ebc9fa381b8db420a3aa4a640d25271d98e2df53bfb65b0b1dca5ef3d0bd3ee845b80d3bbe6eba70610b4a61abe64e00ddac82e75dade5b82559fab1ebb69736209ce9c91b418cddb4fda44c5996bd537bacc9e82a4720bb46e4156475c8e3fb65d36403be5bdb57bd199c7d239dc294be53ec5e61598a8c501687db6258e447b4eeefda1ec94423ce38771ef6e99d43e6d3c2102abfb9c1047c8f5f1e6fd07dd5e599e86fd430789fb858dc33411cd40544c3af1740bdcacc61244f0b9f747bc26222da1e5e55c2ce44199b63f6eb7fcf9975454d3abc75c82342060273bf5f52bc9d745445e1ebfa2540e49830885545e49118852276152979ec4ebe7f7f5f04534f2b97ec7cd3855fe830710e2a8b9877310c84dfeef849bf5f4f0864ac166f29ca0ee0701cded3311e616f85e2eb56b1014d7f9429ec488e43a596c9a441a86eab4a5e79463d550cc826c09d61a83c1e478827f969ff2bab50041b25c5156886d510cc362e8d0947d2c13cd508e0a0c496e232a08f6be7181174ccfad07e2709d86f7b5abf01f23005764ef387e6489d5d7dd0ccee07f3d92faa4d6a075eaea3851c8b1baa04649c1f504c0c2fce5073d46246f8b0b2abad5a1e8db336cdeaab38074af5ae57ca405c4c0c35496f317fabb84b9a7c317c136926066cf9cb0fbd3340a401d3c569a21cabfb4ce496812457b425d06c5d0198bdb85d7eb6fb85400ac27ea07ecd3e0e96042c80d2a7637e20558bb036005480e970e67789dddca733912664f4ede716f73c8b57f98444a7f6dd3a63e87d2219249b1c9046ed46261a09cd50fca8a1da2062334c8cb52a0f043795fbb811bb518cdcd6bdf015bff0b4f49984888f9c869da6967de8f4e2fe999b4a2e86c90055410191bc37de2b90b27ce0265eafe1dfbc439b9195b6791605ab28c05486fae8ec5d2b75d747be63480491d852c100637b396fadd307ef83657e3a99d119d7d45f7a4b7c59ad9e507269d63292b92e879dea9eef15dd20a48d240f17cefd2fec984e3d233cd82b11c12a7c5d012ec6f8da7943e27317ad0a3ba546e12e1c78081096561a0e6fc2c6608d2ba8087d2801a5781808387d044cf3aaa1beeb28311a9a1481ec31db8c1a6768af5e7fbf78cb25ec28864d6899991b4bf3a630d45629728470e10d09361472929880b1e70f9f18e8ccca605c6cf8f3086dc805d1614a3d5b0bf4df79fd47b8fc79bb8ce39d3a5594b721e1a11df4176a57019c9502ab0c747e4c4d73acad15a1d242eee28e1b1239c55fcbaa78f56a26bcf3139b0d967e8eba484bcdf1c2631246a95621a7be1e1c28e0449969205e540dcaf1df80bc542776773b334578e40480f11268bc6a985c7c187dca111f7f06403a73962e6c3e79a3945a728da81ba2c76982ac0afd060f7a62418a4903aaf8f89147f2a89caabc9e7256352dbfb7c819d3c82304d588724d2b371e64a64a19cb2344d3fbc6a4565349251fbdd9d741d3fb2348479b4d1fbf6ed47a846a6f45a5507b4d536a2e976a7af13f1fd13b723cebef692dac0508f067bdef9d324979fb92d544f25a39dad2e4c8d03e0271712795b782fb0daf0274a5d0fe6a162ac73d0191a0911e6d0a884d5eb391964d25d9e31a3bc60563e1763416d25c7f89de4d6601f3b951c746ebacb12d5ebf8fc70bdad8eaabf974e112492614d360766dd2846b185c77c1937403d935f216c09af4d98bde95c140f0c2a342ae8666ed27940140ec422d9d9ac05798fee780c2effa041461fd2aba870cde4c7cac874d5198936f8b957de9946e258b8d664dd0d6eb7c92ea35eac69473c895feceb633c3d8e9214abe1f705c0d367cdd7f3e9405dadbb6035001d7fb4793080f5d8650e55442ecdc869ddb5401b0433a939bbf8d5fac602f970b086527e226f1907beda0375789f2ad0435cf0cc2014ae43b62320a65ad5cd0b2b83ddc9261f826a3d88349bc934178f753b7fd34b18337947b49b994e64d1458adc6da7dafd51eea8a4001b558abb8dda04923bde3b7a8524cc5360ee92903ad1f814258b34e4ba168c97ebcbb9bb01c832e1bb2452b82d8b69a417d3c10e7593737e2232b9f0b707858c8c54dd94fe6caee2e227a33cf3eb820fbea78607d1b1df6a2d024e5a9c585debf0eaeb491c250ec6c11e3993e044ccf2f42295f332f40bfaae973552b86deb89610671836ccff65c51ebfca7885efce99ca349dca92405fce68134b945dc0bdd2662d4517c421350a0eefc31884d97740fa58da3094323c4a52be118e41dda32ef884a1b18b2bd1f6d4d087710ed5ab7887f9f182e8efb50da332c4b2ef88b5e56f536a338fea7e657f7708e373561d72b743cd968e9eb1796e1cfb4dbf0c6c91885b7a4b609888b0c8df35a6482b0e16d09143d082186565913877f53f18a8e1a732e61d3c8f42e662fd8f04e9bb13097fa55dcd960f6093f839b0ac118308199abc2a2e27af9bc990927a60011f5b206eb81a2601dbd6105858c7fc2c6c21e1994c6d843e3f4c6a0d122a9cb890d74a7d6a3b56236524479938608c7f6bf52540fa53002d1131f98d7b1e53cb3f814f2c98d32e58aa8436edd2f8bf61c50c5bc031d22fec38081681417889fb66d603f581f0421a61d11390289edb6a32c9cc1a3f416b29939b8cdbd8792df37f265966e7c7ddee702b5cbc979b0d227971fb9a8bf1ea6e3a30de838e1a00ea987362b2107c888970ba62ef25c309bcd8a078829c3ff20a1929fe9ee93a66728d2f4ca594556dc61f85c2fa59ae687d30f9cbcfdf0a8dea0d32c1200038490c6745a76a4ef49596d7df9929225e1f9fe2101ceff72e88fbd58713ff80e0d868e9d7d1a825158cb663852890950c76489a1f909037c4d9260ec6990bc7236b9b7068bba7383db22020a951d20050671e00756e3f2eba3d542edc936441ebdb1630067dce422c822538a544b478dff033b0d0d5924f5c462a53c97585b793e04db6e273f466c47351a7e996f54fc4e8713c426cba9793dc1834a6e0799367ba96e5d0680a2a68989f04ba74591cdff7430b2e955721c631581f7b803f4218e487ede81aa2c8e17609a83eb602d2bbcb3af19cceae6d68fd045570a694f3a70c20f9ed6503279358e4041f96788f829465c3a9da8c76f38176e76652477d183de51d5e45272575daa87010e86a69c464b701103bb5e5692021e772d76e667fb2c53727bdcb9ab6a03690d98ba907e7a8cada5dd9fa406a42996553b97a0c009306b79f231e979f83a27cd76e29f5704268d82307017153853b660eb7e3f63abf2c8d909f1c9057a03b5cdd8e0e71bb84d87858827a76437a24f78ddf1f90a732be0b8640918baf8c7dc42d6e0dec3e1fb42d81b03e855437f08495a68c5d32b39e5a3217dbc2d0b5ecea9bf6edcd996d376233c846d4f84e193ccb78a28707d30c01f310b6927602d02399ecbc967c85e4bb6c04dec4260331f5c006b1aa97eaecd226767f83887c25770fc7573284216eb9d3ad96a22efbec55f9bb2fd4813613040c14b8b3ba2b42bb8f5a9d9e3ed42485721212a8cfe9cb3aae7dbffb4007268214c22a11feddae4d0d9593117dd6faac7ccc95596406915b19dcdd1c339ce03cd1fcbcc878d4e8fbc6c8c9a159b68696697fc9322ac32051b9fe87303de935785a9a08129aa7ba363d5032ee77faf53de1b4a0762519204e2a8f945091cf84783d9a80ac1a0d09e66411c3805d4d0ffeacd581547866d0d20af26b8ef51d32eb7e4a465be9af5eff2ad03575e47363958cee11a5e9766904786ad864c9e1bf0ae2a1af30d916c6f9ddf76c57449d3f31c6a92f39ea69434e70c6c75f4ade813319cb0aba543ee2f42dcec461152b3a748ed848b3a855ebd80a917d749d77b1c9d690a8ca4fef48a6b20fed62699960d9bb7a2afb349a3f2c2c71fa68cc30bfd51d8fee51771a0de446e6e7df20ff90e09bfa632d9f2da01d1a9bb4257343e6c8024b9ff89664610ec8349bc3633d189aca5de3899316bdacba03e84b3cb8455365a94c6403f6606d5e02cfba6764a36e1d22c7e10ed8dbb6f52722ccd73eb0a39e4f8e01fd022a53bfd1f69bd68808fc24d25df29546679598e28fe295a6cb3ff793a513e528bb36bc22bfd7e23bd780a3474e2758cf700299e4ec0fe00a3dc986c7012e649aa5e558507796fd61240538f7401c6e3891165876f032876d0f9124d5c46ff39a5afcac631941f07bc74f1ecdfb4f8324022426aac9bcfd742bb796a282f8879e8f25075f271fff8c29fe915eb6f31499f96fa8edc19dfb7ae0cc0420233908802d16b85343edfdd1f8f9449b61fe892fa4e35d85ec6490cec7bb10520b6e7222b2c052878d9cce6f45c975045530be223e2c0f7523fbec1caea3da05c7a87563c51c3360bc8153b8023a9ca494ca752a6eed743c93811b8b52a24d1ee85f76c77b52a0ab5522c61be78e11dd9b6daee28b9ed9b0ad552ddbea70664dec8e6c757f0a8a19d1e5beff580cba15cf38a17d8c79983316f844802dc01de844675b41fae6cacfcef93e70c8a6cee5eef49d430431c980265aac42d432913844b6599a23345f6a4ee0ce716667b0ec059c0997ab10c74b33dc2ecfbd7cd63a127fb5d45aa1a2a37b505663f3425e171f3cb8f566c44e0d993ee18848265ddf719d58ff2f0d530d35280451fc2873c89e68d261399a07029d99cee224af5aea441bfd0d46de421c752d86a49c2ef94627c64e4b50e88097605de811416c6280418f4bfbd59bc77ee095e5577dd6437e522da4edfbd0d7e514e53018717565259846707a152f224ffbd04c0f59f0252681894f7f6780031a8ad72e1d1bfba8577695838bfbc21d75b3d861bdbd0287e34d2f9a1d8496fda55d9fae23e2267660d12886339ad8066a4f9dd4bf39e944487f8abfc058dd8e5a434c4b4fdf4f72c5690f74142abc3be070fdb8d937d28d8cf7979894440ec7a14e28f2518e3d87f278096f51981d10a5d3e7ec7fbee1ce7892735b6f2af0a782d0f9dfbb94bdae20972a41a35f4809e37ac78a5ffad3e61c4ec34d9460c5abb5b06a84cfb5ac602b17d3ab51eefcd290fa3ed57e87085516f42108227f4c2e1da96620e651a9bde8fd8bf3e9a8036c331cfadb98ef10c9a6e97a6ee72a19628060065e23746339a80d462918c900766ffc43ad10f6bfee6dd863a57871f5778247d0e916f8f56389a8018dd6c178bf99edb62899a6761edfa8ef77e69280728e9de469bced96cb697f0b0232084ad6e83b362b25c4203cca51df7148c70e2f20dd07797399bb6043b6eb200af05a64f21cefed0dbffdbc3f7e104359892f875d9a7d8a44b6684798d7f18a7e537164970124b0e81676bde10aff22974d2eb9a80d4d48a3b238d72f07641c96aad3a9b0b83f552dc38f24a43a337a0fca661fb4054a2786caa77ddb5910c2060005511c0c46e60d22ea6e336bb8cd6bc562d7f819975a1f1b97f85b80ff9ead6f6e29e4f5d88131984308a8c0b98c04bd79e0fff0e369548d440fbf61cf05b2dc608388f172a270874e1ed65d6810af7ad125780ea4f6899184e5f037cf3558048ce8d1e79a5787b89c63f7a05a44f5f3477af139c3e0011ef23aa77a90c60d1f8704325640d61fc4e77300bae1868ee38e2b0560c65cc671146ef91d97571a84f0a15f1026add0fae59d3dfa8bc8388d252bf537c8c6fe42bccd232289bd259112b1a2b018dc7a2d1576814d05bc1566485c8bebb6683f76ca674ae75c619e9eb08fbe1f2a13327d13f44d4005ef872da18e21b1c267844fd219527cea7a6df8f1f8bb1ed15732949ab72af2ac697e942de037972ac3a47b8732c4e35047e571c8b98eb7faf6356f2144e96c1bf1455e75a385a791efb0239ca0596ffe674929cd32bfbaa27a5cf3ce16bd5d5c3647c00a8eb1cd58ed6cf4abfd896ce80c2846955fb786b72d25cd24d45c4caf5e47c7bd486c82f78a240c221c5aa5bed93985bf1b23b537a6e7b2ae3bc8bed7e412a8f2efc3988a6be03cb3cce2782e42e865a37f4f103db7c3bf3ccaff0e56a696cdbdb1b30f1dff2220115ddbc7cf83d7b132457c394b521e6e99bd57e832aab5a3c73670ffc29b490065a11cb5062058dcb0dff6a3aec4aedf8e4e18e50b888bc05cd5b4c342775d642fac7b08637b1e825e2f904104c9520fbc4d783b3a79cdcec0ab51f2671626973caa3895d91820e6df302e171c548c5c944824d5b27be5ad46001278e2b75f2246472c8c9d35a63173584dcb15899c24f74f316fbdbca0abcf10d74090e482542c9f309b6b9d21e73e957ab148db2691a6426e122bf12b4195ab658116bf51cd990b59f7bb12679723d2c33e970a38a311609b5b1e9f2c071ec7378a594255ea3408754c46d72193d8b69014a10f03ed7203915806a1205ff2d0e9241ae6c33951b3787570005a906a0a40f5f1e9730eba49fdec94683e6e60394e697b7ea33252546bbbc45460964d13185699ff7a9a58a27c762821203f75632e23996588599fe6931451cb12c2eb61d477531cbc7cc66b2ac48db4caffd92d98f3e7fca40311bea7c60bb9d4c7bb81d8f2edae4e1b11681a4c2aa9aed1fd8c68e00b227c8942585737a475d73c6ecc6f3a4f6cf7a7addbf2af6e635321ca913e27e24c7bcbe7cae0cf8e35ff12d53eca5e5e0a19e1ab8408688acfcc012628f0d99ec48e3d5bf91d07e99e05413f374504c5eba1b6b513a540c1028124e62a0a3de7e8ae3a9612b981130f9fc43c3728ae304ffd68113ca357cbd0feb057e803beacd21d65cb713337854a7cc0a1772b8d44a90f6ba074e482db9c6d1a951fbb28403879c05f54f4377dbf26d0617cf14c2b383e9c3a762d204c9ccf2ae441ba52b933d87f2ae06accd3219217382d231dae28ac690694d3ff0d5935b3268719b9ec7beccad94dee85875b08648b67522f997481ffe4e9a005e2489d909a89db754c493965d60ba1cd596dcf6250fe933ec1dc403a6ab12bb6db8826c6a49c0e895d6d763094947aa66d95e551d680dd4f944a1d2960fd21f485b48a74c6f0f02c760e39d34375204bda06a37590a38f8ccdea1473eca6068fe2b4d50a1bf187aec91dfacdb91d02def588e5cb5f53a6dbe4521e44ae8cc5a5ef793477336a04636bf2c002b3116ce6a5963b03d27d71b0febce4a44533792e257bc902b5d3af0b3becdae776b1b20e87182ddd10c1a7a6740209f4a4b5a2645ff57e651dcd0a8106ee350ef813608aa7d376e7d386ef762aef6d3615ebf405bc8eee03cf5f493969cc09b3eb4bf5dc23e7311c722a5b5810a1e545dfb47ccc7472bff1808a7652249a01cf0cff76002308b057a1fbc073e907e6b339ed34fb046ea62fc5405aaa386f1502364fd09eefcc762a70dc0876ea7afda489ca9aa61ec672a0260f2361f50b1fe824c7a535a3d2005e7ab9916d71e30dfd8103cfb53ebbb39cc7b21e7afad0092e72d6d3303f81b0b829ea68bc957031eccb690871b059acbf8818eade5a89699422d0c4495b97583958eaea4e173aee495345801fbea54ffc22f0022bc02ca5a27aa6e647fa838cbdc96d0db8d0879b48ba5dafdadeeecfc0ba2cb5e29724e43aad4d2e9f5dc4e40c492399a93e3600ef080fa482f9f0284403db3960d1256f2bb8080be44a504454800ae7da329c5a549e6569d120223cd850736a0b9e8fa159f37a9ad8002837066209903e105273077191e2648c3ffaca021ab22d3ed2ef33784564ac81e1251d9818ff08f945499c2da834203c9a01c615a3646516c32374d4c3678723f05a3e97a51229c4ccae4470646cf0474fbbb9e91893a3008a7b5e7852a406c587b314ae40702d695efe856a621ae8364a331431550bcb1fd3269f6a77fe2d9f3c04d4f4ede1f4620558e73d1a156f4c9a84f74ad82d30520f4eee02cca6e44248704ba22781b20305df44676cbd456ce086c85d0a4ddcc0e4b426e18abd3b7e5965d0b4e60555da000461f6c04de4079d5bdb780fb42e5417559da006bbd1333d991708f11e95e5c62c5cedccfa2559b496196df059002eab3044ef254602a27ebc4f31dde24b629976d5cf79b5da6f03999b2d0ef1e9fcf63d1fbec0066802f5a0ba359c585a099ed0c01ad588027c44361991b6524b86085829fe81e1ce37af4ed07caec0a1ea1373aa9712da8229039f2fdd6dcf70891ed86c2adf496da0e63582cd9c06821ada794549eb60cd90d580064faed3202624e686edefba54aa8bd0832b37625532e01f9469052cf6864d50e9f13bbfa8008d545486e9d89be7c789728484df214c70ab0eb6c524341bc103512ff0cf816067a044a50c768758401453b79ed1bc2f082c303e3e357046c8133dda87a7bb61119c8a870772596e2cc19a8183e7b79f60904861e92af176e0ec4f424e14a5d062391490e988fe6f016bc379ab8349aebacff42437e6e086b44ffd03cc3443bc58a4c21a0da7d8e95dc03611363cf42b0bfe6f63864cbc5753d648987e9751710df4d52468fbf431ef4a65ed4060869d7f601044a9988f06dcce6bc83aa7ab8b6dd391b93ede6be0cadbd7392fdf36bd541ea8fa2a4c7bda94d6075f96f12d9766d9a36f77f6b99e07b84285e05c9f5c02bac9a43a35ef2c53ed10e9d948e70be61120a1b848f651e798f0765c6f1c40fecb78583f109878aab761eb2560b2afddce3861d0053ed60ea3d572ac4cc9df12c139776131942966b08cbf22d0f28c623c830ae8de341a603e0d6332faa805d1a8263a9e317a9cf4883630c962da2328ac13af04f72a35a510f35423bbe3fa26486526fe7675c798bfd1d540059b231f80e5193c351149abf89c081d10f2301f8aecc0124145f3be15ae0875019625636ed20f390cdab077bce25294bbe49d4d30dbef5e76699c9157aa6c90b7203a192006fccba57f49a7e5b220d219c2ffa76fb417b5bbc93adb16282febba5adf2759e709b95e32c53ac73db53269385a1bcab06582ce427e7ed332106ebfc6e138ecd86d5d58d3f9991198018b71637d5942db9e7cb82db272a9b4706c7e0b41a457bde7b6bc002b8c8dceba096eab4dd5cf4ad697b9a745afd4d732f47201c15d17f11551de214b8d65cc387f88434577d4f2a7595d87e66bcfea6c589234f6978b5ebc7a16f2177d2f6d929f3beb7178e3b3a2d01089014728f72a12fef4408adfd4126709ca65231ca7ea82e58d6ed5d82eb4ddc7a61c1a11db34d87ebc658eff2e37f376afa967d4ea376631232bdf3a9d585a7170d645bd5c895ace8a2f2f41e70f354d7c0f43d1b9da1860a16a8fea72f944d5c82c8586fbae9d913a46aa6950bc3e7ebffad3a97d3b330eb5b1d45a97ab89bffdad2a687a7fe792357355e6e2815b8603e9cfb346f2aa80c9e4826da75d4cff591ea4525ac7b467960277fdd49745054f79959a2fb84572fa7f07641fcdd7cac360d66baa42ad17a75ae936eea2f8d7f405388d1a31ed44a2459f7a7c80dd54d9378f9dd8dbb47821b222a7b69f546c91ca9e9c7eed44b4423a2ab9ef00bc61f28f4e52ccf4626a81b296f8f7ba1a754cb53bb1d3132750820803abf239d1676646fbf5ec381ebf090315892f3347f0ee69b714c97d6dbc28219dd184bc1e049e6dea2e9cce18bea0790949b38e788809e363459fbc17fdc3414d69cfa6ba0149d52afc0a96544bb249583c3f8393873506453fac18aab0103ad73fb9f4733926a585349fa3a7a04c619ae2a379c7c2a16dd9ee1249d9ab4077191f8a6f5a199713c32e0c9e16eb6f539944bcbae45ac94aa9b2b4a1f5694eae51ee742bfb175627cce879182ae3d73e158fbc9cb5f695f1bca4686720dfbf3a74a61ab67fc89399d0dd57923c9328577476fb86c61f16f949c1812fe3bd4924b1f4afd397f73b0d46638970a4cfad811e8d795cab9eedb673a2dc9e18e76c606b2642ca8df5fb268f1d2af5ed87aa09e55c0a9ebd550c7ca10bb21f3f05db660dc447e6703e646a14579af2287bf1d3d9a275af3ef21e67f23d2f7247449d6e8245fa6f08a6c9714a026b00a5edd24abb212d7acc7d19a8447f60c19ccf5a4a12793bf88090476c8eec93cda90d1916c3dfe0e2f494efa05728a5c2e1de9ed74a3296d67b481c2c2fe1415306bf7fddd035abe4b05305d49a9abe59be24959a2eadcd841be5c42b796fb2d9d657ea5a45b43b73a4ba7df818e009883f894e96c020c937fe53106f2d0e034a874a8520cee155d17f190c1e7db0d7418e11c2af03fadd4f529a9e02a7f358f87806ceb90a08787f26469b39a54016b117419a1a89e68daa7baf8bbbd7fef3b9041588db606b2fce992f1712a1d089a925127f057ec9536fda86ecb35dd3ce36180e4680c849fffd889cac259c71b0686e389b19115a68ed67dc00b28d4b7fc879eb8da8cf5fa3250eb41aa807901ca82ebf2e370a164c76ae7b275c5b420742084f82f46843a80259f318ea10840e5488a0005b3e61a43d3a88c99fea20b3178d7f078823ea05191a3abe284d0a1ae2a2001daaf77ecf4270c2fd60218f73cb298ba6c2532554536e6c2328aebdf69a58b5da46e66ed7de168b27683a949a673b5e8a1bb13f0b1c075a0434eda56c7dede9a80e11a503084da4ce0a0d02837f34654eeeff87061ef6e9de8d4b6ac98c6ce6574e6deadabe093018f34d76afef6e87d41c3fbd046b450c42d1708a283a6ae4e6fa02f62ca77f09ee6733e65f2eb841451ed8a3c7444813fe245171cb696452b3b359d01b0d7e6af6e09a6ae3c16957c3732050fd6c26232b55157830b96c7ed0d590cf47d9aba41453001bc99e6cdee49b9b1b277478934355e1b4f080e1dd356d91c7459cef3aa09cf470255f9c87dbf73e1fef8136a715f5f443372afa1e1b02cc48838215085c7e0ca5211ce4c333e59848be74733b455000c7b2cce28a51da9f381a084894721d3bb2ae61787d5c4ad28824ed25f50997d6c392c0c4833adc47aacea7f9a5a28881024a3b2b559db49fc12b6fa4aeb66702edc74e6bf2046c870c89981ab812f1b0af48c0e73acce6b7d1925de9f8143a6dec752328e93529d7eeea3b373c1c8483cd4e887afd304d30a451b67381688a4740972557f0bce97bc4c53d0a1bc01abb45b95084492f7e0ad07bf408851c12489324582cf5e127b94f80d18bd3451f0f22aa67e9917688f3d580d2df3558b16285bc58a578c5b81484739578f5f23a102dc1048b29a97cd4882a7b5de1ed66953395afff4080c2e3ca02b9d4cddf9c6589a6260ceb829cb9d03b028e8edd7fe99f9788322bd0971cc935cf56c8e6ccbb5a3b5e5fd3a0d13e304edb5fcbed73fb5850c5db2d7cedd5e6310b3874be71ae6f160b65d87f68aa74e6f9b97cc53e87371f7c67a578b4a5c2cd8173d2c8810f1d98fa70405beb0568a64ba66bcf9433b7711edddbba36de33e566fd2996b1b282c6114f4e2e3338f6cfc7fb53bb6634aa83b8247e9e11187b6437ad8eb36b9f2956299010e64e67beb1b3bb41bb0ac6dcb9b8a7ed9cbf30357c2d7049ea0c265ed48e1f929253a04538cbddf70c02b74ffeb62d3102df0cc221ab3d0dd4d2ec04ec388b5dc3189000e5c04932fd14e3d7538b0083eed942dabd089d3d98d13b0dd7ec7ef00d2484251989f7fabac86bede6f366a76311decd71b0c57d1a73059ba76c7e4ae4fab2cecf32a342df297406a4e9cb275abe6808b465607f2e3f72332312e29fe90e1840ce1afda79e0f36bafe6d77b2725091e1215446b01a7f5c32e9abfe5c5ed65a3f48b0669a4969202b233c25ef7650d880fc40689eee76a19c26739c63e6cbce04733f7bc08115a9e98776cc1f0920e95d4e2ba6a4530add893331c563dbef6034f4335c968ec4a11839fcefc42085086c3b3b05b657a6b6a7ffb82541ede6cfa94ca7f4b064cbefdbd66c29cbeaa5998da9d8510e92438f2afb44f2d5eedc569b9fcb04bc6724c7fb0542e1c9606087707b1baf92ed9b7b8b24618896d5fa5e2c27e71fa661cdeb3a3b7ddca3811656aae3aa09a16911a541b982b3dcdea487a186f2ab34d1ec45c25e3994a8f1bfb6e21257a946a4ac67709280ad5c9355cdde79c907b5672a985bbe34d295cb7430e8295a146272ab5c42279f06a828f76e51427446b5bf22d0b41e6af71caea229af841b6da5fadf062e6ad45ad6f9601c2ed780aa03f786db82d21f974ffcf68ff463f7196d9a95cd9761858df355ebbdac19b8b7c7c3d7aed8ebaaaf42f2b09b060ece3a91c3dc6db2d6002a98d4d8af128fded1da05f45c5808bc770338e3f3aee5ee1108f08716bb8199ba6c64275a1dea94bcf4391955ddffda6a8d75246673c9430e02e750f52f2f20c8b963cf0f8463ff7ece6aff19786255e99401bb6f2b6ba30271911c1d3a194dfc16db873dd9921228e98e76c7d03d2c730c6438cbc0de0cea7a60473ea2a11fbf9d335268fe5f5d3d8fffdb776b61edb5ace37efcaf560dabb056c4cff8496f02045e5f2127faa4a9e37a5c256235c976a100ae7d6456ed3e5acaabe6e27020a9dd2b9540dc7bffbd151f28143eca620224654e9e8f05661a2aefe4340bc20222eb04cc9c9c4c4229f8be78d05a9743d89fef62d553f9109a0ef2fba5692f569d3fd2f730e4625dab8595f89edf17adde35dec046619d2b9468dfb910a79922ffe9f0caa0bcebfceb9302e95de62278299803c66f8ac470cfd3e0d227acf94280345cc2e21d1eccd51ac6de0032bb606518dcbaac3d0db589e37622f5a640b774419de8102a4ca5fa59da312a0884bdef7177a6bfe093539c5215da8d11f47cbf867fd244b42dde4c550c5ff0295cd9a22464419abea1809dbf7200cd167da2bef483b4e0a8d135852abf3cc23819d5df5b36279ecc8b0b9bae2a6b37c55ce21dfe41ef3c75d7a8ac2e139a34acf33d4ff53298ffb5cbe17068d87bf92ba2ef1bad07a7867cfd019fde4c3f3632d811d32ab73fc101c2d85de4921442d0d1c3d69334f07901ea1e35cd7b3ddbe533aec1aee24fa4af57195930044920ff9c1f0b490a29c3c9ed0cb2563f4f07947a6d59f1ce0a6cb33dfa360a4d33673b0b9e54dd568f32993354e8d7e8c4929fee7b0c1557c513c2f77193330fa5055f3d25f0cb76695a63424f1d718793c3b44bef2995fc197b51c047e63a0e6a9f8b55690c0c18dfc893628f7edc27561e96a40a19c99e6065e04be2ae8653f425e74c0a128a8a4e5d203e056bd14926363ccca36ded6d91b59884ae26fe2ba340596b06628be02623ca50627ad9f72824e8e46fa510e20fb896c4a082adcc4773eedd62caea2ab09293f988982bf7c25b8331739062dcfa415b47859c1c638813779f947ea61f55c8a50fccdc0894ce94fb5cefc13bd59ac4caeba033bff3a32cca2bd4cf1f4193643c6f3855232bb064b93f1b181775413cabf711ba04798f0ae2b7328d30797cade42847f39eb56718e8ac8169ae860e6aaf191dc49f97be516b159996db51fa31a1bd8972d8e3a79228b632656eefda7272dcd709c1a19fe78e14320a9bce732191516a189b2948a844fee4e16807544fd019a4fb83c8ab02a9daa918442ce42b7ee53d9d265b86920fb26378b0f7c528a6bcc13e3226eb21556a01ec9467d645cb163a88395b26d4cb15ac199a740964429ef8ae797f92f438cc0d62dd607a121b7ba5177e030bfa366011e19987e802ab0d31e3ff022583d25fb17e22b64df1d00c0fd46a61248844c012d973d5354a198a34565760cbb1159fd908d8211edb9e4b49631de9975167d25a1f99a104b60e370147478adc9730a64eba076ee4639d51199d6a5c0e0b4b1d5bea9c7e5d4083ba462cb75fa5fc54b4095756a338b73df9f6efea016fe76aa27a29f99d43fa5f2f4009db329ed987f44ac7d7917c90ae148b08299085a5a710ad0c42fee9124c1e96387af073d42acdbeadb406e4a8bfce149aa07e6716f57b8580d75740c1f93f019f1dffd61dbfb98f52f2afcb71e1f5046f52fc5905513509d58da3cff3fd7d54bfb2200a497124b0c95cafb57a5dc9a97dad0bd96347d0ec97c45f8308c585a782f7e1c48a8a231483a49b2c5e12f490e881a2f63b8167a24ab7cf4bc44a3eef7a1b3c085912fd45f4c4c2163d8aa0a9e22602165f1cf87bcc6a3d51b6cdc2b1b9c917a364d9ad8a36c123a0120a0ef3ab2e39b00caf92450261b355811b70094e16e6055a0ad353f782af6aab2425e1c5dd4e6b2e8f6e59bcbfc2833e8576c910cd73f929b46c4086afa66ce2d7342e89c660692edf646db4383a274e78ecfa298c635ec39ee4ac4cf43c0e36ae4a16b8968237222134b5a1a20b90a00a840e95ca91880df826e5250eeb27603e3e72ad6fefeeb46617ba299496b5bf77766049b3e6991d5ae5c97d6d404c993ef4aeaf99baef00783f45b11f94d2fee44a8b1008326f84fc0c3db807019bff555eb4bfda5d6b8d649f152d8a42daae2ebe604028c9c706fa9b652b32812695c979da607ae0b221fdeb38d9326f44075d3bc6866975b56cb1534855606387006731bfb34a2ff7cc635596d42e7835cde816995bbec01b20ff1c71b1cbb5a682991afb6ac08a3cd3754e4ccf01fdd2cc72db9a1434b9c9083c66da22d216aef228c145fc3cf58a927bca1852f80f35bbf0234623f12a7ec6659fae2fbc1c30a55e83d4a5dacee609e24370b2d22955a035ee3583dbccac0b9f8f2ca9868d5090fba013343fcacf21e31e4c7d7cb6421c6e132676ae38e2061ebec9721c3a16458a145364d0dc4c8cb6a62ce9f99b5168618296ad9b097ae2ec84f91bc08873a6f1ba89cccfc9c73ac5725b1008929303adf2121db43107c73d41c92beffcdabb45c017f3589de8b8adc84848b0acc5997f082e6ffa4dd779c50ebce410db8c2712d16780fd751a76cae145c54d248cad3d90cfa10205b390a9bbb8aa33a2f115e6ba2f69ef41a1ddc936f3f7168630146f5795ab289ef1629ac80fb4fc9ea9ef3c4ae562c56795f33c19eadbca3fc17e655fa0a0f592da109d4d637953330c2cf1e9366cebb69503a1a896140bcb9cc3fd9147ac3be827bf6bcb58d3ecc29cee3fbc6a97f8b20a512e70f1d8cf3fbab1abf7696e600d62048f6b469d28d9defe0578685fc998b3e2061d88e9348e02cd51fad3bf43537a009c80731f560f7d5bf9d1d4d2a3cc752941540f0aab8c2966606d24b9c251f76cde7e74c2c3a2c5afb953dc52d8472c9d51d80071a3d5e8b9f172b0d3ff918b40cac0d3d35a53bcd329a7321a33d2b38e9af1cb9d240c0dc0d87d1e0fbfc76c1d3b412328b17721c2676c77b9400e5a0587b2a6475605ec1959ebcd2806e3f075a0dbd6d7f6629dd75fb751cfe2567a8dd742f3a7026e2e7897d3589b71a623d93ce4ba6a3d59db6d015cbb77ea4a793eb5ddebf87665f5073e1787abb54f5a00a151bb81cba3f9474a96dace7e27a8f835ecd22d5949d34294996ce180c283ff8be888ee1681d8e34865fea280d51d5da59b477d0d3771ea4fe196bcb740d97575241b48add4b5dde10f433f91b99c34656f042764a601c98c1ff7428750a1b9726054a7e8bfa0ef7077f516613618b3fc548b5ff0ea41710febb651fd05c7e8fa01eac4a06830bf42a0b1b071a0c969cd1421f81fa4f4d7b0272b6ac860c273e21edb8565f64ad068debbacdda9ce5ccc9cf9c4cc783912788b7ee2deec389afd75178c8afdeca005c03dd178aaa642b573334714fa22ff4c9d4ab0eb5814688e30bf04119b24010583f0a037b8e4c1b93ea301ddabbaa4925601cf46f2583d3ea9ae7c8e81f7e464ae2323168195c8aaec28eabdd59fcc9745ad061d6a123b2c68450d3f97e616d1a8fac68253aaff4283e12dfba669d2331cabb339fdf454dccde8aa87358245ef7a1d5431098b71497a82c098bc01b40a0f10e3a45f8421cc8818393fa39cbf6c8335533020f3b9dd487c5b3bcb1784340e45a739f5eab89debe31c28d4311c69d98b97bf61bd1e1038d449286f80f13bd7d73dce52021e15421ab58e6104b39dfec1e6ecd7f4cb8436fe09a3946f126fd6edf790a3487794aba5f1bcbe2bd8db00c5ed4d1321e36fad94d7df8a98caabaea7343456edaf0d7cb86f98c5fffd6a2108e0ee9bb2abdcc2ab262c0c474d48487a8d07e791cd73218e57852224edee8abbe9e0b45be7e8a23acb15d6a03783a6a6a467b52c6fe1ce0bec5c1d94405b06742d1da5f843e4a471d5026a6403a74980d8d4b3ecb1ec5d5f39ecc54298b7c0d17598b350c2d0a9e37e787eda4f79eb2204c194f98fa6876b67d4bb3032e2a72287065a26aa56028f0353c08a634fbd07adf71d565406f258f47f9868383288bea2755a0c117c047ec2d19e86ba71191fe29a140e132a99afa6c18dace319d5df400f3e732bc90f08932cbcdd2d433afc2a0891a8bc4064e10356753ef3d63f1616f39e2b540e4944becb497ac6117e795eb53c0553196dcf01c19e969bdb043f51b54ae9e39c7533b8276fab52c3f5a8c1d124072aa79c02218ae8554ed7e5ab20e875b50311ca121a9d42e4cda9f8e9aa10e89531d9c3821eb360ace50102bce625d11b2a9cd9fa6e174e1c34612494779d4dbdfefaa26de8ce47fed077d1b37c5b671c395f486cd38419a9aca4216ec1dfe575d4c87421730b8092fa55dab993b1d00cfd6f2d7922524e56a0f59cd700a594852b3afc41dcd46ec59140c7b48138772008b3a9afd4874980582f6e9d629ecb0b4c60da42dc30d6e5195041676e9c27ec3f245fce03c990ee1433b1571383a7fcee163a6dc3d90cebf3f40cdc01df546a9f1f85ceff78bb9a54673609948a9e3d7bc88bed4355b6f85eaf03280da557ef2a60dc51b17b3bc8f6440cc3f6c010bbb5703919d43b16813230a2cc0100f74580fbfac253ee9a3c2722d5d2657fc0d15e9c145363d0f7d67187490f738f5aa3147ea65101f963fa1053cb3828a871d130f40b941e25b0a15ff6feace1f59937dc0d7a98267f692f71fc9cb7b0d4552f1bccf18f9df475af7cce4acfe53d34c16b9c82b9c2c5a9981c422ff418143e2f8167b81e8ecd287bab4019176495aedc5f32e434d9efc0b43a77fdf19161ba194026add6b210d4ec9c36f51247efc986e85f941f7ac830851e26f781711bdfebb7fe8f0cfad990866365f0aeebc693d9198872eb3531407434cbe1239a8c746a728dc7c01f740a68e739a9881bab994714803c707cca65adbfb80feeb7024b78d63bbd5960a93eb1f634adb29464d05b5d23874e283c57370b2fda3d9b09d0b4d46981a3412f7126321b366562a22b1c113e23197291e33813ae21571f13be4c1dd49eaef8211970fca356a506d9f7f0ae73521d5dbefea2b89dfcd476f5bef9533173de8021a0ee309be8a8c1164cbda81cc2bbb4f8f9ad9e277a79fbb5d53376d930ffaa5f6bd192e03ccb10eacf77f932a0f875df6032be54c52705edf9be507aa6435574163460973b593013692f7d6b80c7f3de066beb7496dde1a66aed8751ef69592455a69682215b3523d231dd9ed7e0a7d98e766cc27066f532e346f379792f20fab4be6d0b7dd209fa307de928ccad340de76fd2dab414c303be1d33b728c0fa21e00d8e3607fc711a1d228fb3788c6162c06ff06106af94e5352e6ac9ceccd969bff07594a1d575b70927d6f66c54adb3695ed9384e000b3b98c726d835684fc43f37f855932b13e9b51cc21916f04385e451ddb96a5cbf98b11815c9aad4ad847d2416c73493f7ffbbcf539c83fde1b5ae0e6016196f83839c627910a47ceb59a7b2564071a84eb9b7bba53f4cef2024b13e13b9b6ea8cdc621a006bf24a04df1624d4fdcb14bbac6ec7d4e2fd5ced86a477dee6b6eb33327f2ec3f12244a0d4e6b05f50e435eb5168d2aaf8382bdf4c5fd6f778fe27cb9d1c43b31c1c6d0f7976ab57e2811e5c466cb56b3cec5b702094bd9be7640646a2ea9a9ab5d1f4af60369a95b4bad8e4c1154ddcd49ac0c2e040b3dc68f28d2f5c394d4272a7b4ca5555bc73e686890bd7fb6137a16bfc6d3af735e8f3cedf625ef841947cab7e015c7480a492b99003764bf710584b8b38071eb661454c11deeb1b99c8bdd48c93baa05ed473807fc73eb5783c1a4ba659f15c8e4bbb767c6f3eae0310b21ca608146ddba3f7abfb479788f9dbd169d08ca66250d6e2b89d26578b9710ac79d311280e10f704ec6926634aca2535bd9c06c0b8f95888470c00dc7caae708ed75ae47848a92c24cbcf3b46c0e5707368fb3a1c024db4d78b9775e2e6dea154e5e9c18df9760bba43a019ae009087456409b09739f90e78a2f2c4064152ad7542bec47ca593cd2890023aa7f11b0f347d1c9cdb4184bf760805e3d094d36797242e65575b0cd30dd871c3b18bf189859f9ddcd81fcef28d68d1079adc9d365e80a4325046e0c79e1c57fa9316b5fb0d4787257e2c9d4568e11888091da77cdccece39798eac0e0e6d4748d6f4421f6fb9355289707d9e82c1b30fb7d1da6cba289eaa1d39a473003ab60b01e53656f59a1b40b036a8b1788401f807078a63c39b29739e393e7c7c0bac4d095fbd2578d9036655254dcefeab2f7ca8d230304fdb8a86995899d377f663319e5942d3264721eec2e0e39a5b75c1bf7d97da9ff559fb9674dd48c5d15f8f626e7176ee72a8a31cc94292b70d0caf6697d45c255745ca70aaa5935567f508eb977c1a650897a2505370f74e44f11efd1a51bdad25fcaa5e990e722e4d018d15055ddd17d231b56fadab39e4abed5dcbf74409d08c6a0c3ef37144c32e5afe0fdd2140001bc7c945aab3034dc99d6fbac9758588a96fd4185f4cf0fd3d09ea00265d1f1c06b6d1df5fe0d2deb437f7e25af2a04c9d3d3d6b95d167d892e9c54730105158c07980f456d4c302415afd4eded68ddf9d654828f93275b3ecd3415c3ff5072e590e04d30c30b9c9c0b086bd9172eee089ac481d97bde0775decb72efe024ed4e0582e14041a204651b160cc127f7e67791fde462ed28fe9895ec18881bf5d09bdb39d8dbddf41a744b329a19afe3b6b8fe6f819380d5e7596ddda3565955acfeaee70cec05f19a148b4fc03ffdc10518c68b9165a1a1a4c073c21d27ffcfe4ae02422684850e46698bc8b879c93fd5306ce36253aa6d8202613d543787dd11c1c32e183137814c5bdbb37bdaddd5caa7cfdf5434f41a0b46a0d393ff756267a910358c8411d63660d007be5a5f5ff0a4a0da2e52afd709c89ef63fb40afbf958f39ba9d3689a9ec6de3d2637c25cee8f01c980e27efe0af643786f7fc04340251b6db850f71a26550d90224370a5f61e7ce0af695e3e5012e1946fa710c48090ff04e3eb289c37eacc5df25e1b3a8fb9c9561e1577a5e797686c40a9a86ca0af5eeb36965dab0a808270979bb6e45190066f3dda51a0235b3bb92f23ec19de9e595f2bba8ba120a2233d8bbc4f3878b035c93d17b629345cd38095a8027de028aeac4010d01938ebe6a685fe59cb867535ebeef3478f097e64eb909549d5536a3791b8dc12aa20c736113447a47c3bbf7dc62dd9e0956bc3f3364a758ec1e45cdfb6d9962c24270a4d2406bd31d90d584010a7460beca6d8392b43bf80aabba0437db1578b70e04b6b307d05436144d074bacf0d4477983ba18951736405dc7650b0d1afc3210c9f63be47b30256400fc98a3c305d46b9f23cf83fff26b6361f714b84e6a5fa903ed77e3ab8cbd2701b06302d0c0f136a41efe35a573b8e522c7bf845f21ccc36b77a67aba07821a87338e132d341a36ff8d5c229e477c24f02084511fdb3f79455688e1496987deab656ab8488df22eff9a54e906d402d7e006e76add7e018c9b395746a2206958b32ea2a5d00f890155908dc25a6a11ccb1098cb3e59d28c75d7092bcda9c3042138f2283a8484c8b28493e058eab42e7018b25ecee6eb935e25f1d00707e2be0659a315bff40e82385e92278aa771231e77581aa261d7cecba908a7c492c6a8b0bb4e5390b3e1bb128eb6ee63af5190e70a25479bace5ef5170597bd129b3d06dc323fe730bbf8fac54e280e5959b795f81fa8f025334b77c59da0d9ca84925b5ea666fdd31446bd9cf4f93caab21e1e61c9e1d2488c689eb2b9089a56bb0214e2a01c6540dccf10415044c33f7821605a44f58c3f420d45dd9ba025c68b26a239d9b88d7011d8428e88143e5e3d22df1bfc308a6a1c29cd7235566c08d2c14087c79aa8215d9edd464583fb61ccf56b2b93e5b2b428f4c9e5d75450b2695fec7dd023492b3565f124cbe97fe5bf6b484734ea450da0e0473b4fca776976e61cdbed98f13dcf74f9949b188007d549c14be4ad6752a8d951ab17273d18a995a605da9849e5772bce176714ee7e451bf8a3396c4f529a2c39fd4a4823a3dab6f2081f80c19473eb9508cef90f30a934e02cb5d3e419bc1478b488f3be6df3f11ebf5b146021f67d75304742fcc1938819752e84a0ebdcbf9628a91b3db9186a2ada5391ffce7f576a96099da8365684a88f3d99a2b60e740f651c03ac917e522c6800b40d08c2729be2e075f757009c4ee360c77b98ac4c7fff7dd5561d04b346074e81e41bdb9af0b290f17724a6912e3ab39a9da3667a029c52520c0cf0666a38b8ba9399e210330e5cf135a7ea963392b0685e848853ee3da46d658c391dc7e37333a655cd1df9472aab811040a108d4c4533bb24e9fb0909e25166f08ab90b678571a9a4d84eeb3720c2e8437b5b55a38d60f6b1ee0d31571646ed5e4d3ca13d83328f9a8a05ececdc1eccfa68924c7a49a3fd4e2ccba10829be6416b838ebfbbcd9baf7aaaa4d9c7e82a0db988c4ddf3ec24b5436416e5bb2291be0a012dec7708d59c5f385135e04d1d9a1d6978c2cea9e0c8822edcdb52a0ff329c33001298438b80f7efbc11b6adf0133d419b5c43f1f0d3e6459c0cb5be15fb2b57eb15e42bc45bf42f31fc5ca767dc9176e33b973fe6807bc3d78ae32749d1b3335b54cbf45bfae4715c74a290e486c1326deacf7332528a13ae607e899272ee818e9a9decb73d5e8d7d7d1469297e1583fc4e000d886e1fae360495917f764e01f0c6c1e13bdc7bcb287d962f4fec4c3e33366438a256ad619391431ed59b3d2d8873eb022ae60a1c140e38bae24a578d8c226c39d7761e1518ba4edcd52534f15f54d9c0307474828e7f31bb5ab46a57097445b2207a5d49739d9bf702bcda1a603fb285bbe7d7ef97c3996ccc4a2aa80aa88812eb67e0b1a185549ff0d56aeb07b3c176a0aea0ee5e067f6dec3c2fa9f8cebd861730f227e9924684280ddc479d06a18f5438380337bac712e8fd5ae7220c9397b3dedb7da31c266778ac8561aa538d3b437d28813641a885c4eb2a61959849abf784c99e883a3c3fcd574287d1bd73e8666c684420d50d584b4f35ed51c3143079b83ebdd927e5baa02ee940d25fa9445414221f83a0f5e933451dc3a7b834eeb8a253ae4798d9f350da70a7b3af032d2e1ae5a34172a82933e19ee673d6321c946e96caab9f86dfb2056ee431b4531a7d179a818d0d28f38226d3f5728938c0c37fd7d182fbe52668bdeb77a804f21d59371c669360e81a37534897080796ca63d90c07f3958835f377bbb49ac5472acc4c1b2a702c2d826442929bce56e07d8893d61f670278998c89e9b544f5d49f9df7680196b273ee924efe83a55e8e3b7c77055337f95c45dcaee9efe32425acda488fa0243edd45a7cc89e288ed89cf4da4264921b65d1540e0c5c94641dd3e9ec73c463bb6fec6aa0691f7394e4b46cfb74982332037886058bd9a405c29b36b940906df7473718ecd8d3b39262da605d1a67aad16e88d272eaf2f890b3587b39e9b9bd4d1b4942f084c24e2c9349f2d9fb02129d11d79a8f72d1133c2c759b7642029d8ce3fce51b049309d85ccca7fcd13b3a432f4c1673fc620f86dab17a011d7ceed80d4ca3f830caef184e857996d907c08dd799b274006a5c8a08f8d90f3dad8b0727f611ef72b0ff0a11f644fbe4a84ca10099e2406a51a2a993a9171c0923e19cce93a9c729be0563365e40c7fc1254151b58c7981d9174f35295462074dee0b4f248ec367c17934d23c4f3a032a96d0547668788e9084dbbf490646ed70507d1d6326dc8dd1ef218f34b3ef09a96b42f1228a11e8685d035462636f148d6179db85845ab40c6c49ba4e6bf8686a29bab2149919b8fb76487d8fefaaa3fd3c03d2a598d781dfdced982a84c14771118c72aeb2b3413d989b3168d9ad26e84416206cb570e291e83afcce42486b19c863990763337ff9d4e57fbf11cb0f732947b487c04e069098fbdfb8509651b73173ef17d029a914658dc541011e606b4698b22c8a99ed26f784b92b160f4633a5332cc7071dd66a2213468522800ff36d61900e05e0f07a1125cdeff5ff36b1d297f5ee840694cf14bdb7944bcedcdd1cfa4da7c0512ff09bd34b7577abf3117ac1ba4de39be63946ca35799b3fe5cab76512c9cda46fa65156fdadfc3438b52995f3d85e6fa1c83d9178309a35d7703ddf7495fd49c1a425f3d27cb4f4af91d76a06194a72683e6370791cf5776f38ff346dafda79fffec5c2db50ac5b716e7d37771707b8569ebc6b0b5076c88555dad15b68bfe86958189d15574278dd1344e31d49ed2a403c58669ed492c1c759bbb6bb703a80760a055bd348caa66520c4421e437f073f40cbb22906304677c5091bf8e5edddf881ef66abc6d834546b6f80833e2f542adee8c5c3c0171d326587143deda4e7c37a52772185f360c179c2488902fec29d3cf5454cb2c7637201fcd5ce0e8ea6b26d04c9b90ce38d62925bba812be5d8fb6d51680e9d0beea23131d57406a3ab5d09a448b31d5f46e18627c0bf1fbed80f1dde86dfe70ed7476a1159955198a7bb0c8694bbfa80d90453681d87c1da5084b4ca6257b2dba8d4cc58546a47835861c6e33552e1e93eca837fbbb8b01518228fb4e0ba4f043f93f68252c49c660be8b58fa69b2fffb5d5dc2dd49f6e012aed13a4855f774284cc99a40ade2718f94a94047f93040622d5910b8c6d072304214803e12a58208b292e7dd2e2f9330891b8878d7390e3d20b4e74df2b0be0ceaff639ed823ae53e8428fea5df693a9dfd17438d15665f471b08d4227f9db980ac853f648cbc0a9741075132735bb465cb4528a5d5b56b55e761128083a0090631633f31e2dd229e2a3f5c2d7fb86979b49ad2e2a817209b92742af635e7e7dd4465437d81b079c7e8bd37eaaa37d400e74e45542e9fe2195a440ed8214471af4e3d1bbcc77b33c51ef7f1563bc9b07403909ddbf92d5e72887ebff09f4be1daa54bfdbdbb8247d92a01689ec0274e5c94094e515686da9f874cc5def04db997f8ab661a86013f30102ad0eb473f6f8be9ff9ac506a3c632b4129d3f557ec3f11578a4ca19bed7229df3e96a7e564fb0442b75426768b56c5f78e3ae7d9e8d6b70a27d652371f9b25dc068d994d4baa47526c48f450e338442d7883313d3396a47906a6b391c516279e29ad609e70e692f7bfd52cfaac9e7dc3d4a27aa09d9331e1da8982dfcab051cfdc106b130731b5d02767a329bf543e274b65367958771cba6547243b86f3ad71188062e04432fdb99c059f691ba7ce649e888a2c0ce5e7be945bf4033791ad4d89b0839e18916ea1b542528218c8e0e9b3b3001a181abc83ce826c25451bca6fe5e17e231c4355f23bbbdfc25bbc1402ab03a46428c150f0e8ade8b49ab4c625b77c5b8afc195148beeee1b0df7d18096e850187a09316d05d1ae3d01332317cad6867a3e5391eb37896a96cb71d5579cf545a58c245c7c647e9b55cdfc575ee403677edd58070b24214b01ea7df3f491842e8c49bdb04ef8402ff621b8b9abd2f28982594fa40931d7e7f7ef0d8d691015b9b1c0531a9183c93c8ef580e1c5fbb14880d29fd1f9bc4a4901f9f2ed2317a21a8fec7603e92177cae1a6b100466f068ea51930ac7f89cdabf9d2e7cd00aa7657d0f1cfd38aa0bf0fe72cb4418b14c3026618fe2797780e6fdd71a6f4ee9d4e0b33019f8c10a4367e91e12b74743ef2b58d3d07e50fa1bb95b4a5649f5f4da935186eb85c50a2bdbbb1ec346df3b979bb3c6294bdd43a0050a93a9fe6110b33d880e9f484ed1fc56e6e74e9d886bb4a269349cafa70d92b8c8453e176aac7a60d783b982e54959ca3870272b9c51bb25f57e88df5e7bca8974ad047cfaec6201884fc30f310ec613c81def06211e8db14896f535066942416f226ae8a191b5daf12693cd5cca7ac4edacd39ce96ff3fc6a20da49778aa547aa7987c6c1f803279971df737c41aa66111d8e97029de2540e505e56c595adfd34c1ace331df449939fa476e6f2a4497c4af08d861822d7ef72271ce7632960861b3b0f7c375b7ea5af569d91b032a9ee920665e54ec84b5dae903e764867f5eb5a7e25cfafe05953f6957e6ccb1bb0d66a41c70a8733d1b69e27a7d1e02042072e2ae665a24a79e8b8e097f95ac28fb581a15b7422eb82bd71696eda534e86839fdea53bf98ea0e18ee741c0f7408b2238491e29cd80a4aa37d8522a6d4f3c657c0536efbe9d10aacb10392ea4d814436b52ba0f2b9df05b48b5d9b9da810eec403646028e3a0fbb6c7069f41e8bc37c8220800efe0e41390004b5e9caa7a4a97b642015227b40c38c399a3e941e344a8a6139b6df13df74245d5903c0ab0972e5552cb2c269d5f77f17a56ec936c5e5545dd99f1ef343ffcb5d98563c12f39c44d442d5c97b89d889f24598d4e225bc09d311dadc9c8e0365bcabf72b168edd687def440edb69a699fb53d236777571c74e892abd7d963e9c64ce69c989fd0bd0e7707d6a595a2dd2f508c8fb72388ea9146ef0e5377fd09669cdfed7a27a0de498d9689ea618b3a6d7dd88799a1696018ccb58329966b59f9855c65fe7be64c6856c92e4b7ccdfcc980463eed649d1ec3e8fe5a7ddf0048259718851ebf10a7d8f3a284f52075b19668984ce5558bf20143bc45770d0ca522b7157d4331c2d4337338dc92dc71bb9accfc2f2e553294b2af9fe620205b83dc027e17fcc2f1f4037311bf6e68ebf724c302b12db1d6a5ceaffb1a69b875978040294b0d390734ba01250400882c78c36ef03a4baf74cc4ca19fa6301eac45f9c1e5b03a066d0c459e98afb420bd0aa755e147bfe5ab229b9dbfe1eedf2be812c39a407f4bb9d98986becc577dc6e64209ba5bf2e5a2e5ca01b72f0d86b373a2281f8069344cf28205ec61cd0b935a374be0401b0904abb0920722ab9ad5b7f8f3087ef745f7ed2fec1cc9c88afb9d4a1c4f54900f97c0950f71c8452f8140b3eddcff0a09a3d777e9635cd057febe22645fa9da3d909c4d13b1c9031786041943d96ff2556d5ab8b6d8f82a2ab150c1237f76545d7e980b94e1b14e321aa3fbb8d9089279e12106cee0dbfd596ec335f0e9099e5fe52fc2a787f859121c59f8a2e57ece16fda3c79d41a00196adaeddd3f9ad1b4ab57f5f87fc4604c78cbe90cd916e2b2e6f50accbe7a15c18e00d9c48272ac2fe8a012c786eb1cf823e754c160ba71ec8f6854efc831a995e10628dd203f2805a97bc426e9574f3fdf4f5710cc60fe0fb74f5f0de568ab971586f98c597ada8b175811e3024af34438e51a7eeaa7a69eb0266eea9260d3253bf27a8918be9afe7f55f8fe14db632cc5f47cfacaed2d523a02ec31bd37b29a5b20b03f9a075d19a8d5f9cc9c9856037aee599f352e0c99d4f52376cfc8e2175347c2f57c1a63ff7a381e94da15f9c4f32feac887aaf9e1e4d61c9271e62446bd57731f1ad9cf2ec66cb6e213320f3ebd786f4d6cd5231e19327a2cec68c28903d88e525369ddaf35b31b2bccbddf497e4395980fb89805d73006e662eef2409e4bdf958e2c3012b6bbf428e27d75f6c731293a63fcd7a2f37e255a0c64b85514098193c9643f0144e88140f2a15d7a7d892bcdde9545799975b014dc8b2ce4fea0b0342bcdd19b973cf33ae404ee4a36cbcc10524accc3ed1109a0c83c5b56a879228027bc11aa1cbdee6ff72be31ab785ac1236cd167ef8dd97a36be72c3add91bf7f13fec4a00760e8baa07c73e92569c00eeb123ff0e6184a2890dfe9fbc2e1e811bd3ab9b46f0f864d6c919143dd8c2ab2552c021db52f9726921cea2a1b08d7f1468bca8f7dbfcb947bf9a5f0db74cd3868a3065b2bf04673f06e2eba3b29fb9fe78235e5afee8feb59c7986bd9d82dadc4726c03be63e592095b786fdef393e59659c4efc20a814283c17428bbf13b08d6915bb1e9ab63cbc373ceb79f819f86fd237cd0d6b626c47084e0b0f122bd39bc9f5ebe844a8b480474eebffcc1b7b207ed07ab881a816bb6975cdf09751849ad5c7dd5141ee0f7c386fd61f136392bcc6e64f8070ef508f1e07be40babc2347bd11d138b8f1e0a61800d3a1827c25779dadc78d6beac1d76d442d50bab822c7aac591d3054c85529528b4a9b8b138022620bf0b04bb8969ae3e08c2939316b7bc0bfafff62bfb2fba912aa90d65d8dea8673ad864691b0b9055a8a06d729aec64fe2532edf1dca9bcfc9022c86fb8a749fc0d631fd2f7d62fe9ed556f216b2e7b0c7035d17b38feb5376f81d35dae0c528cf933d03548c0c6d7085b2d14db39ac5b7f5e74265d598e0d70a9512d1f0453be002f5440010a31d7a38a901370b9d08f5b3f195bab376a9055ece0ef1e1846bd88ba9e7dce67c423bc90936130a60d95cdf2381b644cf8efafcc261cc3714e4d9ce5a87d7b1b73d98161b7ebeff8549404e8b2cbb2f60c89c0ef5101caaef631879a16cbf71241098510bf9f39a63b8e928868d31bab82323b194a2569fbcac15be32ff413309d4d6a7c1ec76a044603dfd6d9026af14f32a9190ef7df78f7077e98ae3a696fbed956ee12f9af575388b6f87d32f9a7c2bf1fed93f1f401f2ac33d95849de08d1b75de3669c05158c272daeb9c3c4627eae36b9af0a92483f3641a52139f8c8248963bfbc866c9b8efd889176265c816948b699b0f32c9ec01142f4ff09130a6d4a37867f839e53070b22380e62a98fabd540dc41f5881c491cde28a95b232b1bb6de9bc634fa13cd3c5689545e957416d830f1f89713dc6bc2cdbefdb53e003c4dbce49818222fb202281cd45e1369e90e16a830c1b708e38ca0bc0dd2d450ee631961b8bd8e053c72b393e05d9abe5ea7dfecc3cd7201a36de55eb98bacbc7e2c8cecd8fcfa16a6d7c5ff6439961d5f5d880a6317f7f7382c410cff8e6859441e87e61780458c9ec29d00cf3c509a34bd8fbdd8e597583a933e087fdf8d9bbf731971bbe6bd0fe403cb90b21ae6caf1eed8c213ead0abfe970014e97cd534fe5a8d778c4edae27cb956c4f7b7f9bf004677bd59fa1971ea7e64809bf9e5d8bd2c552e03df8bd62f87faae0c5d97a3e2df81a17c1572a1318aeb99beed5c9c8bf785c51930d24b88a7fab16c8166e79938307b67329eaf6fa8cf244975c005a7ca693cd8c460ebde4978649b8a869e00c9bd362f18de945a0478edfd5af4461b0951c0e92141689c07f7961e4b3cc455b761deceaae5214c5def1dbe572cd2e1dd5d717b1fb40b4875f9fec80afafddbe58ed2ad19dfe96264c796279d402926578cf6eba4f8af4e59c11688f565b41d84cfc2320c290436503c6f82a1bcef6042d44920d382b6994029e56be7ec3771de2fcdd871efbb95bd9ebb30e25a28fea2aaf2b15585129554b7b730edbd61c573b59325618d3b383bffefb827d0575eb27575cd42a46d42b1ff06aa201b40605c268c17c2d38b3147a0d3c8381a6295e97db9fd88d89002d1dd18f9e67b437c02eb85b540fa34b68ca5141e9c2b573f316d5c71dbdac4ea2f5df5485d374518b4f14da4b05f0d3e7807fe7c5a2ab211b9ffb1d4161d5c57251e1cbdba04153d9f7c4a215c8e0beaf7cf666ee15dd02dbce699b9e4734eeb36a28e06b07a30031520ffc97bc9bd95ae625601cc502d93409d5ea7e0f7783384fc2deda00f384e2cb7090b2757b471460f49aaf49237fa36828b56b72229d7fa33ea2edd48c6a45686887609edb836c5026387f1332decae888a644e561444430f99d8cb68def329a8ff180b46a7475f375e31481b1dccf8ff2d4b595b00a34173e0382d7beee1e855ced825135868d2ea4028e31f8371a20e2fc0f1a14b1dbfc33dec10cd988ce808f485fd758f870798f85de9e23c3191be4854ce03922ea83bc5b8b601370f64a46c49e697a359eaac4cc05745378fedcc4b58a2691fe4bac87b73eb6208804b4f898d0861ba062a753af289998de5b7056f08d9ef29322036f30a50e741b9ca952da1ea86b5e46c82ed516178d9cbcc9a0000623bde7e3190cefad2e18a8f50f3cadb91e1175ccd4d4527a3bd2f69dbfa0909c9e14d2c1de53bd3efa7ab7d7d6c4ecd16a2d941a1a8458ddd0039342d4285a289d9556dc37560afb63d660e82c3a52854d2c7fb73e97baf9cd40766afd55fb13dae75bfe7ef1b452fd2407489edfacccf611ef06f80d262ede2fb6450fc09f6de4d4fee272bd71017cfa5a73b8a81fe2d292e9bb84edbc8985d1b54510b35b8030ce60003b9083328610a332beb0f5ce39cc3d3c3e407f94f8e038252817456c7713904c7cdfc96fce4a9d8a20d3d04d7d29d45b98a345f493b3cea1aacffafa5b1b976696979f8ac3577459e2df622b9269800e23dc19b77b47e24c9912e21c8325f5b7f1fd3765bf92e749fe07a5518adeb6b8aada7163feddcdccac0311b6214a8dc7a7519e902fcbbc5dbe7551870053d07e9b927c25639dfcef91971caa441bb8519497643e6b91e915fdb2e92ff922545c9b186d11ebb5ca5440e2fd645a0b3692e7d523a1c021c19a2e57509a47702aa0444a59ed6b218bbaa4626947e147541066a47dbfe7052507141af9266de209a25296280e2ec88034ecb5dd55f4fddd984f2ef4b6d72fd2b4ae2d87dd949c3a2797c45144a41823175436cd2b1cf8e53efbbeb5c2d5f583e9a8fade9afd54644e2907cb7ff1868143bcb9488ea3ca4b3075d8fcab764a311e1416789aaaebf81828c47b927cbbd3b3b4097a6c110817b40a5df5982323ec3fe401350ff6186fee4b0a521832b434efbd88c51c7661718ab03f281f2d5d7dc234fdc7d9f9e79f721011c2ff145d26c778e72f543b699a9e8441024242f6d7ed50b7a16d4cd85ed9443c1c384cab77f3a59e67274203f4bd9376de9048cb78ffc3b9efb831d48b930df8167149a7a563f03b85572996fafaa3087691ab8c3b0a64ac33e7d330b472cbbbf238285bb5a0073be2e55b8f93da2ed8e1d41e41541931d4e8a36c6d2366062252c422e224880c3186c7aa11bc376fb71f796598a3e3f5269b641eef43ef8dfc5a0adc4f83e096531d77f02a5f4bd9697f6663ba7ac14dda13f1d2a026acc3345ff99443c773f8c8f61de98d7ddf452b6fb2c3ef0369bcb2946d34bd4f106989580f0561697a882a5f1a4bcd2292f0b7f2b00904ae661086c30c43c4b5843dd74fd65145ef76f40210c361ec5c18361dc5d6fbd285085ed9f6f781f40160a22039d2e0ca74c5b16b9d25115402e11958c5676092418f7d18a4c0f839642152654cef244a8f5bc0d108189b780ccc67845e73e5f4553f878d37ad1a4563a84016f315df61b1035a19e85306b35c887afde09e4bff87b055a2ec99cb0a885db6eb48e4ae04e5dfce0bef66b830abd7fb024978bcd861ed1b5351d6fa4a5dcb47258812a9c472fb472b385a32c4bad38fa7ad4e2e2d6f719f359dcda19c7c371ce5ac19573aa672357957a4f99b2d9ae851c49eee3026b2fc1bd778cab1fe91de3dcaf8859de45de232a59a4894d96fa709aecb4ff91f18786a7cca344786168d247e498b6ee1e919bee2162042eac6511370838800f806934a596cf5db9d65104d124ab3b58e4ad321fe944a33ece3b1d8cfdefe371ac7c9791d953ba1c8f0edccfefc8bd833555288fcd16e0f4860698628b9f5331cbfbf37d84d0aaf7c61ed349ccd64cc80343aed67b9a9933a5acf772c9a1a65613da3bb6091c6a375e8128e511182f4d8e3b0c69ad23e4915dddcc20cd21b126bbd8e206414507fff9d796c6c87d0b18834c88b2ea16e38f4d31d6b5a67e5f8e00bb9928defd8eb5fdf0b45a8e6d15e6ec266368837e3e3ce80dff05143086bdde8a6b29345cc740680f65717b2cce037f7cd8056cb67f5d6676431870be5ec917021117c68124f9bddb713a26747f6cfbb989de24f63a00a15c608b5805507979bb7828ab96d42c0742b86a16947462364711a2a8f92a11ecbaec2855e6ec35b8b2ca52460c3cf85dc0541bc220cf098b4863a43a68b8f18b5c049a922a62ddf966d847194576c003536c0fe787856e8a7cc00af6ee1b094ad91638094db0f579d42e5c152f5778bbf27c364635cb0c9216b8e4879cf63c2d5f5aa56de54e10c2a2e71281896f26f37a23a02291a005765ba77966d5c78646146a35af69c6051b53d048877a62c59d2fa9c00fc2731fdc6af8d848a8f470cb9b4910568fa87a9f0800feb119387e827acdc7e0ab18304a8d1cd3a5da80b28b56de6366ea2ff9c06947bdcbefd1c6aa5e338c21fe0562b4f6d025e3f3a518d61e4ea8be2096dfa99290a84ed72b83a00f78a31c2b898b25ece0562111a6f494381f2c4c13d5f990ed4c9efb915d722de3159d95b6bfd2990b79bd5a419dc0cc622e4b07044cd6be0ccac067aa385fdbd3d93de4b151ff3935ea930e2369166a64aa44d45cb9cd5e61bcacf789df24969d208a07989b8162cb1b1dd7414f8f19892d0077846dbf610cc42fceb17e3d3f666020fbfd9b667e0fa50ac42fd294c85700865b7ce4e2a6c39eb65c8580205a6de2641e706005e3d742b3f9c7df66aff275c826b46f8f11d671fe87d4402ebac788f1e1a9c71d8988a450f77b7ff04a887dcba40149ebb919d2806c48c47c97634c8b5bcf101b8c182124cb68c2d480f267b8a78632c903fe64f79f1ff8864a0b468d815a5f1b3c7ef43ac035ed611368ad6d66d53802688718d85cebb6f48edef10fb091a7a96a08a72121586e129d3163518b17e71a63be4b8ee47aeef1e20756c9fef7939cc73f63ab699051abacdea5bb368cac6ae8efa061a608a320413ee0d4c0f1c8eeba764888c7c67989e822e14eb9a0cecd65d623f7ef902a292dc13c3602e6af10806652c7050036c562e2711cb53182d445352cd695ce87c3a5e57bd71599e589f08c45ed45f3126c0c9bccb3c3a3d42f5b9b4f6abecae5f04228c95535d7ff91a327e1265818a109e008607b2d66125594b74fc8cc120a79856df7b8ce3e97492eaa70cc3e956769a18eb94f9e92e42efdc4e025dcfd12748413bcbd331dbb7ddff19432338c8fffd8ae1ff99e03822225dc75b4a104447d7170ee292a9069f6e6f412c22856fde42ff2078b87bc6d2821799a534caacbb836f13bb8d703e1a9d1516b0f14d7d5f281414bcb79afdcb64be792434f49f5d918a4459af498f045c31acf54f62451de4f29c3531f3853b1a0c6c54fcfd7fbf98b0d19809818271e5768deda25adb642d5bf973bedb3432bb5742cfa0e75c8153eda846af67c3094b1f1856ec2f1013b2a66283a61a9e469733421a6fd14f2fbd426fe0066b916722a6c2c7329c3d761682b067b8929663bf5c198935887599aac8bba7622113759764a188bca583a4e919ad402d90044f5c4569b98cfc779ed0a6de5d49e1c6757f4af788275bf5edcf2ca018079175f0ce4f2511db5764ff266584d704f9bf3755c8c1c5f4f9195243057433131fd2b9423f8b7711e3b15cbc370b1950ff71a1a56cee2614f85e55eb61a1d532edb5f72f3a9ea92061c65fa8856cbce8546e692b01dd47bee0daf541acdacd6bf156f3f60bc9291a2bab60421e7c30c55b3cf5c4f4ea573ddae6600fb055628e1e7fd5fb8de84f2396704d458749bbe2feab8beaa20a37d0186258cc8f8f6bffb0422852ab7046a559b0b10eaffe365ab05ad125e7f729460967c3a98b015f7a5599e81c30c3d7a579ba14f823a50f2fc5ed94d08c3fa4fcc2fb8b295a1755a9dbfa9a2a93dc9e0269bc253a50f65141c6935d798f03d6dc861ab72ee411434c87b6d7225d8c63a0b8d6ee517319d7994b40857412a2c424a03eca7b1ca1c618ef059c58c062c1c85b0e210dc97c95b7e67564d90ea91bd1f4cf78046cf228dfb472986f66d1595788e80eac099feaf62217c24cc1d36b0ee0ad041b4a38acdc1ec40a5d0f63832f7c1cb1ee7927008d9551093f348a362afefdba6536776a5e9efe2d0c2e84e2a51579f3b345808f26b9d525c5b06481398c26525fc2587c00018c73344f35533cce0b4e34469f0aa1c7590d7816b59745f75dbc3c2e70d5dfb87efb1a71dbba278d2bee66dd54f323ff1bc51c7b2e727862d3b10f7fc2281ba2b6f4672ea3eb5734c093c51f743bc2160eeae28fa12a596b1ecd2a1e60d01411aa8c4cd87faac745d98ace928561f4fd76d166cba0f33f955da7c38a03f241eb90493092c2c36b09a5a62a407969bf0f3c5ac74332980deb6a2f96c13ddd135941d86efef8c2de490ec4eff38613ea858f06d4f5aede8773c3c8fa4817ca2f64932cd5d7585947f9c13914f848c19852a43fbe75b4c3d7e036b456067f353a4b2231c631e90e7a69bc0144ba954adfdb0ffe091d1f1c3e0c07550fbd50b492a1270ee9f109bcd2fa654653e263697a8a83c56f9035481130718cf0d9c9b181ea3fcdc3d9dcff787d049d181898acee9b69569a410d5c430a47a460f6eb37b380d0ccbe181e0870931c6c8ad20f10e517ae991cd44540aef16d2ca655d9ffcc53c2e86631a1095cfa154081ab2a3dc9e7ffcbf950d6bad1a9fead6386fdfc48249cc877d18a2ab38e77dfe30dd7bec95bf1902f831cdde6af1624d8979feb945b57830b718599d537ded9fc02b7817492b7b92b70e661af96e7819991144d50bca010487333ada4d37330e6b49d0f91ec7c8b2b5852dd7e0a78d47e19e3e109370dd94006dc664dc7f253067cf3fc22df515f2c76475129c979477f562cbcdeff0495e55214fa932be261c06f267f012b6c829512747bc53e6f9db049fe601d77a47e5d618c4c68a0188d06b83e1fbe57c9cefb6d4fe94561926fd6a93eb65620ab53d5be505ced03a2aad93357e8167fec08c36d5e3590ac2a39d7c65d9daf1713bc8a2363bba7b998af733d106b960feaab3f43306f3b97cee853822b39ae1fd67113e9653d360983e10d5377cc0b5c32ec48bed8c6f7ed7cb1c8e697444a6067acaad07b784b2dfbaf0dcb18f999208f1d31fd2c68e1443e0abd967a04df18ea65b34dd2343ee9cc61135fcaaff4e5b0fb2b47df31147602877d540c2a8bbf331553c3094b9ca9bb10d2ade70b13d47780434713cb8cfff8ac56f8dc8cf70f3b65b2719c467a996c380e0cdd34e3dad130e163c928d29212ba2369aeeda6fae41e5f7f137006861f4f977b4b49fb840befe8c2d1bcc0b02f88ea67ff473760e02d730a3f00c4aeae7d612719508ac40be31cdbb4a781e1c26ad3615d47475c5bc87512dc23f5516a03ac7d13b77a8af7fa9f089ff1ab47926dbdbe011660b29ec66febebaee9e1046d2feaaa11d83eec8923ce419de6903e7f0e8f47381e20a183eab74c4a6a582fbd48d94b4386141206e1d9ae3b2c01cc0ff42de72d06bcc7735cc50be0a78a0513cabd5c9431b2651ca41d96dab808bdc3a547a844f1ce13d53080ca5c2fad28249ba27c406df5898cbdb6710b53a38d3b7ccfc85a2f6eac4c190b3c52037e2dffe7dfb5a2041760725ce1d6a6616916f93dbf76bb98214fdd3e7c586f7c1f72bb1e7aa1a0956341d1fab7e51d1eef02ad0dbe658d52f7fb45a5fdb4164d5865ce9706d042b87fe1c925be4a5de05eb903fa213ff949965bf289e724eecece20bf5ce9c7ed3fd4760efa0396bcf651cf9f324cd9e33e924e78569b97de31123b9a2d2208f1f87a0df18f6f2abd18fc5409362c60bfb2df7582d930de24f1d5776def023951a7ebb52703e24376da89c2935a3c736fbee980999c474d5c05807c4cdf7405631746345df1651313074ffad7f3f4e12fa3154115631c410a7422b99f9b5108c86a703605b63bd25792b1963b3a6c23319e00d28dd9d91ee9cbd034096c8d36c2b72a7937322815f91cd174b9d1a67a19bdb74ce0bd40be2b4bd6070a81eee09ec30039fe705212d4329c71d4c9758b0482a7203f0a55e828e998e1c5d8bc30e904258e5375d5448ee06dfcfdcb1ba540807f0a3f986a3e0209cb8d5086a69a06cbfa5d416debbf5432cdc71e6b3e5947a241eb19c21b8a6fb06ae018a0db5b4e93cbed80fb535e23ace9168f336ab510fbffc36a472f1ef6426ef14759aeebdc51ac698322f1eec59f2d3cddd84882cce174c89341d7aa7abc7616da0bd3d10fc960e87018d049a55952eedc8c3f1e76c5e7fe5023523b09196d59f0b7da94e3b736fa0d6dbd7692c98548062b5e9ba3a73a1dc28eb20d862da61c032acd64df58ffd85763802c89f0267f37199d881f20ec3c2130aa815af393f777f61bb1bd57019d8235015b283025b33b12d1e2ea241afbbafc2a5cee611bc01b572f2c3ed307f4a0c03dad9875a9fff64ccc762907bac8e3446d999edcc52d1de4d9585c43280b616e55cdb6ef30665918b442977943e2f0d791fcca0ee1ef0df23ed29fe1e99953f3802cae03433288a750952e6c0e9df5aa273bdf298c76e9a4bbc327deac1830dcdc679f2a967e051e9923b9fbebbc003b647e187991c5bfa9944a87fee057005411e4e2d4fb6d27ecb28a75fb724606107ed8e0b115529412f04fd60ea6656f753b95b0b6f064791d4c68ac8f63cecc0797bf7d113c93a9e2872155bffa2e8e73d50dc4ec19fc36dd3a122ab20dfd81851037455bd26ee3017c3b876f9694c084c7040480b8c91219ab1e5c415452bd225d0120344bc44ea53f53f06edd6da7021ded6e26bf433e14ccc455815e702312ac11446e14218d85a64b0429f5d2598a05d1b0f36db545e4507c14f05e54feb32d08ab1ac4bc1be558eb16b25117275fb6e49f804cdb180bb0ede99e904f779c5ab95e4e88c49202a1dd085c0130dcd9052e0a4dfd52c7b505de892f24cc2c7983710c0ee5cb78a1a99bd2e0a4e508864bf04c10a383164182ed020012568d599af4fb66365ff65997a9c66dced2999f8ab52eb6dfafdda0d455fdc8a6bad47e31a1c1a4793753c907a00ded9ece1b8952b39feceeb4a5acd311cdcb37025686f5624a319e3dfb115f559b42a7093f1808b605ae3b60eb2c8dcfe31e2e11448804d56c6316fd214df95fdd5d2919fd0e384f03873e72b7f8f0699c60fc9ab8e562c2f8cd3f979e2f4e30033c9787b6093efa7816edc413ebad75a3b71fe08db902d245bdd17a764c67648d5411810987c20be12c31cba567c76e8833c8c6eeaf1e4c19e5cf002628ddee7f67a27a53aba37df4fa8d5606d556d0a1962e6d10937b4483f5045172e0854a5de7efd162a70f043ef4238eb762df9ae5cbff09c1ad96a32acf8edd2ba98e03381403f3f8628f9628903c5fe536e4612edd93ea7b0dc671a547b08d245f775ec691be8f3976db8af5bedd81abc13d8a075706027d6a77f3ac9c27b8632e56812f3576e102bd9124de0e39a371fb0ce2539e23a1ddb814007942798f56ee65060cfe52334bfe2dabb7fcde023359322c01174d66fb7626c8a128edc8b3bc548a3c5d7a35401bba74b7656d8473767dbc5d859b0debcb054ca8c56d2e76664271c2360249e15edb35352f9323c570161cd740376a8429012b3177975780ccfb13207403dbb361f1a33a5389181daeeb5cbf571832bd395306c96f3f4d94ecaada1970f52de7755ce91d8c45580608737a9bd9c41b329a6f754cb0c04a04d1c5e5b0a7a15cc62dbd8f2977b9c95bb6b8edf4d1f2e8f72fc908317191601eb8f3b36a6f5ccf1b6fe9a51d7aea55619466167b50c576c900c01df33f9b4c44cc38bc12ebb0502415a6a5ae55c8e9563f6172dd0a93c959e351644e8eba43a39d16665257e6586f81f762fc5b7900311a036606ff9266ed273625e419d059d20f2f17f6b28c1f99237e64c965a72f2f42d9534999190defee54419f34c15f168363e1fd0afb86ff9f542b347514318590ecf01c98073fc06996f2421f8324ea31a55f9084ffac8685cc41b175fd06b1a21b9ea5d09a2645e92b95e0deb4fa2d3831d91142f745dab013777ee637bb9d0e314f603eec559da0ad0e3161fc8e1a36c86e7c8d04224627b76b746ae3e6920ef53cd5d483c42f5549920c9a0c4fa34562033d46648ef35baf9521314ca1372fd3c6488111829272d48e6833ce367910aa2886e609ebbef6ff2751754c0d0f7e042a69a1b2cad9a83bc3229048edba41a266d3b4d48cfa9bf6c8d1909804c713ff57367ef32137cd64ecb18209d4432a82a706cfebf69f66d79277d86306d9f6ecb5d96549f9fd1b34557089c52204a83f02d7da3bb03f71f679e15e5caa21f7e8d53a5edf7c937462a5fa254c1202357b16c6265bc7d2a4b7afdfee153b0fb467479ddba8dcae59aa87b47ed8f64d9fb45300bd40a49b5e00e2a2cf42d296d205d085b493e744e2fca87110e8515c590e5fe6347b24066b9d14355a1c80813347dd3f724adb7687fbd15eed562a65c594fc615a363b1692bb5d3e034b892871ec78c189fe60bacd4f3482ae15c1969aba89df92c67c8bc336517ce8849f474c3e7ff5ee01c427155982eafca6378806d9133020657860f74a76ae937130d171a67ac19658819eeefb3893c914f9df3db6caac69681dcdd4c0c8bec1b7047cf05cb3f6bcdd0d0e6b32c934775f51af79d924cc87ad5ed044eca8c33b797c8f7de7ad83c7c87447d697f0164644941ae4873972ddaea9f46cd68b23f5232c07b64e45b2a49503e4da03c9ead6fc706cb8b58d8cdeecd692829bd016ea4cd9733bc831708b761ad9f9dbb8e157d4a9cdc5f8c7ad9a23810f0396ee2e4c268118394958f34f859d9baa8bb08fda4d1c0e4021faa08fb1f3f16bcc18e051826861e79bb2969c347804f885fd69e08bf9a2620cd74a16cffbb1d541f104fa2ef5248535e1b1ebe3db5a879e700bdfaf645378d83d165743f2f605e30f7fc97387b5ed7403c16ea68a317f7aa3aba19d1c3826876444b54a1f65c9f53a9c3539763b9120aa81f887e632a1259152c459776690e5522c008f369cfe5b96339652c0523ed104ff4db0b1ddf7479a0012d1f3fa4d0fd9e0f2e9466685fd91d413a80703a898b6a3cef2baea7483aafda3126b2e49ac8480f7c2bfe16cba8ac3c88213bfb6ebaa749c4ec1931e66498772040e00beebd85b545344cb558b5dc812a62c839f91a5bbac8d9a1ad4b3a7cd3e94c8f46d092d3aaa661e6b039fa463738e668f1f90438077e06de807f7f0e2accae6ba760aceec9bd760ff192c1c6be9b209ebfd2a2ea551e54a4ad4ce074526630cdbe0fad72b6a6198f2a8f19477b1e5338151c8f9f4aa2f6d7b0814c136ab78aeacc5ff7621f3cfb31d459b0c3d3d0adc9504a426945569ddcb5283070a74465f21fae08f6ccca055d3c20cbb333c9234691a86a92f8197ba62c32e7498bbf3a8f47b6242521d66e63a3f60295647465d1f24536b0f93042d01bc20576ecbefa0d6bec6f52beca45254c785fdcb7c1b2bf02cd30660771167f0828b78ac23b10bbcc6580c851a459664ee38de3a021eec9fc4b817947ea863a0f240a79ca1f1d9816204b82284715d82be82e569e679dd0fec269d560e508ace30d652c814dfd5daeff78bbe1ce2eb7a0fa0b7ace6a1ee61ba91d99e80129487254794e8a12a904cc967d8449e76fef21c1bdccf78a2079d7cca27a16271b384c1a2a9f850ad70ff64de9b804acd95e36cb7bbe1912810c05a1cd55729656866deabf244ae413149636f61a4e49e456de3725684fe50bcc9a7c51c6abef9dfc1e7efe29701b13d63151bd6ffd770170b087a9c3b81fb466b4000ff55c6bc90bda85f067dfcc6392d1c03e36822eb467c92418be064e098ee1b988a8c820050fa374a78b099ac9ff58a938cfcf9deb9f06a673189deb56a887401186428eb8c0bfdeed3b2665a667522a7280e6707b49a544754147fd950973f268456f492701385d3f325f5d7a02eb6c09a456f3446ee0d4feb5f139fbaef9ab23e7ee372976ecd4c70b136aeafc7df0f7c9416ee9f8cced4700285129efa843c26ad2aa52b8641db4e7172472a7d19069ed52aa34144257c96fb70dfce3cbf2e28e009a850e2207aa7819e0ba77a1fa8df79db0306b3568f24369cfaaa2e97f185b47eba240eb17485f9c3847c91a610028a309e9337290f16d86c7ce5d3a05db78bfde53129317d396d6e28ce3e32dcd488ffb91275f8fcb5a917699cdcf189353f7ff8dd4f3d68cfc2822299ee1249bd94eb2f8685619dda1dae2e85aaef92d9b369b20aeabb0a6ba658cc0eb683f10b3e7855f7199174c32e941be3646a9b951e11f10a2442edb229f949d3491cac5147a956f0ded7e0bdf45f80c273b7b6539eeac7072a073b1ba45587259d0b778fd8c8b9ce788d5a344fdfe2fe05bd7eb6f54708e86a9eb50e949e2f79dcf55dd0716716059365b7c3522136ec23dfd673deb33b28292727b1e56c73ad0a4158ca387ee344772b1374bb3545d9bdcf606c8ef29f6eae6694d9eca7802cc54bf06ab4dc0a2c384c9ecfc54a104eab7a8ba78d825085ab5195a7c4f2f50e6775139ec240472141f37d397b3bba3fc79c3fcf930d82515aa6ee3ccdb1ebf84fcc66278dbb62e3690605346fc18bba3c1012a0ddc3cb5047a1c12ceb57b3164629c87eccc2539052a8eefcca2a4d9101171202042ed11b002d440163da19968b1d48f0a3f53bf82cb4f15bf55a6b822c9ac6b53f9daad66087dff677ac908b79b0508cb52c630cf02f09d214f0ecf9b6ffa8da30e95a7c46a65a06cbc40ca04e1a3f92900d19b99707c3757457cd32c63ed8250003661655c7707eabec976c22f814e49fc3c338bfab122fe48eaed010abd23c3a072f61342deb43ef769644a6b092358cf2c8d98010f944ce449619ddc8848b07abbfb72b9112bd09ba69d60e889bf927efb79d79a1a9cdd1a6c7ceae990a6ec8c95a170263b116efb12e2ff54331d97e189c78cea8c77ff67fadd4d66ad523be725b42602d2938899738374d29a3b326e0de7bc4ab7307fd1d93a97a0953316a75b2d9bef5727958b5c000caca2bad8a6f10a9d631a83c02dd0bf5d9ff6df00aab20876425be406ae4998b1eaf3542bdb2f9ffdeb1906739af05d3bfea9037230dee8cdb3cd78126727c3fbcfb2d1a725036516662ab19787e04ce9642eaf61472c0564a8faeeec0853b381783470d837a6958b52c443bb2e56d871bcaea54a7ff69c5368c876acef160f75fde09317c25305b42aed0d2d35606a89376d000ce8286060a8b34206a611679def146017ce52cdc5c545e553d27b4d01bba4e18672f1c06b01f8a1f26993d806f2a37b9c4301450094b3cee38626a4667fad0f2bcaae82b495f5ef6d2216f32405ce4d233c33160f83acf6c593aef1becfabf8955f35bc7c170148bad3eaf659f47a689b13abbe2734b1f13a8e8a687d8acadfa9e8a609ec6037c9d273a45bff5eb9a9738d1d35ff1aab23832360de286326ccf1ca0f5c0777761da37f1f7f2ecc996956583b5c608dd810a8123f0646549646e311308f94b52808a6cde90ab045840af16fdd430ac5e18834b7687c562541889a13dd40f09e69f3715a6948f12b69f49ef8f70b7f20e7753d08a3c1f0c674c78b0e7477a650dfed80448cd7e2b7ddd1061badf63479d91c791d6e94a5db1a173e14257147ab5a83a033cc1da563e5b43685d4dd65079e1a84186147051b7be240775310f54f120ee8c9c83065705effebcd4debcc3f19c5a5b3239b32d4c849cf001c7a3144d0db570da0dcd5bbb9f172a34a2bad5e7025614c91f7189c07cab5379c6a64f51b1379345cfa26e46d5febe1c18f5ccd0488a883222d10b0661f29377d13d31dbc6b8115e897dc3ec4bcb2bdbf23a7c5bc3a49f951a18ecb411aad0f756a51cf7b5fd443780b91c20fc697747ed34f4f2c1dfa22fea7f0abd5979b5815c07dfa7fb8a44357cdc828ebfcb9f5484442bc79004b4366c2f368d9ec853e6723ee5e00bcb3978d8c7c3e5462bacb3b05847ef3659e3b2ea6d8528ede6d6574037729880e741096a35cb55eaeb7648da88348f62038225d417f9cfda860a6a2884262900b73a1153afb707930deffd57a5e41b30e710ab3a57bd6ea1a1c3ed2d3ab159e0ef6dc1af259f464ea6a2e320dabe61986a8c4ed9c3d5e57c4c649faae49eaee35c7bce2a4619f1a5ccae5067fc4626808513bcb33f037e650b89f483da9ca7b6d5e719d9f805cbf3fa9d0620a721e44f31577f5dd05c1379e66489b3f1eef1ba59c3d85094014865a40bfab4d5757d6736543af182f99be6c0b2993b1c5b9e36bb0818bb41048ecba87a7824e50fde7e7aa98ac387676e1f9b32f4b881884c56a5c2f15db182b2ce7cde1b0126d5c2c4ba142c37de5da796e487637d27c76f71768c8a7ba2567039c81be5614da9a0006ce2fb36a83894158323ecf6d077414ff96388debd6c966af084c265317488a47212f16ad30c84e9030dd0d4b96a7214aec838401b6cf7b12acda512a8c49993a6ae56c489519c9e75df2ea7a7f9b514f5da76137d8cba8580729fb0c0787de298dd0957662c9a3b251f3949371f94fa7d5559ecd7295bb6a702b3499912bbf0f0978e931386ba10f1622e389cc608b26dc5ea15e80cbf4840359553cf80d75a021a6454e1d6f4de2cf808d0a9b0643c8829e50ae06411e14b32b1f9decc3815b141bba57b3f5b93870762094ecbcd35710d5dc0e889878e5adcf982b55ecf9f2b38fc2a35738c1536ba906960256a7260d46a1c1992e7dbc070178d37a9a33c451d31bdf4aec3ca17983b8cf65b940fef126951c45757bed1bcff12057fec02786a6885facec7533a4a0d9c7c70d687ffe30bf69b3f63932c13ac0c188a0e9fe403356b9ee37c9c9bfb7a4d6012490faa084675309d88d9924f930efa1a2ba4ab58cee00f8609c0a1324c37b6ac73af3bd8191899fd25bd77942465e45f7facf3f103d7e045994331bd03cefed37ca04febec45618fbcd41b2aa9f76454edc668f2f110a5f89e043ba7531acb1109ba199a776b534e90b46c1532174212f9a27572a6b8d292b286033447e2b84b828509bcc2120649c81b7a16e2d4cf2f0135de58ed1b0c1371b97fb229b442be7b88898300621934a2edf45f28d461c0d798b1518ff745efcd1187db93f0039aa848d389b11bf014a3587004c93d1f31fb4eb430d10ffbcdf08893c99a5a1354c1d1a74cf3802a71fd2b00c65f3a062930421e2dceead7c11853ad89f6dac67a75e9b52a05e7e65ea48de37c3e5944a93230c7672edaa405527e2da8941f4e006eb428ac5e9be4632c3e070d5af1f194787edf439e95544aa664e0e3442675601187934575c9a50548525cdb20fcbfa5b66782994e764a78d437bbab440fd3806297b796f3666387b7cc91f30f2668ba3294286eac6f0c699d6b68edc174dd8a8d12c518995d63ccdb841222045f21045bb9468237ce26e82cd2392012c32df4d167ac4946affbae13e287dd59a6d3c6c90d754889b8fe5b2bb670e6f36f4bc53db3b9a1fb304f6082989cf0e8f91e4bef979cd8927e91c22d6b2fb9d095da8860c2231902868029a2b49d2a389dbe4877592338cfce7b70e2675da2a08df01cd2db6323dd018527d6c7760d6af379c3074a2e1953211f31f8501b5dd8258d6c9f0c012451f13462a0808c0321bdbd96f2392b06743bb33a0fca0cd3b19a27aa7ee54ccf11c0e8dc556a7b886601e5b6e296c4035da56753e5451171bd0b694e84cec9d0f4c7df546c895bdc2afe53ee483aab699edd6284d54497df84a50449913f25138c3cf2df90c916a49567f0bc7ab6880327e9d3a81b361e34ee3cc8483113f83ea768006ff067f67f98a8332509408ae1e7931678ab6b82cbba15d1fcf4a3534c47427262c5f94051698e6f863687b7bdf3aa25ef19c855abc058d1a54371c5d1dbbfff06a56336a9b5f8785af0711d14c62d0d8e3780765b3deba573142ab66a9d887d872fa664966d11ecd5d2b9573ba8975a84a4ea83465d28fad72e5a834cce3ae94d636206840476e0c2ea78a9db6f6fa0f048c5dc09487b4268c607808047fb52ca3faaea482c54a0b8ede106b19bd633a61798204622e711fe85eccc465136669c965f30d83ee23c812cc5e15db8701ba4d173c6de6b9666496588cbbf6047caf705c4ae2a86efe70a6049a52d7138243e53fc7f38ba94f03b1cd5771a9e04f2edb7316869f16d2338d0f5abe3342e78d0c8831c40180fe69a5232de8e6d2df46c67cbf519428d87308f33a4c5a787f791bf7c3af25f52d8b564d89e87404d2560269c989197d5837a569085d575777ba6e76b165f9af5a447e3cca12a16b19d035e01c9efc858e1190697ff5db0b8281d4ffa20084906ff365b4cec71534df7086033645fd2c6471b03b5c812f71e6b726f469393f50bb8bafde058e16fc54ca272aa08827da1ce277351dad5fdb48f8f34c979f7316018553abb0c5a34e5fc511813364c9d6332d6cc00c344d270723ba0920e55173b58c5a64fd2bf977069a0a63525a9f3381b7dd81292cee21c82728989a6d7d2ee2b1ff0c17c8ec403c0cf75e5adb7d04c443f7116c7f3260cb8a77884c3cc119509c3b1b34cbf692071fa781ed6e88db3db2d9c411744a23aa961460b0fa7cbc42f5fb10b5277078c39577ef08ec1840d149e37c5c22339f51514ab27189e53a73835cedb635eda2cef2c88916487928ec29dd1eb506e1bf4296a396d3d18ec6a79bad2ab7ffd52a1290213fa17d28664d778058bdfc97eb3fc3795fbc69a4058949f06457ebc9e721a0542ce072c1c3a05ca29dce2ad9f61d7e04fec8588c876b84555f33c54b27c64237cfbef4c7c00065654667f4fda33f25228cc1f3ca279254ce0ca57d3ab877590834dbfbb303cef80b384c516b3b75db7a77e775aa0c1be771b903052cf51290e92dd68480eb48ef1e1b5a79a2930485122c2c4e6ccd0029ddf744e3cec5eba12afaf54651e9f3131a1872c2294bd0abafba88a990bf9698f682377469429efcdae64dce0ca7bcec57e17565377c73e829da71da5280425403e45fff4ca29494cabfd00d5be1b7dd408adb5f97abac3b771fc2a1377fdb489578478d75dca8e1b821a5ea37aff651b1358f261c1ca91d336bf9702211300168a948807950c04612674b1459fd916c3ddb64da42fe736cf2a96ab7266481e52c84e3cffc648795929d7803046aec784e70c40ca0af58bd327c6be4a92e5f68020752bd580d8f5706f4e674cc7ef9257cc8a8d0481df275542359fc77273fbb4b0964f459bb4a26a36dba394e7a9ee4adc90873bfc1ae25fc0e3d64b1c3439b4dea543da3043484c4381e4db08db19e868e151288c3ac721806b7c66ae95f1787d3ccf33aa71cba1f52fa6b40a9d96ad3033eb562f7e66d734be9bee02a7bc8f6678ac7f2f03552db72e184c78d0c25b120c8ab0009d0c569f7ec2e6dc21bf2f2eec6a5bbb41ecb814e6f0c1058bdebed3598a8f035454523724d447d742286bf87249fe718623a98cfafce52331afc7c3aea3f788ecee60752e0886e83a8a5ecf4b647128117eac17f0d64478834732dd21c5850f76d61881852fa1615c251617a0f4d39ff702eede961fd063eb3b422514feb7b3952245b781da1649e80ee2ba10de216db2f5dfca2361b7d38af9e608afaea6c6140b65618f4c10cb6f8ec8df95d378307221e53f5882498102f7842908fb1e691746c89becf2c27c2f5e82cdebad59820c12062edf4df46cb1f2e7781b3352b99b8b4c1d7d3f3da3c0f6311134b10efc15f4d1013ce713ef32f3e9cee41993cb073491700eaf3a166902a6e2404597bb8e46e2d5d643b867ff208bf8e8411e4a646b3866d945bbda599bbdec69a8c2fa2dfc2ece96b247d8e24b1c21d240943d40ed271070006bde46321c5103cdca772209072bf32cc1f6de2ed371e9f4d4ca22e4e51409f81ffd015945a056dccd22258040c0ea35b1da822aaf47947d36e18bb9d7046ef0f65e4263bc30a7960c5c28af5ba8108490ef076542f3126b6450e6b7ad35485ac6232eb5f596475aab6dd3a3b2da31c52cd51489062cf340bf6bcb2fb2726b87bb32264298d48b28f088be3faa6c3bc1766d1d871cfc4409f9db832c04fb982ce018aa5808beedd287c11fdc1de916c33c658e31c3002cbc041efb86c8ab67c448789a267b17a8053e76033a78c3b3255494ba5bcf867e6f7b3bd8cc0fccfcc61883627566ca109173d940e7e281a3146941b3ba8df95efd43c6929147e6ca192a98e677ff842f55841f275767191e93488e0985a9d311c72b289be877d2167177c2a1d0e34c062ee22694ca37c31c51299489ad54306af33db4260377ec4d0a362ec329f724ad0abfe4510237358f1a185151cff3c38187b651bd123222b43c868d2635094ff8aeb7ec7c3994fb888f2b331076667497dcc6612c142a1bcdf0d319eacc1d8129a49a726e3f14ab10717f702da773d203e2a22ceb8ed3e78712196d964a1941928fd45becb2cc27d55ca5a9a10fe2e8a7f2b4653c4cb4386812e44c0c1f47af7ef3e3f74bd9b69d46fcacaee2200dc32940c331df7300adb99712ac199782e4b07d9dd7021e5c810fd90950ed578df35c36ff1c772a5abdbcc73b1ad8a711b568b60ea2e31c1fb5a9bac51c60cb79776855030e6fa13fa31b58080a34be3e523ee882065ef4496a9cfe8147c5cb5fa7bc5d283c78582a25c1e5128883d51f86d49b88b884292216803173464aaafa0859722aaf7e4ffab6864bd731d38b14722bb9ee728c1cd1bba8876fd14c114ccc50927cbf560923c28c48925631884d6bcb3b2338c42fd61cb5b1f0d445e6cee35b9fcdd1adf7b83a7b05798a0135a99b01412e1114f8fae37d1b2c1c99918d14539b8beb68b0241f12e46ce105748f9d340fb1b88be15b8aaf7571ef01577c680dec78b933bde080588c0d25aa909e3d860e01978c043b84ea6ad6e1ea4b2864f06cac2df2ccc790c2765b1d0fc28356eee550df8885571de1becbeb79fdb95da6e09966e1f521d1dc92957aca5eca5d0ea6d309c8e75bc236f4f44cc8a018ad5d352e9680cdeada5fb79675d9f1db61d1da9b62f755fe60c83f1cc1da4cb9a988200bfbfdeeb793503a2b1e335b676f1c005b16eae60b63f9cf3de4ac30b1c0724fa0182a471c5ca296bd556a2ffed85305495d530ecc561cbb89f3e5f373df9d5c65fa0b8d0a042a63dd6ed2c7a133b9b8a40a65339ff1162a3b4bb7b6070842c841a68e3d385706d2db9201e65a0662c24f5347ebbc5e37b62b7ab6f71683f2ae1199a77d062cfc9408e50851ee2a7dc01ebf706cf31656170b6361e857ba6d0c2aed3f54b038355493c9b5b7f55675a0edf2f98bb3dd5529e498fb17af1f11008d709df66a520e2d7d07464e0b3a737e1790c8764ee14c2f5039ff1d8f0ab0fb75656af937840cd669e49541249c459e4ce73f4702cc4583fe160ce4413d624ebc766fb35b83df9c67ffb6d240aef0c67a27e5b890bcf74c75e217e647b713f99af11bf4d57568211aa5e3c9a6d604833b34bd443e80067774fc71db7bf7f51ee6d6f278f536b8dea3058acc6d1540f8c4f7f320838f6baf526e9ca34c6a814e8de2cc12ffc0dcfa882ea6bd57524e55892d83353d75903b9fb7d54029e6c366dd533db885ff8e57e7ddd7195a626d1c7ba6bdf835d66cbcc3c356780dc148ce21dac9024f06e964346e5f7fc714ca9739c48ece0293def3559b0a814a512bca488a164145cf68afdfee4ffb74d082ea1d33c48c125aa4a253eaee36945408328a8ec2f8b22254769f92e2b3efab0b928ef45feec38b2af99a5d617acd532c9b4383defa38bb2b08be4d0243cd16a1a3957df0d5437a162148e8e09923f9d6e400156c9ffde3eeba8408dcbe1dfc7b3302100e7bd971e70f59d3cf62e536098b61505ea0ac56b1f560b23214eaba1cda9cc832af36b5e8f39b24b70b3504cf21a0780ce71bbbac4fcb139763e9760c1223115b7365ad1ce6d00dda0c194ca573d39a49d7afeae8d32b107d9dc7715a138bf02901f3b318e76c567b042152ad7bdbc7a8d8d24b50ca0b0b4837596ea63e49fda1d2c8515d6975c342e64d3a9e135b4247d75576259422ef9d69ce7edfefadf574aeea5d3ac605b27426ea48cbacd3ee3e0e839e3a8d37a7afb7d3fab3520efb702296111cb3eff5ad1ba0eba1b3fb01b946e475bb3ec85f6c3b8ecc5b3bad715736bb773777d6f7953a3cbaa102ec3e61442e6ce885fbe8a3cafee007f801c8eaa70025b8301c7fa5c0fe79a8414eebd112379b5ff82bab229333e263275fdece73057fc8dda1eeed7e91d961c90698044b1f005389bd6024b8b9d831159a8adf6cb1a41b486366181462c0a46db221fed81ef345c290bb1d3c26f45df3a08101fbde6cd4f1d31d60ac019cabb3956a70faa4203b3b48488ff98744acca0f6f2d5a162a219baa9ea00edb8808cba302c7cff945a7c56b727d0e785691051da5c6f94a1ddbc93a6729f8415b26adb5d793e4df33e291c60c67f74ff3eec47ca6c4cb5fe35a15cb3305327297b17eaa751eb09cf4e624447e2dcfb50eb099b746c05759d73cf173d7c5ecb668a442e6e93e726e20f673b4b51a25216d13a6e5685b96751433151bc963b0b27f9639c9e9f6c2a945cd238b8326cab8ac986cc301434b774bf1cfdbacffd3dbda50168456c38b5e9a5ef66e2207fa4515c5586c62b4e664359349da4b40de09ab961a1d5d8abad90beee9b312e581b8a0b45d612e7a2ba156982ce88a5c5d2b0f732b075b487850152e4df8b22f23ddba5181f27a1962be8ce25acb4692f33d02df8f1dd0c9362e27b43cc3ea9869860d1a5cb21b36b37fd7d603e1baccf3473d70b42a6aeea0d4bc5ccc7f2c1811c2e9394af8a886b58d1574f0c9a047d773415ee98fedd094f482f6d622fdfeb44798b657975cd7467092549a2cf73a8ac00e41a40bed4d079550342ea40f203c30c3ed837afb29868c94a0949a9820b04be2d66decb2caa8a957ca79e9eeb279b447cc637430f715e4178ecd3c86caa616d80028bd433a91eb19fc5f022cf6fbd54772d6ae398e35c380e9452dd10fd1e53c726fd6542113ab8b3e72655196516e2e0d356be6f7528bcc3dcb222a9c8bef3d01660faeef42f33bc9f0ce38a916c59154d015d8b84daabace329e50ff532aec3fa2ef0c31199916a7dd7183a3430996e746c92bf6719a723399de5139ccfa97ce6b63b4a48e8744d30967b25c4d5520fad5f9219357ae793493be6d1b8be3a97f7e4189c0be7d4f37ac4739f2b8727d284ef440580f73c4704a4d4a7d0a4ceb0e9eecc060ade9317748423cbbba57641e3890856aa1921e2bcf99ab021298101ec635563cc3ec7d57ee5eb9dca082c4a10d24e9d6da303083f195b31e78b74d2a77aae78c89758207ac17242385329f6adfb5c2627b36a2d58f005cd14a15a0ddb74cc8c2cc3d4695a6a14695a3bcda166dfde6ee0aca2640f796fe52979ab86b8a12d4b073f2ad3c10a7289e077ee3842c409853608a178a88cf159b3d1aa5216ccad02b9b3e5a9036c17344c81193e3af91c155df12f49d1273a12c3113b931b9721c140fcf631726d49a5c3a62da8d37747915993f7c30e64fa21037528335053a23c17c9213faacf5160da5e97c40550159bd216c495566f46556ec15589c66a6ad2e28a36c73fd47d74e949574434c4407d3fe7815a779960304611c12a2167e16c07fa71899010d16f4279add25eccdcc9a4d095ce02f4bce13fbd48b658080168ae2c39a8caca4e834d4fc620bd8cec9350be26d1e6358d85967429da801c4daa191fa28b7be990b314460005e5e50cd383189c58c5429b34499d775c2b5a7700f9bb095a053208320749b5efc3dec7c459d095776221a358740e0ecaee1f6c7e2681329c7abd23ad7df2e7a57c5f4acd5e70677ea50af7dcf768925efc3b3a8c34477be9df2af8e0ce1625faed8de0df3d24e2136199774f8502ef7e1ebb6f917c8778dbb562a66578cce6ef8144aa10d03eeb71b24677889b60a4222bd752e47ac137b802596debcbad50da05306ad9789df3849a98654112541840aaf27503c6d9a96090c0762193088ff3a24bc811c7aaae4769f57c9668fb228e08aaef788fa79d49d8e797f1d555c73e1473682bfe95b257c2889294f99a4e7d208ec4ecaa328f0f0cc09182effc9b3fd0af983d2c89ef7433d797809519ae415ff337cfe9f386971094bb658c7fc3765c56fc0accfbdee4aef7e63a7e2dc43459862b820525f886a63f3f7adcad6571c7ca0909fe5879854fa85bed326425a748d0fd8cf198f41f71466cf066965e5ce83e6ee942571445e809feb0431b70f42670b0f2a619618f75df62a6bf4529c50907f10edf9c0eaf56fb6b209b6edbeae5d204a7aa2dddbd866ac213a45e0e29185dde1974fe8a9fe63bf01cdd2b06181e1b79fbb7f34c692c87aaa40fc2b63775ce112ebe288fb38a72664cea8bca30b3e19e1f4df3c8dfd2eec4edf48b2ea1a6f794525991de0ba20e60c65ffe9745b929c03832ad506856b480372d10ec92ca21b2779ad8b79ef3b85e810e28c79b3cea1d34932e48e2bad1220f5e9591ba6fa11bf81f271fb64686877fd948a7a8971a2de6b9e6733cebb046cb3639a302f7ecaaf6738ca3b86ee46261d6fd0151114defcbbd7dad3fb4128566a8ec5f4471d82572e019dca73e2e4196cf9a29aa2a9aee74c23d47103ef76a16bb36dd6b3c4a7f160f9d160329cb6b04efd2a90ea06c6e4673bfa05b097e84f48ccacbf9a6a4cb94a472555aad730939fcd9bdb9a4170202036f13156b62ad2a220a59e44fc950416f0234e576655c78b8413ff0ebd9d2d3e2da4f7200d796b2a42a5bd079cb6a2181e486fab68065a09293fa8f22583437cd48a53339af3b2d91a37de4ba0133b5a7b31b983d27f80b39b0e33a2bd247722cb7ad45a7c1f21c9b07b3aee82ae8db98ae832bcfe106097688c25474039bbe061c89c34ed9ea6298e024073772c5f04c0c3d68b502c0938e4b68416d138ff3ed0cc563366f4332829b80fced0a83899e07d935ded5544d2cfa1ba299c1d3db6f60b1fe324bfb63257de823b27aff2c9431c4c1497d82aa3c03e0393a1a31c90bf2517841a15205fad720e3d5be7511fdf059a372819534d94500250f3e8976cdd52c0bad4f122a01f0781ecc9612dc457804bc68868ed76666b43fbb96278705afb49ee9c4b41ce733172ba006df8fc8de710ece999db66dc6809a3305de6bc46109785555d3204d0a54485da6ac452e608246a5d94a90ab13e4001cbd3b6c29e9de2e99802fca66f26bac2e9ae92bfcba8ca782930c16cd1392c31b56ab08d7b16afc2481cc168f3d4a7a5bb17845aa7517ab08a304a835bcab9090cd6c811f3da22831cb2c5f562f6900919e7670f8da8cfb07891a9bb9f44e88933634dea2f2f10e4704730c0c0b178b194c862144d2e5ed1695235552e7f0015a1680c03694c8cf2c082e7e48a9d64b5846f51995c6452f2e28ff53cb1dbbb614de3577dc7973a48d15b3d278cfbecbdff2a29a4f3727d69ed565396c452fa09f09b1ec7ace5f0e7c3c9ea6f0cbe6627fabb895c574905ba16924aafb3b7216a96c15a7d26b783567bb8285e9fde01dd2f56311d5b209907d8e57ff48355fcc973a51bd6c0b425ec9791616bf7b749293a8a5f5ecc3276f5f264b230ea30ee8d422603712f5a2bb36b38e47ed8d4d3a512d69eb20e5dbfd9dd45c2be1109f9b6f9230e4c2c94418e2287f8b773dcb0c4c7d8108bead8f03a6ab686de2f3c18adc1c2051a596ea4660dd6c41f509e5a8807c4a4bbde3cc4e2d7219bcc958c44b6bb1709c09bd93cc68df7f6c8d35d48c31bdf2fdfb25ca02b4b4a40e951e9faef42499ce351e2d31e0ea70c49599d90baefae1a17093541e267cb3868c185d13bd71fdf8d4cd1c3108ee264aad5e676733b68e42a55842afc5c30399662476c916fb3332c89f209553b680eba3c73c2d665ea4576f00c838d173a06a2eaf0d3acf719face1c2c87c6a0f75f3551e03979015ee1a4eabcf3e32317d45f521371033af36bc47b9ead8fb7b96cdf903663a7ca0b1ccd27a6b9f9009c6550d511fbca008a21745a96948b2c8804bcce0fa8dbd6556fc1cb13aa20891a4af07dbadf5f4d378498dfe2436879e52a1f8e3e661d6afba8af649725bcc99921319a9cd36f9deb024d8b01720f9b002429f57ac1a47c601d6e30feebe2fe3f2d085c53406b1d3b7faf5ad4c632b32b23cf3518d5bf13c9533211086ac482e11f99386ca977b9222920b31d00939fc86cb9146cb484a5644fb10a1d2245dd03224cf58e03ee4577b142f415e3ad0963818ee5e0da99658fa3f2774b585bb2793690331ef005209a585f76cf29d472f4860296c95317f42e578fc41da38c2225036b77bca7eb5adde226068875e6b9588d77d486569275b12d7cd5cbd39b99257bfe83a5c735040665f00adbbe30a73d3a4f1df2bd94480a9b271e803906fb31804724c6faea3bf0d74dc616501a0383921702d7b18cdd69955202db7ed0aebca675a9bc1851d024d654fd65699ea45afab6aed3439167b78af080059179f81bad8e2676beef4ec6998c2e6b22d9eca54f0d5fe21db1d4d726a00d0c02e48f7894f87b317314fe1d31c0ff254f46a098bfc20cd50352dca756c2561056a1f4f78dc7a0e7fe29b315beeaaac5bcceef5a0c4bc5f3a1e853edf044462d07ecc5bbd5aa0809dc70d1124d41829951640c59914b70fc257300ab3c00eec336c7e97be33dc07ca20f2b89da4899e3b6b50738d016660b68dffcd1d14d9624fc27edb6088f4564830bbd25e4cf880074821f4a3cd57c32b354d648d61555658086db16fbfee32c070105916b60f1ee9221ca03a7d0bae513ff144c462021970aaca7498ee10ef0c78a8afb5fbc581037f77c02118fa61e269a35cc3d4736d38912212aacf8f60017e54109d39290a2aeddb3c10fa08fa5092a118f7bd45a05af1a2babdbcbe227ec793d6d59b972e258d30b32b12b80c7cdc515c7afa6bd3140ab7da09a27043fdfcadea714393ca28a6e2738bfe6b2e88ca2b6f2053ae2d5b639956eb48f540374b17c0f96389ddf3188f9bfb0d9f2570aa38e76dac98988120e455109d3fd142f0f67cf09e10ac2eb7d7081a945ba91ea8e2be280733648a53f1d2e8da6375ee540c0c4d669fd40869704c763aac4ac63accfd8422033552de586059eff753bb7a4a59a48405105c881d08053079f8603eeffc8ac3a089f6a386e10640e0921ec147cb8dc513f65a0ca851ee44a6e61bb34ee14e8a0d8528bccb9550637f9baf3344dec440ee03aebba6da2926653052698e84a34a9bb2ad706124a547c9d4f22c32cf95a38e708e0e60c9c6a853af580f72d16ebad08c7711c66daf0d4e0ac147c6ed4448dbd6355c36e7cdd2b76282cc2008af20dfe53212df4542e941da6b69260e1ec688ce2b76e28447873fa2e5de92762d103ca30d57883535405f5d4586b011548f9cbdc5923fc4d8959113a059ec74bdd1a9d451824739b7546cd30c5029298a59bc80755c3df423899bd05c5a5407894d48ff88da48fd4e742a9cd099d24b75ea892e1eaedf94b5086da1f896c9ad67b29af23484c307588fef7947de009c024a606ab4463a8ff3195db013d3d2cd655526b8d548847ffa28087c48095e73db3291905e9acbb8d462c652cdb3a97dff0c25525c3dc03b0e468e2e5b59d9fd00996b85efa1bce1716b4ee6ebe4355aa79059e64ece4edb7190a0560ed8ef5c65193b7e90e5c7333aa1ae4eca012dbdc530c92512a8a2917fe90c0493d889dae899a15b9e20201ab06eea012882cc1f81def16ad6005445b76149617c0e2b7bb7347089bc20538d5514e2d04172f043454e626e9c47b06af2094ddecc22e6bbb126be54c51f2d58b5cb3b0f1b58f9455478e12c965e4585dff05b0232816f034bc479b342cbf75cba931262f5e97fdfe32412c899ab1d8c28853d10132f25fde8cae27b30492bca43053db28f3ef30675092271f802a069769fc2d699a438519fc0f49452b36cd3c33a3365053284d92d3089c4ae324e87cf1e205f6ba7531f791a382e833a5ee5c47bcc054ddaeb4845b5d4cfa8cbf285458a3e6692ba9e06a70320fe8aee1bbde6c14e9a879413f12066dafa2fb2b3651829f5a926ed054c442a17d3016559d0c816c5d7cb8ecd6bd0eecbf04b6edc7423d17a1cdf07cfcd633c61582373dbc97bbe2d95922b90276ee4d9c1ae1ff2c17b4c994c68c681f718bbb4b3d45b53fd8432e0d346cf5ed5e7ce49bc6b9f9249e3ecf0a92fd13dae9947e3dcd35df2649dc178c8eb277f82c12e7035b04cc0346b2105d20ebe40826b07e5ec54a0307851296fc4ec299d86d7062da6160b841a8d1401035fd64f0c16f52a3aed7327a6fae7e4b557e13229f5d566841074d3c7edd34c5a0daba2e3452173baeb106848e2b1b302e642a6dfbc6b15408897a2778a4a01b9979edc1ea0df5be32fe3112c9b145cde326832de9e778ffddfa7ccf7efd9aba24587a357b25bb7c0046e19f48ebf1f2d26f1db8dbfdcab9b7bd4371f12ac54afc7c274b8f4e89ec1c7e77b6e2a1749d8a9dead058f52dfed68f9cbfc1147813977e22133ffd964374d7c6ca7e1f821d27a79de6e65398b440cc0d02148e25cc211f9afeab9383096fa5cd787be2b2110f4c775c3cff81619055ecd6a8bd146f1cd9a3cd8fe81be457d09d19a1f3f12fb7327438945f5c79d16ca917d04e114e57b7f4dbd450b85891ec40c008d9eb9c3067a84dc0ececcbd7d8d7defab6d0623bad62cfdfe71f4938c56ba1a73d183887c0d48c8932239cfc975f0a08b812ef5c70a18d31303f9379bc5650de61a1fc64dfdb4731460692425709efe54facb1b683425b2e08adabcd33cfdfb18e640b136e7ee0c8cd6d807288b1de039ac1ae196506507a2ab9f0310262cb17702490cc7e80fc14c3ce142e1f29a6b67f912a292ec7a9dbcc5ebd4fde5fd2cdac3072cf2b222e9985a66af91531961fbfca12c91e99af425fad2d4adaa87391f898bd11da45e64459c29bd44a5b442052afdc632e173be16459603372836736b866265444cf2660721ac93d1e43c85c9eb295d3becb5dd3399ee5b0379198a99e0d4b5194afe5ba095fcce84923f645fe13c28690c303a62e7b01ab29f973c069c4c04137a6ce5928cd62331b5399d40c1a2439361111daa5d2e602b01713ee5e8ac1a96027ba409a8829d6a8552e3386c67c9e899636ecd479ee0073de8c47fc24eb9070730b97b5e1fe5afee1279a36ad7f822a646e7029941c94b966caec1df2218678c44f7ef82ac7371634a8a544abdac9f96988a21d8839f8dead8567a87f6823940e06effae824e38d894b1a4149b6e7b3f70b2353d072d5fb7d59716be34ce451e4d01ac51fa50f5799bc83919a9972a4e6f88ade87d03a810ee5d06f942280b7b74b89f7a4c93b674dab7175e5b699087b6ca7783361c6c2512034249513761eae53a8b67da8b3894e7861412688d0487bb540a0a4d40d2d0fb0d1a4e91754687919b902c0e9f7864d8f1c8b50ce325160595bb3d19496e35ed2071a1f3a661928ea4b0782a627f65058dc42acc3ef9f078d34f9e00c3bb0255fc91ea20d42fabee38d5c370859e9a3779d2902205c089527ed0a16534dfd35405744332a0a4297f9f7bef8be47eb1c7f7efeca1c79dcf91103a05929841eaf46db86d8e6a721cf924968c39de625047e46be44974d79ebb1e34e126dce25a459d7cd9ed2181960105d8fdee59293de01db40e4cd66653ef7fb0f8fcf8171afa8a9adf0a16c7b19445f6ae9ca1ea62c78b15e6bfc838abe63714910cca4cae222d11fe6e64f090d8179118fddf707a7befacb6393959f3d298a1cc10cd0ca0c56ec91d3410b23ccd8d0c21f17d63ef88b6c8cd18ec5e434b41c30e1a9d0629846e9487739def6bfe1c4ae1d94a852a40f9fa12563f465fa551c233ad0424d553033c8159ba17f3dc316ffa72ac02b82f1e3e8562325359a33cb68784bc1c80c26608b5775a745ddd3d653435cff068fdbd9a0f7bcb16151eb877584aedd0e0a8221d407c059143c9f6f7d19994dec206141d4efd598997a4e42cf7ce00ac461f9bb5c16e254be3078875046190a55e352f4bbf7706b1620e0986a4fab7b89c8a9b0dadecfcee0b066f07f3ee68cd59bc5e95d8795031075536aacc560d5f9726498bb17266f47f6d7f7ff60b77fb3ba451abf7027b58ab6371eeafda59ed03fff4421746ece67feda1c9e5627f719282cbab2366b49ab0e9c45d4a91e44a3e5a9c42b37bfe51524ad15fbbb7c7f2a805b6f568d654355ed8ef569fa7e5f91f7140f77d3809ad5d277455aa17222a47c1fdbaff2199f363c434c708a7e357c12350fdf85dec99f51e7df1676d7eee1b79876d5b0cb17fcbff2171391f9b698493ad563dce0860d746389fe0aa31f4ae5141c0278cb9deb7bd3db8fa6d4b6899838b68162a0fe4a30bb2c83943ba955dec0d50f71b5aac6b8612c7b31f6ce0a220825584a04580849c671b252fa83f6f605883aa2d44f44f94790c43c3c72c06f323b9a715f80d27f78f9475b71a781bedf1808a804ea35ea4c1e0656e0553af30c6569eec307e5a1cc520c97411e1ef54213dced12f9e8ed704a1a080234e442a1fc797045e89a6958697e72550b20e79866613f5b77f3a92df3a0c934b4a5456c2090815e75ad26bc6c8ef1775d22562b011b9cfe257121574b2212b92e74aebe5770ee042978cfd6ef080a8a7510f67f5350f79f9a920d5370b19c9897d25794aa7cf030fad0193efb9f0968adfa19dc3dc277829e6d67634ca7935d9637f411e81468f5a67d1f824f8540037b4eff04077ba4dbf434de119a324c1aac907ceba568acfa34e91d6c36e57921ae6a9679cb8fb2df3735b1d89af1fe7fe2e4c45d3d2d44b3a9c6177ae34e35534e4db468b3454e772b07ff5d37c16de9d3d990ce9930436fba739e8cf3278227ddc2414f20cfb9f4c9545ea4f98bc775573e68f11975f5560cd3e256e04d298e01a3b97bfb6be857d4c23270e221a2c5cb8af9861239e22e328fa064fd30e849cc934285a18d29a4398d8505ac60d1e9d49fe7be204c86fb7cd57ef497ee27ae8af32e338b1b125cad1b92f85412c908e3661e4190da6aaa19e13f0b136b81ca07129742427153a6a74ba940e798cdc3fba8e02bef896d68b295038d22355932dd26de930e66d411f901e98368318d1771423a002e70ae9478e896b56601f1da71d0c82a71bf2db5252bb8aa12e4b356844e4b2f66851cfd95098ce0b2d01d5805455886aad3b5a8246925d106785e8b9dc0c4c4e623e7ddde484f512124af4df2c2d3a5a15c8fd52785ee4a02c39a333587c5252c5ac66217a5060c3b2e5895e9c8519c52ad66fa5639429b82e66174d57ccf4bea3c2abf811843ad9669bcdf34af0e51426a5d2e21cac44426b2a5b899463f3f243d0db4680c586fd955dd327fa10dc25f34f17945366f44b3da2fa8047d0603c03f938015fc7facde5aea9d74df6ca4ffde48f4c5769a11af2ef989127a7c15276e87ec9b7ec067bc180f8754cd5a34e0923f19a271f871327d445b873de0616402c51b720bf8c1e1494c389a4378c926f713e132943d1d5b9e1a849c23dfe03953b30fa864c1efc6b3fc8855f5b82a5418094281f250979e7e9635d250762f95e690eeac39fd1dfd477dfa27543e2e2be821f012ea2381a11ca507530d6392b5239ce80a61f4a6881272adcce0eddcb0d7a1735694321d824eff792a5e9aa6a39aaf91084ca9c82a2a5b83b02c4ea8bcb7d769828122c01bedb0522a34d6fd7eb5a8ae46dcc4b15b0b85e7e9bfdbb947ac9bb53bcb0248270d869dd083c78321a15a5945c4b6771bec2d5d57d1403fe51f30f0d75a36f8a82899687e56f0297669b5ca0027430774ea54a002f1a89df41f0a478e7b740d0b214231e8582613aae5dbaa2b83a90bfe3314be4ec4782031938d29c4ab1d248a86756c12f5785cb757d0972639aa444ea524223ddf8dfe070df6b121469c0967f7e581cec2aa9041627c8ae1219575dc4a6b11263cb9154d3ab365e281bfbd303e6ab88b5c6ece3baa5b7c53ce93672e028c6036e0ad4856ff84fb31f551307636cb9d8fb8bf8926eb7932fe35ccfc3f546af70a0aaccbd4929248936c2496ae9a60c6fd8882a3034153ad2f708fa8ce5db4a3e66d62a4dd1d037399f262d124bfb0e14a835c84c177c2296a2d3086624d715baca5501558a3c1ee784210e773b85989027215ed2f6c9ff3eec295aa00aa03001ba78b877d1dbdf3221ae77b1a3c918d0f197e0d5b11e6c86223d3ea51f034bc97b9ca7282762083eff82a61ab1003fedf1c4fe77053642f34b5cffd199553ea6ada5eff0ab63771a0d7206ac2fb67ba7ffed114093cff699533cc7abc32f80912f3c072bae060ab51b722a5cdb7db6997dcfe6a9689eec7c6bfda04260259e34dac70d21541401b0673b217616b3516df54cf914453b3075b67a6ac55544131eb2ddab966b31c10b883f160ad7a0bfa4cf0a3e2470973afc9fb939999be142291bda7dc3a8e88ed898319c4cc649684879c7b2593fd27c2b310257b6b5caa41cae94b5b96d97c7e41060abc81476a6237f2a67c0ddd89fd1792564125edb5225e029914c966f818eeb3fc0e7d9cf55e7ab10114edc71dd9ba303a104562001bac4dc65a05dafa4ab11754db27293121be630880d75cc54e289513d3a450b8f5c572a5c92b88cc29a89502bf311b6be6e5da0246eec81e0947a6016cc1a79e1a411af58067ce1c56ae1ac20b260aa8498fde6e0337773910c6abaf079986a81a1f7619e8dafe3bb98428b614cc4d0d8569f534b33a342d5d753cf4b88b09b88851f5cc93f8b0deb2285c0ed42d78ab22ec2cd8c23c976eeaba7f8ad0c3c41531f83a55b0688ffdcbc1594836b220aa9b23be4466328a75eaf16c492cc451a28379848fa483eae878b41f3562e72dc4f85e7be558a381582ae2b34776f8e7cfdf2c2e1198589b649b5a2b5c16fba8e13d859302c8589a5a12773b5d06a67c43e1bdeb7f5b069b1f527e1b7dc18226e3fd97de822c5c08c323a315449fee379d01680dacf46b27808c545e0e71f5dd74d11ab5f00ea77b2384bb37954053a5d6bc89d9767d18d1770e17a6c1fbb06423439f7abf2ebc250477fe1d63c6668458eda338403df423e4b41f1b15ac7aa020d1e70927ea6689171bf7a0be39d8ac3aac7fec74fecb95096ce2b8fcdf7a813be9485b6edfbaa13f0801af7f31b170955bf755ffa0799bea60bc9117683a98657efdd28987a87b8b95ec445bb283fbbda00361dad1c6f2647541e1d4415a0a4b05fe6caa260cfd4f64b7b0694ef624c43e093951449b77c526ea084100e051d4eef3b4023bfaf158a4c47f5dab47c4a2122c6f867391275dfb1b8bd0aeb143642b4c3229750fce9b9dc67713aa5526319995fca07a71c0fd90726ad250ce0e3934aaaf4e7b682a283ff246c98c6e949436eb5c63a432d299d32ddd2e5a38bdadb760a1f816f6a1a418912f25a157ede2c329920be0d045c1d87c164c1e88f75fb10b24652581026caea3fa9ebb7936c59d110a7edcf49bc6b2dbdf849bc1f1494c376ab1704a7984f00fd7e522cea37f2305e005c230b6b8a8fda42d350666b4a7359566c18cb0393602b67a536060ac7693337f3c3b87f2ebc3b262f4ad605b10c69646d1cc27e83452650da57f384564feb4ad6d89ca5a59e01b3c67581378818c9886a31135976251ba7cb2130faae014f61244957456694a170a03db0632bf5f58c8925db11be536d7677fa0b1e12083ab5af759ecf4ad1a3a5213a4d194190e3e15d2c7c26f790b6a1d26d52794357c9e047a8116567e64ddf42f1a7879bfe9028f622d10a297f8a681c460c3785d9f1c7a962d7887f91f27250e3279e21d24e867ac2a667d6f942f47727772db4e3be790007548a80743eb518e91c894bddcccfe22b7c03db93c0f241f45a0a82c64a311235307e93fa1dba5b10a291ea6579186fc7e18c81e613d2c66089ce182b2d9badba3cd0a885b49cd9b19c6d1370e63d07612a8f1c187351c41f7385576cd622f0c81d8a46e7a50b219dca3a42adfb42a44e20449d63c87b05cfec48ea6d9ef4068b0029f354f3e2dc5c14e5f8e8d351bf9e96d840fe46002595124e7225c0f3a588304f08c76ba198090d829ded5657c67fd5a17c057c303df1b174ec2f362ac1a33fb918534a3fbd1185ba48ea205e7d17a6685990d675ba6728c78faeb5e1a9de5bcbdbc9c4b1e81e71e555e4e36caaab4debb203a1a4d92b840677ac90e2a3c10362c81428b321d98a7fe89445937f70c7eddda377097543cea672692a956a9ce0bd96cc5cc6b38c8117fc3c047fe39f9b091ec8bcf6b4f0f7d3c6391376caef204f3d9a500fc5b5d06518a297b843535baa413c44771a01e04c5c9b4739a4f208c31e35f4eeeece60abc5cd8cffeacb335306a53cb3e7cf37df14900083023d3e104a97a9bcaa7c5f11288db4357159097a3ca6498dc3ffda7db40ae5635657004b8dadfaeca2ac5d66d9988494a11adfdcf7ca947338df4ed9aa09f0ac4b46c0f75e999f1e1490e3194bfbdaa053f3b675598f327636aa92b79eb84e200fc79210bac71da0058bc7079ad2baf0dbefc2f55dc7b41e959efa66e49d245fd5214cbef53fef390fb1825acf9d1b0f717c350574f0b370aa201489a7a5d9d024e3589f4c14c950cdb885a3b6935bdde1f596787320d4d4c4e23b4ef6df56594e385ca31328a9dcf95dacf3778238bd56903e99f11b0e176bdafb551ced91ae48b85a740a40152ee1824eeef73c323d68976879f2506baa2f7e2e041736fe784de4c0a90cda1ae518334979b4ccb0ae0963751f1deafed62f60268fdf15291c99360a8173c659032ad2bc18b12805287a639789187230d86ae43fe8e7210d7f0c3042340a7974b53d4d414210f9ad9faf21b41f1725cc0333348b39acd9c702ed005313347602752c7ad9a39ce83cf4f0a09a4f23ae5d8a7c1e9bb12957c730ac2984be76e9e1731380166c385e27fa7fb33c1aa0b40992173de5d51222029006ef0f127c52d75c629062fd4e13a69be62f72a885e186b08b715a11cef23b5e63b652270cc7f7c3ac2353d5d0d13d57011304d5d7e6ea4cfde9f359a7a5d1cb6421479ffb319137de13b565dd378338aa7ec155c82a6c5b4af83b01561a43f84143445c2c4404b96bbedb1622c001621d0054650617d0802581c12f4f0b48a83544d53a2a4b2b6413cf9a8afdae7308c30be0dd5a77ff7a47f3fc5138d3315d24f91daa43f941805c4faec7e0dbaedec9a87041cd0f38da99a521a20f1d41bd2206ba30488c189b12d471b71766129e9f7ff8e0d2e155ead906c6e41e28f6a0db1ca19f1e442cb8cda77a21a8e085e19af860f622bddff01db98b0f26df391bf95064689a058106a2af9e67b5ef730effbc005bc21575ab04dc2d196611461e2a4f9af64f842a0a3d138057a20fec41f9efc544e4cff0a23fc4a3d82d564d3b8371565da715c736a3a005cde3efc888994429561cfdf04e249161393c9b696e0e1fdefe5121a9324527c9541cf066ad2b2aefaa9b98b489ce87baada76ff2330f0918539dcc8a43e6f93cf7c9021defc03c33e6b94277e698b9ccff003abfc82a48ec0820d06e92cba677aeafb7d0b7384b0dbea8947a6885a7000629e2cc55d24e57e491bab20895a5a70507b89c1804065385ccfc957149123def525154893bd1586516c71204b63349c6c3eae8a0665af9d1457a81856ee75f9891927a63caf602a529d075734069865ee9c5d79d5eb34dcabfe4a6bba645b5d91da1722567188e88d30c8619ff00d8b4016cd13994300425777364f78ba182a1439e47ad3a9ac003f8bd6a6c12422e1722f4e76f98aa6cf2086569b3006f9142deb9023f8d43320f4d4bedef89eb1592c2ce5c25269cb23e9751c41a0a7c88f0e02baf6dbb8518866dce83ed94bf7f704733e1ebae313eb9a6469215019fa65fba3d02304cfe698a4b053591fe169f97ab92f534c71f6200ec16fb6f46f910a2c087ce91055c25c8b2007cf3113bb2cd6a518429e929896e6037e794b667f2904951cd3e64c34d394b64d44caaa79c99a9bff4bd79d42b2b781d40c6dbf7824144b12aa9f9245d52f7aa8eacc493e480ceb838df36997ad7e72d8f6f57a5ae68c8348268b9a4de98054b75aacab3fcead3d037992791ea08cedb1f129e10383d80c37fc5e6f4ea36f868b820304f8aab4964454862a4657e4b875b7208b2526cb384474c82b3633fa59fd002d3600ef8dd9cf738c9ba3ca8389cd96f8dcc3c8bd8bf99878405b1d6b1dc21963fe36638e767c3e8b1203059004da8abe4f6e6ba7b1748b6194137a03dc7bba56f03af4ee1c9b532de7d5bb50d727d559278472add1a3252c92c224f2a7ea9287b76509eb8be6057355ff785e123f227d7e63d9ff052b28f2c186550c952add998740f7195999837377af5608b0f3cf4821a5f7bf5e59440676b4ed637855f53dc67e1ee8b4970fb0b076b3a3823043f6164298d7fa628c1f134f654a7b0f87cf6e971acaeb5787f669b7ba8e904247e72c387c8db2a7a98fed024ddc8416bfc667afa16deae3996ad8612f2cb13dbc5e781183aadc8f8e04ff43065113fe583b6f2bf2808eca403f257a007a4d210938a5cf9ce29e718b56141f7fa4ee1e6b96b2446ce395458bf924f2a380f596c9be122984687df8483f4a36d4648f060bec424ec1490a53992a8e73f68b28ad1c5395c2da28b35b2930b34e5a6d9075879b3d4fb9f69201f286074ae7599eb9655c78a10dba2cc2323d1c330b8568f08f597d6bf536fcfebf1bbc3bf2a7febc81b838737474274b19f3eda520a1f550e2d1e7ca33fa5d42436f409a455459014ca7b542b7fc1c85af7f61560ff8d4fc0125036b77b0a737e53e865584be030e2ca55172ff1f8bab9f13dab061a95330bda4102f2b9814e4a492afdc2b478b448b1afa37c18f0464a91c7693769f7e41ff4751fb52d80b1bd84822eb8430d01a5e804dd9be2b5c880bd0db848d5566aa0c7cd278e928add97a176dce4a3b8ed5ac1eea7d71e686c174dd0d295347fd0e1016c9e7670b96f8c6348c06c3654e2d537a654882a4bf200c336f08ace8429c7160c9544784055de345950e9809f80c187f1750d5570d28e37e692f632a1f13fbfbbced093d82db7f2ab0c58f223e30caf5b2d4e2d462f6ec7114c8b3a85e81b6afbb6f7dfc52ba826be1eec8d1872172710467c2f29d123c1ad2e40be3c7afe40e154391f320a1ad7f1bea18da05e2093988e65acfe0ae29f01879b773c394bb4f2cf1d626cd2fc623fd48066c61156105652f7bd85c94104cbf98684c05f45f47f6546e8bce24beeec3d52c7fb7a0f56b7509752a1b28f7eabe1e231d2bcb2d96fd4f70475646f6f9a7aa4677b5d419b9ce68ce1e1e08d647207bdd25d56ec25ffe93113b3e638a78c72fc9d4e8ba5ab2f7d34536b0f309705976feccd7a876385fc2988017d294af8c11ecaf05298bede65798003776c101e1e15adeec4bae3a9a89d0aa00819410ba48a2438a752014f2fd55734e87ec730cb9684d7f85ea3eddefeeec24ab1b65189e06d3f40d70bbed76594a7a58b4fdd60e4bc9ba8184bbb22e8d2fbe4b3b92b66189c049617e14f8be38b9de5fcc60bb20a3ad2f775971f40b8e96cd82971c8e5d3a43ac752aceb1832c9cea9f3ee37c388c071be6f29857ce1f7136883ce650c7281c938038f7093b0278c9bc831d04620e2bdc165dd162f7b35d8ee6dacb35fd1dbdb64d671f193bc83341a07ab97221d1358662cf86c15a578770f4ef696edaa6253b8a754e26ae5afd210f97b0383927ce45791db203fae57bfc44320333c2c767b72e988568a7c0ad622c89cb4d0cfb9fafb3010cba34bc70f14baff16095000cabdc856b6351382e5a7384d5f94ad7f392b992019409a51dac2af4317f229dfeb8e74d287c63fbf9ffc2ebe887d9f7807fc5af0860410658855831dbe38d16a909a7d1384bfae7fdc83c1c2a5ef1376d58fd7807a57a41be60a379a1c9e7780d73a168bca2e75bd1bf2ad3362775e3966d76cab7743f113b3c61039afc988087a6193442cf8d3ed08e006d98a8f9c9737c4872046a211560be5ffb047e6b5a55454fbe26367b9e3615bbc1a7f499526bd0e008bc0e9fa6f7b5cd4d108b61c098a62e59c2193c308b67aed6883ee3b15c150784348803b3879b27170a4b83d36fcff957747a45115be931ec2a01dd0a21d72d3d04e96f7f3b21cee7efd672d792eaaec11942a8d1081f14e171e9d5c69d112daafff75e1ddf04d5a5a87a2a7a4dce9f569011eb3024053daf7a1c9b915dd6c0c88e79fe0a620a3422b28abeca7663fcd318d791fbcc4fd343bbb053240cf6f2808c0390cc309023f659bf3acf9a3d82eb72b144e9f3570d5f3d9090ee17c53a7e4571bbb3ae662bb2525f94698c14193d71ace2e35d6b78ef0b299ef09228fc12191dbd526a1abc6abab0d8adfc22911caf15e2da87d9b5ef6aee6ae3407aba17df9083a9af7a31dcf818e45cbf2af7367a9c7194da7fb4af606455a456a38ac0ef2dfbd674a8f9053a0fd597c0300bab70e948a3885535471633b73b40f34a3b7fc28a2f0ee6f61ae591940bec0a37ef757a758347a80d53d99befc3ca53d3781f8b860ef7d7c10659e3940ee55231443601024d9db5361c9ce7de23e986896d1804efc3d51cf9b4aa793a37a74a3ea5f84699c0cb34f37e05eee7a43aae07aa6a3ab544fa47362980afb4cacdadb005db203ff3fbef1dc3d03f828d938e283b7f48349feefff9b020eaa99dda88190bbddce96873650a41638529b693d5741f6069457a9a779231d107947a3002539c36c3f92555e37d6140ed631fcc22a7e357f78c2d83f708e64c13cf2c181396c6b86d21ff7078e0537ffdc7be744f4d7e9020af50ae1d0985851f7e0356ed9ddfe3fa9ca7d8b126fe6e4862bd051627c5b886bb4c5465c374b75804f7dd5967b3b61500d1a21cc03e60ea02d07a0e2b6da8c717eaef5913b2343b4d64a4ceb0062c9cb562682aa957f297a82c958d85ffc5045efa8ee2292accdc662fc7ae91a74c54da2781b9fd929b65cc10f86533caafeb85bde88e46a7fb47c07cefe6cd4b0c090de60ad8c53645fadb8c908c8db822fe32506fb603d5c035e1a563669008a69ed974e9ba463f98240d7cc93883961d47afe3f2dba0362bfde82927a8642492bf6bc501f5745cad04894ccef169ed1437a1d26bdc2cf9f87707a46e6e752083bf49d2dbfefd41e39fc1f878792ecdd554ca2bf3060fea8bc4acc2cc50ddabafbd6a860156fe695200e5c5ad81965a85ae2c6f14db3ca7ffb8826057d8cc987455d59e49e197cbcf25124cb9b447fecdc548a8f80bbbb2f8704f8db357328dde2e972503c22398a8d31b6ff78f441dc3f891c50f4e018a6dcce08f1fa8460460b663f323982bb9d64207ee64eccbb104afcd644de472cd2397addc0d50ec899843338d04f120f21e5d121639eefdb8cd7ba5be2419617a53a29d307f9baffb0c36062ca0b8b0f8183e4902ed1b917af0f26c75ada0e2d05d12b61f0cba61f62f06a16286e17f3df185af436b05556ecb8dfc1f861857d18d7475e6131ea91dd1e798a1d1f4ab576953f412cdb5364c46b47ab906833859d97d9e0a18c64fa26740df1b28b5f21da312da2a3157d7642dcc6fbc331b0d8d9f2814ac8c979abb085898e7c3f474c649f8c94862fc543268931a7227b5f6c9dbab8c9e5d2f93b5cab77c67833463d24334abaa9513e4c9aaed8cb08483a783e608594d00a4911e52f519d85c8fd88b9163fb6ed31b6012527be4707b65bf7e1d697f77b5fd4907d1aee8cbf33c17aac96790909b3f01bf3b497cdc42983515a16d7baf0273580bfc765ec60189c8f4146ca61bfada444a0abcf7383af2ff5e9895050e6a31792cba94220b28e17d7803d2e4124fd68016f4e0abab78f7e24a1909d92ec534c56da7c4771dc3c469ae1ed7aafa5b2af039d5df95f11856122a5910da35653725c327190f5fc34e2435c996f4379ffa897efdb7878d3117e0b3fcd9fbca4af1697af1024aae074a415cb1b35e82dc05fa954651dfe0f3ced48b87835b8d88fea7f4d46969ea0c059bedef6868fd4aac77babca97a41d0988c6c8e930af157ec0212b253dac5c3a88dfd2a1baafa6292c11a2ae2d911a9f2750d1d00a3b3629074c674558116ca2a6a776823340ff29d347b2b62aa7b707097fc5c077ebf47119fc6cb915785a34c40458f460d44f1e4fcf86c2985165ce3550f2032ca4246feff1a4f9765422475fa8af7e628f310a3bef5407413eea465387902ae3c0a9cabec8cc8094a4b560a74a201ba2e4d95faeba3e145ca7eb728571b426f2d67aea9ba0444e37eff19ebe65e4d62c4c07f9f20f113c66cb077b4e9c178339868f2d913adb23c238f83902ba22e903b0ab5450685f9b5be2bc944ec9d4d27cdb03f7fa34c22e33e5cc1e8fea5241d579ad36a82f02579d03db61ba852d86bc0558d70786f4085fe48a6d511cad5358682f953ab68f62e07248d72c8cdae23905c1d224a07beccc0505356ec101c10cf72de31a864cfbc3f24d53f37932dee9537ea6523c308d4cda3660152195985c54cefc6a487bc23c0c7fe5b1c46262e83848ca068c6b43e33dfc6bb1d2df6e77c6d3eba42d2d34f1d07c69ca162eb9884d6a65bdcb98aaff839adfaab6f55c780e62cff2bd29c3957ab9e5a3c262629d63524382f44898138cc05a7a9cceee7cff4db1a62fe0752cf6362884ee374f75f2acd6759e33c30d10e6e781e2c51020ea0d55315313a5e7de9559b9c5e408b67e51f1ed134a9f2a0ac379923c2746330b8274222c61e855aee218b169764c5e3b367a80ccdda13b5a3c1bd9715ab9b0268212c38b0d95b50e6099fba2c81947ea84a98c435debf80972a62c5200fa5c2a673c68f70019f26db68f898f94548e094fa807f2bbcad557191a2572f7ad1289e2f0ad725f56aedce3b5da6300266a979c30d72d8b0f26934f708cc78dfd5e3d4a1f6e664ff9fb46606a1d3a5dff53062dd91b6163d900c4db2e2a16466fd2f4dcb05e14eab4bf8f81d209b69d44dd420b9da7e64ceadad1f7305e744276be426ebc9dac7a9db0eb370beefa96e6526f35aa7099ae5bd847c9a5a64ff8c11e624fdde6a390b062da3306cb1792832e53e8759e603b42b61bb9566ba5ca28aed534e3ccfdd5e919db38948e994da3eaca8a07e80983f4733e46e3705e41e64690ac606ec211b02b970286a73b20cebbdb6aafc0defb6d93c47a3e3131d5de6261bdded77984e69dd89ba9d80a36a6752cba4e087ea36d217b63db4ffbc4e60d9776d7f93b2eb61fc6e9debc7d1902bffbc647ed3260f568825aed44c6556e2a9a814eb63245d450f67db9979451068b7352526531fd5a5456ff2eff1acd049c5194e139e387aba748b42f82128eecdd41955efcd4adb19dae03c2218f483a871580fbaff90ab01e6e3cd544966436bc314e9c1bd4dac1c404ccc8ba42751afc53bb44c604c94b6960a647ebe0b3c5deed1ffa74e00481656a06eaf12c11e19a22f2008938d305d21486288947fe22ede4d5e74417072d8dfbe88543b2671e372d0527b1325e6f133f680729084a73a4cbda007afbc6f50f119b135e2f32cd572550c4ce2cbdbf02972311fafdccdbd15e49f2a49739004e4637ba2d92e2946403f448ae1721e78a084ace99b3fda10de5cf4933293df123a913de691f974fad11476fc41fd6e3d1ab828c0ee8b1fcecfdc059cbe76fa9d851dad9a05699a054337a7c289edf0076ed64a50efbb9481f970daef133b179e932dddd44fa87bb9a3ed07b0e77092c5f7c6bc507c86c4f0118937bb9be46a2b87b89b4bca6412e94aea510b3dd09970cecb53bc5077176d814a1f8039e04afd937eb5142fd71bdc00db06a50cbf1a2ad45e4565dbb1e6d3300a5b923aed17cac52605a9df082d0ff9773cf8f1738f041ed6d3d12df054a73c0a952ce45475e8f26a3894f7f89dbe0f76b34a7c0bd3078025af89440ab90abee619dbbe516a6f346b5597a8c6269f49c9117e0230b3596e3776a01d4e0428115aacb0572432b72fe7898b0e64ca8dda99f75b0f9775f1c727d95a669fcdb8ec3090e0ae943d27960c8665e76df291dcd6c803942996926c847791991b0553b4996628d593d6bf3f372d8369e25f2767cba6b9f3116b9e38929709de0c4ba6178d4ccb09019a0c8a7e2ec1cf3660e751f082a36dab3ba2a43229d77d2e5f2608b4b3eefafdf41846d23426ee17e43f52e661a615bc2ad045986012368efd0d06ff37117e2ed348b57cf69cb2e8777e947dbd6ccad8f89e38e54cfc22f542d7fae9455e54cd6a4665f1a0dd6129d8ca7ac7c866bb54a591148ef4667a065b743b4291e56f544aebb9ba4f5e8904d275503cc18acd0d55c8656ab4187b77fdf318f4359ba3a7e055a2572c548c3c01bc1b2a39171ca6318236547e017fccf03af025a3de73302ce33db398068a434f5e637bd7279093f0a425b6c08f1b4396c7b5261ccd75dabcbd7948cd76850f6291301656c8d595b7f3222a4ffddbc817940f0f0f14ccaba8a45ed5bfdd1c58ceb58f42673f0b6d1246ea5b3332477aa402e5776822b045193886580d4a1a3a8e341d0ba11c3a7836c9e209473a1e0e335f8cdded6ebca4ac06d15b79d47ee1d7482a7b29a0c43be1adbe49e76e20ecb7e5dafd4b17cf17e2d5abc24b51da8f4fc8da226f8d48b3ee0835810b832e2d6ae44b34f557640a02729d71c5ef0e681521b4086296b78d358d83fc648254bd955b418a67ec49e57411006fb29b8a71d99cd0d77adc3117d997ff5cd32d3c96a294ca6e9f4bd1a53ed2c455fe6da211017d522baef365aabc1a15b4f9b4fa7544a04f8d78074c6341ec47dc52aa031861c177893ff1223f3ff1fca147cdd0336189aa9b45ca0c74dfb4fcd62f49a84056e723a49fa57bc18f2af1eb2a2546bd169fc782236a64b9663e9b108ee3ea2782675cc8bf7c5addb88dc65595b4b609758936a52a634ed192860b1be244268f8a14efc4d9910b11becdfbf9dcdb71d0f85700b230b971a24dd984a235ba5aeef6e45772d29a3cc01579423d93016a8976ef597bfd6554dbdffe40b4e16b8063ff5b0a4406c749c90a9645bbf0cf455fee01e576fa859aa02d79a7b6317bc41ba5a33e4ac330dae6e954cf954ec33016a3997b830c3dfdd4146282fd24bba78ca64de3d7934bf5bed7f6070f49e51d458a65db2b064293c662412142bd0c2bace256f1bdb36c31c652cbea0b926d6f16e8992f196db9f46c9a704eb241d0dab682d5eabb9a69f96a90ef9a87a4e47e43c46f7d905ab6a807f766c5ee2f91bb56453d3dc0de8e5336a50a1c5315859cf9e8b65da439f7525b748ba19f2c6705b50dcf0e1432337e25bbc9f9fc71760b487d5e0d8c8bdff53ec627ad52b508ee38ee2eca63235e31e37d3620285b39ef863d4fe2abece255c15033347843b0439a43e152828c8a7b7a5ffeec6bb82975e9df84d067e89a402c2ad90e471d50c00c3bc0ece322fda0b575bc5d7a96092a26a7fca01db466b1e9422574fcb8d733334d932f4fafd4d78d843f7e481002705266c8f93ce457d8f8b2f5828a3730210dd2fdc5a4ddf9000228a03744912c2efa550d26da665fbae932344d7330e49105dedefd1365f6e0b7b10003d19294c7a224667d5d076e6138728cc3826582f37e2097efc6697f5f5a86b0ef0b0f4f72bf232a9d60f2a276d96593ea93e34b3e448da2d83a040d5859e189aa4da9b1baa45b1f3c43fdb98bb7c7040601710717dceec1e39e0076f1f4672f2c1ec8cf8243bdaf17e68a209e6eb384fbf5f1139c10e2920483f7898535dc2b041dd16111b7b7cdfe661c297e6d098505f616fa8eb293daeffce733da83332f1e5ecda83a6b3b844a4fdcde31cc6c3f9a8c0e14b3931a0f67b5dd7fa5a6c2beff1b173f4fca71cc6df08d6a9f0b648a565fa6dd7c8ba2413ce983c629e9418de4c53a2edf2700fb337a63859bc1b6131b5b4c5114ba132016f7cd327441e839a61defd751c1b47a15430f687c5ca88becd4e0a54ada6d1ff4ccb418f2c7d6a2700a3fd652d00f994b9ab63ddb7f6935abe7c1e8f9f3c3c35a2befc2c5a5c9deed7e8aed173c890c7ccd7d54c391f792f4a19fae744f424c2b8dc9ad002c6614cdd552ddb0a7ddb3e35ee2b9e024ca6161629b1ca2056687c0987909a2ae05f4fb0ffdbf59dbe88e89242e47df27da21a9bd8b5e933ec2806eb4daf85862912b97f7506beaab0dda1ba8c47f2e8b6e1b4d5e7c9cf5073b3c0dc19465bd9bbd46269be4c77ce20eab0dd9a2e6a5c833550f26558ab71e97621ca4df7d209862ec94ae6197ef236bb588b4771066aec39f9a63873db956ee85f7d35a337016921be0585a87137edcaa60cafe603881b50166819f4d1972412754cca5d96412317b914ee758cdafef7558af52b435eeae64a589c44563a769c151877e9ac2419d75445dd6e223095d6d424ab412c8436fb3d64ca749fc232083aa1a21d1ae228ad801d38922eff299fbf595ff3cd4435f4fb2e8daeb5de53bc5d4bd81b6455e4ba60073709e4ced4179acc23f47935f46c05d42b867c85709039130263a6f32ba8a50388112fb9cd3c6dea7b33dbfd61c4e2ad907b470cffcbbd18b3568521bd664300529caa8c9c5ddb84a8d4f5a55f040e17bc79beaf44d8b1b1e6dddf1f2d10d3dfc940de8a1446d5aa5f4cd9d0328415ecfc816f26ca73eabdafb2302b6f2a561dc73715ded8340991220656a9d1d44a50d5e1b6b310e8eef20944f43dd833a8c341fe96a0b0b63efe29ce7f7f923871f594793b57619a30470daa4a0795dfacd4c0d6ea0ac43799f7d4420eeaa3a965d87d98cf1bae0495782f94209f951578efcab5c89f883f9f37075946a5fa7c8385e6ebbd86f330f19d8110b74ee1de6f38693f4089b5c1efcdd6f14b396ef633fb0a58165432e74553fd26b0dd795fa47bed2efc34dd6c61674b63b0438aec8948272c71066a2fd160aeef6bf86481cee43d0a5666468a6fc195e3e921a24c05623ca570fd86b529a29dca6b032521ca416d3cd1cadfdbc5e94c22a71d0b1cfbd7fcb25c72cacfb64000b297075129f6f04e53360c9f8465779f9af995b672bb2e25768657e6f0208d9a111fd462cdd5da035b20b82f6678bead843da4cd994ca159b8c9047652d3ae758aa0b433966c94c377ebc193c78283417a8eb247764b24436ec9cfbbe3bdfb4cbca8bf33ad63d870860edd2d99cdf02d509dcc230cbb7870681d33d4c54f9b4e4be1d04260ea74c263e246a0c0d7df51e1c02e97644cbbb49a4a5ce0512ea29fad9b7fdc0103a406f32ddbc0d06ea16d92f8839e8fedcf47630597d875df161a7936cbc2a39d3c699e07765b85cd9ce1ace7d03419a0c8e65d9bbe0d7b0555099709885b3ff27c2229fd1dbf837ec2ddb24edbc271d82e2dfa133f5a5a73bde54465513eecae76643695e0bff4c83a0d4342b6084d392e77a2115c09c8c5190e5addfad070892a36e5f83bec4c3f69be0bbc18d3ec176b751d4e30385c2d5e1d533dd7a6dcb0c107192dfb41fce261c65c800369e4148e5cc7f7584839e109cef159a32ecb53c613e7df86ed01f3e985915ce51f02099734552f8b83d49628e623c491679a5ce610c7476bac5eaa39fc7d8878957c114faee6ff13fbaf6a5246b726d9a69929901ec875176d6f869077d3a82a19e8a617b558082dca26e4c5d491e38aae4dc8c3337fc446ec7e125596189104a57527cb3e6f30b040184b1ff1990c6e48b469b3ce3953981b322940478097a09289fa009a2ecd48e172a08a440ef0785c09e8bc1b4907f86799d551691fada0280578ccceeebb6e55c87ef96d5788661111d60f850fd89c011b2ac884a34e186c8f163d0de160dc8e3f13312241887ef2ec5dd757fdbd9feab2cf48f23ea174c65e2ab83999f7838c2e7098a644d4e2d7cf46feb373166303f46488bacb7e0e9c639e0ff06684765b43f052f795b746ea46db3dd8bc229508252dcd9c5d13ce48eb78da4dca3b464179b66fcace0fcc6a7bcaa84be3056043c16ca9656361eb51c590ce8cbcea20acbea3663e802a900c6040b0abc9e15a8c21807cedd794ad302943972046b9c6ec22f668e0a600b64c3f7a0f6a9e70b6cd6b377cdf534d1804ddebf7436c5731f23d78d14d6f45bc54a84155f3314876e70ab4b4c1f7f27e5432738ff7bef8f60262d15ad49e46b2dffd142d7b612b9cd904e8c684a8d1db07e29d87d94f8b1942432048d609b734cde53a881248094bbe1f4d0e3df6660b1c3f3907aabf4746b64f0deb24da67df8fd6752cf42005c79ab6ccc56d74d8922357cd7a4437aa35743116938030a9f2d8109aaef3cb19791153d38dc8846508824a1701b37a623a65bcdfff8a79644a64686b8a36b36ebb50b8153f43c75b61f2b3151c18e1d4f9147f5f196e9da7f488de765793d9966dba3408001da4d4b0384810a3a311d61d379f142e0102853fae653b856bd164e3ca91a740a4237671865b627c2d23d5a5e8e865bd3d2ff4e6adf8926a94085ea12a999456693cc9e9e332193d67fa357e66a0cc9d304c3e0d377f5407c0baf41baed24ee82f4c3d261e82339efe7534f934be424443e32cfff678fae00cd577dbcf228df18a209b2f1f162d95f7a47562cf8162e9aab81d2d0b13bfc2a8c11507be1d3bf35c3005ad0db4aadc6a2c1b861d3b4d5d28efcec28409c1d7a211a31717b835a931d7465203f25fa67fbfb86286c09dbfe93a1a8e301e0f2d6f2d7e3bc32b4d358f54ef101040c76fcb83398cc10104bfe6e3f88bba0f4ceaafb97ade1b15fcfcc63c6180e252264bb216d409a8b4d760943590fd2a70880d8d14c93de3811b4492fa960fa9ab7e7963b4b2b4b4ed74f069694743ce23c2290558fa2fdf30a6130e324db9c5c82474df7f0485c2ad06c917173bb25a4e6345d7278395fbe2f71a6c32455882400694bfa023fe7d76e39b7ce91c3c55e6408e093a01758ca0012c8a385e8f15dae6b1ff13a05bf2a516698847a0eadfd3debbc10e5fca1c56d340e8a61c559fb1c5116e5a1436d61ee709611884250fe03ca0eaf52767aabd094f76ae308e4f17fdd1c5cd5dd2bef3746ccce3a292b052fbb64a30773900f4773b71d4d3f1c7b7aa366a0ef560bccba4354b9cb51e0c413513f70cb4b29f8650e586762605140f7f2784bad10ef30adb450d1463999d42883eaae275e32809a9c43fd57c4e1c46f73d62a807d4deaa789a64edac6bec8d12dfbb1fc5ae146811da22737d155208d19dff3e96ee92497add68274b9dd4901e80d9c06cab1a3e24045d40680642b8511da105d7850cb398098c14073509c72a069a389a02db95483446744ecf808d689e3a79239c54bf1a7e065d7dea3bd9febcdbbfa9311545568d4a3f0aeaf761713bae103344d145f1533d39a5d5f969a8add74f174bd49af15a3acd7e8abf07e0782a1a1a34c538d07bf62f1516ebbd6a064449bbe70066ce40c812aeb0abda7442834352779d0613af34542540b5d55c8bf5fb729b9f364b94d620b0b32be2fe6a55cddb8daa412b6f835cd097c69e2797c17197b0f8644b72377b8414440160eb2a78ed79d2d4e8e292e29dbcfd6bca44de7b2fa04aee8d09df9848c2ceb424f1eebaf074a39bda90c3b03090cc9c529db44427deca77351518c349976d0993d8a73f632b7030b2a9603a8efebedebccd59cf27ea7c4264fa2e663b48a58314b890bf9faef93cc18f588972cf7a290afaa838b327f3b860648197bc534af5d5920de8c673ac18f174ca74a381ca33170d73eb76f9fb401613e4e57b8d4d46aabac7fd78b17f95307f213067d20d5427e8fa6d0789cdf4e3c74e565d2e495de8403de3a9e02036af7a35872729b1bca4facbfcc0f35cf837c737725c01ef7f2eee07768ed467e078d1a53453f01501be984b197f691b6df360372cca78db1903b74069e03808f809de00e3955997b6559c03b6fee9cd7552c67c15979d4f7dd983e91b240ec75ea521eb506e74f68cbba0a1c1d332cc74314d8b09dac78ff08e2498fbbdffa5ae400eab88f2abf89ee3f9dc3d84094ef0cb1bc24391ea0faa39535ac047b3e1bf6a4f82d46554025628128a702e6eede8da10da0f2f973d96f361bfa419ee99a9010ba77c1e716be0bbaeb6f9f43f26b3f15deba051d018f7843c0f4717967f92b5b72fcffd9ca79540790babf645f75f6ee8f0da0f7308c827db1ca10fe33cc2b86590976739949b3fe9a3e8c4cabf62955e501f20bdebeb3b440c3f8ad087a71011faebbcfb16942ff408b460fda748952a345594dd0ccf659e6162eb966f269d085de6d5f7f228525861d0043891b7ef1f25b0c751aba1dd5aa6a49964fa9dd20df2fd5ce57bb3c0742526532c04d405a4a445f0f8e6f0055d08e6f02f6497c2eb52fcc88db20d659aa65c431cc4d0a3f68a4d06b9baca2a675d046278e17bb71678854fad0a21c9db3c2e1ce5554f8ab93b79423784d4f6fca219fffec7556a23d2e16543a902a59f98a81781d0c4e29c0e7dacb14cbfdc7310c3464afb0367c8c2d7576dcdb2dbab93b5114d080da7a92c267fc864a98619e0cbb9d2ab4931efc287ce3b16d2832414c5d8432050d49a2bcc3babaf0f39ee88c6120908c55ba0af1c3ead59a3ed5ec877a322fb6f4de32eaefd10eedb7a789b376c6fb224a65de2f17138ea80095454e96a9cccac4a71771121eff01ee8f670656e380a450308f7fcb711fc2375584ecac15ac08ec74ad309de0004ffb388a83547963834f646e7c0ec839ff42734d9c8ad37bd6ccbe466c61dcf946242607a3f1cb46ab3baff437bfbca6d22d3063c4261057b7d4d57cc31958849e0b63d9229c2ec65f018bde63a4abe265e3f710f6c4c3f7924a538fdf52c2a9548218fc80c22447d1016c1645d7d1d70ea6cf80d29a5e5e9d08a586e2fd726f0a9673a4c0829dd7a8716b1a5b24b242759127384b104b5ede8df10806245d9ef97e06796bad9aad062ae4beb015a2d008a05ae20a255a364b4c8d73f0ff36c50ac6ea8871a0a616a52be2aa87436dccea757bbdab0002fcfbd1f68a437df0c5a8d858c258c0c080dc7a8973fd5e95cb775bb2e54c695db6603bff9f49f6dba54d9a22bbcc90f50a29b9b2b83d632efc317ddcb36bac1a7aca245e09fbabc457cb80cf1cdc3cba2c84f2df97b260f9c170b51a02ec95c319225fbc39c6cebf23b2c5122d3dd363a4f2eace9e3579e49bdb23ca082b670fbc15c9be67fa85d2e8ce8ca7ce80d914dfd9a950c6de124cb3d485e2612dd1f1c2a0cddcf3f7223a5fd418bcba312eeea7ba188e239aae6353b9e809f1482f6332b999caca35ca7243058b7eceef68da465d2b6ca632f6185280862432945333ef1e131d2886ed5f74a7a9ac6eec17667f70ae66b5e1a11908c547cdfa087678e27bb81795f1396cce95c1957a2791f5634c4456ff7ac205034a26996abc53a5e8248a17b9f467a26a6d6793251b86d1781b527e2889949cc6caadd0e5c7f01a9846e94f0f1e7c005351948e3204634aab32f82a34e046fd6e330560cfcf857293be8918d727db4a1c03456405fb605cfb132c5f8abe4b90d72252322244a46f325e54349a86415f6c07b46a4d62e510ce5df3baf0a0d9ac74415f87dcdcc74e0e8049dbccc32e49ba0593b60414ff22f0a430b32940144b36711b8b7939ba5a336184586d938ef43a4b42d37b6613229f341bc2b7648d67867d331159f33a806af72940d0a67319c528f9173f5a77d54c26e4ce2e1ebc14ff76860bffb450b219f1a7b44726d1b72326054c152f435f934d4af348fd97d27d019d822645c110ae0a1430095c81969b96dc374d3bdaf4f535fe2801af2ac4d1b87fdc98766ef0c67fb3e4007de19d84cb1b0b80b6698bcffeee593af9854f2670cde2f1f93fe9ab58c7fdb73af8bd79972b75683bc5101cd0b14fb58d22bf430b050e696a2a168debd0208c0ee02a4067c93c93cd3cf1196183cdafd5d18be8401ba5e3b64e0e0bfa956088d1036b539073da933217316b73a34d4040fde4421dcb8c2aea47207e63c169b3dc49f1a01340fbb96a6d8af3928e665ebcafee76ae538469cafb92246bdac91c98f4090186361a73a0507fea8acd0c39b01e3cd0ea4b2e4643c9bc78b1bc1d0c189cae5c597c146dfd5ffeeae90b692d5331c6afeeaf9e2555fc27d2412540748e6c15bb89c2d48124d58e5ad41a37ea258b77ba165b7aedaf377c2009c8bb39166ef5bb9d32d781edf6b74ff640c3909e9a72eb3c49df31519c620ff63a9c8561330f02fb9f0a5ce884e4e13124f70963158f3af383b9fcb2925b290508791f3bd75cdefa5d704311a16006c9e20ebfd3ae21d10a8b765a357b7c53d5faba49198fd67d7928cbcc294a687886d5c84cb9b3b643085cc71b1400662643171c1d375c15d5432ed98126829e746a90010f14993ecf2dbc687fb25c24416d455e3b28e3b7336adb8175df5cd7452d926ce2711001360e199f4a0cb9f70182f126e0f9078ae6484f0ca68fc6e29f59bef43f0d78c63e6c6aeb07bbd8114a42111ab17ed992056b59910e7e37a72f89faae907bfbebf274cb080b24960cbab44203baf4928344d6bd9bd2b34872cfd0291b468cac4c869126594beff4bb32a34546810794dd7f9dd0d1be55836bfaee817c748653d1b7fd4a544c35acba832671be85ec166172b7921cddfe61ca84b6929fd41a044b8634a319ec79db29574a76d1220a5ad80947d8acfe1ec508e437e53568773b02156e2cbfa1f0fba0c86380148ded565971cff0bfc36ec6c152b6508dec506b2996bc082c7934eac6c09e1acc70da74b909d9ee55d3d61fee7071290cd3e7d7740b83e3cae2b9df45d90157decc076f213fc1a1f2bceef833b4b739452e1ebf3979b0c1ab35a084c21aa2d0367b150e48b1c4e1d9923cc2ff296b7e230c8a8d656c026f50c7abee0ef51f4b7a2d122f2eabc2d403de47bdf0fce9f07ed3439d3ee34216a5b6dca10c16c7f8d7eabea56bb1417c0561074936c8637985e09e5954c42cb5649f4566fa961ccd13999b15c3f2383e8b5c486a5e79af04fd6db881d53c8089a801861fd6deb8949bdb607488e39f346504c751fc8bfaf1b6bf51d7498411ea9c40ce794bd0d82c0c39559cd9c5c45190c1b0acc33e993140f8fa4bddcbb029d5e6837560927775c5ecc07a6297b7e50c922bdb8765ad19a9cb7f968a40641ed6ed8268fe96365d5d62ab7b13caf9b9b87b5dca7ede5c828cf3fc6bc7bf2d16604b4e26c272b4afbb813f0e82a9f931c9b8b2845f2c5deda6a5a8b2ee32489de1ae40bd5276e2ae31cbe95ee6b44b96d6154612fccd18bc5f264178802732bf3e6ef15f19e11018d2d24c42c45590d4ce7be3647496b9fb1396abfd2522ffef4c5569f6a87815d82a39ccf84f2385d65c583c9472ef51df7a91231f1f291c92cf9726a0a7646488440975c741d4c3e919457746bdebb0f75dfdda87ece2a96fec57060c338b367557c816854be5cbbc4e6b5c9a1faa84922ce038ca40f903452062ee5d8bcea8f8b71ca4ccd9c8e5efa4b96dd6f068fa74afabfaa99e5162005ad865b4250b72fd1901be1da7592a7e5544f01b7e08505ca756c1069df0cd781dad0f1dffda42a900faad0d0b3ab5457b87cf030c970101cecf3a7f8c6e5e490102a3a33febab48e4c94b41361fb7bf26be2d1f22888a94767556bcb8b25bebcbd978d287b052043059cff5aa9d463ea342560b08a4036042d367f549a718e85ca4effbbcc45648f82b49fb8c53f0ede4d8bbb10e2688ee4bd7780919eab202a5cc6de403ecfb340256a9ab799f069f2f254a24a66db123b8f2528cb1260d12a1c64806c8811c99c78113d11e4eb87de0ab4e6b2c608996818ab7af22a44c2eb9cb2ce94a58ec4685b9b37875e2d644704daeb5584df9767b744afb91ad5a71bc2dc7a2c264ad294f407a7d97ddac756912a5cb06687c681fd867d80fba639e0a2e9a27431a8744b348af0fa6d38866b892ac053736bfe12c5e838724e935d18425e847da523008672be08fda44d69bfc43367fb0288f1d69fb2115dd67e27ce8506e90aca4dee029a537128bd8533573dad6b7c983e4900c568abbc9448ce4283f2c23d57ce9cac45cdc3535a9a349c5731356aa3f152dc05a608912d46f4b9623685b6092e718c80b1d25b318f6f6e9bc1800df9e79ad3a500b76f53066476ef02a6c07d2afc4631019afe8da09b78ae84759164c1a66ce050c2815e537c74dc5ee0f0862ce2258937d3ac7adce3fbe6bf14332d280306b114adc004e554ffdd4b327c07993dc1caae45433845f1a897885b81ddc579d09761af31041a7b40764ff187b5ed77d9e401cbbc60f4be5de0ce05747d65befb62080329a0555eedfef10900bd6126410df9201a9dd5e9a6ba50e6bdf2726b5f211c2d45c08deb633f2bbf7553aac90fa88ccd54ec9a0dd914fd47e4515cc53efca8fec2a9a0b60ab491a30b6905b1b457f2aca0199ba24919800f1b1b7603375741a94556b7c1c2c884e9324710a1d801520111fb009ce5f2fa555d6c9c2223dc6f6e101a3d7cd78fb3c6ef101a47743e4003a6a873ac9bef192f231004ebf19a1bbfba9dfe5ef4aab516d9c07884cd48f3af361c7fbf590478d3186409070e311588d55704f0adb32108d3c6c35c080ead08dfea62f3708b4605906c5421a6866a06b44a802af3577b11fa913e2d5e05b813ea6be87b0b585cea1984ee38385eca265610abbbcc8cee43879ccdb39e86ddc17fc93c6f1fd908a30dfe0de4c8d702c923f6a511a89c7b97736858e2163f2f4679b5e7ab8279bd380a70d55f04f028bf7c58d9ce3de8c02108d230ea4afce0d21fc00054342d8f45e1981027a35eade590ebd0a0bf62583f08561fc3b944d410bf1343a97f6f4acb2557bde6f9f81df266d6946c31cf6a09fdd8227fd50738b6a463251ef835364aa8d0ba0b216477c19c44d54749dbd80179e166a8ce9b97377d99791f5cb7880d06227484739ffe53053938d1c94eed821ceb644bf196608b6ce34ee1c520926c2b97c8ed11cb09c974b964e59634ff3859156ec1242bb9c9a923c0e1dc53052fc514c6e68a483aeb1be0e29f9004de5b54c6e8de9be2184d57216aa7ad5fb6f5350349530ea842892d9c73167bfbd550d804674a888c8a28acf625c003218c02c0bf4a8aaa8a65afe193b8331ca55a3c6e063f3ddf462aec1b891f939f9f26eac1c3e4bf5d3d89cec30846332b92cc803d3ab743d8caac4fd0e1bddedf02c72b5c58d5ea742979ef1ef0d78bc0263e15500d29311b28b11154d44fc30344de99e3d3ee99839ff0aa8dee0cadaa2b928f32deb41c2f9691ff87b19bfc59077d92ac619d6ffbb5f42d3c373ed610c5d0b2dc034e11ce67eeb95f1d7011a116a7c813c996637309d9f71109c8df231c2268e193c72e443b51b24b163500219103dd3daebbd33d49c62e2b9ff8c531d3e514c57e995ebf8d1661b55d26d27c764822b2487d354f9d7fa244f46f13b3c1bc89332112770e26f1da51ab5d81db391d4bf38de35c61240acaa7bb6be5e47cfc8c0daa8b26a30f7d247eec05b36dd0024d4b9543e7cbd72cb2ba91fec705dca502bd454bd0ebbe127c341b88e023a7dccfd6c38e722eea6226e7c08b306a37d0dde9a2c9a2d0f5e9bf1a886e8b65c9b2bf90a5b226be3de1312f3bfe7d8b1a9036817bc442ce283164ac50b8653339f68e6c12ba4920c50d72b447d4ef0516cbd2598c07464f8973c20b115b23da044adf8489cb2c44a576b5d087c18ebdd8952f7e776ffb225fa9cefdbd2eb4fbd47e2919cdfb33448305cba55ad151f998acaca5728d2556c00538489315bb563f1d3671dd42b45ce0b5a928066e2518de72dbb2c71701a505be886e58972adea7c9d6408f44a7c5118872b35e4bda8f24ea5e7e21f0e185bb175a10a4d6e2a802031d05e4809da310a12ce5d6250885a8434ab5aa3278064cbf122a48d94462c272088f23f2ca342a331de53ef98385f497bfe72fe24a298e6b414d08ac4f73d370c7fbb31868fc77c969b2c8b5ddb5665c22c4f26c738b9f715bac9ea788d4c4980916a67ca989b7c6b74aa64cfa516d5d79bb2669571aacb886622d2ed4f344ed481703ee36e205f590b2eb38fb3b40bc5e96dd0d211ad73e7d91edefbe052f146d9c32f38dccdf21f2e7ffa19e6c5f70f96dbe96a9bd2f5757e62fe7bf34ef4899cc28509a1ec4bcb310b7bcd941a6497fda405e541bf5f27618a74bd3de05b5d4847ba7ee48b9280a6c73ef40a4cd57b59152afaa6c33fe31de3952f4bb4dcf3ccef431308a082fac982e305a90a8497f9182d2fed18f0f12ba12d13f091b03590aa30c46fb1ddfe3e1445faae6acc01f0a60e2c7051f3b45b3712cf1f306db380c89a3a04d9c6749e6068d32b0d8e323de6890ba9879c47c448d1084f15a54d4b89709898a3d45b1eb9618b6d0c28c01538ff93ab222a1eb905bd2a9d83c88c701c065c280d32b82734a6f9a03d999e638cd245002615e29697743f9723b0268597b3660a672599e8379fa89e781edf8bea154c5cb90bf4fe551be60411c2fd710ef974719cc0b2d3cf92b1b429e737be60a980ecce717ac7d76d9d99b21032140f61323eda0f7a394f660d4ba1a3d9a8ba467bfd15ff558d6f4e3ff1f63405967100b59155e0ba2e24776ea971e24417b79b85b5cbc6c2430dea4780b522e8ea2ef38775f063f7193fb7db5285edf9bd321873d72f31cdaf338efd1b1352318d61dfd86a11aec6c606ee5b9ebd702687154a09e63dc81b0425c8375b33853263a2e78ede99988b3b751cd3f41ca2d507dce9aa5958ccc89a49c92de02161e3245fe0ad974c8b2bb3cbc195e5c9894e4d6d4a4b7b4b90f61554bdf8622b72f994e75ef2d133060ce91992123fff64d90e0bda59c42c884d50de2b803f06726c9313c76f84bce3e1cfdf93cb895bb1c2ac5d6924e11d8bd5fce5a9b3c08bdb20b570790079484232dab51fbc24b61294fcd96f837a9660c7f56d0ff101b0d64465801e44b0fce45ecb163e3d3a11f8f1c0d23a2deeabf8de4fd5dcf11001ec04d7965d633752cae640ccb151186dc46ad26344b13c18db489c3c1d4d7d363c12600a8c4596cabece25e599f7726cea12437ffdf2f898324be9e946802a03d6881ece4e931d6413dc436d89f2a0611a7268a878e7d8334f353065de7cbe7ae80dea03e0195259c70d0baa3faa4033f057c35b23b029464d27946f3c7a6cf765e4f00e0982ea19c63e5b2f3dfd076c93d4cd2972e14fdfa0016e98fa069c718c957e6d395236ccb21c82abbfd73f8816a9b04aaf7287a71d69ba164ffb12dbc3eca9368a775c67c762612a079d1e2499e8603193960ec7a04de63287164d5752caf92eda38db6eb22d3a6817a2f8b46f63719a8b3b67822d0d02cd1edf385cb06a1e2e873d5e8c387e1a64e6ecfc3fc623dfdc9520e610aaf5804839bd34720091a6841f3f454e7c3016a0f12990b4d46ff97f48da6c186b3bf19677ff55403329f4c078244657d625497a0d28621ff8c8ef02aa78912b585c98d7d74bce1ffc190486c187b92eda85411cebaa52a23fc452130962b1eb21191247f616f67d40b5b9e109cac69d3d783af77efe110c0041363305d86595b0aa8bf6d035219329224b591a1409a2ea22859311c7d02acc99cf935aaf10e95c79dabf07fe777d1dc32425d47b7dbcda2c189d8c19fd0b22758c217f3168f1d86d4d2ba8275aa9a2fe878c1df55cf9501137009961684e00e8bead13ad7ac3a30295a320885f8cb728e3cee41598c0932437241b8ad7b1a922d6771196a1d0923238f27c05c8f84cfb02c98d25f397e722e1596c22d7a16062c5a46eba7998e34b6b068921bf8250bdfc5451b9f52f7e9669056b94d5d4f6ecc5db43807d2dfa8005d3381e11a4504e8df60e2b7b287e879b666841cccaa27804884bcd2023efcb68cbe34ae66789c1999eb4e7c489d4e9a1f411158dd7f7cf127e9d96fcb11df05c79d5c34f8208dd5c1ec42cad89e2b956e971031fc57c5bc77fbbbffd9147bbb8ff9104f218d905c7cdb947dede0f6e0d39d7d60bda537107486a6fc26550c40ee380bef48935991fb99534fb885c0a9e9ced0357b6200206d4c8597865ec2b9f4283ed7c8df058ddb1aa07ee323c0802f74d9365795b564014931d375e088cc656512aee1b55bee583cbf5e76d07caa8e3e23d5ee076549e0a5b118741fa12ccc9e3dfa16b1b12c0e6bce497f2b365e7e89536f65839e5e4b64a53648b4ec32e7c524b9c6e64e9e947c5108f0179818f59a612bb6a46a9a7084cc2a5c335c2a2059af18325570e43b64bea79ae5f9e4380049d64737a74a41bc399510dadf54e2acfebfe00a20687cacf6bd9598c828e70aefa5725713e58900f69ddbbe497f31e97a8e463477234e8994ec77a02a317ed3c0ed1f7b5440e540fb3fa778ed757268c46fbddff48397a882a63113269cdcb03e34a89c673a4649f3ba7875c6e36897d6b55d829ad8a9018e8f814d9ec0c8a31ab0f4347162bda6920eed411d09b4b77831afad5639bd74b5a28f772e97641f9cbe51fef81ff24224b49e443c27b9e67a320368214d8c6129b71c02509a7afcbdcced368369510cf20053e756f7b13dc293dfea1b77a3da50d4e8c79682774bd3b3667342ce2eee5c906cc41cbb74ae706fbfe6c1afe2b742162fc516ff201b06eec3ca78240d7254181fe6df82279378695af3df885e4d3d242a50c16b97d4a4f0180dec6074fcad080c261e5f734caf3fa85d9f8afc7752b1dd5896c352e3f6b98984513a26a8ed61b34c14c883d0e6a805f7cd738fe99f010f7cc74a7d78b95dfe63694ee5e0b3a60f14007dc26a7face373618e38805806e1a782598dcd5a247717a3fd065d757b835d95802b7f0263ed2bfd240b1c66852e8237bafe664f22c4ac54aef6b47ee394efc297196b7b0868b3709fe6b7b20a116ee84c75d5bd5d596ccd9c3cf9a10fcaaa955dc2218950238b72820b231f90937cd421b5baea6513298071d26098e69a55b8aa454b82a10e6875cba57c3a78ef7ea43e197002cd32f67456fcbff27b74669b0edeeff8658c9a973451d1ccdc75a655f001d490f219c21db432382ef4f87e9f7b706fbed6921de6db1c14af38a988e32fb6fe480a64a427971c9025e3e6d58aa6eb4fdc36d8fa1d065ef39a64a430dee7ef0ec4b02766bbd9357e7f7be18ad414a578c7d0f85bedb8012c3e7e82f966cd17ce20c5167db5056e6f611a6fea71387cf7ea0b17770211a0d6088d48a117757a20c37d9f6169ee126c545e902fa9b19b2c08def83aef116fbbab6215c4ad946aaede218965a1ad703541ff4d3723abcda192e2553a47ebef04231b49ae2fc0d37687931ffe4c41f365b1db7ba7f05a0e07b82d7e72a1219ac967db300a147cde6415c04acca3c7dda704f579362b56c36dc73e9cf634074b7bc438fd386d4378922ff6358cfa71507270d3be82d7a0ab4f9e7efb616c5f7603c702d697f0f32047605d7b5fac06e19dc4c3bc2bf3368e5acf04d17d264a09e2c323fde4b10a44df5d9a52e2e7dce21ba7f650305b9ac4af7225d1e97f8edfd9c5ba826af789f97097a477a3078ae5ddfc482c3b6f44992756937c68a3fc180b8c77a4503e6bdd651bbe5e0b1578ded45e77cf8b3f774a410d522de9bfb7959a3bcdff752c9da701d000f959b4ee2afdb605680fca6241bb5bf713e0da9cec61f42316209e0c965fc697acd80edfa0206b09bfd86c457d3f27f8f4f2ddd113ae02a18e6f5fe70d2ab2de2ce0e18ad45c627f0ad461806392abb1de700c7407b1feaf787b1b9867b4e9992f09f44b46062b0a34ae3c2b8fbcbab9a5f6d6175403406aac4a7f4875a0357a968b11c5ffb034cc0828cad24d4e9589834c84c2785ed421b7679440371a67dc2696ba3fb259a24e9b683f9b6a4a4ba1b7d5674893106d7bdc111bf28639fc214d3aaadb8aeae4c766175cb4e1b38a2bd49169b3936f1d8d84c809c70b1809d1c378c5e05e62fdf681b00e4ce405d16d16286b209b3cfd9572660de235ff25930abf7df14f548ea44a32561f1146abc9200c8c2f5ce3fbcb45e548fd4863b7070680db495a1dac4e4afe73143141b214927816f9fba9e31860f1b3c5cef0d78f963d8ae5d4abbbe99874a7ac1f711090968996366ce807bad8b439150b94ea4fe59ab26552f3c2185b2472018870fa0a647681e588c52c32486eba7450687a855c7af60aba00e9eae8e779ce2fbcf54e81a337ebaf2a2219187b6ab301d9345a1d45a71524f8e89ecb5a624ae0bc6ed5edf7b2ad27c6fc2a4738cc0d3741f3d0df5be2e2b4ae3917389966d22e2ae37ba5e82d0d92094ae4a87c26915bea322713f00268ee45f52415f17ab58e16e6a04b63447098031632e78ab86d026d745f44af5d1df3ffd0eaabfb5f80a165b78315a09f7343bee73b8526153b0255b5b169c85fa89d6014ba49b5a18bb453862cc7445b67cd97ff3959b1b7e82b889d9f795116332f803549d15ee6ddb2614823bacadf5a99fe1a5d72a864e1ef8c339b6d8b8d0205635aae5bc1e0b98b225c2a700dcda74e603e271fd2f19eacaf3e68d3363508cdc716fd91d79d622b469f1657348d964be28b5f38f675de40288edadf54be44f1edfe8eee414c2fa245bfcb0b182ef5eeaa2306edafdc44989a9d31078930d5ff7d7d799b0e4a3afa8eedc63860f587e0bd085441da4eb0704fd3e761f576320f5df340fc4e5c728b9007353653e4e281bc7147139be7f586e4a2392476e966d670853b2603ee8db138fb8cc6f2a89c1f32f51ace553b514d053c342b7c8145e3a91e91e1a4ff377a2053b57eb0aae3a220465b6fabcf2d1940b5846b307d26ae5676f50b0c938eb7a4712293fa6e27d852bb8b6ca4f5d5bf1626355590810c9cb47b23b7df6799c39d4d6bdb1606e98bc2bad57689886302c187731bafae91b57364ab494f0efe48d9cab688a13f9b7356d1394ad191b144e161b26ebbc03dc47c487c103ee288790ab2683bc0428609ea10a5dd475a4a8b4273087dc98f118f102c1f27a195e93b0a819ad2cb15cd9936013d245641c681c919800cd074270e1df798ba02a38038a05979ec364c70e435d1f22af617cc6fd64551f954f5e4e6de34b822be01f9dd550819f753a95fce6420613dbc8be788ec8ee26515e40401b2539e23405e340e82711683bf8f72d6cbcabaefd84f3bd1a7973b658c01abea1cc87a12a60fa376ccb07ee1ee5e591b5a5cfe8219d0490243318ff404cc6267c119e2250f5c9f3694677fafd18174bc927d3db5f5c4fcc6c035af22a3c02d866f8bf44ffc2fe38cc6cbffd0027830d8c277e43c83890614f643dd6a20626278a7d05388dd91df8994762ff47f900ea5e00eb777598de8e2db66963ae60aff0b72444c59f9a53a387e95cd353e68da0771ba5d596f2da7d2f3f381919b3d807c7fea64038cf94bed9f7b0f0bace59fb5d4ef8ddebe6a3cb28230e90542c81327e977a2882c962f917db19d725f38873a9044953202fd27945a8a817a4b743a5d1f92397b16c1625681d0ffa245adc24f53b46429c340ec71331d55d1fd0cd2b6e415e63bc243c0f41e575aa0651970b6025475def2459d5c918c45560abf92214b2cd884794981af5744391b930f3ddabef442d4dfb10ac92c4f72521af47c7266fee453b3666935f43709696ce0157e1e4921e2a469b508f7b0cb4d588a871531550daaccd2d11adabcc2728e1b9300b6006f3f532373805e9ead7996dcc3a041a1605933410c5852862dadd5e8ca0973a5eca915a3d44bf061b6ba92b0d834b1629785ea7b4e51b05bfc052d5f1aad92bd20186cd9439b66d1326ccbecdb0e5652a15b1d811fac6ca46c72b3bdc7123bcd2aa70f781fb9fa6d7f981ca684e7f3d77eccf3eea639106cc3699be0426370cd9c31edd0438e85c03508111e011bc731eb8961108a8952141ef752488bcadcda5c98061734cf5c855eb55eb93f824a4727b07ef0a3ff8a106256258cb294c4f45d984c4b785f9c35f29b4eabe4eb3653a16ed5e0d2f906b5b7b882715ce68c16a14747f8bd93f5cd0656057489ef3eefb5ef277246e898592f007cbd709efc21b5adc1c771aafcd24e67a35dd67c85a67111ee8342f35673a7f7149561d8cef65ee73ce79891152e2da62adb7253a6d710c96b531f2eb8f9bb1b855b5e5e4c146101adfef45ef8077cf01edf19d3800034b3fca2cfaeb80f5f47b0c3179d88faca7e043bffa7ede5db7cc104b130da7dbe00c036dca4835438fa3faf28b32234ae4a864df73244483aa17a1d14af2ff1eb867faa2765c39ab5e80a63189296c8ba1f7c3aea44414a42f7fc71acb5c5cbf384ea9f3bdacefed1b2e8e2ce29a430d71e05ab542d0adb675c802afa86b7209a57ac669edcde1b4ecd558b3d1c0fb752def5b1a858b1b141f474ff4223ba6db4b42dadad2084925b3a191b3826e40d513082fa403843f30f3b56c571ebc09d0a959b359b15fb0584688fde0f2ef7413512d9236f6690edb105c23b10ec847006508ff87811f10520dea3546c0a3a089b768e7d5c48882d7ea02402f6469c7e443a165b53e8633823157c16801e923b8cd4fa475a31d34f2f653f8d3f10411bd253675419311fc4b268cad9d706a92bad90c66571ea07704d7487a39febaa9adfb6f7e9b26a17ed9a96262c25dd3644e86d6c3e333e50dd5f075bb22afa168cab744ea981d4bbf5a9cb0e60fec70073d1d25be2a8ca93ca3d50db246d3f8860143c451714ef35bf90eb411ebc6985c682e1f73ad6dae788733d4b3ff7099d519f1b904101ae57d99627e5c9c64b5ae667f37edb6036fa46e08b88c328790c7182a5af6c91b4d1ce16993200b90d827e7da9c1616bc1178616e1fcbf0b5e4edfbf66dab3b8e30cd7e2bc6daad45f627f40e35a4cdfb1ae233c99940be6bbac0df880134cc9e1e6a44aec62063d582ccb744d62cec283bc5f8077e9413faae0db3a0a04086586337843511af706a3997e48c9fc7c814558c901380d067565e61da6e9649d6c85761ec5eb616a2fcb9f9e5f8f9578f17d16dcc1a53a9cb45c632489a07430b4766dc445f86aad21e00015ba3a875b316270184d9f2426886e8819c5999981089dfc176c8858112244560af79fa9a1aaadd28a3072ec185ebd78473e4ea2857020dc2ba656bf3a9e6506de11c63538c30165ae327dfea98daa12e74f1dca216ccc52816ded1e45d3fc7968930df19296dd9cb1dbc1b3872233b4dba108a549a6e06354db2563ee211d28149e36182e659b6a6f97de3c7b549d1d89a3bbdf8f6873b1f43809baffeb134f541bbb6df43334b30abed2fb55751a606d5dee12860311deddf569e2441587c4ae482949b0c8a4ba60d123f3d97aab0138586eeafe1b87d95d2d8339230b85e46b0340199b7b7f2b2fd74efa529baebd1d30cd27cbec0cfdbed6af3dcd056446c2a8345e80ef85df5ca957bba31de0e087b1716071ea04f659ff3526222dc572fb7c95b58e6a2578d5eaa9caa798bda6180b499663e62b493d07615d16c93aa20f5846d8c6bce83cb24b2caaaa77214870c6fee566324d17d8dc895fb13f0cb47795ff70411533c088153cbfc9d16ad7d5ec5eb7c6126f71694e2fcc13bfd68ff3876ba3568ef5edd94fd09deb0ff60fc05f3cbcf53987ed80d7263971bbfdcafa1a22cc2ac23bbc4ce3984d8cd4e1f4cd7354e669b158edc5036b1b3a4086c51f9955339a3aea282b1a4e9f0c87e63d510b0929e4a1d48198126c31fbf27904d761cef2c2396995974b5f736cc6b3d2e735bf8ae73d0a0f6a1f618556bbf7fcd3909c24960526857a494190f7b9403332481500c0cb49141df8e7e6f8ee9731fd154984e6ef136367e509843a58e6c66ea3601b09d829541ae64f618451228ee89d5c9b17f439caa9a269327c347d3379595f1ef3dfa227412f9b1bfaed104c43d08d2a23ff3ab2a25b2f615ead505da348baf9e5c302243c884268bcf930086a1234b4e06a231520558cafadc5c9314f28fe600f641714b1fdcdad21e708de6b4fd461d45f819a34a967837705a1f888663e36aea8012ad537b2d10a704d2138ef39b196d19b222a321c32bae63af710c7ac886544c826a67e13210f159c75a633cab6ec2c0a047e955f9fc5059cb93064a20d17bf60b2c1af3d608b003b57aa7e0fc08d68dd872a5326a84286d66fab2ed9b339fe244de137689a385aee75ff0045f79c53d0a3b23b47bed867e3805f16ea83504f67af62b9025a848326fbfcbb67490b9493eecf3fd8b2c5a5ae117391184ade209934cdd2efcc0cfa1c1e89c8e8cc2a1c7247f11fea1ac3111fd483cd3173bbf0b07a50743e90bf89ec1e5fcf00d147a73c3eba9b31ab291b00f15170eb2b0d6aa837580748d33053235a9e2099816f59f3a4f0d896d1687151cd316b0783532793d73d9d3b3e3b62c14dce21414e66c941165157920b4edc6ca21cbfcfcf58831f5064d6f813c2a76cb9e23f84c73342b9fc1ca6e7bd5a00aefcd8fe1f7c59cbf01ac5ca64ff1b03d82f53d1af39b6309cb90ddc82ede37b1b34fb8551aa12e5b7e2aa0b4cb1528a514eb9403ce906afe2264816affd34ec809d3c9f441a701db35169d0ad8b98668cf82cebc304e8753749ff6517f9410f365224ad6637926d592ccea40bec6984e028543d9967f6726f87d39624a37be22d823d0c243d39d65b5d393be09353b873b96ffc85dec3c798fad45b22e2ff803bd5351df35745db9f48b6bb2535b49f4e9fec40f58cf68f2d18f1de51677e5b7c2d95d724809cc5f710ebb0a6d7676a5ba55781a95d8ee6f010a960d84c8ae5e5fc9c8b91e5247ee2722683fa52b34252b8b1a7d3b49938aa0db96d34cfe48f5e51de7cfb2f98d486c5f22374b556717be3d39c4bed0fd96e8e0a41c1aff3d7bee0de8b5b917823002236c3a6da4f416fe19f03dfc6ef6823e5baf2d8c4999c0af5d79f49cea166caa60c5c5fef3ea501a42f10fa7fff6f0ea4844e1c2ff2eba4cb276d2e0dc1faa571117ece93d0d296cb9d7ad5831dcca96cc3021a166736b91828bcbd4d4f3d49a7d8c474da54acf314e36622422b585c56cee053e97133dbbc3bd00e1fce22ad4c9ddc6891782db6d9e763270527a8ae4e07487e7c0113a90597df9bc34b8b9909b08b3a5d1012a266c955f01361db3d1a9c71a1f903ac83dab5c0d0d174fd73f3ba7bfe1849de4deada5f2395ca456f29a5c7bd707b84f003c3d8626cd75c497dec6f32f9a4df37e78190024e01cc09d492fb6ffad95736704fb5d6b1bf74590425664f4693ccddce40b1337358c821bed25925c3f43653855e290d310b2eb0b9fc389c4c14a37015c6a10534cd9300a185f0c021346f3914de497577e2e6f4e3aab2f73e5916e09e60be86a7f529ab129614121eb29741726da9d4816b825874fb81d3223a42f46e46da8ef86447e19fad44d22ed75f3d1e52b3d778e28a7215d097551b15b3417064513820459f11ed2247365be59e4fe257d9d22e2828d0f6e8d7a8a7b5412243484eb66cb6b8c620afae7a37577ea7b2720a458ed49c662081eb4bf14cd5eefad35bd97d83cbec0661bd4c5a55b0294786da3f873d910576e0f2a593c7f086fc0e030256ff1deb90e9422f6ed9dae88ef249e268f32921e8797a3a3aa84724ba7cbe65f9de30b5b1a363a06b4956b06f9f6b9e121e24eb89a2ffecb7d9c0073bb50fe4766237f6a2dd07b7c5c175d77b349aa2f0dd33a77544616cb7a83dcf8ecd35650b1b24b2db9fa682afc74d553a1e4e25a8acb67eda924a6f253e309b1827bf4cdc3392f617d79a56386221e37bfcf1bcb69f8d36c236fb3ca42607db398a16d87f8bf551fbfbf16a72cb32d29cc52cdf2531102a1bd87d44717ee7e0dba2b9c4832a2def83d846245121f718822494d896bde2840cbe799cb99ff9836af4f53fba58a01e4277579f43e2096ae97929342a51415ad70096677809f6550f2d5bce147e4756d5999fe92587f4348037c0cf0835754d30c259e74c4427b4c1639a0ec31ff235ed42db2ff5e73ba6ec8874849784ddd6c585f80d7a31d22c03b62b29c7529aa05f817b1be123491d232653c4bfbbd409531a6dca7d2e02c0a4536e2ddfff85f4c91973bea40b7e2bea3c73e424964305c3cebcca653aaa240e98a112f06a7996eda1f5aa5f7098b66fd4e09a7c7640f85563e7dcd32a3c304e675a8658bdb4c0c53c6701c3bcfecd7e8dcae63b960d594892fb51d260d8a31e954d8c28fdc4f191e73b31a0597478255511e26124f541874711e43b03f728e15a450484732d282ef6dc2fe92c0bb1bda86f9a7270ba0e6e36d3b91b0023bcfdb53be3ad595a5836a6b83fceae3355bf4299e0c17bfbdf8c2ad4db09c86d474fc345306c8f3fd538e37d5cb0131378545e4ce729902a4c5b9692bcf5b0b9f89a76a9ae099b38b7ed5b6fca2b31400eb984456a0d0dfa91210b52395c58ef8229fe374d6e8cb1b6f8df854c951785056b38430a3bddff513f863956237cfbc85dde7457d4d2ced8e6ca0feb79736e110aabafb78a3f70cf5434f802629fd6635cdbf5ca7d38f338f1a29cfd1c15ff35e33ae1e40adfc64f25b086d09e57dbc7be95ecf53b030aa6d27c17eba6471ef071cec0413c6ed043d701af10896433cad90514eebcd503ea72ae98d47f35c4d88a745179df035de0ac58ba88686ae193b8041a9725608a3caaa4c8a950318bdf136899fe937154c4e6900be22953734fc70bc2ede126464c340a82875eef4a7bceb30b813741335a2bba15051db7a9f18fb67591b6d8faeb7dca0d7e5454e5808bc09c3a4668db787fc16cbd0ee51bf1610906e10c3d6ed97b2245314b68ddefb7529e4f2c6552b538ca264efd92bd2656dd954a896cd6135c78428f2b4d49aadce73acd8242a867450f6f095ba7ffb68d79ad82b2ae08bd141cf78320e409c57f1bed06ce15cb87e44897538c967a9c03efb97d6a75b169fcea81e845ecdda288f166d0b65d18c8797c88cb528f86148b887459c160d5f878fc114216fe04de2e9d9092f2aad753e09bb87c09d52b56d054bcbb9985be467d2afe5d24a6c849a83e631060c4bd210e4475b52e63ae68499d9caad36ba644e2c46054560244c14377e503869f90eef48081f6f24b0bc311c44aa9088a91a6f21b3293859cf71a6754243c5e72259489ea4a9f30cb5289aa4c5fbed38c8790d3380b625bbe9674bcec7375272bf7dbbc54b7ff9f849fbf0ec404cffeae918f2501ba5978dc4e7ee66693fc1b22cdd481f0c36fd647d0527d91aaa17b8aa465624bfa41d7de7ac00c83844a19baf34282ccf6144e971e4022e2e79ac1c5f8e59e1ed39fa4233245a57e20a65563f19ee15715637d98ff4b1fe33469ec17ef0ae307e45854637e26c7de346a671c4808b52b8c56f09c455e5f7a39c523e2b8961d9ce1c669cfcd00e91bd5572da9902f6ccdea243833f58e182cb6442d37bb071c831e65b0890ce18dd92f9b5ae7bf8783c34d2d679d802468755ab9bfbf7ff9cbb3768d96825211ce3788174a01b7bb1228325bbd8e025aa40bab2e80c421371f1512a77ca08fa4a0a9dcf2ca059428a6beee26361d51ee2988417434871fbd66e39e9608688e919fee65861bc3e01c24bb63366e27d9cc5839b0ad38d73d6360c8fc186d924cf2b6303c17b4f20e0867b4742c8d7f07e235ff9fe4d5f0513bb40c14fc83b40f2f104513481fd8e3b17ca055aa775d406e93aa95212a924d7088bca0a42ece8f615322a33e5a272f13023a52d9ea9f2f2475941ecef0a3fb20a30b458cb5e289c8001cc7009376cd9d1df374010b49d72f9cbe14efaf1f2c9a8b31f0f551d06b384ec0cf84ad9887c20a9e06672e057701b80c12d1581b9510b03c804fd97f85c9b18116410aeefc8c09a73633522466cfd086fcdf88c292c43282c083a01b12f9067f9debe8265acaa362ba1cb3885742e69692241de9bf2a14a97c453f03d95fa5f36bdc0b844b8765c6f78f5b2176bfdb33aa7dd5a3314bde2b9904e0692d67765bb3511b1bc9eba72460bca20e52a65c3011b7d8fc3d3ec549dd333ed97bcefac93cb27281ae3b01fa07f08027106ca9d2bed37a20b67ffdc3324486cd89268eb7bac6b463fdc1afb9cb5b20b0e869cf49f3940ed5766a5ece1add2c53607a630ed365c66607c6739c21c9afa5a89bb99020c5a21177bacb8a675936640b370a83a554398ec29c8ffb3bdedfaf708020f8cffcede74d596c54b13bf571a86a55923859022a379340aa7eb1a8a0e0f0d4fab3112489ac5c1b8b0787b694cd9c77dc31fe1573673c97a060ceaa02d4b340770612057267543aa68333951511634c17d60ea5024aeff9e47d7f0a19a9ac5ddd8a0435d00fb5162808d0b22bd218170754e5fb05579b0d344c3dce3b4310f6723dd4b7af54904225cacae7586b667bc794b143e137e04860b3d70efd5e1037aba484da20e25e472842364f4fdf3efc01e503ea9f80c38b47fb88bc8d781a68cce085ed9b992313a207d7ca1fd91fa101501555beeb44e81b4c8a003aa2eacc32bf0403ecee3d1229704f0db33960ea6726b6fbd43fb5ac1bae4c91741d6c01b541db9f93bf061332918c6d46f7d0d15e2fda42b0501f9ab3c6a38bef361483a3346442bcd3676580a42ac94433c4282f2ed109f4f9b7a29c19cbac51bafb0a894666ce2506c1aed48e4df120f4102ccd5a4a7afdcb39075f967025e2f68ecf3be1946f96f7664239a82d1752d920b128cc6990024674769b3bf7af38cddb9317a27add1d4e5903afcf1910e94796c9cdfeb1820a173b0933ecd28d6930f66046eb82c6fb0f851585ebd1bc5d48e44f953aa193ac0d247a17c85e844ef45c1a840e58438b63db1a6f54df74036486d99b17dd56d58e35c8944631bb9b98c8324d847e86b7c2382e84f22fbd41dbf126a4e6aaa5b971dc0a4dda80d18ab25ee801a68a4cec0c06da4557b9e72636a691a0d8e618800457f9550f16f551cd91f6b2dd0ee1a460c2cc2bbf5fea0800f9ac393971c4a94effdc4473bde2f8ce223f8f9bdc4eae2cda5a0014b6cd8d053b4de18867be683cf689f366046e92a3c673f67226febb15eec65f111375986e925e4793e52dc680c7e1a55724bbf565437aabd58720ccefca637e2d6f53404cac4d57658d86f53e9278e18d23d05ab30480fd15533aea5a6eab3f7ee483e966c60cfa5ac4a242ea3552b449e48713e356cc66c61b60c3b9cf18057fa96be46f5c216ee895309c25f65bf7f518ace1b343393b3a64080d4ec25ad95c159bec7d3e6ffac72bf4978632f1848294327a4721965317cd4306e2517b030e3e2a8d62978adcf254b31d537c7826d35030c6fbe65367e0a5ae1e5f8c24b3f4a5018c480b3dfafa2ca033f7ff4c1c42f5d0a186450f7321b1a6c5f0b03ad1283e4c14e8fccf0dfbd3b3271cf4869b5cd27b32ce0a5d83a6057f7b7a705c19cbd84663bb70bdf70803410ce9eb828202875515b61e6096647b2c323e53bfb60e446fa0d0fe616cd96d9283ede8833d5ba33e063ee6ee3452e179a6af132aeebf5e6c00a20d82dec090e35cd5da871a943138c3ae72b8ed78ef6d643e994ac3e1f38ab65985615f422edfab4eddb2219cfdf3ba5ce3c41c914db63e0bde7b34e24cc11c5ecdbc60ec64dc653d05ce1e4599d0cb38de25007fcca35098fcbce09c6be9c967976297a6d93cf5ba301a57e4cee2a3b6763902aef5a65affdfcebd1d8ed5093c63195d2eb463355f8a95b6e435e0e1d8f1538ba0906a3bf4adfe41301370b3604c544cf5a5c69427c93b619f47b46291d9d61441ae3a5a9c5e6a2381584a870e310bd642529303e22c9a8f86927c8a2a63669e14e9d3f4fb5d087a54785465bf316fe85f85ff17d0dfa145036bca8ce70f26921c5456779413f3a53945478fb759cc8c5b47917cacd518bc708710ede9283240ac39a5255184123b942905097fc02387d468ca05d13b04d08751f89bc43c9e0a10d3661bc50b423ce413ae104ad061103490f0135e51e7a26bedc5b1f816fd5406d817c2bec74642c826fe0859f017ccd945b7d037ce662413ecba49af5f5772bb7cdc5f7cc03f23ff678c97d720e78bee392fab9afa2981a0ae6ca56229aaee8c3c009df17d99fe744ff89b6257b141ea8b89efc2bca1475ca632ed16f3ea0403d843354a5d3f60623991717206098655f74277d844379ea737cc4da0fc5957ad2e9534c887ac03e1c240bfc0e49116c4afe7d2853da10b08196a3857d3fbccb6a630941af258c81de85cec9b1fa13bbad932f3a7a0a0c379eb1b8b55cc0b6fa69edf8274d8442dd277b3059dd88fb2863446be3c84a01f46159bb95f1e9e283a7c4750bed7c9528b3b95cdc564040d088328f7da6b14daec02ae9058bc6ebdf406d1a1a5b0686bafe1dafdd44124590115ebd0b5917082fe85e676884eadf0612bf15999fdfacd1c7e1edb117dacb678b3aa8bb3e9dc6eda2f2ac79a70ef736cec1aa3109c9e3660646fec8a1ecfcc2fc795ac7fc4ea99da979864b205ae52eee66137125a517c8de37ae6d8a4a2d9d32f4025daba9165f859d2f30a91c39ce2da7a561b1557f7d1cc48ce5c8599594e2de321ad56f6a3b5ed5f7661d3433f7110dfecea076b41ee61b763410ee7bf1fe35f19e76a7e095e565c8ce06690676a289e90459c0ea225a240dded52933887549b6346b4e2a7bc37ad4dfb1f1d92e1f5bffc4329c8fef30f77e42d735c3ff0b24f86df7711ec7e332988c1290afc178a6b2e1c46a62f5f896486112d3a5e13f425c844d05c987dbaf59fc29788555ba16a3a73f05bf7afaeb758fa7a7b9077ce2a716152f743a80e5ae5bd612772121dabba26fa845503699398b4d57a4dcb0cb53ff92f6d3766ca494fd2be45eb3092d3fb7b5d4188442f65611baa3dd642165e96adf42e76c45500d8e2627cde789d9adeae0da269ff9419c676d79ce8c91f5716552634aeb2f2f097f6a1dfc26c5baa5fb8b2cfa539fbc47ba4a17e89e8bc01ce4e6aba1f936a2964b031217faad40ef6a84a4d420607b9feed518c900aac02f6f8164b7cf6df89578ca96e7e51b8bf619e2e9f5efda005cf8a8ce6305e5c155b6b9fae6edf35e5c1ba8ca276647b9442a0e42dac9cabc93c6ebda0bf9360dd2916dc43d7da76a1f8c106da91248589495e409dd904885d4741b219dcdb79eaa808d6b0691f54023c8a3cde15c817145f0f2eb8e2244cabd1d68c20eaa3420a70aaa0c89996212e5b234bdcd0b8e96738c17608394b080a59b769cc6d41fa6d387686aeb9184b66f4b9769c411072e795e7fd317b0fa13c0ade64c9e52c564400b38060d14479019d4eb49adf34a4b9abdf822073ee6fa2e147f59b4c604a03ca0a797002e893ab9df98f4c3af5f2cf4a99720328904a637f4b785292824bcabaad7886f55add41d6ad0a491219eeff18e0123f2ef8a133fa4112f80bd9739ca59174e253bbf840cdc04eac77be685d9b73ab99abc5272d32fc0b78253bd4ad605223fbc7899ed6039c5c1348a84fa0ed4e782ccd6cb85ce6660b59c168c58e3040f9f22bb2f7fdcb7acd1296e77e3ceba43ea15b52e49ace1cf079b1623b6cb030882a9297309bf6f87c9f4f170a143a32c6e371ecd6795c46d96d907ec99a3c7f88ec115c78b58204c4d44f868ce167fbef93dc2d4ffbf47c1507e24b9796f3f8c6fd17e60d21a24b480626116d0351e039374fef2f0408754078509b95ad6c9ff8f22a3ceb73397c905b45a8b32b2c3688b6554c179fe5c8953ad246c36c36b07854fc7aedc142809be605c3c05a4aee29d3342b89447fa6442be21a3add57e9baa674fdc45dc98083bab611e050fd6c9aba336249c380085b60f9750cf56a2ef836c1e4dc5730dc6cacfff2498e4e888e98a1f074ed54473e24b8373f8f2511350aa902033a2a8fc1da051ab8c07b5c8fb7e6a03f01549766f8d0c26896715b121a5fade8be7e32f84ca44c22c9a6da69c09b62b02656e08fe9ab8257c94acb4d286dab8fb3995af2f2bfbe8472553bd5299197e76e25d203883ec75232383193cbeb1584f56a8651579109cfba18af3c022d8137672cf7936251c530eff7198c0f88ab1379a97b6c816d43abddcbac03b244eb16e94e3bfa59d3b90df6c463b0e84d1cdc663e28a31a0ef48e39fc7cf49dbc643c71a3bfe3e5a9b5a9e02bcc9131122c29c7832622b7437d4c8b3ba4305282cdb9469a928ca5aee97c681199ef16dee3c40d0e29f941c4f9da6b3d15d573de9e22910ab21fa324952471c46155c3664e8a0a4c848cee86ece7dcba9ac1ddf03c506bc5d6ebd54623c354fd9171121cd60c716de554f9201e56631afd63719bce2a80fa93658fe20ebdebca0fc9a86b7c045003ec343207820ec84710b247526cab548c248b995d69642940fa508454141d9f46f9529d10837932d99d5c1c2a01d6df518c5c3f50b3c7fb8ed5284d26e8bc51c3c09a6e3e12779d4029d288de3efdfaf3ba3d47ef16615dd1c54a2b7ed552880c92222b8fe142ac79cd1e3eaf8463e7ee63f9dd4b2a3964deffd25878165fb97fbc4ccb762d43dcebbd1d247639d5793b3631a24ed3bef0e6eb17a0d4076fbdfb4a74c5daa659a427c0405c015111729c7a65321c03a83af894bc4b37b63a57584616de2389924bfd2dac664745d4533a350d36882a1f20cba653c566b075614b1aa6d2eff92e2930afd2882150b1fe601b7233e2331175582131dcd78881c8f7da90526b0376251650a8ddd43cea73ef23bf42448e7bb1b7d672ca076429c2f3f75fac84a452639f426a2f599a4f165668d20afa4722646af5737c755a13b2f4e625a55ba3c4e3712831b62a7fb0f80841a220c52ad73eb594dd90a86cbbc48efda2337149009d63278c45e09043b5b12a3e00528989d387f74e59d5745fe12bbe046164c3a41cf22960542ea8face557f951e9680dd22a09df539bd6d264b29b9a4984310f6a58dea8176c55e0cedf1ec26e2b0aee93b2e820f31aa68a0b961d1837f28caf9d24e6cc8632f131422eb0dc96d1ab7087faddd82e7e36b65081c8369741ced4058257d55f9dc20ac0527434e9ad2e34c84454a88d1aa2ae40304755c93fc24ca0caf14d4e5d1670623fe420c6e6889b86f7a0d02bf8537d56f4320cdedb39071926a9880315c3a3e7062e4331c6e5a0eacbb5f659e82b6c55465f1371a104c0dfadfb70dd61dc2bfdef1336f9d9824d7d7738c961f0cb17a02807d8c61445f4e54606256b40069c3ab37569abef2e6821e65d828b1cbc904444ef8859ae35d06e14bc280458aac2f66a6af75cee721c55caffec962f1f3af37189f203b607ad4678fa5f62eeb63896c5a734575fc3d36634acbf7e9dcbb4a666bb7a1a82ab9b9f08968a593ff0334a1c0cb10c2e3e694a6a55a4f8f1c974b96b28622714e73a2516380e805964302dc3e8f30cb37040e8618cdf027d3d0af9aed4f1ca966d498451e1fafd28c330822135acf1da56ad08eb3bef5022ff4a8f6a81ac403686a6cf60f789ec5e3d83c0d1d9f1b91934ae3e013e676de3a7701a90aecefe8e956dc5c87ad0156986c01a59f364d823664ee7eee271f60c38d98b6d575503a7435d597c7fd15de77b16819fef5f16d421a122023f8abb4e65562c4b9179d54179b9fade2a222977831f40b69ae65d4d3fa39bde58392787ff8e29e9816f3921bedf0ed3c9c977a71f932a00e90d66f6fc34cac1c199a9b73636ff66b6e4d937632d4dd653e95bb42045e6b37165c23acf39c5c8be6a148da5a8916bf5098dd2a67de3d43cc48ca2a056d558abb4254e3c9dfd51aa82be80f9f9f653ed0f6ad9a88b2f7ab6b66a277d8f79db6eda5acb07d735cfae03dead8c84d30b97f2bb962b484fe0abfface43effd107d7bcaaf623bfbbeba243a37728e5cd5da31d5a4e93cdd7caff239b5a1a17fe7287bb2194a05d6726a4e6bdf6781f5cceae8c2c70090f29f64d04ff596321fadcd1eb60970d359fe225dca143a373e5e1a52288ef03175a0591604bfd863833798727f5448d19c414badb5669949fdf02f0307895df68409897bcea255aacd4fd989e2391e8951e88ee77b71d076300df1ba85fe9b34b60d4c4d858c0d45c8dd136981f227d9177e55507fdf23afee12c78e4695401d994a9974ee73ec6b1bc67be6b80cb1cb92a5677591f4245066ed2f4b7a7aab01414e3ed2e2abb017d69c2d79e7a52d203e598ee05e70bd0f037786e42e599f04cde7641fe194b70c58e602b8f687bce48b63827eeb220e71895b013c24c3e841796c540d218ce9e1de092a4181f0375c6bacf42acb1234e54a24f34f2c592fbf90e225d729d5da1c9f6671606a9afec60d506d1f188a428f37b5d8f94b8f12b42aeff90950355f930d3838dc9a5bfb8a7ec4f273c9fa7a21e19f6879a2f8746d8fbedd0d754848946fa9a7678b45b38b8752fb4f4faa03e0122e22ee3eafdb329649aa682f654ad87c469edfe376ad5f551756717ab20094e8c8753353764fe60f20b96c05d28566c801a2377fd4ad6cd7dd5240d530f50946f8d61a38241cfe83fc66731e932dcb72d828baf29e1f2712f1e060f0e62d908a5cdecfaa0a91cb7a4384a090f0c8e11164bdb5f9cd674850f889a6d2c3616842b264e940153f808ce82d2469984e9a0fa9ef2b9639d4982501b2579413b5a1c895abf927f9070a6f35367b3b51c4d909edfaf41505dc8b93eb9e2cdb5b0ba1ce277856e444af8ef527bc36dc841145f4a0b1d7fe7a4990cdee42fca77453198addac9a01373656b99bfd1cb35034b5336aceed251c2aa00bdd6d6b5c0679dd4a672b3b2788b133fd9347ff183d126f076c114964557a2e6fd5ca8385316b94ae8161d81d84ceb36504a1dca113661c6621c398b9d53c88abe78a1858493c8c017ad55dcf6e82d2c8c6a186e6c9c850f08696a74f078da640d48e45b2b7ea88b06baba2152ee9a4aa57d1dd40a5e0e023dbffa7fa714e3d4b88c2b70c9ec1efe298d25e7d60e7a0b55fe647eeaf3f8a24beb1f7bdac7c3fbd854a315c16425eb260358384bde353966db85a38f1022ae13cc3f8f19cfe64db2ea7ba890f20870f043a027a3cc98939f7bb6c892f913da06d057dce35b49405a6dfda34e954ba728184a3a0768e6d8d7344cf7af3d16153273d1c7d77a1a0f76e6bf53f83946a5e62a51c095ee7128beb8dc5601355835a6769c9cc603f5f2e9833e222238b0c5983c8ebe9d7970d400b33a31034f391c19f6277fdbc48ebf7beb269d83171e28a3b11f449d40ce6732e83ee7fc055a78ba7af7f40634eba6cbc72cd006462bbd729c3cd13c930ed90ccdf551436cfa9dd0971dab27b9d4732c54db7be79373bc2f51c5cc9f255eaa34a83b1181f2b5b27b74a53a6566d7f0ac784f28e0dd9beb2ce96127c6062b1c84c65bff99600378b27448558492b3c2de6be5bd0e71a5709d1052c4c26188de7c2d22ddd11a7da18a16b74e2414d6d5c5692ca82931297f4e149e34b2593a5fc188d7c4d2571278db1a1282aeb52a1308cd69dac7e09ea26778cb8b05db5a6d50c667c502e612c8b214d6eb1359894f6b72f2d72a5a07dc0e564037d55c01c3be2c7e87fa072e1b8c7142eae4c771b97034b7b9f8874a3070066564d55acd5608facec11404179fbceb28b171bded4e072b996b6c1e295b6ba9647c20f7d740cc9e836d9f7103771897cb423c4c2d51b7bd9e4e6721d6366387937133795cfb10c3bc1df653703c17f40bc72b16de70480d0914c9b956215922613d6614d11c219460870aab9a5b3b3d86d6a954c2bc4b69ac96034a70939dd05aa4dbdd44d7eedb94810b6f6e6d295829de1f24c62de49dd9e1e7085a683c83579bc968fd2d79dacd30689a3b224cafb81cf5707ee2b1d0cacfb75c54676beb3b4e544f4d3353fedbc1ea4301828c3a3a92397b7cca8e4a8f38c44af76687e473e5bd2cb92e50e27236977c4be481dbfb534e2171c1bcacb725a66836f990d22a9e61145333cd1843ddc8c6438af62860504fe4b26213545b0ddb65c8926051a317d8fd5293b6a022d31ff46313931a8afdd9351cca525c779b16d37e6a9b4047682a79b5b9438970b8ced14a72190413a0a5bc5318ba6523a89b2c4aa2eec388e433271b7144434a09010d8c37a3c5e21d8cfe39b3867669c9b51e356e2876e67c4bff0685532081030f1f070c1616f4e5245201a69b4227c5463f5267294c47733c44efead8bca2b20a20409621fcde532098dea7203407699fde1c963de86069a7c071558076fb33b4313e7b38dcb1ff4f8acd2c7e2bde8a9b9277e5c3bb6396217d7cb1c4281a42260b71c3ed72b7b25560a142a2872de4f5725101fa5ae80f34d6d5855b990a06a7de2528e57a14b97e31c742ec7ac70077bf35692feb4af4d09b50c68f8f1ef1b8b9d90dbdceb9d4033c758f51cd682a7c144e6be31c260e19e35882052e1e888c5988ab0ddfd1838faffe527a61d627608b0281012a655c62a00b7d8b0728dff8d79147fffe52552ab896fed0bfdd4b8ef1fdec0af4d8fd57e377a7136a533f4801968c0a186bb6f0b85c64c534463b2578cbd46de8917a431c095979929713b9234a323a4c3da67d907a05e9afe9b7f424d96d35e4515bf945a8998b95dc5bbcb47c0729a1c1f731bea5abb2f78db0546b852f14167989a48ce090ac417aba9eefd210ce1eed776cf22e61a4fcedbf5b40f100045299ef9f8a364c7a18b167d0422aac8ce3c84afd11e21abf6208d3fee0ab0cdbabadc58fface04363b2645bc522a4f2df64ec7db21dda01bd48442568c59da7ae34267e2c1c08f505fbfdb5fef1280f8f6e0de2941d4a3d71a9506b038b5b688aac2eb9eab1e1d63a3a20234a49314d8608b782b71df84e86f9a292ef1ccea6a6cc7a97e4494fcf03212d06c5aebae006269129b5e22c54d2106b679cf0d47dc8e4db63e6d12051847dc3625eb2e2117d382e8a561cfcec8cff1b515b883c791c3816c3359f790e8dabfdba525594fbd6bba2851cd4450b8826d4160d78685c6fa2e8c1fd563a81194d65172ba4376d521c3cfb95bf723291f0788f42837272eb514368529615f3c30a8e2c2e046b387f1fb4d66a51e0da8c131978c609c0c03d13107d1a7728c9c19e366a6ef45956724634d26acee5128948cc098cf621ec467f13fb83d1bfa8e60441fd79ffd624c431e9125b8fbc4136cee4b0f2321235a600db51ce00ea2f84838f1502149133b7482aa95fabfdfd8993d2bc0169095e0adb4acabfdd2da226225e314d975aeef8e16f64442fc5d2fde8078140de91d78495c10fcaaff51b9193609fa80786f211fcbacecf3f01fd9647e49df0a34b36cd440205439dc098da02abf7d405ef67e2951c7d81b859980290daa4a5602624763c7c671d823a5ed93ff94306596c3873acad3a20bf6f148e98f5f504bd12c7a6a9846a61af4d3039e25cc8ad2b9443cbedcc25e6b3a776f6da3c35ab7efe6f52b73b25062e3f623117c7127e7c93b95cdd1b51ea02e867cbb57c4ee47e1dbb696f414150ada34054185f18a4fb05b74d50f73cd78cc7ba6883fa0a44f4d8fff5601c83226d0439a1e7fc5a610139413b9591bdbe4adc6c4ab7f5b71ad8a3878b3c117d21f878b9a07e2da9df661a1fa73a8916df3846b26c11fc2f7ffa3c816d80ae1a7687b602564a771f0654865e89b45df2bacbcddc99d99fedaa87ea608f4883278c89937d6f8fb22fe3ad5d7c8c7748f214970acd9c4724731c25d92976c2cd93fecb5ba0b23072e80a7ecc5fb54a0af21939f6f02406f63edc765957c1160101b0391ebaab16f9f4730b3defbae0803bf8b7b5593e74915a1990f63e253bb0309be5783dd78933b410aab3cf677f42bef1aee366ea13cc44d2b6a35976c9ae4b5d0a4e59a146fda766b434f98df1a1d63edaa7441dc2c2b8800aa11ef135a6ac81aae4bacaf7f56ecefae56cf90517351c1ac9f00c623e1907e75bc9550471d1ed5ecd4e5b262f39b155b8bf891b865ccab3f066eaafeb61197380752eed4e49490893bab2f4a1ba3ba0f381cd1a0bdb6fdb03ef764e1c9874f37f81871199b612288faf0d4a095762f2abbdb760fcfdfb38c76c7e22b9ed249abddf7b79efb1bd64fd14262d96fc5cf4c9b6799da7e403966fe9e4ae6b85289608c287213fe6dabef5a6bf8f1d170e44d1f8cbad1147bc1713cfecdf2ef2a05b18b903b541c505fefbb2e60bc3b3d086dce6453d6de63d539b24eef2a07089f2cd7f3fd70f3989010d019d9a0c436bd9e62a8192c4b0374ea18b6e53e6a0ab951c6ac73c6beaf9dbbe9fde76c4b32c00383516004ab2b88b33460e49e0cf80e3feecfffa97579b3b10a8c9b1d81d7ba5ef9b97242ec5574bd332575780946915fd0527d5d9779a029bc36f93d85ffdaace08bbfecac6a71c7e576de0786d71e7f1ca824d1f60705191754a6b509abc499243658e6079fed058c8c0f4403eab89c328f0cca10cc7eef83e0bdad16a29fef5f703b55dbaae005db2c0adc52b94052b9a657fcaf97bf3fd432a4fbcb86508b5759efb64731bd8d642a35c57e1e8992862f3ad7b2925b20c6d6a17348a44235d299b3a7488af501a062dea7109c29330cd7deac266b3ca31f600a9f3ca4edd5318ed0af465e4c48c3467e99b4efeaa6f9dba3746e9ae5f28f861e2195801bc14fb30239b0260f78ec445a006a50eba423bd82ce6022f337e4459977e409e9c16f784ade807966ba5f6ecfbbf81a359ce74156c4db578b29e053766a075807480aac2a4490d977684d15ec2103ad11304a0476b17ef1c676d27f9e764f60b16a9c19a2261884afd1fd3a3b055efb92ea22640035aad5696bdd6ce81276c6e2073506f466ec77a6ecfca11633a374939146158fbbe42df946dca6239ce5d0a3260d7bf30b8018290f99204d106897cc04dac0fde2a40122dfd55a24f7ab014fccb006edf44e442989799cee6fdc535c8a261eacd84c2fb90cdadcf3ad637dc6e94fcf757f796a12acc1114ed63285ce4246d8722eec6d63b90be505477f0870cee5580658f831ce7f425189c3d96096e289d05bc99fcd048062dab0085aa10fbcbb58170bd2e2ef9dc389e27d1ab1ff5c9bddb29c701b6f025edd9226b803c89e2b1fb596fdc52b78b542d8e376a92483b23c3b155387d239b1160860c92a9f0617a900c23dd643510ea564583ec7b96495247a8a8a81add093a747313a6d1416ade0f78821ba9272ef498b17d7be10440736e046e6d431f8e090462f85b9671b9dd0c3723a160462d33528c1e08a1b0600a675f81503ac7e34b926b548a889fc1c36b2d0c457a0e0926f858d2bd7eae58aea788c25610db69ac58094e5bdf3ccb3e09d6d129fee4cbb7c89fc6bcab0bb132eba914e07a2d9c2f3269efc5e159f0a7ba363768011acac6853827a7595ee5ec658f4d374528cb7a43e3ac518ed20fd65598878e9cb4ba293b78c0b9641e69fd176cf10904f22ab84462558a71dd1d809405c4a0a37dde917eb6faec59a4b828e156e44e0d77699ab6e366f128872278404a3f71540bfa00be1e4c34ec424ac3b370ae22460d9183688d08fa160a23e3143b08fd890ce7f2725f22cf129f54f7e0fd4946843ee2e950f321c5ef3291a0fde8cb48d01790cfff725c0adc7ce99f7510644427a97438ab6ce9ddf2dcbf95f0223226f195ef4818fe13647be9a65e3511147bbc977e2736a0e51f22a9669099ebc4eeb76d42226ee793a7b95b32888f3ca6baa289981589d400aa0158f8e9408d461d0df7e9f9ee9670e2dc9676548243b100ede239be65f9db9242c76a4c8726e2b184ef919a57fc8ec12a6dd8a0a9f1abeba88d65b9f003964eb48f9bc856096ce308843c14d19fc35100e5d2b9efe435ded9063a00319ccc73fd2143ddf164b05f86c98b5a053a48c24de1440a7bc617c18615ef4aff9e35f7e84fd00ed9f38ac7d60a54b3ad9fb0beb5ea45b4cd3f9e14805da99520ead92e54dc8966748098e4e8ae7fd7c57a31242cd6c1704be3a475cf1a8c1c442c359cec2de096a1c52fcd903f45622891c6b4c605c7ec782d48f31e8025be860119d7fe8ee83ffd6a6d2c662d699dc448a2f3e4d05e7293348666dfcb07ba08a4b30b270471b9d8f5314348e30b1e3413aa5d2b60b4c71d3829cc43338478ca517de746eba5363d979a2357af6c94c3f5dc3b93b09377d250e27f431a4a1617987f9e2ebd9b82abf9d009dc0871a088a799927498ec86eded5c2da959d4abd5111b9377a89bb13ec883e3045c4e61c96f182ba2e99305f1c4dd545ce9b80d8d89f520b59abe2d75170b4b4a2f3992b2dd14acbdbb53e569bf6a3db426de57fca15dd5211c6a52db1ea6bffc302f28e76e5135e82309a3a02095cc28787866ce376f2a74ab04896aa11ed1c72bd2b1e741b3040ee85a099a2aa31d9cf8ce7543dc7d535c9e5dca6b619920f57f9386a2511507d2170e86960b04c0425ef5ee471ddd3d35d233b8c9e1df95d2cb8126d97d3e8a4661b97dbdff1ffe7f862f189ccb64ad9f52b2efc57db7258a677172a1dab6bd5fa75b5074e61e5f063cc007e88708f64f2947c010e566109a7df4368c324c3452fd701041e5346d05d8decac92e886a4550feae33020f066abfa4602d9ad44c9bdecfdab5226b584f8068206ed277962a1e944cb97da4be3e764fd1b4f669808c4768014d192198f5952ef491132c953c174171d26bbfc0067da7c3ca4d42d8b4f0acb0e8a699cc58c080d6998c6dd1d24590c74aab374d8f1fffd16d1248e476ba8ee6342734fe43f635bd675df85c537e56e21ec3b152574b3aa69d6f4695c79484289a80de471cd5f5fe9070ca95e5ffad011ce1b2b18134c279d29caaab13a4f1d20de0fb208358b03eb5c69df197fe033904fa1a276aac7281060dc9b4730b0d1ebe6df9bb2991441a969b9d0da89674dfbfffe685b931aa57570777b4fae69e28f2a341d7f40df79ad0ae7b04692494bee7dbd536f8d7808e87ae7b2ae404787cf9d2390de77b23788abe536c24a84d14fb9f6440a62f34dc03c7a20820bc1873bea2a540b671c9583522ab975270478497cc8b4133c4b8ba29ed11e60346e7e7ac7627de1553423aa68b21c14cb2a299b219246e028e48a421ad0e45b3510d12555c4e05d1da67ebc860b9b415d224c276404e15fd57ce7d3bda2209832a422d0949cbea4960f421bb7ff161d1911a7ba6b68567c0d810f51aad72fdcb71d2417cab8e7aec42834f9279806f746fbf82af4cb8c581cfd18f0c746be3ab668553ab5fafee639533cdd58f1ed80a2bb1d014974245049b01468f5ba8d3c35a5c2db258d7a11bfb1ead80c0df1921b3dca190c9ac90f68627038ea45d01499b8e2eb06abb471f5b65ca1161d1ef801a379b021371af38ae66ddd05f5be303acf65a411e4a5752ae39031643ebcde02d9742b718a7ca9c652e1da25fbc68417dfec3b56e29f4e4277c0da80137529558ab5e6632a1d595048904cc2695a1cc384307743db03491992c59ccfaa91b43e13606570bcc55241026086de9bb7ca5d76d74d3cf37110de1a1b91d5d1a7aa2442cad6d563b56acc4987ecbd007205ad1d4fea8320ba34d0058c072e8f8520f774ea9316fa35382ffdc9f6b84591170021a3a86aa4fc7057b2b13c4ba3e21b552e27023518a66cc16378549d4ad3d7a59f133f81392630058bfa464f9aeaeb4a5587e65de319153955db7404c64bf795c51fd978bcb2d8b67c55738dadf5794c8e6a61f3b80ed1a0b9231bd6c03bbf5054c343cfb1a71e9a158730f3b5cac3f8001630c68bc50f03fe452caac92b9631b8d9c2df3c351d43b330cf6a4766f187df8f0e8999dc1ac8820abf9db3994c9fe3a941117f7291f7fedc18d56018524e8c00519d66504ec302dc67e087b2c87d4cb24082c49aa16e172aa0b5d42bbb3961867d1e8ba02b9ae8c68b8d0c3e5296a7e04dabb760e19c51f8bbf78b8c47fdecb9ab006ee4cf8d0ad21edb642249c857c497c71bd1727e54734abeff7534fb8bc190eb8c8659eb070ec2c0aa30ef1c99f5cd4c1e6ea8973de253c9276d0ce906f99caea365c9cdb732eb4571bd2eec6f3fd214b8631407c1630dd8f69b541b2bf67c6900dca49376762105ed94948abd5dcb068d5ba1ec7efd4656d62bf2c724ee886899beb8a86daa8d31e9a5150fe77539ff7254ad75adeb24e8f6eb5d73011fa453af006c60766dde8cd495152b27f4fa693eacf9e7110945bb72f9a1f5d32361ac75714c681c48d51f6032317a53b5129f462bd59650d0fcb8da72bf22fc568b8a671f876a99adb5b182b8f94f956836591a97fd4c1318ca45db71d5efeb431ec61d27c05330e93e277b633a46a67b3199dd1e52641528324d7ff274a1358d6c8258d2587f673221567e71d6a0fc1d147435ca691e796dfc8125573d0abf0aa04742dc7cad9f847a2fa10f3d19234dd9ec25412116bca5ddb127b8f1d23c20f1d8b2ab2e2366a10e05cb1ec1d76f1cffab90547ff670a8081f21fc7e6f6eb32873143ddd5725f4e3584a7ec9aae9a3c66b572ec8dc230594babb42cf00d2dd44e86d12280ee377a5fa1d0e41cfa151840523e3e38aea2d4a6b1f44875b16ec9badba69a33ff07673212e84b1ebc6378379ea81fab58ccc56abcbfc3bc51af3bbc04af9210abf6a2720f39db9dfd5fe609974a39e08b8459cd64e56491d1e58dc4b3ee1607973b8ff3bb23b3e630898d72bb4d6d73f8d8a855518a580537bcd2052b76f6f83be9bfe6f757ed9b63bcc9a9d81fdce77dc9c05fe43c3d3159575395b38ee473dd3c85be9e3c5b1e9bf9a2dc267ec1fbe61becb49bc41a6799a4446a788201fb8398390befd81d36c4709b19e496d5122fcdead0781eea0c87e2ce6919ab32d9a88aa9a346218940dbf51667e32dd5ea92205e1953a542581ac46bd74f68d40127b38dc42f21f312fe27d29d1e16278eb043843f58105af4d1482d7e4c3cb8fa8fd03a4d3b6ab8cd14389ac3aeb4f41d2c019a34a81065573296cff109d163fad10b161fb29801a622e1945de1da904f9a46db5b2fb9e50c27a92efcabe50338f1da88e2f0f2217c19525f5793030cf07cce7fdebc2e3a5fc1a98b7adf145d92d5f9e824b4d79b626b2e16787b7b6e12a64f7a0a71ff82dc1974479688323cd696037584329ddb2d066743c4524cb7a25ff4dc1252b73a43e79f460aae8939ee3bd13d06ed1371d640b2fbedbc70794ff58a033d9b4c8079527b9e2f117c45e39615d0999c38cd68854c05c27b6819ff8d7b6579142c41caecbd8dd567fa856a9e55985260998d23e513ea309b2d4dc6be073eef9adb4ca2d5ec04d926fba98ba0ebcca518621d8556cd60b2141c55304b1e511e0488293cb9fd29900e318770f2bc60c8f4d7ceb9d2af069fabe055a0e4cc9da3f0012204bc889319ac8f1abd0e5c882f438c3d47d6fb1ddfb97f3face4c36cb53b59893526e28826c334dc4c28c6460a54f20050f694f2d9ac378bec941d433293fa9824280efb09b0a851205ca1933f391dff222d38b0676e2729fc498181f1f481faef93422829b6bcda0c84c1753d260b51b011b4a93f0e44e38e5242b1f06b31164d96e67978eeae862192415fd4e394983b9b8d1ddf50268f7a42186d9b9ea303e55be637af5ad92b3f7cbc905147c70891fe7fab513386133835d927218b9fd252a501bb2a8320c1cbe850ca75ec1580be87491083d4a626562101b7c1b2259181d6786af0a9a92d6ea2206e45391c604a6fdb34d35af3a28c4568b31d99dcf60be39f8118ab2fefa53be3a530e1d13be50dad01df84549e5c8334a5c4199507eb55dda6d4e676fe418a9b6c650df95caf210432e8ebb786409e8dcc436abccb8650d611597b382ba5fa32148df1d60530a4aa9508a7059af946e49e5568cab72ba2cb1b5f1d25157c0e9adbc3c8249d99da300f289f14368bbf555a1a611e4f2911ed4c81605cbd346e77da1e111b89fc99ac05dd77470607a4734bb9a6feaf29002044cec4dc9613f63ad7c0fad7aac99f1decde05375efa09164725c67f8e60381a5f9dc9c1571f000658941982b04639d86a89d57be9cac834109695f7ba49206ef711f0e571ffe10f54af5fa4f71450764e9a01f4d7dc34fa4f16897471b640ceb45c55db82a36a41f9dc9d17172134a296154f0d2a3e609bbee2a01b933666740fa845401abfddeab32447829948a4bb199acbe566f7788acbc7cf9111092e48e5e011acc6fe3c5d593d203d7c3e4ab862f1bd1aff78813c589b7893856129b2fdc4f234c1735d78e7eae5780d78be3e30e9653457f0814e6c2c4ba60078676d0b833ff5179e397bca8e895500118249e09e0c6a59c2c14e6db984731130c526c828f1ca746b63c2b62249cc70ebd8b9127ee871a075a3eef69f01c96cd2e307922412c6bf4960c671c5a72048dc66a05ba0ccf02f713fd6d7ea80f2f72eece66ccf1228bcf8c00d7286fdaca580cce96ea6b6910de21401a08587a20ea850d8b56078720409ee8dcb7b58adcb386e8d478d315e9b19784d203a944e0c6631e907fd42e2409fcc83e3c43b412db13a7ecda12e843345f5aa4d43e0f3713db9a8f9b4cac32df51367a302ab3550581375c0006bf8e32753a06c72cae5d96817fd69eb0a323bfe04bd07b962ea3277e429833c2591bfb209ba73c4bbc7db8351e8e14ebc638524c68991fcd9c7b40b655975eb8f9dd7eaa234faee11ec239f065a7775b5687e9da6d190f20bd19c146124747bfd2077e2ddb9dee3bbfa1488fa3bcfd26bbf79808c0722ab3377c98ddedd392f6d755cd07363a2307b162b91ca2c62954b7b1923731c21e7a0afc97e83224e83fb395d7e88af217deec75215183f583c9cf64dcb27526a55831ef17c6059ed32a32e27937f61afa406ce7f42e23d7b7a0330b75171a7553ab63343e95d893c888f5f6d193a3efafafe4d3630b0bab24ce3b04e0c7be5219cf9b18e627b41b41aa0573d102ab4e89266038e073ab5e90c405af54e2adc5419d7357b9dde1d48e7bf02186a5bef2e7365b0af2efd03da0685b2f73d38bb49f38d9c945367cfd546b0c32c0743cd7e8ee3c95bd3e17afa2ff33d14fb9fe1a97556d6f79a1ef95e8da6c1165c6cc78c35ab80228a3eac4a597b6e21c74a831a781e9949ed6270f098ebc47566c2d2adc910d11394a3e05eda3e7440b92b57fe8bc0ee428b30cefb2715ec20ce62958cf0419108f0e28cbf754c756a2395ff273caecf4ea3064c56cfbb44ea75acc189fe7ab64a5efcb698ff6db4fb9de6bacf65b3ccb12ff953893ad09d3724f474057851cd8920f6faeea04bc24ec20bca2d286e5be5bc8a0bb0ad3947df1262fda404138b493cdce74eeafde4c7fea9c153bc804da5f0bbc6b0bcdd44b1c885d28d8711f7e764fc0c9dfeffb479c2625e0537deb387814763e5a4e41f625eac6afd9898244443c66f6823b17c9b39c9a8f36f409fdfcb0415786e063f4f283a9a88ea2d7951a5972b81a8feb15694b59a4f31327b1428c702e4dae8dc4b9e663bb6fea9097ed1a47a69d9494ceb3b2314a7381c801cde69b64b95c70e14e71f62416bdb8411c2b1c1c6351f4b1dcca3f9c8f892ce21f21dad58bfe8b671871348f4679d5938758bb27550014438def8333ed7f90142a14cc04939474f5589ee16d6173f89a900daaa04432be93c846a57b19137067f44ed2cbbb8baa0473a01d1531ace43cc1d8efac4c5c743dda807ae65f0de3a8b77f90d18b0ac316a255d2d2a616e982ba8aa27cb994d0d53e2eeee5ccf53d3df0ce76acee8cdbc59393c0e5f6141fe1e77a26dfcf4f61245e36a2ac73dc0f3234b08f42758187414cc32d1296a8b0df86fd2f01afbc739994bc5913cd97a8dbeea0c7bc2e548b09b60f8568551800f48a30c4af0678002fdc1b038cfe91bf8efdcb9afe0e92eb2140c2e7c9e6a139f1cb05379d2d78fc988413ebe83fadd23ea02b2148e76fd3031748306399dbf2f8f9c7a5dbabb870ec0282f76dfaf8bcf0f5610c2cd329684e5eb3481568035871e30c3924e37791df5057555152d01025b0b72a03d58b3d9c24feadc019898f9ea0e111156a6769d3493d06f0329b44798f9b1896c3a4151f97cbacd8c5737fdb74fbfa1627b6f8573359d325678ab62cda0ba5be96b19f019e652eb3a475590c787908bb16a22a4f9ac1461993070544da0e6d8fb5b10e8af7aaf15acce9019f8036c47633a893c3f12e919a31149319fae89b7246d996fd9eb974a4f7efdcd9fcef7a070afe1e88680b1ce0588078fe26eaa880a2fadfd7b339bdc143f60d445339adba058bebfd1114529c6ffc61e724fd275c2321636afb054fa3defa979da1f4d5d55825be6620a35fec5fbbca5a62216d946dbfcc77e1b29de0f83c9aa66867aa0b1c7a5994b6d3effad0d609b8fbb50a8b628fb30760935fe1a170b89250e25228966d7ef4b80224e72f945b5966ac986608dae5a063bd057c622143e130fac753f68e639e9adaa2162f9997b03239c66744e1679f0ec31cea6563ef3e8d2524ddc458bdcab4587a6b1327ac819e16865082e00af32575ea80a50205ed4bc826ca00e856436a2d3e18c9998e52f90b386f27206fba3b40aa7da88039785e8e176dfef1dc7a0f8795b78fed7682417bf4ef92340016e18fb97c8f15066e52532c30d6477a2873e728d62223c0233cf78fc054f01e6d80503a0d88462347d24fd8e8ea05ba77122a78949cf732be60bff00b8819103d54e98a66080e1d15f0ff013f275a4104dfce88b5000a70c2f95f16aa7795c2892ed40d00732543965c8ee380355c58eae46638de6d7438850d10ea4a823fb856b5a29515113cad62ce40a4e0ed94a33987c1b7106d2de4601a75385e1c29bb9070b9a39d23471d5568c8a666c3c93d6ad976e2f60c734170c8169e60bc2e5535104c1e0d3096ad112a539b45fdd3fdfec179bf529ef13a6e5d97c60ef5995324e7cf83972770747e02fc1399d69fec4e8eb76a74ba984b0a4c7b71dc6235fabfe077e4bac2ab8d3d8e886f099607ea224edb0bcb26be702d136f044deb751ab8e5fa4a6672fe91f254d4dcf8e021c35e5452d79b8add8e3836a3d87213c5f282829ba3c3dc30db22109efaaadd5d7caf206ebca6afeb492bd65791ec099f5588f46be7452a9ddb7c3be1a983f749abf25af6d6dff3b5a7542c8a815f6d105e5c0ef0339cc3520ba9bc8eca0e480daf821466a2494183b275a9358fc866da8572e501c14cbd370afe278c3f1a8eab76200bdd248c31eaa2c98d6ae88dbaf8beb1b83a0c06efc3cb8212f6b4d31704514fece32cd52a272794562d76e9035d31c217e4d8592e2c4172a3123fe564b58b8c99deca0f6c1150773449e870ef9e9a5debd1554bd9bdc38ee6a38c0050213fb42d0aabce8e5c16c60f3d8e30ef70c61042eec9a839512f0dcb61cfb7258fd6857d3118580cfff489e2719ae3d20aa85ebf0c21d7d64f30ab1ffcc116b4d579114071b7e2d3172c263dd83b406e8eba63e199b1ffbfe8fc6073d2f43114a0dd18d34856c147a2b35037c7b019f9951b5a6f6bbcdcedad30a8513f27aad5d9e2bc66a757d8b99e9c0568df367ba1eab9394a3fac121a1dfb6772a4d57287a6335a2dd045f33326736b2bb25bdb392268d1612d41ec335935aa75d513f1f660fab33950f15a1eda15698165121c09f4c6fd28068ecdc317693cd6e2822abe92a0e641efb3060d9f2ea594dcaea22861141d31e3bab21bf971d24102c6d6e1de987ee6921613e2d4b5f4eb09c91c420aa77c94ded93e323e296120648ce4acb475c6aeae9bb7a21695ccd2d70d032a4050b43eab9bd9b14b1af0fe0f1c2619f33b93d684c66e86913c47ed3f35ee98434077e6aeece6eb3e67d2a447912b2735b55ebf0e4be8592f8f3a491e6a2dcb25cef96ab05ac39bed6bbf5cd79ae1ee3b298c62177dc927e453b4107b6daa48faebad227135c6d6867e21cddc4629bbadd18e48d54b0fab369693751e432cfad7b50c0f2f54fcefa93cd67dc47b0279671ac4fa6494859e3ba70ec024cfdc47dd72343525daf4041c06470c0094596197b5a4585c8e77edfeb471df87f8ba3c9d85af781462d72691fbc898c26cb37063e6df256d8780fd3a21b03508aee133da1a53de47a9b010929b22f5cef99871673c4c645cb530ae8862f7c1f757583ced7380ce7e24729836b8b072af650421227e7304323e4c718814da2fb3dee85fe7c193e6be12e4fc15a7d0ae83cf4cdf7f8c41fa4e71b8ac88670bf113a6a47e2115b1907d5077f122f8faeb484bd6ae2bf5ed8fdec564b681baeef4f786d0bc833b713fef5af118b9d0e1cc91f9bf852774d10eab14a7d7a7fc4f2735c16dd48c3924355e6cff5412b136397ca0e4bdb23508f2e6f302bf71ac468f109912a9c14a186900788a8a4bc40badbab1321c501669943c43a2ab72b74d2dc95921e7de8ad6b0251d07e0b56607b9b9e39fcddfed7f57d2c4de445e4df393829f84ec4d8d6bd453a1ce1a971c79b1c73953f379ac6016f189075d1b7ee1c9d338ff4d914d78d45c037feeb62ecf0f6e9005cde25764836c800444bffd25a2dd96a75a522d40774587515ed7f688a0f8cb10007cc0603c6210dbe50689c391a6ad8b1413b5a3f53b425be61816cd4370034eea6388fd5e86277e9d77af9c848ee38e737497835f3cd1f8b4a3ed0c641997274b1f6475bc79c1f3eb4fdcac3cb5ae98c67021a667c8f3b6079e69d7699a0df316366b26a7e57171ceca7803afaa40b61ce7bb81a0c11b74d4b5d97fedd8872c04a35fed7a59d1ff8bc1c8d1fd3429d196f9aa2a79ce9cfc3be3ddad3e4d7acb5e389bcc80f6f713235d690d3fd6578fc630a1594c90895ccb03879706dfef834e23ede155c91bf445750126e8b141f7d94d798332e02e77213fb4dfc0a086caefa22ac5d2e43554a251a5c91f247943588ec53c8381eb57d73b55e1733673a1b0dc76351ec96131625a41686860de6eaf601bb5a4e3d2ef69f110b90a353822396d38b6afe99a0cb01a328d7aed8a016723cbe432c5d21499c4ea51f163d1d2572d74121e15949f11c072e603a49923cb0baeb19614833664431dadec6fe79926026085d7c53f201d9d9a92eb910ba0734ba923e165e7cb66b9141371493d0c02b7137db6f2e2f9b4bb92a0484457d8a9cfb366dd19ada77a0db32e1b09c3199b131eb7f8f65d69c8a44f20f8e12c9123dc0365ceda3632d4501954c590fa5beca2cb058070b98afe018475fdd04a1ef00096ac95082a6089f18f879048ab607c012cd8c93fe17adb47fc5915e072679d7564eb47e1b45800727031e22d07e3f0c2ae2791368411a00886419c60f50280a5997fea73b776d63b531dfd62689aef22025afea806873a220f56e4bba5fc88d9b8a2b1f2aef864d63083279fa7c6c7c33163c33a4229edac65f053293834738c2c45c3fc658e39ca344f5c3fead6b6b94910bebcad879f3d66dbc5ca4b88844a102b77f4d2998b9bb6378ae09a5e3c20f67f478ec03f3086143d76c8688f9b635bc5ad0a6d5f6dd929745e6cc921a04c518df403f8bb28b159b401c6b93b0461a577b505f86b9aca76ee660e626ff460386a198cc73321215d0411f7c8133b5a12d4b4e6677c16979cbeca0e08bbf5ecbe968d3c83084234ff874f8bd65a19071b432a63c804febfada3be9658bb6a9acba8ecf62ae789c057f5d897d338de4fe92e0e1b08f76b8a6cdf3193602dc183b8485245d22483ebc0075d7e23a7e1e6657801d67368d1015cc549ec6acde11674206006a12948e63a974aa041c418f1df77c6db1c5aaf7de70799896829c1c2f572d580b0ce02e2ff049ae26c9103bfde60933464d79a48ee225e5382f99481a517d07a62192f29310d5c6c612acf1eb4e190937cbd4c1ed9fa1b7c205a509487130a74df0fee92630720d9d570ab6201fd398bc3cd39e0d86a77c5ed89069aad7fd55559a0c227c408f6f3fef76914f9d1309f1273a99a40c1243c022f2e6c8ee7c397061fdb77ec3d724fd0207597b20daa752faeaf6be8a3181ba1dadebaa171f9397cf908265d53db5469f49bc955f3bb34ae3199bfadd022556e45ae2a5873038d99f8898b8d85f232bd8e986428228f37da1e2bdca876acd849b6085e5fd69c8719104e2d3ecac7ba557f5a5e22016ae5777f9403fd92cb77be613a158e18f4c4948e52261dfae16a37595307570ea9171895ab6b6fc60cd57ee1c15f8d56613f75a2547edc289903dbcd96ae6119cbe538d5f2a2817ce0d65da76d84ec1859b625bfd3109d2386f8a5f667b75526c035db19e9b4c9b96b9f3301ee04a9a81f64a10c5c9461f21ebc7c19bd867255e4f0a2128e0ff8e6322ede199d31b8ebafb28d12b696ba7b14cc2cb650d67eccf74b928434df5747258cdfee041cddd2bded3d670f132538798e39531c787b8c6b8349d7836e0bfac30387c3de8ef632d4cd750006a8fc19fbfb3556bb823c6d67a028f2e272c90e2d241e3bdcb109061088f194b63ccfb67a0c3217ad421cbd429b15c234299ce960c206818645260cd60029edd5898882a2eb78226090f7376c086621dffb91f0b9c124e7aebef6c63963f89ff64f213279c608ebdd4a9323e9dd2111a207cb690520737b0413f71651c76f5e330759089933a0cc9a8675498df269de22feaee055e0218d868dce20ad532f13e4618dcb83ad87d268e01dbe39fd7c544a80605f14fdaa687e7bf0917b3ef41a36419d8ce999e611551b4a32bd0c074f5a968c3202bb79fadd81933b0eab845fcec9a7d5a25726e3e20fed3645ec5f352b0b76e70e3ba47ccd45f501816474958c8315a8a9981fb3968082a616fcfe870612187504200e6de1e3dd5294e0324d34227f449050c3605836cc0fefc1ac661a6a71b7350e4ef8a57fb0834df5052f4a5131f82dd750a98d4ca06ec5850af0b3fed7b9b49bbc516f8aab94974de076b8d69f62ecbcbd857005766644578e03d84d402ce7943526e221dcc723f8916ac835f6a7870b990dd8ab32faa805dc9218abfc3f8542ef626a1ee1b54e1ddd4caaff40e888ecc8b3d0079c4f10ca1064d0ae75ffb50185a8f9f07dc3bc8840822b3a42d1f026451002370dd8330eb3986e12e84ec8aafe2c4ecdb184698fef3507185452a95a55aa2414f1ec2b5b3245d839436ef8a15a4e491fece5fa154bc89e63c649175b33cdc0e609dbd2954b8aa7ccba036ac668906a00419c4df832d5795d764f11d653ef7a508fc62adc5ab558cdcd48cd69c560f08ee66092753b420c6b0878771fc2f2e7bb312702ac5dd1833d5295e160e9e0882ab39c86698ef083b7b83d33d5dac35a3ca78f6afb37f86fc7e819b5e5209da96b2a79b4a631898f0945fe85073f848e75395d3cb465080e897304e2c9ee9c606efc9d3c650ab59a1af6ee835f6e17bc420b17240953124a4611ea50877362ada14abb5dc7ff0da36c36422aa12ee9d52a9c2779d5180ec22a3dd1b0d8a170ddce8a7a28464381ead13fc042f2bf34760118385450d9df2ebc029cacced11d169826eccd67dc37ce60f76ac2ff9e07aabf34af1da5c45f11661ecfd2c4a93c813ec81dda65e8295a9c7ba51088beb166a5a7a7deb1ccf17f8e33d31b1ffe136d84f6771302faafd424410d13b742c051d51a10d0b658889b93460b04a5f0bbf4de2781ef9656afab269ac63aa83241c641de141358e7620ddface70f38896a01fa627ef62388b52d8174b27e56fd29fdd0889ee03ed161863e5f94ea267a42347bf20be7660d1e34abf3af7381eda1871ee77e98fe253bb23bedead8e16d5480e718ee1f72e22127dd68cb746f0d5b5c4f6f2718a7c5a1d5d06a606f6d595f0df224dd8cecc5fe879f28f6dc756e5fe0b56b5e921e70c4adaf389f5327edc8691c18095166f94607bdf03cf4f3bf88e3727eb8227522152adfe714adc006fb441e6d4022e9b730989c01267f5b879540827cc6db85457a4cc5a16d19cc641cb5e3662494bb3a68770efd26d770add0a2e6b6fe07810c9ca45dda73cb67cfffe86ebd945ffc0c235eb1ae7eca3f8fd0471d3aa82ed7d8809e017241eb2cb4f0a4aee1daaa4a1c808d92079ec04f5d75b6f4cea935183d1d60d47750eba4241f625d048b74ee52d01a0a9554e953f280916d9253682267a9ae1a3af23feee489c50e241df32d081957606537c6f303869a5680a88aeffb68b737d7534bf350712e61b981e545261ee23e33798da7110c216aa3595913eda3b543e6886badd00f759bb1ead665c434d0c9a065b0bab58175cfc12e9d1e8ec75d0f73ee91dfddab124932f24b8a433b1aee5a0f52fc4e4675e74afa58b4209044422dfb1273ecd19e233cc269e7c28ee03ad8ebf6cbf3fce902f5834b5445a4014f6e2f4e6c7c07895d8f0888b7de60d69dc38a34d668bd3e5b86202086b57aa8c0651b07cbfda6ea722810e8fa411ea8b884a30506c8170bb78699571901e7a71c92627c47d18304365865944c256e4819cd5ff10cd97f2f90deaf183b45449e3fa3f3d84cebde537ed027e7e5c3155ca3250487f6295a2a62e1a91abf6abcaef9ffc9314762a118561d86c1f6b400fda4ad1a687853a3f6a0b20a3957f34c5c10f69234222509233d069d83688c9e622b508bdd5795339a336845171ab44647c47f3cb7f3cb55685979b556c2dd61ee987b8465fdd62e4822a1088e42be6730989d21066721a274a3d3665d21a8743e9cae0c8435dea392e68732e9d85a39214bc7e7de72e5dcb5c73fb420d43dce2bf5aff0d331c9b6a64cc7e9edf9900c5a20fbbc6863cbf4502763381979b1125aa4c53df1ec53b6bf07df758a0c5a8767d91db03e81f699ce4450fe0129219e3d87b3096f9a25614bf623be30acad450e35fa63d37fbf671a01ee075abf34f8e3a817b689066e085486cdb14ecfaa40690f4e210e4f8054f688d7eecb908e937cb6e75349904d1312fe69217fb5e4f9d8e350cf2d80e27b97c684780a86d7b8ee4197e55c624295475e0597f71e28ecaba13714c85013195ccb4691850f6fb76d944c46e5df397453f49052ea3df842e10a0818874cba2c5a4c67f2fa6664c19b442a250a36e7c9065185910734119a9233c677794662f83c874a7b2dc1f0555e17e1c8bf41721728dc97539abc1f71c1bb34bdf00dbdb200ee0a4a400fd69a5c57a0ba1e78ae09f834dfb7f786b51fa7e3a08d589e5574f9264dfac65b95bbb4a4ae750c0edad840f42cac5808820635a0216e11b8c6b3e5e5a67a1e3288e530ed277b2d0bb48f5050c7cea1034dca02401f439a1f0bf035975d25544e0bdabb03cd9ff6cbd22cc4f67f658f9c3e19226759ba3afc56c6cf2c658cc1ee8a4731b9b726517b29aff4d5cd260cd31f7a89a1b1186cb545ccb247dd0f63ec1169b2b7f1c74d322c4c45173eeb9907b94af896b4f3676c21270a091f867fab23b1dbd6b882bc8b16c53c3caeb61b642723cbdb0fbcf2c0b01e338f6351942d97bc3912dacd1dd9939c54bebd6e6472d13fdd5d8ba1e33140fa93ce5eb60dedd28b0a9cf13062aadb2145ca4b95b62afec1ac4687341c6cd274ec81e818246f73217f14bbb55f853867c96bffee9d4fbf6c94da7ebefa4ad6dc9890ecdefeaa8621c7ab4457e75543084a37e8662b9cb4ed441cc31a95baedb40398a75171142b7c0bd11ff248ad9a022849c844c7e356e7d299b1ae4118eb0e44d0700905fcbb074036d8e01177757e8a5e546ae69bea5d8a242eac33352b16b5b7ce2acde1ec50a083bb5af8034a3d24aa7c293903c848dbf18bc586f2f3601dee73b35fabec09027d0ec02f05b70ed86b9b6e740c913d0cc5af647b830807cb398edbe4a064c2964c54760f95f780f461cb4eb8a3e509f17527915680baebf7ea284acd5d046f3c2941048465f68c3ed701435ec3c2df38372f67519327964778782ee3498aaed97ec7834dcc4e4a79e490561af2629697bc22d8bef855e3cf2682cb9174b6c1ec4bb9fe701f6be3601716b9c47f6e9ff8d4581f8db58ebe1c9e07924f9d07bf3c589e7d7a92d331bbaf0a9df9b9494905cf3ff46b4e6a6ce3bf1c66ca061902a638cd2d1dffb33fa641eb0bae40b4a5959d536b4ba934ee71b96256cd71d7c1beb65fbcef25c3f5fe6faf1b6e1bffd59ded0abe92849b189c923172977336154635aeb46e2f433f0ebb8b313e7d082952bbffeab98488dd9831fc0c6b5b776c4e8454bc572a91325c0d0451476d777b2049457817ba8c2da0740e68c15df08b0ff8965b5fd5da06382f74463222808436646365cff857208019971bb8b2d1b1dbafa37babbe05c3d62dc3e352b24b767edae501c93a6ee28f4e574a88c8814a3db235295d34869bc6daa64779599d75f09fd8f8fdbbcd52d414c84624a40c2a1e87fc8ab095682cf46414e1151e5188d0da5a9701143d32be946d3a406a3c758fb7f4ae38657cd1235393e0897d3760b191fc088e9559f4a555240486833a288f918dc38821fbed0c85021b4db6096bfcf8fe51f74249457da9a7e72bf2772b6a811f997f161bacf0db4f8c97dbe42430d85035ed1218cfc6bb3a741ef4e4893fcfefaafd0967256d1043ee66980a9344aab48d91d816eafceff80754ddae40eacecfee3d42d82edd55ab0a26f01b98993b0dd3d41f241e1d1cf7279ef1df1176b91d1e43b7ec2f1f5e47d0e72290f14a9782df582a75e9319d673835ebb30ec51870d5fbd7c1753fd2fe002db94554df5d5102ff6ed989fa83bb98540c14c83596ed517e64ca4faeb3edf178704ba554c628c35e674cb0569cfdee180c67186a1a4a8bffee04b4cdd28531a4303728a00b8890cc5b66efe117f70a67cfce2c6aac93194d021f6f862e313f63339a1c0b315655ab80ed482046bfc1e5c1c0a3357e2b591c0babfe45198d94461935c85af4718372a11e1aca7621f5d4493d724c031be3b11f1e4b135cfbe4ae1b76e7f49d889396c6ac35409216b73508db3567e97e656d792468142df46143de9c26a9641ae3b805f9e15fca10dde0dd56d37d152b15dc358df14d056722a23d91ff13a2d3e6b30fdc5e2333bae792c1b9bb7e5da1256a82734383a14082cd35fdd95b0a9a9517568d8dda0c3c458bc6b5e36bccb48659d75bfce4688815325d13705a418e6d85925f51d54deb82fae5b1180565f49ea9205809a5ac11a9ef805e2bb049b462c9ed1eda7d3b6a6bf1a56303b10581d5a4f94001d1decb43f6c752a7e1386862c5c56d533990993fa0a644b8a7235cebdc19510e8659f3e9ca6f7e012cd7b1514f9cf04ce5057fe9d38a18de5a921204a8edac0ff6428faf0aaceaf0ab0e7818d1e487f3ad9b06eb9d61721244cfbfb65eaff68c365761ce520cc43e24898e2b487bac1ca3bcc9a29e8e51a1469d35f2f277217c1c3f355f94f3f63a173abc31e6602248c59981b3a1669d57e11f6e614dafdf7792083a988ccc3a8de2c8ee60567a6cbd4af8ba18ea0fea4fab824908fb06801408e2f23c5987e34d0d9139731a38259968f4453f2fe697e24b4d384b8f62fc28eb5db7a63c902e44353b1c2d6500020e31b3b8d624bfb909778fc97857eb0c19db01dd6470c7cdea8d9210310fb7ba212c4f0a87140821d9f8d70493887218b2b070bba9fce9fc98da9efc8d7762c0e3a70e3009a567735f547de91ecb8f7af2f32b288d7074d909d7710c73422a2ab99b3c18f41e5380803463f2704293e8197ef6b257cd8ba9eed5d6e9b3b0e4fc688c84d786c7e0263b889d5ce8927a60d88241d65bfd54ba5107ccdbc97bc4479a7c05febcb7bcfd67f07e3ca9f67afaf0d9f5f89e606c354da347a0ea62692967014d1ac3ebf340145b7e24f48480d14239c312f2e5297374566db0e87d09fc51a054b87c6d8c999be246870dc47d0c90b2e8e19d18cd83efa79ddfa020d4c25798bbb05e6f444a401487c8d451dbd4f26d4d7078670fb4bb2bd49cd12f48e84fa15c8908b033ee145c3bcdfdb42ce45f120395a7cc8640866bd7f000c9aa8236fde442c91c1d28ed769b13c0dd174cee21bdce0890d4b77df1960b9147a31fb4c1c34210ce36b5c5227c47291630b5745adddc01be0c50a1f6841f8b98ae53ffdf4f4ec74fee40257bf1d85cf2df574e896663d5aba5d25e055b9dc28bd86159a77b3f69eb4be1c9a527929d85b0a88e17beee31f5561b70ef8b94aca9d4be2fad4778fdaaf09a83d61aebbf6326fc66b1fb01c8695b3c26d938dfadaa1b5c75c54773cb477f91d46f723eb07fdb752bde6fbd0b4a2dd9ab1ae466636eb4a51ce6a00baeed1de288c82a2bd87b6518bdc566ec4a28a87af51da74697e787a03488bf9cd5b3a39e18b75383b2f463f7a6ccd033ba6ed91c876342ed62cdaf64c4f8737b3d98b737565e5844623e0cbd65bdaa27f1810ca4f8446c5c0c171f8aaeedbd0d220237188dbf1a8c0d51b01d7fa3b96b96d9cd0f70228d4eb12a6ba8ef13e92c1ba6f541ee042f1766e945a7ff35e6e62cb3a9b38549739b4319e46a01711017083cda2d6a4c9eb7fc4443909b67f24cc6e29b91bda5861f39a535f7e188dd0f6029be26b4187a0b90f4e484d6fb4ea979fe314849362157ebdfd2b07715fd1b5f8100e05e042b16d83bfe381a64bac144d23cf036ff701cf31452d415fd9b52267340d541dadacf6e3011457c0a712b2a20f79dfe6889adf735d5ba633dcc44a72528346025648ad743b8dc05537b7c61f47bf3ca5accf382f4dcf5091525de27500b9e04f383d7ed08fa50ffee988f5b916f8b7687ec41153e263c0d9e1ebfae39df6948155e670651f819b9b710de93a2a6247e2483fe546d7d9d09c17f1163012946ec3a31ff53b84859c85cb1f2cffdf816f659828cd8c87842793243ebe441405f2a278dfdc266f272bb21c5bd7d7bd4a7781fadacf38f34b916de05e9d47aba2cd6ec16e792c411c22f8dfe5bfcb28b030769bcdbded4b922b19dc340df967ac2ff1114216c5be0434d0bcc68cc18035dac976248488e1323f640f9e658a424a4c38d937b04dc3d87b9ee9f25abc0df36c000b84b2bd22b332dfb941f674a423b800eff1d7c96ad949cca2bbf18d6760f824f707863535fefc72ae83fdf2ed4ee5dc9afe64dff5f34319d6265030d177cad75a0b84ad64b012b3c7e73ca5fd2505363701d01c54e2564da465e8803987ea6e8cc64d6cf78b133ce744a4e2eab854143512a83091a212fcccd00420f986aceae27859337d47ac19bb2ed3d62be09e31d538258134ebf24534fdea97431c432e5cf41ea37cfce7d661fefc3ad7dfbac60734a526cf8a95f55bdc999e1cfdf8ce1d0c89a743615ceb7a645eddf20cb91c766d0f567f73eaac022e703e5117ab317321fda8427cd6575f3a95008e461c255066b450477a2761fc0ed4393850dc6e72bb972039430cc175c341f6f1efff1ad121657c4e3cacdbbf6b0ebe4a44a3dc668f38da20a9fa3f829f726c23be0d2367aed4025e1b2cbd44ce669ebdb7ef9774bbbae631ae5b0b882d4573e47d9ac3198f09e72586d92f5159f55c20b12f8ff949a0864d3817ea5c757efb4751b74b3407bff99dacc34ddf5e3505f9fbd698f00d3ead1653299d33d0d1d85c950505b3924bd3547da2fa7177538d5f50372b2d283f50968d6a52caa895fd5e17f04c2b7a1fb342edf994b4815e54a2fc41f8f26479643b7486cf465ae2bb26664a640fbb80c67bc076bd804df3973e4a0565cd6cb01d75cee1be341587f738c816a045c4aa0384642d502897da200a298e9694072f7cbf2de7e56ffb8c23f4e736c8b630ed3e7cfdc086651b0f20b34e8ef1516c821911468be26321c53b79906572bc74c01e22e51524a4fce2120898e53d7473815491e086aba46516fb880aa194a3d8fd21fe2e3a0104bbd262f238e3f33ec248a019ad1628e16ffd69f6cc2a424bafd91161a7b1508af5b48bc8d91930c5776ed36bb1382dbb381a7a587e0813a74196de06a44d290fe1ea8b4c5be36a5135f5634ecd914be0ae0016d5dde629d5c4f89dd35d1f3ab9c7619e9eb905134e35675d750c7a514fac55525d1e6452667247a016e207279d3f929fb0f81d6b8a3a4289d0cca54ac5039c123675961529f4a236b01de2b5db585bb6983554626755ccdafa9ca875bbc8655672ba662dc5677b20c5b832518307d52b1fa344717731bb900e97f862954a2c4b3b7fce7951b6f61b1ac74fd45de551b8e562d842ca1f74686329d50a2976e9ead8cb4203aeb11dbd1b86035ac07079c350354750da21e8961d0d2d7dc65a734c9ba3018bbb7b82b2cda6989eaad1035a02f8f254c2ef8820926711dfd17b809ba2ee65c0b7b7e55f1207274714c4f15b8fd03dc2c2559a2c65b6c92c9f6c2c716236882d4276064c47dba4d6070f0bfdf6194be8df91f94d0d0d7cbaf2549e2d53e3315253848115b3e60d97d79008bf3f98c494900e6a22ca21909b57684c248b2cf9756d4a83ab11c4ed2f3f1eab97d1e8dfb1fedcd97fe3edb0261fe652906ff78bef700b362450e5a82a764a6e46f303f06424803869638e7a2e012caf7f23587ae0008da5d4b452c30c70e34acb3bef2a0599e8f9ab4d0c234c449b86c399a1dbf393ad26a20d095483877d50c4c3ce1625fbbf1d49846bbfaa2b104a956bcac47371c4cd4b772c996d8ec0698ac8101e5cda0b0846ffb665e3d4f359107df2042e3db9532e56ddd0d34bb236577566e399a5da630912e274a1db0e4e15d201562aa1c9054b9d5d2be0f21ebe738c510a652ba9bef717ca7c31023e5c9c568fc251c32b7a7df3a6e6ac9c9cfd3d03d8bcc5966e2ce31e5602f84294a931d667169045cc01192227f8deb23f0e8fa5bdcba255cb2a7b8636c4e9add45b2f73beb087cf25261aceb021f20092bb0a5393682b9e508141fa35bfa9a895e538d154105d7aed2cd9e8acd359e10554ecbb2303a732d80ed9e43ed0e043f16a6ba0673ce48a1d09af3d2a722452e46d5c00e69062f1f14745531331a38d3396f13c83d8ddf2558073261ab5ff32d32a6e167a8139b2b2cae9d8bb7ccceee5cfc57848631f9bfaa714dc89cf3333bb7f36d252d9c44a92332548a14807066abdb57139a2a1eddca8b1770f02a74cef5b6dd7c335c7f37d3500dec06db82b1f5238e7e47eb7e09b789ef5d7889039d906059acb2289597202db6c91c1b962ac8b7cf2200080855d8192f0038f7d51c36aaff98286c4750cc674f652c75378ad8027e269dcb4fcb16067bb545e5abfaa17baa81d8cde53774c92ec905f6b9b8cdccc09a1a7b2bdc7cf48d3e8adaca5e8d089cfca6b928aeeed4cd7c6ce5789ebcd6408c9c9cfa36c6a1f5bc78054315578e926160d6809be74b43011a3cbe5963be791810ad6f0320c3d434c05739b61ac19daa7b8d749dbb51e65ff5649f1c796464354d5b5d10f5dff5bb40390c5e2b67d0394e98c873d4099a67a469865cad99103fa0052143fecf8604b55d99ad841f615332315616e5debcfcea73b35e783f8144d91eeddf4477348b490bda4f6547b3d843d989bd5ad612f13b2f87ff5a1c62a72d93b35c5de90be1b86fc433bf460e05b84d5521c50adc5be2c0034204bdd7cf1ab02f9e11df67d0cff762e260c4e54957dac55705fc7a0bffe61942e4622259e1c10dfc358e89406d1e4ed3f48589ba86c8af31946dd11638a559e6211f4a2f124e59b9fffdde31646ff6aad1f02298028bde29d0905ffed8c70fb72abd47390a96f007223b1bcf1b6b6347aef28d643be2dcf9b2542264cd43be0ea7405bbf4cb009c0487f6ef4a0dd4b37f1164c16d58e9fc0b71fff0eb5611949cdc2533e28f4c7354768da9db04a8c65c143c5ea5514d1aee9085d120a730153c97c1fb152add203fa5ec178ac660a93707a2f29361db433e3766af99dc5fbd3ca9a9f8b59187037a74c3e157f1e938ce93a6a8963a145210a0610901d3a7dce090cbb799a3e936767b6996b300e2644641f7d91ef14877c9e499b1dbecb53859b4bc2aa7571cd92796c1f314960aa22fdc6d5928c1c1bd1bbe5acb6b02af1ec0bc8b3c6e3ce1d2d29bcb1d7751f60455466e4f013e8bdde4f2fde2fb37547da20e2f9448c2677648095d552fbd47c9c59ce555a518bf98a0bf3e27b47ce3ccf18fd90c14afe96d3c79cb3b8cc5e7387ed0d02cfce5f133d1642ec348886cdcad8fc0a2dcd8b5b0e909083a36d5e76ce0d847c3ba5e2d2fc1a9cd5439633486b07c8a35bb337e9f7137c375ccc030e6357405b52047b5f04519dd902cdc7f6ec53f5a4baeaed1b4cc00afcaf94decc4ba947231be87491fab77023779fa773f85a3205fc7708c49194d412ec1182c543dd4ce3ea1f85d26b42c16eed76ede500b4e1e30bbd937863b6a4c05be6241859746ca8306a194c4891c3a8a514311526fce87501755c6696c4b6eadfcad8f6d6fe1f2e912096299c247307076605c9a282fee1e6c5d8b0742dc05aabaec6d38154d5bfa3df02f686736785588d5e1095528323b554c0eab7ece073f89818884d17cf150fe5ca8aa76961639f997f0ebd2e9bae7060536d9efa22aef902180104114d2a98876de5d46abab86b6d3a54921b382f247c61e42935d8337521fef6710e674973c0a1f731eed5258c5ad7ab59f146773880477be16f44e9aab31cfe0d1617629e2200954d58a97ff33df5fea06e39f92466a9cfbfcab71f66b5d0126bbff87661f0007635e8c3b977264e667a9accd50a8bc5a09166fedc75380d30e56205702d9589f5484f2992454b147cce519fad747f07db25a63ee55a7ecf7345f90abaf7840044a4d66dda9b42644f0be673e023a0529750ca3ea0b608f34530bb80544fe02a79ad3f0a434601d7199576c6677bd2b8ab738bf05428d26166500ef3ab28edbc5032d7d1bfd4c7b38f2d6e02dec22b9a356ac3eda0d98b1dd714bd7028b4af668628e7a694677380da05df9dadd41ce1748f78251bfbae25139b7b1353b426de96bef1653e3fc26bca47ef6286fc2d1bc5db0b03fbe933980a0cb072a3b7a33d7a6f318f2bf5e9b106c1b641567411bfcb155dca4f5cb027b1e4c53b72ea65eea6e72e065d12f4de312ba71b0b4b7d2e9946fc6a7742991a4dce605f1d5d701724352b1839a7064bc9f85a2b121b97337824a6abb66b0585f15b27f671a797954df2ff0a896283aa2912eedcbb13785662bcdbab9a947a98adf19addd053de2ac1def033862b35078a692264e411b8afac84e70983b77ac6426c4339de0ffad57f466f801328a56be1d7f7927cb321b9ab413f2934febcd24390a78aee50d9bcb1500375e9acecbc8c143674b6b7fcbe53b27cdb01ae8efcf2b9f41ace7972bfc71c726707be1cf298f59660912c00fc8d2f3e66b2539133b4d7eac1c031ea40e107c12b2a488deba1400e93ff2f1d5b29cf4eef82caf5186ae7fd551ec6d6248c56d0e596b5bbcefc58937f829d4a43eae84778c40786fa3719f5fea37af486f6b76551dff5a9c732167b88a0531a536428a218f51ce3e1fd825622e88708581ddc828db94dd70f81d307a27997d5d2c4dd380c3bd162ceed9f51b75eae654e3424d01ca4be38c892445ce5c83c4682e6f0b94e1de055dadbd7532a616af1afd963c2bd2fadde51b1f7cde3ca5ab6d1c3f1e1beafc6a95d29ae37a80aeba872f99161bd6596251eb353f8fb62a2275add618b37f65cdaf88cf8952aa853f6a7d3416efeb000dc16e4648184378679c255b7b86be7e89100993f560c871b0268314cb15edf7f9469d059a3da8c0131b84c29a56b099f1599a317041365a1d27dbff93267a51fe140e06abc7d52083429e3e42d2f46d28eec8b18154b960a761a782ea0ea89b52e4756680e0dabc2aa66afe14317f13db5c9c6e77ab38949dea30c9398c487fa9e43aa1baab282621be19932cf127becf54036f9a8e388a522a0895317f7f3affe3485454c17c3906d40e8bfd33a8de83ca38227168e7c7d590e013696af48dbe072412f737eb8afbabd3a2801d53a4eea9b84add24cd3cfce6f365892cae720ed66343ff49fc4551b2d040240d395d28113b7a88c48ba7f3afb84655e93205345c8aa188d67d741a3b0a2bac2b8c230f8fc46276f61ef9ec2f574028b0fd85c80692bdadcd548487d895e76434b7418a8185706d0c6adc7fa9be0895b6e7d3818fb2912c01315900088062df137fb8bd91e007949213894547af2eb2d79d69b4f4499708f396d78ec9718e9028b31b67bee41c4e90d7b18c817e71d64e9a6bb5e72cd1342cae189c61f0787ee8428332e84afffa9a02318707e0a552200de5a3f5c3f6301a811a3759cf648986266dd719eda1564c236e3961a604c125b0690dfa1b5b647fe3bb31dfc32aa93736c65cd58c03a536565f962c5844de9363e58d892549bd9673496dcaefd3358ce096aaae739d0a140baa30393f74b0ec6c0864698d31fa24eeff7bba6364380425967a03e4922a479b2a053dd1ca0123b7513725d2c431c93e77291dde0ce532b014c79e5c6e1d498a70d2b1bb7b92da26c61dc52cc24a8cf29e441cddd7962633a32298f2de3f5980f1052df0160ed43f154b5abfa1de9a2a663819eefdc285b9faa9cf7de2d99f0cf3cd16ec7a0718b09fd5f58e8e50dd570a94fe56999e02e6f0301494db9bf43caaa41dc291b6a95686a3eeeaa23438e0b0cf1e602e982daf140b9c6fcaff056aa64400288a44cef6ace4562115c01baf1a2b665e261e6788d568a11702bd2b9d2347a118e407ae8cc06f2738d56600df62e81bd58a568008a6e2c28b0b28277bd9581ed0bd034892a343d2be09be665e9dc0e0d78498a6edb7245c895ea6a0104c438129df81cbfa9e3dfcf072d3af7c87d21b8b0e90835f301e8f3141378bf90a40f9b7fe48f75b3a60333173451f53ba0177ef3f4b7d9bb0b46b8faded5cc038eca68076c57f967cef80064df5464d28ea0d223a8ed14e27f3316d638e1094da16adab6e6ab506a78ae98ff18228fb6aa10271a79939783e2b15b2b054e7b27db1d9fb5426e5fab4e5935d774937a8a5e4d1a4a51785a3d8ea0e3af6a80ba8137032a416dacb37de9f097cc16e2c4023968dfdcfb76e90f966d222e3298419ce84c7d20136d9f23024d06b9046b2d33a82ca63991fdd6fd6285158d05e8cac427e15e472dec3476d717877f1356fba41f6dd5427dea9cc454bf5cc9c5d6599c1ba59200ec0def8e1725832ff6161630e23112ef250e4a3480541bdd13375a59cc34105fb1f5cfb7141daa9ef8fff00e4746d98f2a87719f5b233c3efa6a254682ecc4e215cbd9d33746fea42e9ee0902251e6e5c256591b02841849a6182a4f969f70590ebeff421bbce90fe6047b55aff671ae5c725e234b5d9ca67fddc772b888c218dcf2373b6fc587babd8af7c2b22bd145faa04c865736a86de487d6eb9ba9d4a7c61d45f317d6c769738d3daf1e81dcf9c6ecd894c42fb7543b5088dced6cf5bfffbceb51e595e4744b3b053b81c3b3e4ba68b46c0420d375c25e941869819c1148e5f1506b1cae84acc1c6500da912492b434e982341bb5d3bac3fcdc6db1cf11021248cc3e5104f1377c6afdd18f6fb0353e472d5fb28d85452eae125a92ce100cf4932a1fc015cacaca4362743435b97b799e2acb58c1985b3c2037131d76e0ce4026a8e958b32ed2b42de4374f11c166106f93ceae5f9c5f8cd2b1f46079165f2297bd434383d15f00cff1cac0ba3bbcde5272aa4df1da243a33c41116d232834cc8170e780996a8b6be4767f638bdacfb10fb90ed79be76a397dd254397ca4ddeb7ac12fa0a1c695d97d05882f27615a16fb1ec06b457cdd6ccedb5164746ab2f6ff1320561d15b55bcc5565e13d8f07e4d7fd17b718446cf99d1bb10d69dbc9fdbf97ba100408a3e6d241a00f52c14fc132866d131d8b3aaec0112aeb9ad62ec1df8bbb288c1a672e44d39ed56624d72737a36870cdb4f3ece81be1986a83ba2899aa21c3f90a9b2de4c756f0a20cc5fbf947dede207fcf21ef57a07a19b1baf297153911d3b72525838d6a6db7ea6b7160ff5b6e6dadbbab3fde27d442b7c10cf13681a7d26b39113682e2fd2c22a1e2925572ef9a94e7fe0657701fc69e6787c0bbb345aad08a4b7438397a9019b924ed075353482679f959c84b37cb19e54b30c75bd33d6c7c01027dcb7a796bef9295158b7446940fb3efad98726f1d4a0e3c5076b416b591886e20961f09557ee70e760e1a83ea88b6b26e1804769f0a3af0d6cca7529ee1b08709a01b865be30f39064cce5448d00171bd4b8589a0906df6bae9211601bfe65f6e78108c49fe972f0731bc890b60e27735266e19b3cb23aa659586514a30598e634e0426aa886332512fd9482f4eaeeb1ec7ad068e2db3410f20ace6fd2944a2ce72b61224c22cdedf02730058191ab0210ec5ef13dfa72aef76dd390977f4db46f4a83e7ff5597975bf6b9268e96d0646cc414a972c752409097a90a681bb6b0112f915eb3809a3dac0374ae4e824263b4982f75a5b4e5f343ca3bf6959cb803a0cbb5b6ffaecbd6fd277b97b01d454650b3e3f1f9ac21e0a8fed45d6c99b3312d929fe027243c886a0a0608b4f779ecf64571c9fe33b083426c98b13f7041599faa8497111aab1e06ca454064a4a1529eca0cf4a6a24e4359ea8fcc76e6a0c5f8f1ab9dddbe4857aa082fbbb89b41d45db0e60ea697e8424009a1572e6e58c77ba6835607e9a6d2601d23703cb6725a54b59672959e167cc4c9fcaf9991e72a0e11cb1ce970d8d3eda1d9c2ead1626c615003a8c89db37a1aa14dd14e221734f0776dcaad5e9a42c5402ea1d8fce5a2a696d28dcf1b54d837c9a9af617553a6b5254ef4611e0873109b95954d5e6b83853bc693f1712246ef2bffef93dbafa8e9523fe5590f0fd6e7fb96a97645aca1529175e46d2ee126ad400bb60807834f5e518bf7e5cc3ca5cc7f1d70a96232cccc1ba5d45f57bf408c319e7da8888fc86f87c909364fe1cf4b850642bf014fad666aa36610a93f080a2659624d0a19ff7553e56b7fc4bf6d7eb7cdc1a5a736da571484d29922f236efa0ba419e4f0280711f07a8df379e3b3a62b88ab1e215d0d37df0fbb7d5ce1acb94e6793f95797e8460c317c866a14662154a13e4e07fde7ac778d7f462ab4e5f6e52f59311fbe14ca65af5ed942760d77929ef4dc5a55ab234e19642139e325b26ecde27679ad2330e98b76c2db030d10552104362b743b7dbdbf75293efba7a30f6e245ea48755b1d233692dd3e88ad9d0bf43edf017140d1d2b618dad7e4ab36b6ad89ffc1027f418bdf01e195d3b8a42e1d9577e4c2c946ac62f1afc7a8eb84fd6ee59dbe94d70f34d4428b15672aae4c5db134c6f75e6b365502162bd7605baa642e869eceeccb9276bdc45f022b75b00c746919c966f072273f923236ae48c99808c2c325981bef82e9309fdfc5c889079627c16666869af61e1420b835442e77c5df288a5080e1e523de59fe6e517fb33789feff8017b2f0f8aad37c1d02ee15b2946cd9299e34ddaf03c9236b1dcf022c9cc08ca0b37f2c3f04ebef34b87f3eb14a952480df0f4c99756c52b231636926ea11c2d33f5b1ab4f8471c78bc70e059ce976fe109293f29397071796b668f37a0cd402405f141e740b337859f65653157b1d4d20412b6d86c71706decf47fedc6f99e68e90e9af646d5cad8044bdc3d376cc3e381214735c80afef02ec2e2a965a79d4b6594e3ed227e4ad5dc24d6f24d15859bf946f3d5ea12c8ed9ac12199fe432f530899c19c6fe29814051dfa6355bd931053d7300b2decd2fe85f90d817554e61f1d4566b0966f7c19562c09b2ca07d5fbedd680d0b8f70c90738cb417e6f7931c95708b20ffbb92c94ffb8b51cb80afebd4aec265fba791cd1e28cb5108aea8bf7e55edcd6f1c8a7adfa4aa4618b61d3b84ed1ffbe69fc973473a5f401838354bee6b0137813ae3db8053c6acd4723f601586698807190e8fc0545032c99f632932093a7249cff4d56ce3a628abb7124027248c5c43f86155a71fee65e35a5c6809ba9494669a0e2478f9e360dc1ce9aabe03d267a6fce980e7a17654e05cd6ab743518aca1bc506aed0f074239bb895956126812eae29a09a434efe5398e788af989a8bdd4a3f095fcade4fa0f091d80068d04acf96d6fd0354542fed4f519709b3bbdb3682d13d657a33c6ab33689a928b5068b51185e6ebedddbeaf17671e714ea4cc3806163649e5d6789efed421673c81e3ac07e2b0a1cdec2cd57a4e9c46dad241edc13164b789ba12d69ec2d8c2cc3e67291f4323019fa00dec8d6c35f98fde99362b67d1ebac93646928151a2924e514baf8f7dfbdd7b1898264d53aae26d82f3c88aff56cdd2c14ad4542ddc8d022b8cca1f31a2e9146491df8eab68f29d31b8592a8030fe3d831720206375af8280400bed27bb7460881f7675142d1d85ca3b0e0f82e0e9a9be1af59466f799013ef3cf4f053650241ab3b49d426fa38980feb06dcbfd9226fb0f11c0b99bbe6f7b4c7ce7f4c171461d44ab3ea7e4e2f951979cb37b3699f508ee33389213e3cfb5e9f96e88462cc53537ad95bb71795e02d74db2ba006893d8acf5819c2ee3291dac235c9fa85d8e09ebd1ed3f491ff5d97ee04caeba888c8fe246b34da2e0f311cdcd79f4e2d7b5c5d68c03692d8ad4260edd7c9f8b6de2115bd73c4bb366187b87105160b66c6a9df4d4c61b4aa425a904110b82d6be6171dcd87323baaf3a7759be8299f07b0d4897735d3c1a783e201e94ae7df0babef71ef6b1f3f3a620059af1874bc760c07004330bf5619a096dfb718af107105ed9627ea9e30e41f947b54c26a023bf9e7ee05ee79103b3b2f87b48e13a3729c6b798fd2870848d32f1e9a7dfa8b20334c9b2834f9ee1855bee5b271f065917f39d9a161d833dd689605d060d907a0b3b50a3e45f37c0a1e6049c0221fc21ae95bb0235c9a307d12781b66a59c0b85ee8f4d00feb1aa11e5777441d2842e16613e65fbc4eb6896a108569853ff5f2038d1d436e0b32f5010450420a474d5723c2b4fba95664e9358dd7f00d9bfb18fdc4188c6b13b0b002c7dc385bb00b17cdacd64091dc5cdeca0a258669325efbd634686d42ac249060ed3bc13f2b9315f9157d0bcf6f4f4ef25eaaa829f94484a200d5e0c351f3c4b7e5bacc14498b44d5ff6c0a1bb2df6eaa5b00f748fe26226620a5437877a39b1f980c4d3f4cc63a29a53709e38d52761aa6469838ce8f4f501153f9a7fa72d291b6778e866c0c4377761d23235baaa3193bce285fe914a48b231d13a57de8575e808df6ab119587de1c6f62df3c027263f89acd67950fc2b599a8a90526fcafa3dc09edb5c209775240d0915fd45bbbda67722a2ac6f9495425651ba55c1347bd61448f9f68f4cea1dd2f3c25d2649ad3ed78795bdca7fdb4b5a3fd854e849dae2cf7a1bb7f03db4d972e6996415022bdade071271405722fa8c7d061f056c9901c9bf1f2610760ee906be78703ae274e3b3a2791ecfff7e70d3d2ff8a8ccbc8317cee0106e8c410e980e2c6c09b33eb9fc1c30936d7a65a5dad5cabb66638b5bdd3064038ff7af4ff6c142389fb13b803a5d71fd83f7859e28e86a9404a98e4d80b0fd8b6fcbb574f917215c523a93e0ff39117e089736be13cd194204825ca1b3b4500b2f4ac57b2fc3a7f06dffaee72979a49064159ad4b0042d408e4e68ce9613513a60ccdac4423394588366a552ea42fda00286fbbe0f5069cc263e528e3f603b8bc7c94b4f03122b8d92f94af0ca207ec3c3ff0810521c821d183051efe0308e994c7dc41d5e49e79c94753ca29eba7ca708522d7aa50c7247e6e3ff728c30444e4ac13c2a4311d094613f5a395f34964da1ef04199e17d1fb0721b59280c9408c13eaa826bd74bae6ddaed27ee2c21af24f6e7d7e58031cab28c3558f3ffa700e0bac8b66c88777b863c726a581c441576fa9f31865cba8ed61a1d905d6515a7139fa8eec5520dce46a6740c6b28fc4f51df98ae1768e0ba9675fa721ec49cc406e834df26d10c509d48148421410718992f2e759dd70f679400e49a3b51901dde4558f6f416c9388a26c43c690965ef0e990e2853967573906f68b40d9dbb0aee1cb2a682d65ca0d3f87c0f1d0767a9e4b448339e69786f75a4d9e039c98ef3f6843a8fbac0fb85f76352bb0afc3e73871c0316b9a1c56d82aaac1abfca4ce7e53cb6b8f5116a804ffc99fca4db39aa61b197b9d8168b712048c17256afa8bb0e3626805e85c8c37f0f18830880563504c618f4462796f8943ea685e86492a0aa449a68e54f95388657af037419821f7afae9385a4a8a608f8af532524b4f516640f8eb0a7d567f759c18457e2d55e762625998bdfc69e26fde28558b9fa876cbfdb98e8474c8bb39824b33790caaa40b2be6f48c25600be742ed9d7272ad259f02877418ece93c34b1daffba054120958dfdf3b3c217c2fa81a510255c376e44808720fa4d36801f7909ed784b3ae49469dd436ef28da85f5f0564edb837e54ee51d54b6078eb431a6432b8bf70b6d85d545b6a76a0cd8309e1e1b0e720bb68b808bf1f3140cf975335d2f13a45eab57d78361e8f758b27995da863b12aeb77b39291e6270d586d96da43b1a93374f8bbfa235f0ad1387db62f7d0ecc71597ba3665320bdc5e8dd361a808483661218eafcd5ee9fde5d6f799ffdfbef03340e0f4bad5877d7ffdfd19e7970cc93e7108328200e213b43fe09efc683f1b53dde70baa5d59e9a22b4009514062785b0c855510d08c8384d4829370136d863d1598ff16ab689ebdd9cb1a25cdd56d1e65854e151bdfd4316473021d5d8abb73b5086215eceba47f035b9c827d3e9470bb7f97ff5a767b7ab5d50a145348c45f5f1a816173637ca1c8caa8eb782afd37cb7e1733f12272fd86801bca3cf52c6d15b8c9be6a8a089b7f437f01da5f5bdbe80c968fb408fb316b8820ecde55c659cfc7c5e71dbaa03cd78d9f945b0a53fea2e645ca1c9c2adbfef06ca73960d86bc2500db49ac44735ccccc8cde2352f8625ef8d6b3665eac0dec00b604d7068d18f8f8920e9abdd61a45cc81860e11c0a6fb64396ef581347dd4e6c05a4a96ea56cc767e6a4510ce689052656674af9bc29516759cd3ec8d3dd6a66a55002ca4db0c457d181549d8901b5e5350301adf3292141957caf58d28ac573219b22045df6cbd7631dd1d6392ff112bef8a97a9d6a81dfdfb7539c41d7e55b4d87f64667b027b58128e949c5b3cbf3497a7c5707a70d19bc08936ecd7ca9381a94d9fb842966436e558af473838fc1c5a6a3efb6859de192ad28d7ec975fa5edcd512a931ea2dfde476042795cf07781edb19a1e5ae7f3cb58368405e94640924632dd9b977a5afc618e94634657ddcc4a531aaec75748b5d33bef10f6bd7c4326e08dfd4e7d8531a3574fb4e77237dffe3dbfd520968d14512936911ea3c49779af07c1d34392e153c790f4f5979e7d3ab8ddfd672ef71f0acca5c1e3078a5ce052c9cd2c7ea31118231f42f29a89e17bff2a451300c6dad8562b89cbf2e778af645547b9248478a76a98f1a2bdbb0b0ffba1d639ac106699da7954116f30d70b202282994fcbeff70fa9adb8febdc2091424caf1789d5a079f33e6090869fef255502081816418b072214c15aa0ce0863313b8d1f61a742d524e804946ef5d5efb848e672ac51c96c19f4299339ac1734827c70bf37360aa468df3493484601b2563161d57ec0a23ec91d954bd6385ad5653321bf030ebd32d56cf34d7f4bbf9faebf4d2ae0987175ae9d5eed36dedb0f33b17a966400ef9fbc0d2b4df534343bb8aad119478db839719d5eeb63bae8847ad78fbd4888620bb602d8835f395618abe737fbc8a22b63b411ea869cce21e016a7099dd6b42849ca4e892893e3314595b87d3d5cf31ab1234791d8bb2cd1e02e9bfee6fd40a94ef7e08ce99b6d35293e129eaeb0487a5e4be4ca575cdd55809f22590b96c26f3c1c2c489ca89b7d7fca4ebc7f3e1127fd50befbe1c6408e030ec41b8d897c6746095cad8d109cf737dc5f2f6a7b48091306e66a90351d1c0766307922a85211e4034c310fdacb2cf89866e939bab6dd7adfbefb8fff55ee15d89b4af04c10b37c28500e34600e4abb045b8b26268d02b34d5b5db9dbd904cafc48be676fb72acaef56fd56ab6718c385c770d47ebcdcc0007193dd2167666b8aaaf57562dac6ac1f03f24b2f503ceb6e75bc1b49339e7789ebe6ffd1c1f26fc3564ffae21b8e15940cdaa2f4301bf9cad2937fd039a12d610207297d4c373efe5ef4d349250ee07866bd7f96d98817a8bb0f42b4074ccfd9833b0487f6e0b2fd8c5a8b0a87374b9c4c9e6d2ba5c95a8a72a1d0e3b190bfa9e68a8cdf44fb23702f4e7c40b60aa31f2ab3ae573bf1a71f06cc8a98e10c07662195970f3a202c136d38b6cbe93a935d0419a3873113456669b20d9b0e8b6b3ce56c8138d6ad9285a36b797bec74f6ef38fc418ac6354dbbe8534dd863626f9b05d2834696ed319b041ad6aef547f6f414711c8381cd3bc475c12e16c8ba7883cf92ebfdb3883f6ca2e8fca062a98b0f61b454a257e6b93995338bd6de0cefe5e037e02c14b71ad77c26699230c8951c03bcb249d557a26d84ffc4e988436fecb6ce29f07a1dc542b954c830d3139b591713458e8eaf44019d82c95849bd9f201d88cd878ca1189b762bc8c9774c85aea1397f120330c869c57b1384162b07241ac63cddc9679673dd57e1706194662f94668791bbfa7fc92bf135e4e71c813f469deb9213b440f34bb5c8b1f69b02c69ff2933c0722e2d5c8ebff07b77cc2b0b56b846c0223348f1349e2c9503a2cc8be6a458d6dea22db678251b8ee7374ca26c9f123cff25077059ef7e981909afea53362b284cafa2a7af576e57a2cb2ed4d3ad1c3c2e0f57ca5db9fa678ee2fe54ad60c7ba24dbb01ed494cf0790edb69e85874da547337e1d24732d6ef5739ee827f82073524248fae7a428863860b61e7d58997670865ff7c5f7d8965dcbce2a1507d11c8b7b6cd294d3f32f33635c567f2fd5f219d42b4f4fa5e6c9a7dc7a0a13d671a393ef1c886f4ea11624864297d72bbb45d2d51f0d87b8b4c0015e4a0fa6c9543128e94cb5a30e25d50a89618464ab0cca09735ac261f47f87ba8e9f70643b35f00ecd77e251117b70d0dac0cec2bffae2ea851070611345ffcdd4d0e594dab65efd594fef727b5638148921e83d4ef50e57df2f43b9139d8189120c5eb3710579c0dbc312457de69d50042cb7023db97abd259ada40cefe3808c2990545d230465d9457052a448ae7f2f4d4a495080ebc859a3ed40949283fadd365b7ea7e3125ac300f45cdf2e32f3ee58d6f76525dba93c62fe0e05295e7cffad984008a0d8a6f68211b3b48b4148b7eebc167d0a7e08051956f3ae33ffa904341cea65fbddc3ea15e5c2e8129dd6857538a0a0c4153b6cd98d06a74707e142c200d571ff8e81216db0cdccd56411522d052c7dcbf51f5ff516edc26101cb5fb70ab3e3b56d56b826c5efb35ef94d0d09dc947fad4589261fc5055c31237a0cb5ccc860c49c59825b064267700922e0de129a6fb7064f32b5c6766e0415c2f2f67bd22b619e5802f51dfda23a5f96379049ee0eacd570233821ae6e377be16f4e344845b2d38ddfc49bc58136857596a4eea5f69c62154840de7e129fc0498e5de07206b7bc9d3b6a3b378c56bb376a4b2b5f6f1a6f9dafb064ddda9d2ec805d7a93eabd73a1085663eef05767e1d52cece2376e254a51cbbecb1ba8c9688dacae79db7c3dc3f18f3f61dc99c229e9b06a3c1024caf1a28146ba57d0506a276b14998130aaf830c1b6ab0d56c364be1130b3e503e69f4416bf6b62065319936d5809fe2a454873b65809a58e4d5f6c787a8f8d2f47d949fd119f57756342484d4dc5c45bbe07b2a1c13370382bfa82d5053abaf7bf4cc44dafadd96025d2b84a968795ba08f9f61f1415fa30b88166138adec694e9fa12345a88fff22c2e353533c74ff52263957beab2fca6c3895859f3f6096bfc7e868c3546d0cd1864033f05b13349abd2b6e9391edb29743cd906bfc7d94c84a718fbfab4739a57ae95f68f8a97f62e7a2ea515f4c1ca32fedf4326a83a3b7ff32ba0ffd59b83cc45a1011fa6f0d95897701721c34096a78bc5c14360054297bcb570cbb217f9bb4bcde04f3fa69a1de611668a2fd4825fc1233d379ff5801a51ce65bc02c5643ab53fab272683ef2d9d049e1efae4fe48151b196075dc3edbb71d61d23386fa49e2c5fdc6357ac5f81e198c881add266af29b4357f1755026d884f165d1fd80baefde7caa2e9b4184c233e619d938b2895ddd607b4b12909c4a7ad3a37c9e390214db7e188abc8cbd9d2366430511023e74419f28cbed83c3861c7d16a8ee7688604ecaed90dd1cd3013417745e7f99ed590618adbec6afdfb174797bf8122beb4212a0a2a6a09620a2029c17408326ad72c270ba15ad2847f0fcdee6a0b1a7cd28ac10ab2070c595294d636e4adfddcbcdc6052ee819c70009528cf8ec79f421fe124d142e4236921f2ea75e104d0de0c5569582b45c0822e3729871bf48a6ccbbb676aae636fe7cb4673094d13e87bac41cc0a37ab3b4dbe2ed33c36db570fefcf9ce503638d04c33806795ca30cd430b190859749773903b2f343b917e4609f245dbb67a5b40ad94b81a1ebe4399254812be192d6491cf9b16b2f8b8872c5e38befb72e065fa7744c05d176cc780ff171b9e5c2d57314c3e6311e2ee116bbd8e47748fa1d3ebdcfd450cb6d7737a502ef99bb116025f33a355aa2bcbc3d85d9c0db72c053156823417b09b22ffb7b11a13b1ad84fc99bcc20b28b58108e73684f1b37ff5579e048303bef59c464e8e892cc86cad6c7d73b9a6fb2dc7c7faec96466b68bac4f57596670d563d0c53f8169cc97c726f6d7f3184867a44f34e97c562872f9a8102e9e4223f581152e4a60ded8b780c2b9b131d8df94919efd35cef712e4fd08cde768e487df37171ff0827e4e6508abe051b569e31e0cfa72ae5a3c708ef9152f795de87dcb046ce05e2a57608d486f6fb8057240bfcd3a8f764958baacd2b59038f1cda9d4c6df331ece191f793710f35561728f2a22dc40e2eeb723093f776465b95ad51667efd7f0c3b52958371c8af978447005cbd968c8425b1fc06e6b365e139f77779c3f47e426f85f66e620810accb62dd665b2ab4e52eaf7426d9ec73adffe7d30bc5d8b83118e4d8a2721a4260ae0a8b3cfe31176c84868546a5e1244c6c47177e39f059851f3727c8a5d1e664e1cd899a9d670b18e1615817c2dabf171d8e1f1ff4439293072254ba5e9993a7743bc3ad6fdcdc7409399eb31323a25a05663d33edff3a7d6e0107b5ed34565788abe87e640a3c854a892bea880965c69193676853ba04c6ceaa3fc78670359081cd69c14a5c30749b1dea45164785ccae096599fce02f06c63e8d3c24de0e1ea49cd17fac9cf94c86123d15d6b0f5dd82ded1b2ce5c561465a07c3e704ce3c7fb1195fcae78a9aee859486ff55e9d844dd37ead7fce55870d400bcc73c91db091f72e41816c8bd8f98c519ca8376bd38b87a81a23195d9a0e8713b9fb3671bdb817127adc958516393f8f0d4c961bebff61d0054488274dc4bf157e94faf86799a3e4699b964f82326031d9c3fcdf21eb02ecc84dd48d59afd3be930458d3c8d659e89a389bf48f0c1b4eee9798693c3acb2843bb3d10f2b50017882455f9e020f6d729cc1f7cded050ad6cb8614c0aff66f2cc8a16cfbbfc4d989c21676129536b7a40da39f1db267d36abf8728cff3526bd899bc123e98da73f5180aeb0002767cc0960af868a940a3740c6c0ca99dbce34112450cb6907d9d155dd2ac038b918e5642a44ddd3f07aacc5b2113a232063f625a1ae2fb242bc70c01ffd6565d7f8607d61d09ac0942783756b8c9fe75106dc2ac90c7f81dff405350dc87625128438246dfa23ceacf36238b8bd1a7f878f3da893e51b59df6f2b4c53dfc42569429ee8c35fc545f7fd5e3d98281fd11f817a478c12c7f6c4602d95f5dafc181e4e8dd636d15a6545a007720cf32d44b32a704a5fcddabcb8f44808d2986eaa83b3d11519885f002a244087427ed41d3dea34c0b87df69781d9b85969e715156fd70a13938a603614469a0d302f8db41d9e413659ea78bc2084dc420ad16ed725e5b72b6d374e5fecd41609499d8203c75352cd140fc0ad0e2d1be2cdb34b62c2d6214feb2216ac7895bddc64b371fd74d4a0a02302994694c9cdf70cdea8361845248b51ff856612e9f275899e3a315d6b9274042762e66e8687703403dd9716809cdd500f8c3268bb37b4a8a3ef7100fdd4104f0c01120609c3862d89f3825ddd21b99ecae9cceae96f8ee2be8abde51af93ad3470e2d173f7e526557659ea4cde164a6ed7dac0bcdabf0f519c5f60cc6e8e5c5aee4d19d7667dfc85c6c2a93e1bf220af72011f4b916e52af2bf7c007124c6238888d1d5472b25395c51e7e90ee0d693c16ea2574f9c3c1cb5065ea6f68b0c1624f1a306ff2b11df85c2543b3ea9325f4f918a17b5569774b0a2bcc1d4e3fd75b416534f3ac0f9b9fedbfe16a82b1922f4d30b392dac68c9f2ab24c61517a4314960d0e2810c47fc69c9efd04f3de07eb8b8eeb40f00b878ebbf837382bfcadfbc11ccd5fcd4140a68a5f6dfb11817dedd9b0ff83c8352b564c8b7c7a64783ad50fc35552047a6e8646316aa28e83e580ccc905d69fc67a755e5e1f205193f4c8666cb49455a124d90abc912dcd441c5be95a7c637bdc568c40da137647fcb3f4e97efbde551fa52ef0a2bea810295986600e54bbed4ab60fde351a597e45b57ba745a868064e94812951abcd969c2f5cdc39a9f0ce7fd859126ab010b0eb7a66ba429e43cc2adf5e61702d51723542d3c1f07275707dcf664888d6788bfc4e23276a7c69d7db0f3ee0d89c02beec9d23efa86269569eeffd8bc01c812f64ed1436f6065df9df0f1dce86129eaffed235b3fdcdcbeb17d5b2e3888c3974ed1297fc4525b451c3389d93aee22dd9cbe823a6b9cfb30b84b7d8251ee3588063567b026e5c0a72f88e1acc49f4843561c5f267d8a638c0be465b980be3f8d00d62977782c833fbe6eb6e15862c15755417f75a27186186f96b0b4261688d0c7357f0cafd35316e5b112c34eaa027f751594d00b1809af72d7bafe9ba86d9ba7d4a3d7837b9ec7780a03ca278100768acd3f5544267c71bac684f122d1bff80ce57f9aac0be6ebd603d569315a45cc36f21518b153d43b085c5c0eba314b927d247210ba89b7104c5195f7f8322012ad46b84658d78c0ea0c53aa76a3dc01afb3f2cc92b338eecca0ea650e74c50720a49d56aef1573840a5ee344f83e66f220dd139259469164ca39fbd62bead20f337d4c6274314b13b4f136de1cbe6e4e1159442e9961e20e19b79159668e15f1803a05d67e4aa4483af291e024e12aa2ef412fc36d47baa84670e5bcd7e6b50ddc7d8820aabd0173ba7cbe39075d3c380198410def39105164188a7aaa1055435fe25c2e7d4b6d5f71949a2a409849b7341f8a974ab7ed04080b5c549e6935632a5dacb94e79584a25e579328fd97cd5276fbeb19ee0296e5464814009ce164edd2fe3cb1598eab55070ec5ab195a3a437092ba186132bf08aae9a0004701674146ae98f26131644f98515cd313055d423f27e028aa0d634d1a21bc8fa394c92ac19244f8898e1125f94c9f4d64eb61c586e48e0b51defbf70355a56996d617f98a1576b5eceec12917b400fe5de34a9c9a3d92c0be7ba90f2cc1f046b75ccd27b49a84b1a349559ebb0cdf4e1806ace75eb3a32d1b3c28e17fcd7041aaa87ed0b587aa8fe4e7d4c490f4d001a3199a8a65ef1354ca0286139b885ef7c9ea52d9937ad439972dc7d432c1b680e0571f04115a33c75b0bd463c8028a27a478f364cfeba6ad5dd3170e6dfbd364e7e99f724a1affcd4968c203a4f479871b6e28dd4acfd78090dad5a58f3708b9b63446d445e9b7d4c138363c0f9ab35472368a83479d4afec41647125c05d54e0a59b5ad19f52e89501202794ce109f2d8f053079c033d798b6eb0c202666873676a0c3af23b593ae940a104f83cea8fce60d129ef3214ef10732dce18b4dad0c61a897fedc1219faff163cd5a70d23469bfe4258a14ddcf88a36ce4c6d3eea0ea55ff79e27db113ca08603d4ed13083a9ab60c852bd19080503c5fc340274e3fdac9c6cb82e0e78269080a691ba939a2bb623fe68f62b4608a618912279935023f73c122685cc2fee29609ba574991ed6fb48f436a18f1ba016c3795737b250d5fd420e8c776c16233464fc5b64e3c185c263eed11a4221d05824f83190ad50002f148eded29f4860fd0e1ab808d9854d47a7d26364aee888c972044ef75d1c3efbd47b8306aeb34c420964168d9dd3b82c7a55fc424f4ac273f612f7065f4d62ca405b508193ad9ec31e595bb160e77fd5c0eea043a2f1f6999d835d8d68f6250290b35fc054c0851e83e5b8307f85e851360e5c0a50d3a400c121fb66d10e4f4913664c4977bc56ce4e66bb66c533d21623ebffd061cd28a19dcf5e4f58abdf82d37a20a336cd8672ac7f79e8f1e18dee7226ffb13a4cef2ac87e79c61ba7e919656c483af2d02be54274f37004ef14a3609c48f5eb06e0228b26c5eecb055662f678421a26da2f7c3fce42526e1f265787621bf21f1c80674ff02bf7bfb2e2a7a9f4e26055bd39098db7b28ab6cec3bb28316cd292c1562264f712e6fa213e660b37a28f5f24e901206cf8d2b0f17b4ca9a01e1f655111a289939e68e15637e468221b894058304274e4b3ea2f21e4deb2eecf11eaf2e3ed4b65aac1d0081bdb92036fffadc279f5da5d909a6089687e01e2f21a188d791d7e63a44c4607deb6de527e1bbfaf81e35c5ac858f64c1443e1659031ae760316a31a0968309914e171b4cc29c39b5257d0e3ea6c13e139b40b3397b1c676bcb8693575a391fac24da2de4d41c53f31b785888c4c506e2cc12f553a56d8a13f25e7c9f71dcb50632c617ade9708dde824653f3a25418853bc8379a7fb3c92653c8391a0fa6ce66eaafce118a4def5d36711592acd637d1e89a2a04cd40c4823b6bc1e8c6cfd33b8530a034c4b5c9990a9a0dad47005b2abdbea3ab462ba0047c8ddfa38cef15f69011b880f835aeb9fe5d3215ab11a0f8f9719ed6f32fe21a06fdaa5f95ff194dd54315f9a1e3d0c3302a02130f0e64508e4f5e968b349e297b26ec5bf6963a485fb207d95a05a1c97b404e02a694bb75d435ccc0a397741b99adde108bc02bf9d84a5125cd979b94974452d0ec4533520e09850f7f69b203c50177a63081d3f8fe7695c4adb097c3c7a6a4c41ccae27144cbcb69284418c5e37a686e20865da357fe0d38d6a400f9afe5ac645786b144fe771143ea5bb9b20a33ca92b104d61749eddaee29b223ebf0a2e52846b7593bf6930e248d5e2bec666d45e98c9daaec109af9f170d193518dde0aabe77574ec8fad1ee9040c6a0223f002b951aec5c7c5eafe1b5b0368dc2ff93231eef65b9b02ffe0db630e4e9ed237b55e236b47a371a199ec820e662e00baeedcbfa6bb88103cf414e84b52f301aae5c3c23d27dcfdfd4125e3ab84ca3374f827853b4b7da97f2010a3cb2c4ee91e0ce8eeb40f51962f8c6ff523cda82592de1c42fd4d94a35aef5f006f58b34cf4bc6efa3ffea87532db1bd86416a531fd9bde2e85eb4073ca2dacd09ef5ddeacbabe150740aa43a709ba2120f734306a7befcd0b02462edd438cf38f911b86b6ef03fb5ee47eae43931de2aa8eaf35d96fba444fa6da1eb2874fe077504e61c365be4f0180653b2fa55ecb5d3e9dc82e876dfa3cc3834aa19de3294266a92e6569543295471598dbdfa7e64985216de3c1487604512a166965e06fb9a678d33715b3c78f71765018d7b2ac4a6c2be6b0e21f3354cc5123687813770086d896c955525eb2835023cf8ba29ff8713fadbfbc72790a05af6691d3d6f07bb63eb77686618057ebf0f72521a4a53b07b0882a6969b6e1891b2d5956d3a1dcdac93ac179c3da66446333f7546f16c2b12964db043fcdfd6634ff604b86ca0a9fc66596326f528a5582aceacd28f339ca643fe8f11c6d8adbea1e71b77c5c1e4f21694c1d3666b5a4f4c2f6793cdd24288074d2dd540138a153c0848fa766e130f6e3fef09b6ed330c1e0f67d840de93e1bcb632cf870a7471c67b7681bb9d901238c0b433e86ee78688b1a28ab301d84c16d360a5b8bfd3a2f07d6d79471bb8a97d4590fee6b3f85b1d3f1a506a86c484d8fb8d101c64e085020c432b5aaef6a323edd3f6b13b1c8d4fe699906f1e190513bc4e6b03fca9e2d1e7ad15f34ccbff98bf2d475bdc643540841d94b4a0cda6bbf9ec9fd952484202e89771327bc1a89f9832ac304f3e3470292ecaf66859bcec5c9a79bef152e47955d9528d4c88415a425d7ceccf1e4324e5c57a9b7c383aad93cb3de30e7d3b51aa2a843af5ddd1369f02c025a44e0dbd5fc150dc0b3f1ff917be42836e2a7fea1be8e01aa00a6c4c9928edb087f563413f4885d9351125c318733de42e9f008e9d5191503596899c91b1be31820554b84cb52d33bae91854260035b9b134b1a6076d0a07162d68b5fb355adcf82e75d9b40239d74c8616f24e45e24a3346ba1f18ee2d9cb5b552a81ab05f6a23bc9a0e7ba06fa58863928e1d3320054c3e3852fe88d9476f7c454f0582f8bada256e7a00e8d67b2fac51933a236bf5b693cca399a1c4e7b544910d942f95cb506daff2d40bf2a029f4555b25bc2ec4ff9ef7abe8d67f1d4975116a4df22e6cf2ef0aa9c81f49dfbe452dda81539c4d25ab5a108dded33964d52966a7b7d839e20a9b9b43942f89ab5ee38bf254d809686b9d0e856684d2284b8fe1929ef63552ddf25bd1810b7c587cfa10a7d133e654954c12a10c99507b320d08f12e8558a99d5b365a63122bb9c61f7a42cc254eed5ac657d9de911e9c16f783bdeee6f3f470c961ec73bbf3ac53159faa81cdd19cd697b94b0efd4157367676a863f20c7b43ada75eb9d8fef3728b919325726fd193dd706bc8cb732845c236ac6c1fe7f66fc8343f706505117be6eefca468ab0fe303de58685864e6c49fdb65fbdc7c82ffc8819dae18e24eb46180c987f6028c6d0c2f7856e68e65f344b51f8ccc4318c2668d4b28c68142173c4c953100d4c3b7d26a9f4323cb1f06fdc9a6096c13f2aee2b9b7786f9db4a12b84fcdc129b9259dbcfbf4f77a297b5fbab5417c6f8e32bb42f1bc67fa6fad73449fc86f2484e4cd35ef646c3016529de112059735755b506a946171452467b05992f19cc0750f7aa964bf03fb4d56eca393009d8f0e1eb003d412f6a51f2415c69b80037acaed0bee5e5a73b7eb51e4f75064133e5d3c98cb4a1dbc8526fb636b27eade6153a24b66d8d3c4c7d2afd3602d3bd54ee41388654fd4f79513353d58909437146c41639cf841222b84e60c9868928ad7ecee306f6c3a5ba67fec3c701596c7ae0065f595a5b2e310ac354917a20295a5b92e9fe63bb1e5c2bb4c8a77c4ed131609e31a3157bd5ff1b29b8cdaba301c2aa7089ea2aaae4a623b6e0bddf5766c5bf14c2efb092b5e258a5d6ee54e8c1b4c6267e76337ac860476307a4e095bab1da29b444b8844af19cf88420da3de1e9469bf4681ed30b09653fece0650e4ad660df7a575a838fc1384f446a8d4d0e2ccd7fd84805b744eff457c4d837f5c3ecd14a705819a281f35612668964ce467b98e8e2cb03a7b806b8ddba999290db3d1b75d4ae14d040fb1a27961a9cfe0fd3aa7a7880f839b3e8429dc045aabbbcc4f3173b17a9cdf70abc722fac68812c2e638d9b1546670837cfe26e62db0f7544e3c30448e5be1cf45bc76dba290eceddc84a9945b861243832cb3c27b1324f6e1795571545a73721f8500c221b59e3d1f811016db5b423ec9f4909da2027eb5b0eb88e96edc3c8a0946eba1d41805cc8043ed081353014eef3d717e3352a81ae0d3628744a820c8684d01fc663fa350f5844ebf99d130047a29fed4d1179b9d7a419eaf86bfc1f926a3db10fca7526713277ab63c9d30bbb0c5bb42e10ca5d343a00056769a3ccdcfb56aa2ae432c54403527c61d8d424d0400544698a127e969ef3f4a1c39ee271bba9bbfcdfccfd0ddb43fbb3d05cb64975ade59f85e9c203b3eaa4fe84fd63adf1161daba9793ca2e12457309f485fdcc9c9018d33f1a5148b106c6fe6f34704531b46f4671e3452982c4b811410a865fa64a751ec8fe01b1666d62b5cf934bfaf9c07ec63139c9c6f467ccc4654adaa817214f7934343ce424248c7bfd0b81f45654d509d0e7e68e429b653428bb765c4de6d749fbc35762aadd6cb83293a3166ce4d177812b3443fd045b35ee73022cdcf09a8d3468f1d2047bb48c5ae5a004782c1ad5c876f86fd4168afd694eb5a4b739c393f164871fce25f3fc3548568516719b24111c9be9ce4e48317d9f24736f04058b54de6e3257d590ca51c87bc1e8966d9b1717ac32793bbad3b345d746b754bb3915f258d145d6f370c660c9846bd9eb2962be145b1d524995499f33ad62d62d6d774b1c9ea0db8ec66d92a205e478a0d1e51258b5b813c7ed27a793cc7107d0bf741c538c3d947411d60628a017ca93fa8ea073a1e0d5132d065cce730bf6dfca8fbbc24ee2d7600ee372601bffac7c56e0c35b84001b5b693129ceaad174fd26fe07c54217ca73fb6f16b16272fd73186b25ffd3536ac93dd7ac87ca8ae1a567f39140b3d5a03d49bdf0e214b4015eef7c57ecefad28f0319b0e8cf1cb9a414112cd7de0a6233ce18fbce2d67c5c7a3e46839b587405ec2c2ec31f45dbac0df27b0dfd706c24a3e1746f7b6ef0db1f714555c51f0163ef300bae549362d1c7880cb4426d7301a1ee04c64e40daf4fcbc8d8a297dee30c87afa600fc03e041deb1dcef09ae368a631c6237e363c51262772b3c7b4a04d83d3833808a4596bed9e2ecbad4c86e36a0e3c4d50595d2f4232e112f1aff02891701294b6d6d990fe1674402ad7cde3d7e1289e46212e75ad89b0de36c3fd7af043b62435deb69ee0d5963ce89fd506159eddcd4ea4cd8fb19471f2965316ae800955a0927a33db3fb0abbe908f13ac31a9f433b41661bb57bfd71ec5cb0827a973ce68de7f5f76b38a56df409f8cf2c207f383167a9d0821a3d2c531ee4145933589c93b20947afde8031cd4cb68c64411eb9ab8bbacf808077be93c9afaf203785c16f432a6aa96a923aec8c3af4895824727170449354bf01346a1ddf155cb3016f01c0aeae838507454b5083427be683b94b4ed2b3bdc3dcaf98256d9d7db4a6025bbf232b0b5825f22938399514d3b5c612000b1fd685a98e2c2f83b972a429111f3f3fbddf7fbb83c4d43da1caa24264779438217aca0ae2454ac6d0851b1d1b762dfd1bad0bc041396986dda36376823fb040e4c3f6fc64723bef36ff05072d53ee2007c2ef151a7b58681fbf8506913d03407e6679ebd2ab93af41cb56e2773764e5dbd6518d4523a5df66b9b4fd3045a4d04573a3613f10e435846c468f888f331121ccbf83d18a150ecad95da2bf408aae8b4cdce7c10c125c666572b6473fbccf16b9849a5b9d099c651a6387ed58d9e56d4252284d493e91426a32ecca066a2b1cb757abaa374456d296ddd94ad38e58ab1f0795acbcc1ce9cdb6785e5a3e09635723a7096b4eb613ce5d26d04bf0e878a7f78627a670f0523d5e5c1fe6f8f1b89f0752434f4a8efc711d465ca652fac5f7e8e30b63467c9c65fd55f2f925544fedb742275eaf7d82140064872446cfd285aa329fbe6a3ce2ec7e59527f237829bbe0314a6e16423951f310e3e11d7d6fd32edc1ede9d4425e19d873d04f326085874caa26104db695a3e186d96dced517c3b3523cf832917d7e61e50ebfd29601f0fc67760aad70088d142cc7b4153bde236a4d32f70bd0e56bc08675d075f5d852ffa17eca5e27af7181fc6e1c5ff9caf99100c5d4abe6309c3e2bc1af3e0371e71d8740636a46194b7606cd6b586471062949525e6ca803d68e179b60c4fa0d74c529c2905ad2f869bcb56b52ae3779367454061717cff75c0eb4e80c1bfeae710d397b02d6993f52373c6cc0bbeceb75b1df200e4be1d69aadb2507f8f21a094f409dedc497a04d8a2f36c3a4a090b22ab0538eec54aa3ce543cf93bfc8c2cdf1ccfad7e76b2c32c29f5de64761d85c06ab3e6336f755e85e2d23719b9e9b190462874e00bc334cc2065ab9e4b9eb80aa2e05c9d0be29456d16639be7f854c3ce37731d26a394299f821f342a93c79c588a1017b5e5ca85064c8b4230244ffc1d729501f5170593c1bc562ea343451ec95c9818aab2431fdb138ad1e9efe41d87e7f87a272a13622a32823e074732e04380c028fc274172fdb4d6a3f3add2708f4c822d8e9e84cd26313c7e4102b82bc56ae281a278ea5f4758fcb2647c76067de214c08a3854576ab2dd2c53f4a5d3ba2b13a7b412ec53bf4d766b23775dda92c305c7586300e01af2df0c9bc10019e57b516059febab898f1e782fd602d565566fb239c596fbd9098d0f28d21db1df381c97eda72ce769777325443766f494d344c9e328545b45bf1cee349dfdb0f4da5072fa5c968e30c727cd5b56b2aff37b9072f66767090b079210e011feae7207a14f421af9fd3eaebb4988cd2ee8538e154f7778fec42ab2659b7de3171f34df0b5449769a90d3a26addc3b335027233f185afe5150b7481b78963a0b43958e819c31505cc458813f42690e8564b8ca33c30a4193d1c50a2a8fe84d8d9efa2573f459ecfc11871ecf671211f59d046a9a789b99c47893a4385a68d0c0fa0f8f7656c9c07dda01663228fee02bf086c9b780288536ece019fb997ae3f741ad4fbec959b95de7f22a91d4a2705f595f46f61e407eb1aa4164ae18cdf914f6be3cfe97b43001774e1596e5614c9000f63d648f751ee986fb5700c4d9c6a2c52ba7e408ba501697182664b55f4b94b8199cf0c501bdc149354967d78a3e8961bed89ad8b752edd8b048b74bdd78e9cccaba155deb1c4e7b6e0bf37d875ad2affea230b47637316543cc7f4a01a6adc6508aa97091b341d06b06bcb4d5239013d6d8a934bd7951e919fb5c1f5f727e37c00f8b7ef2492c38ee23b6c6f9a67f6a820a6d3d8adeb0a122c34a45b0810cf805c465fe816411c3e75507dd86967ecc6fa14470277f3a59a6acbe9ef3f9473d38a24587f259e9fb5d54d85b0e8a9ae4813643be7efad009d4fee41a553ce987659b6399596e6d3157e1cae1af2318d19afff76c9d35afeb4302db5bfe96bf540c006cf94c9bed79bbb267e9f829e6cb2010ee2dda3d9126e007fd10447165800058d0d4d9ade4da477237e6fc10764acdf7bd90ca2bc6f93c944b9dc0328e237efcd9d33f92dbd20f5adb9b65230466c105f08bae3d22fa75e2c9954dc56a9ecae3b20bef2ef0639b131d0cf521fd109e56b50d3c5daa71410343ac83d2cd67ac25f9cb7f707af386d34f98ed26edb9a847cb8ac004deca469b62444086928010082cb5226d2a5b83c9e833ee210e3bcaf08deaf97bdec560355bb8c8e3ea1f4f709a473dc62d3dd18f3fb68d37f45f07c8abbb3999f5d88954da512d87338ffc9899d68b16a52e4c0d608d26b66273c76f782c217770d7bd8360d578f36e62115ca20c4c8297ffe424d4075407bc720b95a402bee5f3ee7a4a27c372f739112f6147e0f1889ee999a6e0ff0b0dadf523b7d31f9df3429f04653eed63f891c6d66e257e406dc81966efebcc664613c8b2db2ccc3b44af6a2bcf1e99a0685e82cdee3fbd1b116798de5de82b2a39e706b85aeb349176f26fd5ca2301b0ea28b30f5ef9299c3a4e3e50c9ff6891eff1583c868bbb8c075212eb15faa040a1bcc3e32c1297527e599aad3c60287b2b78960e88480c2d25e3772befb143207047958d0f9ca3042914ea842ac30687269b735caa7e9ae1c43b8bbba7abbe10265af8dcb277d37f1c2b7e9bbe0ce2a2fefd82425bdc060041db7bf939a2fcc58824dc87e98994b99c6cc6a4158879fd1caaf3f010bcd469bfb73374bd11ad734ec2df1d6294492c80927d0d71263014a810be8b8d075f6f0904cd86b0a2b5c66e33fde57b4ca9db0c444d7afdb6a2f1741eb2acd7964485b6b391fab7a92d197427b47601491d619e78886251182235543ae8fdd95c199b44c48a356eb7ff6c77b92d10951208111b2a8cfab9a813469326e8ff9798f505cb3f41b86382ce80f84d57406a77e80e284010f8666e808419b11be2be1e59fb0bd7ea1a786b79c9da5d504af59175a57856e56b6f85da4175c7888cffa4efe23763df816476b546bc291171a1402bae6897712197342ad05f10ffd0b419532f744e2d9ef9f925df212d82d7c3178b06d1bcb57595731fa187de7636ea8b4bb795e9a7c74833f6a30b754a0aee08d55185068a897288abdf32bd737cac5b276d6cd3d591b9eda3124590b904b73119c794a7da509359f809694abb69be8064e4f12d3d98fd048f795e77f467eb9e9bb280bc9d5bb57224d3761387f28770df97184dea940fccd04ccb28d8e50e7338c2d020adedb3d579dbdcb732594c2f02546f03748307b96670d5f34e7bf2c79f348ee6d93714d43ac4e0f8740004298103740c6cae20fa62b943b2216d6d02adfee02da921c2aa8b266cd70ca9189e64b46f07e8f7caabc6cca530ebed9b33538817328adb357b8f3a3b6515c2ba5c20cffb843938508f75bdafcaec6aae7e90d781d068895e0091e8f360799d30451c2aa7936ead620918a973afa82960674f0d139fbea27c967d3419af145ca7f572fd715843cd4df9195e445ee406a7355a436449e4b48d4a57088123e854a3dc1d13053aacaa4a7ba92d1ccce92e6dd7f7b57a5014d8feadb85309de6d70193e2e41d7ac295f6432236383cf6adea944d3a6e27211cb8d9316569e5edad1d5e44f8dd3ac9095125f03f5df2cf0ad627ee18faa84b72994b5cc0fb156ae3f77edfcfacc3f625ba2b38c495f298fc53577be2ce8ab8fedf0b8b2d50fe53f5a189d7e74fe10a4d49557716a1f8b0c79e017575497f3ce74c056696088f0294a652097ead69d213c4a6597f2adf1904dd26f4922f98407a833e50117de0f23aa0f9e7ba8abfc78f3ef89d1eeda09d7a3b5702055230820f63ca54816cb0aa0e41b73aca8fb8ea2a64c61bc15e670c426edd3dd4029acc3bdcdd594fbd15fe81032a1bd10feba1512da1d17dcb7053a7c59cb687dccf01470a05f27ed9d07551748aa50ff9227ff66f7c2a2522b8cb421df87700ed2145d7eb922e5e9abd3c04d34d741b474b6b4a9e1da342cc4814bc176225b3830bff2575511599e7f974c720b80ade5abb165171900c910da4a0e23afe1330903c7b93d6700c8bf903e438d2ec0f6dc85d77f66cae259a14ed7f0b9d7e0d2c8b96d75f9cf6037c43520b5dc89bd206ebeccf182ac263ec1a11843d3732d341e92fab77fd7aaf719179e5abdfded5641a131990f5271c60c34b10817b77f6d4cb96f1138e225f10d710f9564e2ae6b4dc7cbceea9f089f3b3466ded0f103c0af778ab60e8eef76bdcaeec7155fddbe61721f9e04c6178fafc7faa13830965da3e2db8e927ba5967fe0d07b47330d11be3303671a94befff42fd62218948514e5504e09e0f023c64041ccb8eb50ec551c1fbf03909d4b58c2749560ac202f074262a280029881b2120ad1430f859bc8db3664dfa2d9e487b5f4a911e3082d6bb6be45b862fb47481fc2f91f899e207f17367ce20af359dec699ddbda328d0dfd810950246efa5c20965fc8dcee2114aa66713264e4e01624a03091eb18baeb82c3faa00945f3af7d366f0d8b92ddad2c7f1dd972ccdf1f948d00f399e6e172245c4c6a223ec62de5f960714d34795a0e81d72132c6e31834e908b10b9074aef5318def90a6b12ba65b22ec5aeea56fedd25fc66c45e63edd0870befbb256f9b1f5c6b150f7c5df9d1f964300fae80e54ae73965f8325347823a45224b805f5448bd8265910f253213cee546164d7adaac8ece12b5cd73fddfff67a42d7fb17ee3533129a7f3681965cd8b1c7ba117eb54cf1d2a30325784e9db412b6ea513cfe5a6efb6484ab4dd103ca73c49be369251580d9b267303cf2f8078955d20761a01ec02efa2b41ccf1cd28fe296c3747a863a590587af8c4c94b6e895535d8b2a9318dc7120d52a0e78d7bed2bfaae9c998d1a7d6661f6795933dca50fa95f691f939d5126f9b3e13f0e3b0c34090ac93b7b47d83753ade76b02594c10583bd189220de0952f4bda7cd7b82f7729eedbf4058a27fcc27965b68b51b2633d6fecab88716156df3fde64abac2b67f3aebbd0c170dc5a79be806ec20f745b40a143ac22fb5bab135a0862f0bd26ff4f8514d729c45c4389a20d8ffc21d5e9045ba4c05b481f5a8bca3fa08644ff8143d8fbafe18c68d00c3271978ed32b1484e342ceb070303bb531aca075a6ae4f7c3ce162dcd198b7f775a9ce0fabe1a9e021a9435638572c24ba18c7523afd0a17714a1825990b38545da77bdc236c8a07fde21b53456d2089d00bac4dc140fb0b0263221cbfcbdab4089bd90492a5b3eeaa87b524784f48c75705b46b4035f359c9511eb68ebfa9f94d20aeb8bd45e89913d843931214a7df4960b11e6db7a2cb62fee44dd5c8cbf00d5eb61608287afd4ccf6275871e08c2db5aa66f2acfcf8fc244c36cd33b87de35e7b67f1f19eb8c2db76887f80048de1766d94a58076647fd9d27038e6566ec57d047e344b28171e91e5f16b8082eec143f7d36c4f215d79e36007fa7fe686d3f94eb6a14606048e0657039a315047d3c5cf352e355ce1a5a1601bf6d2fce88d23fde1217bbeb63c128597cb5afd0abb1c9b7356d0f6ddbd677f2ee9d30ad97f32e967bfd0bf11a7344f36215ea146f42906b94a19857b7cd089d460b1afb960e2a0beda9717109f6937822aeddd5839f78df301712abdfe1993de6711b126c7f113b31230d84ddb14d9793de894f74900d073e50f20d0ea9cbf64bf9973ef92ed51b4c931877953286d7b17e451634a86070c10cf120e2337a8fa6f7f3a161874b059236bfc38ee60fd6f96d2a0f9659a47399351f77f6b8c5cd49522cd45c200509a7875587f199314d25e6cb0cbf45f21c0cc6a7efbef3b58b369051511e8c1d718f7252e5421be3eb9ee9b6ee85c444482de48e36b0b6805e3533cfb67d7f4c85f19a80bf434ef92613e95f2d7c182bb4583198896de48e4adc1ff2265a52bce147305620cbf48548519d5ce2251e6e6b9b6b840bb2dddcc2ce4970e65a82520542f118a8565f591547925da38b5215d529e32a1ec87f913ebdc028d753c8864f45e83ebdfd362448ea3d8594c71c00bb67235cfa52c2bff0809b38a30afda07843d7a2083dfc041b89a0d59f522b735bb6c21ae6d50b291255a7e7ad21eecb9d28d53a69d65cd003b38c4efb2f4afd3ed8b735b71d49358af20103e47565f469b3c71defbfb0ef6194b03d783d9797c76a2679b65b06e910bd8ffe58f54be370515856d61429a26c954041e06f29a9c212c481c923600ebbf67888229e5cd39f8235bc06b0b247bfdb47524be4fa223d1ae338336323f41e0acae11f8d5c5033450781e4a3a71825a43816a50fe9c661581a4cccba1cb46480a276bfcb56d7a1f57077ea3a4588411ea097a7d4598ae2fb729d3b1b54235a20cfc94c6bf198e2b003e107435ee565650ac865e1320d2508bb72444de44aaa001502b3ca262d4409b08f6dc78cab5f004be60139369ce72ab0b1e80514f73f97de03d9afac6bab66a60745b5684f069a8400c74dfe0ad237c0f71cbdf0e51d6e72626a4d1cc51c0df4bd06de6b6d56eec0f8014dc495bab5a28f18413003edb01a389d458400d0b0dc188a042663ebe8667e379f946abc778e8037bc8e2160935a28cf2cc8213deaf80d9f5246127773da1c50c5fc4ace35be6293fa7aa72c78b370689ceeb0ff1572223687f61098f1658c292cbe7ab1690740833c26131a1bf060dc7af735f182e7231302338b0561ab2edbfa1c4d27c8648453ee7e41af9c27e4050c7e3535e126bbc070ab881141eea3b75a62b05e1399f090c073505a1f5dde3fe823dcac1849de131ea674c578f005d2c35a30efc215382148cd8c04e01348df8bdaaf27fb9f3cb88b5094239952bae3a98e614990860fb7d4aba66a8e27866492db706976762b2e4d4edba8d78688bdf13fbbc35e585ea2794e3e98031d9fd38f5d6a80c072866106025a4bd67500582f9c7d98eb5bfb6b24fe0d5b61a3ce47e2b767e3040cf662870aaf057a2bcba56cc5a3628059e474b4dcde48a8d43143bdf09a808aebb8410fa1249bab3daac903f404fe08b3b977e9593d296479687628a502dc03ef306f4334f4ecc88b5994448063602a19d8c5cbe692b7d8d878b21baeb490f31308310495111b4e7f14585b203c48732b417c20586db602438c7823dad1def896d1c5c0b205171f5b72ef56619756c17ef43f881d0b09e08e07f0f9eeb0771fddfccd631d81ad46443b981cd551750d5e0eb92422fc60b815eda9e3e20f597332fa2fcabb94c961619b3d7e7ed841026bca65ba258ce2ee1da3813f13dc296ccaff8f50535031f83a8bc01fa1d041b0d98d0ce9872e6590797f012edf7330b9f8f6e8e61c51239d7b1a76eb4c7fde2e9eefc40ea591ed90cc01abfdc168e76abcd4a4a87a65396fd46337a4282fd173357142e12a660b02a220690b5227a48b5445f3cb5df7501f5e64c8c515fd520e1af88f11ee6b3c145ead28ad013015c6380da86531f5f66fbeffa03fe3d036d20fd7a44c50c9c318271cfe7cbccf04a9f678e5f193b488dfa578de7acaf49c0b775c51b0c4019f80496a6a9a366d42f0508cbcfc1ab76a142740362cbca40f2255c9554b9e0f6c4486524d62044db7b9044ab4058f29c5577104a2670c4db6b50f3ce1ba4d63508c3e177a137e72e006c3bab330453930163665be24405fbfc3ec029766101e9d49d68c644c6dc4e3e99c52974e0dad56ff760c4e24d6b61c2eaa5585b3dbcb6d35a6089eb568770408fde48f3a1d7aa9e7b00cb704aa007fe4574eb25a414b5d8b82a713b2cd03fbf8b852042ae74d88b88581022b7167ceb6e35012ae272ea312e35f064a87907f6a6b3cf3ded70d5ab4c1464be19ebca153de514765a1e836b2e6cba3396d6b9f4676d32a507bffb03db19e3a9951fada5f6c8c4d2bae0955b06c523fd5de274946d35313d95609f655f8c5cf8a663d6328716f5b1d5cb1b238c3c1849aa0468761c7ee0f30085e14a45659d9871c0881e01a00018f8e1dbc207ec2cf841914ba2272be52b9046089c4dd560b16b72019dbb7e45db4188b5c9a57e80e822864d7927320af225f0bdd2cbf38a8b4e02294b81fba26b8136ed50a767b544debda14528d116660c2e030a916a2f0f93810389de73ae8a01bd5dabee1d8de3348544992bec5253741593655c838870f5c7bd28e2dda104ccd01f60ed8b14a35bc73dc822abf001afe2d3f566d5f27d652808f19525510b90d711cb04e59d17ee1ba2c79c0e282fcacc109e7f003efd92cf04e6a8add67c11da62d6f9698798a1c22bd766d1b65d2351ee1f7ab6fbea86850e739949c37dcc1010c66c3a55557ede719ba837e95bd0bcaa05a88db0259d897c40e6466d40f16509e903d67a28b1668a231ef8e5e3ffd697384c8d2bc0dab27670db4b633b269df7ee873df5377d48e73f737c71bb3745a1a3115b04511d9b6d0c091c77eee13edd47c918fca1c43a700502e48c278f7c828186f312d80c9c91cf439fdbda60d9ada50b86d8934e377305509aa34483cae541d9db329db446ca142d63e9b188296bddf8722c54a5add7f608593b340962bb9b89ae5512a448688f048d662b508ea34e007860c97307c1a84ef4cfcd2d16cd84ac93210be293048ec0cefefa96be85066424d8534e537cfbc6b19c18eaab51c233908e550b22bd0ddc6d01008659541191c805811ef082c55dc1b88c1ecc861371f80d1da908135153e465e4b4e5f281b1f148c5a1edba5eff2d259210cae0884d5092e5b7582b85f3cf75ef7317a1c02599738b31a7c7c5d91a8b877c8ef5f0e3a5f3cca84f7318492299cda734847c26e926e7f42f0ecd829725084faec1152d3efb99b5029c3f0480bf5fa1c676d209ee43c723afc17bbd4396b46ec140ee78defd052c3704644b3eb1daec1b00d3ce737c1342e7e08803a722d3860943e55661983fba859a23593f550b26a1bdee109da6a3c1d4690066520c517f67421c2993ee2915f247e19bde9ca6e821eb61c91a8cac4fedd9975a48be04a8c1e7618faef411115442d759e23e53682297dc710103df4867ceabf6bc5dc53edb741294739b53111b246aac5dc0cc0bb6e203b4a107d89d37e90051c8395a703027545d91124fb5a7d7245e4b6a132b4677c8175637112d3b9a6ec9ede1a43008da20e33d3d4c775f8ee90fc62c45ad69fef65b950cca9103f1b0a2f44ae863fbf0184f02015654b6159f836740f9b9c2eab809e3f380a00f1764cdb32dc181014fe6afe9ef7acd76bf1d76a194fbc7068c7043ee49f2aa5075d5ffd8c7dab180b71d171ceb2bd84a1b63225ee2b67009cd4500f76118541292a2e5d6ff94acfd982488afc948ec2f2886996ab58d9007b6fa5f3958648f8267c25abffe565a89ed4ea2304884099acec2677b9b314f87b5b0294106ae46bc70a3f4d4cac530e741f4acbabb0fe9219cd951b8310905ffbc2d82b40e718cc9d0e3b0d308f6c83ff0a95c380f6f54196d8ca057761e97b5cc630d975e8c620887bc5c09f4ddb05da53dfab6e31196cc0a7957702e68c5fe651493f7b0bdcad4766bb2db9b89c2e97702c026b72d8c84b8f96e25d5aedd43398317053f5cf2f7c01347d63111a59552d69f75c5bf21e1f5bcb31e47f679756ed377a234e0e5ff18f890848d68c01e8615259e99ce0ef5ae3cfff15354b9109a965126b433c7fd960ed92bb2bec246a60f3152a9da0ccb24bb6e5a68674fb91c649ffb97f4b013130da24d0a4bc9bea55abe2948346635ab5bd668ca33c851d706272aea3e7a1917949878cafbc2a4af2cfb4e6e48ba66f6a5f12814a3ab783270f3ef5cbc6560ad116ec589e46b68c66b43847657ec14ca6aa80c3c21ff9c3dae81b33a8a2ef2f4df69c2e38e58259b1bd02b9aa87333d6cd6435bab977f7a58764a846ed49ad1b1e95fc3f981df8cfff57e5471dc516a8f09620a0112f9f776db9b44f9da03c217b5f70f8d114b85d9d3f93a61fa7336769f13c57ecd0625af2ee6f2246580c11d0b53b8e9f3cdf36b99ed00c311cbac57c12d3f9d568afe46b5a38cb33cb220f4f305d148543a716b093ad2d97537aa15d8c744ce753be5980636f1b124601a3fb37860399f50a352cd3061b078c95b64f16e3d8fc57e74f84286adddf0ef858868dc7078cc95677f13a33863a8613ad30cbe885887d0adf94631b13297c481c2c95568901dcbd8b50debdde5f87986e261c67f0c738f8e5f9cea455266f7c01a2f76b1a1c1580895c8d843526029c0c73a20d708986664a27fed650c004c04b7c3286631c3692220ec81453500be3c0bba30e4c464972e308fc547477355fec8c6d9564583a90bfa04613ef564cdbbd7d41d6049172aaaf513b3c8fdecb278aa2f88a8cffacca14a3cc9d63dbea0e1e44645f3f04d270c765dcfd1e239fb2acc5c5d5be14bc589e5c93a4704bb3794d3d9363c2ff565346e243f77b5b629e58c26ef1c49d3324f4d0f8c61ca2abe6ee967ad242125a6a5546a8f044da433069b488beca3c85270f2ca3b7b7cf4f22b678e01e93d9c80b4e9726e4978c5f6f11b5a38e5466b27771503e5604b202cb7160bc21017701ad0e3d8e4861cbe9d5022345d64b33aad0c97d666c7546d813367a53734e41f710126f0a7ba9aa54197e2d64370580b405993217e3213ca6e0bd7564624f97845f0b86788ac99c78214abaaf7daa950721b9d64742f143dcc5ad654d509f111eb912a2a1e8ed144173246dc18c38fc39f940f2c0b3e03878d79eedfb9a549f1ba314ce02a8ae16982e56d5d03cfbf1e6d1adb6cd46d770b79f0ec191e3f1c398d97680f333882190d7eff0f14c327c1af93fd8b6305c6e9a9fffdb65041566eb4c32b5e8abfa8fc2888b0ee7000dcd8207bb41f057304ed3101e1f4225665e2b02fc6e6a219eccdeab3af99c1ce049b687bb12c428c8089fbe0557b0eed20cc18869938cc679b37dca2139b63c845d00ccdc5e2ee0e906ef3f9b562155dbb76b7c82981e8ee45502401e991b12e965e2fcde33cd335ddf699d9da905db1556780bc8018c14ca756a69f144d3a127994c2c18cc97058bd9fc126af7a7c35a9580568e72b64f00395f1a10fbb9b8d85021e25524fa59658bb0a73aa1547b43ca1ec70aa68afaba7a8b439ee5ee66659e4fb356398639923247c76def49037d6fa4c24afe5bd60a74f93254fbd1574b07e50d39efaf21e56f52a196f7dd8a620c3dd508d5cfac81944defa69399a6e9f4e8a1ec185fedba6ac5779bfe996a768b8071cd4e7bcf29d7f13a04ab2f02c25481ae8c3e17bf41ad1c671d4839a5ff7e56d7596d8b6addbf2c4a14ca9b4ba4dd6cbb95757fa88a0ca4c5b1947f8361ab81e342f8cf4117b2c26bf82c364f86c18a1eea12e21cb1aecddc36f0049c8e2b03efdb9521df690dd568e8064f295ac7951677a292500326640780ec2c4242222e1da788253a6ee7741a92ac3e8fb220ab404b33740fe1e7d2c23175ae3c2d61bc8f5748feb1664f3bb68500f063d5a5394bb65552886265a10dbdbb102f41137b47383f3b9c378569abe0febe284fd8ecf1b886eb5e6dff8dddc5800b233d345551d621dc12ba8ca79adfe6ecb7b6621ccc27a63cdbf68ce9917c73942e4a330026efea1a432527d56b93b62e043da97d207d7cca2d568b46665dd3d14a0812b6f4957b6645297e47df6063aec32cbb5057fccedda95063607305ec5aa2309bc5bfc941f2d669254afae64e920906c2aa1a0e7345633d43900aa0bec5e105687ff4d02bf6f7bb97a84fa6153d16c4deee51dd1f0f67c6cf412611c7e8ae3e252bcd1c2e60547c7da33c9479758caa1b01f2628b141dd6820d87d7e2edb36c9927c40baf0f7ef757473480e7b3bd4a9240886d8ebb9d683de3e5d9b63c8584102d6245766c43c08f6db44f2f00d6274f270894c50adce4b2039ca58bdc5b568f53f74dcf964efd895f5c35e40851157fa8d5cd4be1d0e1113328ea138d58ca77e8654af8da6d00efda50b135a46d6ec4139b7b4e26a7e5f0f15c2344bbd062dc716604b0176c67215b953e58405ce87e41e6c07403a39d85e6e0cb7283867b18ff6c3f455f3685613986e03865bcc662c5ca5ab019470eda487dcf1f462567610e3103101f7db9acc00565131b39bcf7a8b164214bfd5ce4256ca6f511cb8fb931c185db5609ffdf1ac36236811ff034673802258349926aa28ecd9c2111326cadf1ce877bab47a048a354cd11743c6207f95f08333da9221d9e3065dcc7342cad437f413d92f6d70acf0b4f6bf14df41b945f1c15a8309299f44cf10cac323428740e36077bcfad97467d86ec2f44dadb8d2cfecdda1614df9a0768b3c67ad087d1e7ce3d8f5da60af0b085f50e18fbc2f98779533c3ca562680cd536ae0f4aa7343a1787b4515b8b82c076a3b8d0fae4920aebf09a85a5269fadc39ac811372aebd026b172f939ebb8ef24a0bc827886d8676204e6b00a287cdf04822ed4e087f044a06b683b4759cba795f75195130ff0be9276dd4fdf89ac3db62f02cbdde720c0aa74e150eb2d29d468035aff641c81a9457252cf2cdd1378781b000c7a5410f697807da33fb75cf48a1c5f55ba5e1f2fd1917c5ef166203665807a159de3f2051f76e28ecb72d5dee7a824dbe83129e636459e4ec323a0ac757819cc5c351dbcfcfadbd16113277bef7ff11a501934adc0a1be0e099872bf8937b322f7d998bd0f062745048c5ba8e1c1f03a87838ef1c582279df971e33c7a515e483b42c11bd08bfaead5ec73436baa6169764bdae90b3223dadd5c27fa771d4080d8e771583c1bb037be8b97ff7fff4f1ba9ce6f7092fbab8e71fa01c9850d2a1d397e878a4dda5a73f5a635d59bfc49272a2ced16ed98d9510ab08dfb662bce2277fb63167deff81cb1c703e6c78350a798f3b6662f273bf14f6c596dfe3c95895c507cab2d1cb09f02ef7413dc4b9295e4c1eb68c849b1d64224fa67edf1072a0189bda44b67eec12c545d43297b20f93d5a478b095fea7eedb1be5f0c0e4a49da09e2429211e33de38e6c5fe675c231f52350aba1d64144c4a910e705cb75d00b07d0a0e60fd177d714778bafdc45a2b0b6a7dd08f681d30c453a903336152ea0d6f9c777ba43461d51802db238163e38be2e34354ee579aa8bc8000ddd14b98356c5a423b22ba6916051e5067cd4c1d7234da0a2bb031ab32fdeb192f0f453f29c11b117171fe5577bf7cb4a51b9ea8dca18a9a9ad3d12facf168cd0839e5fa5dae6341732016ae35b1364c4691cb201544f3f2b341d7344bbd7599e1497f3b439d97123c320da0c2b9e203ffa00b545c263bcc571733bbcba3faffd3d13d44306f3d07dc30477b872708ff8d1edb8a22e52270f48e28180f442ff849ffa243ccd5d67e57ace095c32cf2829430701991fda3bf55436b366d1349643fd8a5814c0b939b965d161b902610b3d80b7637c69f5297913e3a0d38c6a6203984d8da4d3b1be012c4a7aa712558f90d6ed7f4de50ac3672a4370682926a83a2929066f8b6910a421618baa2a41fd30a5b23d905858d92950b07a077de0073982d8a3a5abdc7419e9eaf707f5855e1abd5ef3237ae37713fed10473361644a9212d92f1e4bd900afb3b59ed7a6fbae55729fa5d2576e7d308c88cccb6ba39ceb54651c11a48375d6e6049dc369c0ff1b3730f3d9e8d40ab963306642ea30d2fbd04724776b723d58cd1e8264a74594b9f900cff6e595164b16683d4cb8c19018e0f0d1d9e9ce2a64b95d9f3fd3f440fea584b891d9671e00c3797d092219e3f51f902103a8188bdfc82c322aad2251ca90f78bd2edbe65c969a6254d345f10209b0f7013a0a841a857c796b6419e01db585183b5e58987f606ae44c6578e542632e922effa3fcd61ec584fed9e35ab24e928787ad3496bc5ac736e60ec8b0115ee2a5e8c389a3313e86731849e6fba7e43162aca2d386be69ecda11179187b8fcd10f6fbfea4f80b5827563106e7c6e7f8a093ebd31b200bcf7f885a15ee229841728d2989cecb2f0c0a9035ebeba5db47c3ad4ced7f3a2184283cbf3028793689b38f432f287e8e84b1fed971157eb6478063bfef2850ab1f8e283bd5f198cd7759a9cb05bbec8affb8279dbce14fd826d755e635022c05541def186c63487abb3d8f0cac1b16319e6121d3323e44fc3b8e13fe169b03c080ac71bfe3814818e1843a43a7bc35b287c3ddad0c7fc73db1cda1d5989e59aa7c190775959de1e188204fcdd01ea7372526c909c1f8db51b55cd3b4011ee794b31e7a10c336d15656bf394d3c87bddfb4d4ae70dff78c51639a1e1cd0435e4fa96ace6d8200a8c5522ca0d9340272a0afba57536e9d7fc3ae2821e4a6d3bf8da658f3ca13818d6c0df807093d6f01f991466a133596c6e4ac3d448a83d7f1c2dfae22d6c552792de2ad53e3e0058d2b23cbdbdc5ac5a55822d393fcac07533c251f7c9e37f23b89cfb5a7d31cf41164278135a99f27ab64dfca4355a9610de952db41401f6b13cf1f74dcadbff77a5fb642389f378f83deb671cdb9b0204bfc4cc6635c1060c145f0a2120e640d381c4cfbd4c4240eae80eb846f0402f0824d73d379fc6ed1191d61fb4e012eddb088417db036781ade088bc0e4aa0c6f489f0ccf67bdc4a3302a0fbc3d973ec3b09cde1f7db58da103ef680bea4f82f59f0f98b4f8483e83d05575d0f32d2669c772c6a62a127b1f21ae965ef7c47f3cb6978610dd51b351f789b8d3b917e6e8cc3918316fc1ccde349c8f8996185fc013cb3ec20794de45d27a657d35f3de05de28f8e5fabdbffa568adef5d37a6d5dd5fbcdd7cdd47e0fc7cab18d4922b77fc67d87f481bf4fecf83eb81a625378efeec212f8d9b4bac7c62ce2aae8f723b795ca1b437affc5a7d8a0e6e150fe8141ffef9baf8acdad894d27807c6716009b809da9ea95cfba511d80c4cefea2b12d74c17d69d99642fd60427ac42ec3457bcd615c7828935adf5db351152cd43025859bfae16b0015539dce7512ddb4f94c3a43c906d328369cb658d1283572be58332cb0740cdd1e4bdd9b7816f1f974402fe7a310de4c30bfdf802bce4d31971756535677322bfe2aba613644df376f05fb1b190801b8ccf8131cba5ca734573dfb4058433333e3ea744cedc876db528eb8b9f487ed05fb47f4a8535fecc43d90eca77b5964a24940984791285ab576fcd7c1c55d6b45cfc3120740b8edadbc3fd3141cc2d0d83722e4c53f666c3b7faff84e9e58fde4bdbb92d38a915660e77f7e203049e88db548fb0d53974d926aa387638ed61fcfa83747ce5d3c5968c3d024b7b980cbe5da68d79f59b039107b218ff2c225b7badfb5e6020946832440a8e377c820d86b6934107aa2c4b2ba052c0e9c9db7846e66f067870c34ca6c1d7bf2ce0f4ee16e4554177310d228f04df02b85f6b69abb2dd2d25658160347069153ae0db2cccba7f0ce8ca51093e1d7b4862865601ee429d7692ba11ede9d39c2e5ad1ec1dc5901dbbe3bdc316c2faad0f48f8a31c6fee8c66705b28732ef866fce9e2e9e4537ba1911da060358f5c848424e355e4797b86a6b314256c7d697a97b7a4a84f17b740900b0a69a65ca447149492184d9e04f64c378891571928c17571559638fa8cd0789b0be6030ccd5a7d865149650e957065c578afc7c592a85fdde0df9fddc0798851d28e3373472aec71666808b6697c993908e9d4d3191dd7c7edb869e7acfcb1683bd312c11b1a94f9a425dc10424187b1fa3376eda0490bb95f08e131878776bbf5b580234397f15bec78e9aa8d53d3d67c7eaf8b2209c82ad0bf4a42c91bc7e26894c59458d7762d7344a77d1e402678dd25c7d1bd0408b878c4655569777bf44a83605fb0d782a0704b0d1687c70fc0faa70f67296ca7831571dc8a5233e802ad9a73477a9e5fe51ac37a97285ae18c8db08411951f7e981d574fc1baf0b6d9c7b79a77ebab545b67561a2697a7dcc88073d4c6c0c03752fe31825f433d83145a28d627ea054a64ec0ce6343f0866432ea6b4f30090e04f66df7fc91fcb62adf04501e09d7575d8bf6601fba58de92328c882d6b747e3a7e82fd075e1933e614bfa287d6fc0da80bd4b8ca96b859e6836cb95d3c777408253b30caf3782f2b5bbd08da44dc072e1ebd13381c26d14a9f28a8279cee9ba408831e89ae114746800fa89f9c19759b4ae54497cfa9901cfe315f0d7e0b69b8c9d18249bf72f30259b7cafd20a91807dc9708c59657291ea538d52cf1e5d4c0844bcb958501c72cc14903cdb526c5cb81c7e53a04b5f2363ce9b6df003f9e420c12d90b2ffa69083318b08992e4b28f8a3bb175b350bb9e78b94a16b9f70ebe06c2a5de501b2268b29fd2abf94642464738f620791ccdd2439218912683e2f2810fa35bc41ea533babd3cdc424a9cf32364b76a9cb8098f65f7b7fed2740a209fa4d97ee3b5be681b59f71b115bbb53911d7cfc8470d5f55ea8d796f78b2450fbe16cd4d1b22a79e4b2f33abfd170559da52728652791dbd9322a7c6720e25624e5dc701b9b172741758bd21b5eb2379f4c33a5f8f9c438a827a4a0f17e33feae0fd35cdcd348f7e434c1df8012c550ab3d7f17b5eea8a61971da5ba4bd8c2b03708942c24ac51927d7aeaf8972a4023ac0c661ff1a18bf3377eb6d7c6d9b1625acaf010a2ae9e78a4a41144cadffc09fd24a4bc7fa211e4a4eeb0306bfc79e1056b3edb9f5909dd5249cde79bce2d91e7dcecb9f06cfc1384b3c62f51ee1db60708aba080b398046d6121223cc2824b6402abc0d9d7f6f2df4736eed889535ff96788b42bf2f63a512d85d7ed12c20b9f235e7b6a19b2014136103df173aa0bf7d6729449d548d0d326d00c954f1b839339a9e0fc0fff23434beaa9f9772eaed742c8e2423debdcc6f9b2ae63b4dc9e763ffcd502f8fb85fcdc09af83f8ff7c6ebe1e1f0d7eda30c1b3cb1c43fa5da10374c4a82da39566675e785980691fe7366f3e4d0ce00d4991199be0643b0155f45ba956e5bf27ea837fa4632fab5cb19a5a5103d1e37f356405da2069164e96eb3b109febcdf9346095197b21b57189ecbb95d01a2e5e483e241f89c30da183d9612a5efbbda743f63594a71bff3d7cc9d30904d1bc2bdc7fbc61f00a573bb507b4575197bb634bc5efe0253a1645ce3ea78acd8b91112e17cd2418047e2886f629f6d5765dd9319324affbf7784bbac2ec975b2d3892d4f526375be7b8a789ac167aac277840047d49e749ed797e4175de2f94c9144b12bffdc3a6655cd6a0554a112c016af555e3f66c473f3bcac9d977f51534bb6ed31212738245c7a23c9ca024fd4f6ed78133b4abe0c8beb986522ea5bac68ddbc70df58bd8f54c908daae6448f7a3409b3b05998bbbf78b62d32dcb04b14ffafd28c21a2cea80650ceed345c69f3ffa3f3227e8ca92c13a81b550ddb5cefb1deeca6a5b9e072ff57e3b672bbd0fac6b8356980e378559131dcce0a264fb651fb9b79fa54644c75d302d363497b1c1af49b35a4b6b5fcf176fbf2cf03b6fd366123815b6668ff0be1d2c627c05d12686f5238bf6c6edcba2023ccb1620ad1afa808d7181c8efeca74fe23264f627a4ade1ba684f6d049b0f0538295ad5d3fef02e0333b9f99ba62123d592bafb06599efeccd082a9c5ddd57254f0a46bca6e84ed429838d4dec7ebfdd477645fa327c58d5570935d68260fe7a8cd6a1d77fd8dac11cc3271511f255f7f3a1e5c13548a49eb6d2bcb8fe5b92af9539ab117ff5a42f09c0152aef69796e067a1f35648734399f0bf3610db4aa190bfea3161e32aa130ebbbbe553fc34b58ef779d113159dd2254fb28a2253a04f4845dd3117e355dab4a6b2df8d16edc2a4c11c453328648cac5653b29acfa34f977b0ba280e0ec9872a355bdb9fd66f25af53d65f124ef705d3930f4cfff3b33b16490d4fc51effd8569294a8688abff3a4a8ad955d9186c6e3032ce37296859653560d6ed998f98ea9ba96727b4bf98a9d8fb78d7977471187833e1b411ef4631efa07e43406629c2444a53f1111ac68a67f39c6108069db0cc051f020342b699f80c8360bab0e2f7aac64152961a156946357b2a282b80baebcdd4dfc164fbf0781aac7b05c9ac0bf9b581bca37a3d9c84602f77f8c71cb7fd915a6f73b9d5447047a0d838d391b6536f1de2cffdae8fcd1fefced29ca24b1955d4c03365dc866a7bb221d08d147ea42a418664d609a734f8187fee186bf00eea5862b90c98fc3264f55b3e8e8fefa79133a194f69c67bd775f0c75b704d3b6afd7f0ff850bd07c6369371387a361d685975a8c794255c7f8e86071af61a515c62e8914d9e80901d72e8d63e24d3a2acee8b1ca5268b13bba19a3cd96d20802040a57190e4e0ad0ba7d456ef1c2edd3fd89993b91469d2cce74799f35a52ad03007be7e45a8ab91694b9dc59b77fde34a4b70e38ce7a993935ecb0259bb749f6cb81051d5f5e52d4d5d6c21565ef3242ae657db4ee6d036a5677c2c1cdc20023b3615504bd3058440e87d53044b5c4d25b8d9eb42d8f3f7275e748dd84c9682dd206f37f5bf5bbcf02183b2bbf6b057ea7718bad157d23bf5e6a741956b1f0d852b61f37884017e424d14d4614f9c96eb16f4989393fd48d49ce70bedd65a2b847548a0bc565acb7172aa6ef88940e0e72a0724ad5462ba53c551f566b37872cf89ad5c4753e49e92882a5b6308fce020aacaf210b35cb70f4cca250d39853674f918401cbcd47ac8ab3cde0889c01937a12c0c69832e1cd094395bf05233fc4e7ff67dfd9ce1bd569731760c50384fadfbb8fff569aee615bfee1b4617b6e71e4df3415679ee0240916b9f9ff3639a9badea1e1549a00dbde39212d24b68ebd161630d6c26e1a9d6be25e50624e08f711a39bd97b02d17a02dcb29081eee8678b1e519fb7e7cb252fad34ddcccc1b5173e14d7fdcb2fc8c791679120ce9fd0f1c0890136bf8c493a9b682acf767da76ad060fbafcdf3cfb58afcfcd62c418243e21f7d9771bd81dc138d8e8ccaaaa14044ddebf020d3d210917f4b98f667c3816670b535a2d32f570e20d11e1d6305f14e23e9c435e25cd6c47d650c47d8c2bc2b6ccaaf6abe4dc0ea1086a1f2a4ec7f670c6beb21563f498303d0a69301c3f1af89c6a801a00e08b989dfe4145374acb5ead51202ac1c5dfadac0762039d09383d66945c6671c3a0a6ab8041c9366921794441030c303c8d70ba772e917ab2981fad2cee473610e3f25da7667f54ad6d81700a301f4565ee68842840ee5431bb8885faf7cbffdf2af9f3ee785d379af8c0e820a481d0b4f3aa0d45346256943d618433bc50a9164c6d41b60eebb71ec169a24cdfcd9161c60ae292a73dabf31e5795993b8cc470a2404d3273959184dc8d6d3f641033a27de642010c2073600d47aecc63728fa33526e4a5237f9d34a63e1546829e034c7f405bedeb72e39d102ba7cd96403049a23f17ff78c4e372910b4041c1a05945a28e0fe116e2cf044745298844b5ee42fd1daae7772e63932536b69294f4eb54739d5b69b8344b8e12f1d4acd422f79a326ba97d4d70b0301aa02a386c2d33b85c918c86d43e4187793ce8f4f8331136fe6885beca074153e924e222bec5e248f879edb64ba03e9f23d7a59d49f799f396ca0bbc845df4b4ca0e3fc2f3f9e2aba689bcd9360e30c07e243559881f4d1039a87abd7ab04b4d6828e8f6be43d05fc4180daf727330b11158c4a02118138bd786154221e1191cdbe6d82fcdb143cfea381e3cc03c06564d958c1d2ca853eaacb0fcb35f4c917a1e8d67a02cf8857d63b873bbce7799ff5ee6b7e6d5d0b04d5e6b38707ca394f9a2f3479cf692f7c34808c0b771758e06412c733652f1539ba72fdf1a97b4746c2fdfa86981c2a152c3cffaa2519f921ceef4e5984c975719c2aa3002eae313cd4c663c05c1beb2e620a869e72175140d7885699a9083c51c90892a5f2c3fa0d1e7c6e183ffcfd28d00117b166fb58f24bbbbf2a8eb404fddb35e2ae58678d899c0f60dd364111f15788bc620172e017d9a00e1d2a5b279ed788d1fef1df374735ce3d7a804b2b3190eb95c1bebcc3bacd800c34e8a16cea1538e7f59650e29951529eb0448b153c3144c2761d516c86d3fea6187499105dccfa9b09ad1b677b32ae115d75e1f3aeae0c87a95dee9813ec907c64705eade1a4ed6a8c8ae8b5f88edd86de6ecb5affa63094ad0bb28a03f99da4c736814caefc6ad6addf8a8c5c12f0422e849b4b7fd51ca1a4e89068428d7dd0132fe7b902b38a3113d593d66f062474523c869483e485aea68a52054e044079516237c517530a17bbde0064a3cd7ac3f396b8eb7b4779f827a23986684d0ccd3bb34d9868d7a87fa62dd7174bc4c654c54786ca15e778e29691c27261976d19a5cc8eac1a2ed8c5ba5554cf60d983ffc2ff744162c265c4262a8566c4157600cb1be8f1cda8c601ad3859697f7da2b61aebcd56a0b6ba7aebaeb6a40d50bb7c218cb4d2d555029f5a489b6a875a0fb2bf1bb06e585982fd887587887ce9e079420a439c3beca61d313191fbee112f0eee03f9abdfd195119b7a6323a27b50d4fab87206995598546541daa016c5fb3d6084e9d8052f76cac3863e0d1112d8902d854a27717f3c51c98d791a6abc9e470e2e93a9ff257c93341e16488e4c9427cdd6a9a44edf306bb924a42de5194c139a28583f845b154b4e72bef4130cf2a5ebe1fa9fc9db8313a78464ec265903377064efd6e01068dd9da04366c63d512c2308910ae6ada5030b6482bc0cd835bddc342f83b1e008ff0440a5f68c0966f0ab68d3eef19e29ad3f154dd8f330e16c26e0e8809696a4252165c5de21eda1284a0dcb49c0feb744c2157bc642ebc184c48679efbda38f8930aaf0f77dfe93a22d081b3b3e643065236384a0a0296e871a172c39705a942ad8ba085d225bac85516e99dfb13b1055c2f4feb36fff0ae0abc167c61c2db0f6610256aeeeb43efdb3f924d368cf648e3b7b9ee6b42da0fbabc5268e4768d33d3152bd0892bb803196b7a5b15948ba3d81d198314e3c84f1360e06dd3da3fde42fb41702fe3a450ac0cb333b1bf5756a22960fad04742d09a3674e92e17cd9caee3d3900e7252ef202c59a8ee371ae6351477b73317487dadc8e19e5762651ef553beed42a31f48f70890e91c1e7d3a3b1a7af02d2d95e3aee0c4245a0b24bdc57b569fba572bb36f24bd4b853a3c3b20315f42c7630144a37119b9bdc1aa4360ce44d0f1f16c32523cfd14dd51c82c8371be485687e24c67183ee6aacfbb5cc029d34cab8ebf437f57dd2579ca3db1b325e333d1a570b427093cf1f5a0df9f0e50eb2200f76339d918607ce2347ae55185337fadfd333661cf911d052ff1b37a4e88823b56fbad3d4f2fb4cbda83a07db58c689703882bedebc86a458729ee9d2b7b642caa8c0b4ce7396b454dc889381005a6b495b237b3b039a27998a9a45aaf69f0ba7c45807da650b0c8d1b506f0a1eca2ad77df15e099b60469ba6d9d80f6b01dbc74cf38cf616ff0a35e877f4a62420a5a6192546ebf0f9e61c5733289285b1e9a97de4c4cd342bb7fa68db5e4e203f1b78d2d3ca2db36e612bb336bf5cd1e39fbcac525ef0357a70fc2feca0f49411823e6db11d304f39ac2b81ab3886091edcd92fef50f2f5ab31a92ea6251de3bce302c2350b1c16be50300a18363d29b4b0df907a4833bf1bde6246f0615bae70230b98c9df7e0c0e4b8deff93c92c743a963e9eeecceb08b6cd205a2b41be539a49a8548e631b4bc6ae1c03c4c0e744b88d5db7e5c0b4c13fdfbd9d54d22ad1a30d1a017f2bbdfd1ce20bf717cefd02bc9d97cf0bbae4f3d2413cb233fb3145301005111556bf437a72d1a3537e0775598d90757b2f19a86b5ed9176e77d707df7f2b28a85583f11f81cdde1d57a907d55c8cb9e77f557895ee3cc74d47964896878109e2a2eb9b821a6538cd4d890fa08d0ebf08e2c77e9ce20a355f5e1ba0232456766773615157f9eb95b9d3e52de3270bc4741c32cb26a531f00c48bbb23c35c4e1f32dce86409cf8ebdb333001db68baa3a0e55fef74c73e8b16a7d81af7be4080db742540ff6f67913835ebd53163e9b3f534d9c321dad56bfd932be956cbfbb188dca89888f687c7ba053ea576b2ce1b2984984b4eb3a48be06bc0f2b59130dbd452e95ddcb8364181433f4d3f09a790d44746e7dc7f90b23a41cc68ba5a0b94e322161bb5db0f23d804ba08f7c472f4c69f236eb2feab12bd98cefd295ecb801dec52bb6cc1a50b3854120f9c2beb3f923ce84d87124b4688182bfb2043d63c168d5ef383a45d1f762f8ca0ceb4c5ed8bd5f9b25444add630b6d7f667aa4d686d47c4a1d07b7d3e2d0d704cd3401a6855c16cdd2a9beafa1c2af69c9b07b492aa67321076d93ca6300b11996e3a4a80b70aaa9184c4d776d0705b9241ca39e9b38e5631b0a0f4bfde41d5b14867e16a86781a300ab922720ab8e6656911129b80737a3fa5a5bd62cb5012d432207c9abcf46cc0203a7088aad53e60296b723d4bbe1b40fdd811cb5428874e85dda86a4c3733279d0cac64115339946d7b77911813e68d6862a36666783b4b0e2169206c1db844bb74f53a0a13a5b9e555c959f7b370c947c65b17c838942d2d320a654ed69a5862445a5b9200762245175fe24cadde6b1ac44620772a252573cffcc3f82e69747311093b54d74e31062734eeae81fc21a90983aa8d041e928c10b328f8bd2b88f3bf940ea519afe0eb431a5daf213ab4209a81506bfbac746e84acab3a9a15a385146ff39ec1321bfa8268596a42de0fa858dce4bf07d65a071de2e5770d222fc4306bb28a7628644198757a162a0b3eaed0eb57ddd2552e08aee11a7d293dc74b1440117f9017e390b6dd1d649f81dd9332f9a22def78e0f28198f97473a4addf460e5b0c7c02757066826a13196ab28158276acfd60e83f89c648194807bc84921ee78555971b6372f996ea9aa129a3e1ce5c9f9470532164ca0954f012d186acaf1ff97260621f363fbc2ba839e0f20714f94c7282aab6bad854695a56031c2acfbfeed72e021ebbfc155694b66f7a07be632ca387a3ee7cb8cf0b7e56545e2ef7a696ecef2114735d68f9e10e84265f87a9521dc2cadb9317c79ae77fc7a8c2911c1070412e5b7c22e0d52f6862a2f43bf4cf48c6d3d1d00df7310dc06cd69e43a592fc06b6aeb84d093d0a4b17cebd823ae270f49e9a9d5daf7faa0a7901939c3d5e6bfe3e7ef4231110d93764a0d030c16d8f651fed615d7994fc9593548a9100bde45fc6e203e27837a9d1ced0560c50be8e9c02b1413b067454c30831384c7e2e7e9209b888270b03797d16dfad525086ec3cd62594ecf1104f6c8e1c76e6810cc3cf30d292b6702c9061dbc7e3393f672fdf936c44928139f138013c94c1883c93dbf26a2ad656b577712f5e0e7869ae02a370453f0e0f9f211d33ec1092297828ed79d777a1b1c42e84125b1ab3e5359de0ad184941181d0b018725ca6d698c2c094cfe2a119fe584209fa814636714939f65f80124105c9e636cc800acd46ad6887643b07a62df978cb5d698cd5fb16f0a27078ea681fb65f67476ba05e08c253617376813546e4db7675c9669503454ed62bf2175bd9b9870e502db359851a55180a50a8f46278a74db611a893eea0555a15b25889cddccfe2d9028baf919cfe3b1f26ffb5ba12dd9a6071a6c0fe9e4fcfff2a9898d48af0e7735e8240fdaa81d43e8f0a099d6e7645d26493bfdb2bd363fed6dd22eb58cdd52864dff3a551d2185bdcf24a823df4a2e812c167e2ec296d5b6760fc1333fbb6cd93cc178d23ccf6d5d9578eab39f941d3095168a38feefa9c3a063f11993257b6f3bdceea6badbf40436921bc2a4220cd0884f0369ba8a319b1a3ebfa04ac3789da96d35a52f5e75ad3d1c751ae381503e6eeafde5b8a6f9e3ece78b7e20e733a813fddb0006260cb50dd97725ad4ba7afff299999743ae684d70ab93652d1766f7e5306a81e5a0d018fe571e98640ddf495b47bbf5d1014ede31ee32b4c75c42d200f672eb347acccb80739faa0525c07e5bbc3cd7c86e835d3198e594e179a2437ba557e28a7e4f1da5973acf793b710a50ab28a77c4f63670358ef3ad886c7ef2b5f9534312403c17b2e2fc09c77c08bcd85559277a32cee93b5489ff31d7687d52c1efcfb158f5b447e445072157e2f9f195c9c52ff6912f31635222ff784e9d8ae62ae41e56e97d8c205b8eaae60513186b9d18188264485dcd639f1960af1edd58f42391fc4441a94b4cfb0c2185cfcaf827a2379354b2af4e3f5f1cd77fb669e373019ce50bcda738dcbad6af453cdbae80dd42f31622a2ac7cca4c636d32a4f277cd731f07058f6ac217acba8d904102052fd7b5849bd06147ffb03d374a16a31832858128357aea210cf40303d79bf376a8b08b2d10498a1c8ec4d112fb77c52a6dd21454bebbc8e11fb5529ef0c64e2f0cb27d5f7ea8edb57bf91ed77a5b23b98938e94af9608656209ef59ea2f2c48489735b3e4cb5eb30d86a6110b824cffc5450a49eaef04dbef6ae693c876d45e843f29af1006fe34b17d5c9aaaf739049551fdf29de443baee77b4bd91d163411a3fd539bc9488b6ba76734b36e97e5a002938aefa0ad29c8286fdd04b6c3aad971002f12c616af7f56464051b0b7ffe73b737d98db9b036b41f5e5f73a8f75d60d4ee3db032d3e6671c5a97077d61f71495119683d2cbb158e0c5dabb38f82060dd7f3e499bd0eb69c29ebcaa49766e97b7cf813f884f12e54790edb5b870776b1c21a447fb9c8da1e21e708cab6d37f387c806dd602b19e936de7b996d61f826b66a0b0a6ff8ccf3cde91fe435f47c5c13eef8c0f2bd3b716e4a3d0deb295c4d0bab608598813ffb100e05ed1e50c46a2b7d613b7d52f3d02331249c2f1fe4871d2892894186dab322e22b7449db3e41f882d8c9f9c3fc5c6af83931bc37c6fae3ee84d1ab6dc90899a7117b40bb172fb10461a51b946fff675c7ca00cfef6b8f7cd1f966a8ef5e25267c1836db9c9bb22950103d8d1a93462465630c81bb3462ff2fb175a1cb5942bd590782134115fe94f40dd3036e53452ec9e4c055220935a9d7a024d0b5cc614304e8f856cfa094067768c07cea1977c118758c19b6c13746cd853eff47924075a329356727dfaf6baca32f2d553d51124f47299779b50caa09357bbfa8640b8e4603c3c32728905d6e4c991a7452cb90f5d5b9771eb7d04b08836718aa4e90549436d0b75ba0539b09885213483d41644cf8c22d666aed54147e3944eb9297744d9e499b666ee1d7f45a0fd72376ae714336f3e8c4788403746b4f3205b73522d4640515d7ab6b0073c5ae9955f3d0d838cb1dfafb6b27e6ee29fd9a2828ff3d6a115bb81be0153b24149ccbc60cf8281eda1d4bb6c02c7cb73c674f3d7bd91ec6d2975bfa952d1d8e37d58440812ec9bcaabcb398283c19303747750d759f9bbd4ccede045f1d0cfb269ae8797bf79a8f5c33f8e17cdfbfb99a87a5beed6da52a7a20c85f2adde9c4fe647503148c02dd2e8421ff74c17bf434241be725d74c131c352bc3511c3ac085edfe8fb5e441a1ccba90187bd22766989a2c65cf32eec17882f7b71e66d44d6c8f5a5ce4dac3968e53d2ff3916774581ca03304fcbce70ebc29d46a9acce24157eb1abdcdddabe632142b1737b524cdd6d6895c69a9ec3a9ddc37aaf14de69949c36685f0eb0e5be6d4fabc1d9a78f962af5c6fde6e88d19c8783768f8eaefe24bb684760ab4409c8a0d7dafdca8cec4245f99ba221e0551dc426949a6daee627ac4debe3d4dc51ab57dc636f268a7233b5a41254c7cbf299c87bf9ba162b96f857af003d144bb0f8464a9978c5e7f52a252363fb348ff08d7ca175cec8c4c837b68949f1c9bbe69085b9d55fb0326de8c61369dd7b8484cd12625445b306af1ebfbfe66fe156ff7e4392d7caab3d921cdecbee330a22a6006eaee63ad6865bf4cd9b155206f1ac93795286dce6344cbb109d3962dadeceff42da7820a24dd2158182419ac634956b6d1c5f6000588c8c9a8d17451c5fe2de15bb4781ad548187c453855b9009c3e064761831daf3dc196ea06968604f4b26d948de1243f66981d50ffa81824fdba0e98f5eed55c9e67ce33180c14ee1b9c52900606de64e019fc88385f4b1618dca17cf8ec1a40138601f14c768e29de36a87b89f48121a0bc1c362498e717d666f666c63a182343e1bf022731e356395dab4e12ff805fc8c24e21150d0f086d50effd4dc7c79565252dfe4b4fbaa5aa5988ca9fdccfcae652f13843120f9b605e7361a3e326cead87f2e82e25705a655019c5faf277c201ce32ffcded13b2f4c070950cad4a41f56a92a555cd4faa9c2cd17db68202c96aa5fc2a32381802211653d80a9d262e18d7a296156213f97379f4d19518d0354114c2ed6c30a947f3aba9bcbbf22e0d0de1f37a90c482e3fb47d593bddd423df2feadaf0477681f9c5a14d37b63bf882cbfdbb9cef68716231c327821b618f1fba9e4ba2e2a267b9cc3647d3172ccf292bd264483897b7f7ba11bd55439ddb7bc43d159cd279044b747a052bc78ba87f30ca794c74b7bb2adaa931f0e86597919a88bba939c2d2eb1990b6877ff036481fc90765036b377262157afd4ff6b2834209f63d7dba5a4461a1183ca3a26994fccf6b6580707b9a3d6c2382f30f5ad365f6d1131194f907d00c887ba14b9925f97f4e6f44a2bc72f3c7d5edee457f800664112d7214c0fce5aeabfc527b6bf9c026c68c67e783f4acc0086bde9a14cd6ee694749968de83cc09c3625f9d8eba5204c635e4ab0ec76dc76c3885749142be24b457b40b808bca721e33b608d0823755e419d1422d10ab3933c80437c1a47b270f0e641f355811654904994d53d4c5f48a1616c8e292a53efbafb4b83359a67db76547581f48d96ed667f58f15166d55e3fa71f23fc27cb86ebb3e05b07d11c32ad38dab000c485469e4ea9908a74651e267cb1dae139670d2f6b4c1b5f78e636c312fae2f2ebeb346f0db0f98cc19d2793b4dd57be747630fe0d575ba9d9552edc35dca17c65d2bb9c479d8b73a5f53aee4eb637bdb8a99f03076a18459e43b6c55e0d3bafe3ff030a71645467f04c42fcefb8a8bd38915df2e53bea4114adcbde36c09b2a47b389cfcbc4850b06469abd0296a23e88432f373692bdbfb5da848807b5047f0e43bdbbb483c03dae56147dbd0b7b612c5c47b017a43c45a1d6425e5b0ceff0d41b79f879f0ac2e2cb4170d7f2a730ce3a5e6c5439c7d3e0e120481750630a3b549caad1efed115df46bfe27a77b75025b389a9962b8694848638cd5d12c41d47855fe3375e8d192f48ec15bfdad54b1d212798eca17f873b9cc6dc99e10b4a76e41750ffdded7b9ce7d55ab4b953b1c63b5284ac2f05348b570027cb383687320b5f94d4df11692ee33a390e97c5bc8c0838c4deb6d07449b025dbaa212428420ee8f5c6d6f525448e027b2e2e386c711e6498b11f0cb0374f0113ff0e4e86ce6099a66699f1683e0f16d90b44d0c2cfe3d82b2afdc0fdcf66c33ab62859441b29a3264f15e56f57d7211423bff230ff84bb4eaf5b597d673adebb1a6be098109c0d291d1d7010872351434472d9c3b7eb395e64c22677c9d90557432c75b65e22932b6f442ec35a180950261f0cde98a01e7353567c849400ada257a81669011dbace3d065009e04f496dc5b2fe63a1db7b5e20e754802eb493c67bed445d48d8af270b87bfb4679814551f21eaa6f23a25c39475244221e6073e66957b00f62fbe9dc669f5f0893cdc71229384a0cca79f357be9075b3c261de826b39dbce27f25390e0cc0cfb60ade0424cec06c15e49be87973bafca89d6f87a4909855df522da0c7541e88dbe25305c502d916b418c5c6d5d129372c7f3b44595ba9e5071233177f25ace2454c3a489407a9fcffc7d39f0a9b24462f89a49864698fa2e814f9aed14cd9a35dbd53174272f3c1bfe4dd235ea87dd5f169071fd3d7968b7d94c5df9d15e91fe96af14827a400e18d833680ab4d282b1c3f859153a7dba265dd70e8bdfa612ef9b8fb65bee9040f68a2afbf1d8f6a23c6829240f4f0a7d3a99fc54350346fa2e0e77ab220c5645803c81d8bb64efa75914d6df74ed8f951bdb6ca5f9664bf005b9a48131152b99f61f1cb5461f6700c7c7b4a0bfa7ea0902e487d3744eaeb06053bfc9051ed1f80af7944e4e31f968c22146f84725ee813436be5506257859c1d15454dc31cbda01b6f5c24df2602a3d9bce032838190f467024d9948009d2a7228455823519592ab67ee40fbfb5301e9760ffb76d9eb3ab309fa575cea7238fbcd0b3fdacd4fb8d945b137a2e055c3a72b90f7ced2523b2545a3f5d64d4cb2da82fcdf0afc2fe95b56def7434dbdd30f2cf0fa90898070d9019504f5c42d2275ab4e1d6e01a12bba38368715779423098b1391b1daa8c2790efc93b9c394d61c260f92b2e1afa1fe32ab9d8f425f7315cf9aeda30a506c34f3cac54c6eda662b69f39129d3cf8e1d713e7023f4c3aafb284490ed2b449bd5e5990e1a5ec79a4bd42a9e90d4a96ba6a8df746b8d8fbb6bcf9a587d286ef2ce4de6aba1982ad4a097574347d58da48623feb87e979da87c9429d9efb1a462b6a51a3b00ecb6235ee8cee924934a67be10daf5745fc54ed66214e0f4deccc170532938d5814a797d95d87ed248f7e489848a2e5a4b7133b71f8309466ab4c561035b7630202599c569d6ee5469e14ab274aeae66b7f9480a7a2daebc200d48d49ad10134d188f210192a5a8236d7f142a489c460885583c5ee70d0f7e601413aaf5a6c4a6fc3dfe4bb370d527fd45bb2c14d5ca08a31ddd95540f416dfd70f341a0729a6ab1db1b32915c15857003c6efc79f09c04b9817536247f611bc7412fb9d93e2261af6f6a4f25c9d0835ddf662fb73cf1c9da130e0e035b6b17fb775a0afd21ab9982bee1f05082bcdf8d83eaf8c71d740979b4001fd4330de527a5e1aaa50803bcf282ea3a0de866d9c18c2dee1e3070ae89cc896b5b6bbf6e937301c437649980fd038a00621f4a302849037d5d78462f716da87379eb913173155cf966f0716f5fd89311f3234a453942a93bba2faad27150acc6ad954d3de6ce9a00c2ec88da3c545b3a9ca0aa02f8371b1f32c9fd4448bcb18a2d0eff595a8ee124b616cd1a12a76a9fa59c8c3294b32e1c69063fa04d0878f5c3874c84bae9871d65e553ca20a8932e7f3d67e4b29bff8efe1934cf619f993b9869406552143261c8c967820705a78583a79f45dff8babb1e78247aabea1b1c3df3c61deb2866b8d26b2b79300fd6ed47851f88fb5335d617c10fc5b436708133bbda51a49d82c8a76039fc0a6ee6bd42e36832e83909b1b4ee31d1d9ffa8ecd27f20dade33c68c83bf29b6dcd3ee394255364404de51c1c812d529d2ce5970b2ad3f06b3cc4789b1b0d74f7b38f5e1f58aba4d6a66d8c617a10e646f1d1519ed59357455af14c7df8aa5eb85945b970a99d42e89f6ab06e2bc97f2f58755fac8d5e4fe2e0770d55591d318b40e88435463a0ac325865ce6854285094314b5a3c5c8c443f1b7edafd36a0d85761a9fb22492e6340e39de26c195de972fa9196c058652671174b65512a3bc7c465a7439329640ab7657b3003b1d9fad4d2fac7a66e5cfc21910d6e92f4a8d1b1064337ec1ef03cadca8cf0a172f23f00a888efcc5d89d32bb081612107c3f00236ebe8d87859d2dc865d222ee66fe4ca487f9702da51a6d2a6c3bbd0ea73e49989d3259f1898118fb1fdfab66a4fc522530a36b9c059a459dde18463db1a47cc768d50ed43fcf4f313d9303a68fe6b04848c615850fe095c9aa8301bfa7ba2c108b07b15892440637829ef5a37a36a16b86c1b37b2797d23356c8c95d1fb54ca64dc8625ae67a0e00ea242cf0e53fe967592b715c2c046947195a35874ac0bac46195f8c587d126d58d647d12741c1d60981133e692d7b78306a400beaaaf394febf9e4e2f22d323248717f86c68d6d6fbf15244d0911d908834286915da8b488c81a435bf00bedaf67756a11aac3c58b76ea779f48e40664822d56774ea4689dae6c2f5ea8aaa33eea241b05f29258ff9fed2b7afe9978ea23bd0647c10503bc2b61c8bbd8b0a1efe43d9a700f74208e85ed9cff520598ef89d8754bd65e76e96128843fba5854280a6dc0d2873e3d645242e795e542773a949a8d482782307850e28373296b6cf563ff42da7e00a0cd621b6309bf818ef4561dd85bb0396eefb1a20e1337f3c32509281d382d52eda945501f05b80ab73a6d515d9256e2448d81e6090dccbcd6fd5849901de8ade42f9b396c9fa8a4c869682a81a64483101af1c8ac52dff47b2eeaa56b92934e0e49dccb0cb5ff5239d188f76d88dfb5744c15d8b12c542a589c5cd397b93d834604b56d3b800efa23e84e1c433d18e0c7a4abace3b3ea4f7c7eb31705a5f17fa6ab0801b912e5aa682737ce935d67934456dfd87e71841b0c0e45b60d864fbffe3eb9aab48de06cf3bee3428991839c77915fd742b4339863e3108319b5fb905b731ef0fff8ade09119730b8122f1edfb800534857801c27447ac36d7b7c9177c89cdcf7797ce59dd7f9fb319ace0d51769f6efb4fdaffe58d6fd70e7a76299cdfdad189d2d4f4ed755480fb74753320616f2f33377ee4cec179faacf736a090db6d36235c3ab87b4ca231222a1fa5932a54b6bd8ef487c8f370eb1f44fe249241e320d74c0cb1a1ee941f826d4d3e331489c74bc00fb04e26a559e0c770b021f573b3ebeb5f2ce1846d7f83ea1d10d4c2bfb5faee8ae48ab1d8072c0e4857886055a8e60a06d53cea9945d30761c54181d0b9cd07ab24b9f8385ac349e6fd39e58907c3f4489f0f22c96abdc742a2aa7e9172d0f802666a84c1c831760d714bab4d7485363ae2764686f78a265a2ac97a4688e9894711351115c51ff718430ff1c0a198a3023ea59fb28fdafa3518c48724078980d3c1e44a47019fc628f6972acccb0850a42e3868f188108ed4dcbc6fea91b16371598ed7dc46dfcb18a3ddad7fa3b75b57d960aacf12d7a64eba104d5c20a84270b6e15f9f1f2dde1d652061e5bb2f7cfb71c1b4a4549f672e7d115c6f6b1f2d84799f38f9d7adf47774f2ed51f4da6f2924c4bc4118312d55dbb8a0ef687b8f06924da24014485dde87b9138ef22f219182490cf98f6641d881a0acb031c8e6c137479a221b1c39e568a1c105f138047ebd563341cdec0516e570b926743bfd30c9906bac058e1091255923b7fe13818cbb116e97bec9d0a27272a51b8b6f7a2162ee57d593fcac0e5a4d434406c6cf46c0da2117d97dd7d5085a828091b6751369bd00f97877c6424f4bda97b3394e99c0d632541434947d3ce233269e998e726df802247a58ea572f09d0a35165c2e7fd2227ded53cfef94e51de5e5a0a569fa3d3e3c11ab822fdcd054f42107c8485416243206efa5f654e20268471edf7bd38acc4f6db5654add42a93c133e2143d1bd9d76246145ee2fed047971cab6c33919170cfb59818a8bce8c9ee11419677b89ac04ad42b1d29e8e3da4d3e1fcc3c78c19008833becdf1e1d07c3836f0fd41dbf4d85bc7e6b17349c16a4a42b16630b9bae0acf9c138e70f4a3e8c9312be8c42be35b9ea225c5168c4aa5544c3ee7a2c653077c2e6bbaafbe7ccbdebce6e059133c30b360748bec86d684a669dacaaabd00e0ac5ea3962aca42dea6be04334f897bed34647c15783b49945889c09ca3d9a0277451cb7ba011c14a83b94799ff51eba6face3826994da5bbc65db2c490b761bedfd277cad39c101cafe980f42641e4578e6a56fd0200e63883b44c9fbc0f549d7caa51b47e56becfdaff55293167a21fe4e615a27a83a9497be36c1b0fb4e77b7dd71c0867e2e24744db1df7ba4b3d38b19091548a1092c2821b4cb91bfae668988da7bbc7a5873fc1a6d93b4daf37e0ca0b50fcfbc53eb38659005aba4a4143f75d7f66a2ace993cd80c6998207ca0e7c9a9ef96ccfc431535bdcb140beab05809cd5279eafc7441516824d6aafc8bad34962d5ccb1377d87e66de8b706bbcc3eaf5ca9e218f68239fe296bb7371f212d2ba8ba4cb6e51da3f828b406b8000c98e677c1e565cc95f12a8f20819588e21f0e03c121e2bd3bff90a64a8ac25f433e878461455d1744ca25982f1a22906d3b14e3d902d0baf2d997d5cc26cea14d6d2f7b741bf6d2be48496390e78d2cd1c650ddd8f1ef60365273991c259b1b2d520204005df570f1a16b498cd9a0b5426177409ef2ad3e66b9d26dbde7947bc0b43e921075d7b6cc1eaf467b39af2c9b7e9006bf5136c07ee3805cdb8b82765faedfcec27c8d1b515da8a690ff2f4be1fa3967de468dfeb12a698790e2687dea055e06a2a1d2c09447103748f5aa79d193a92edb44d641c75275e14d91ffe08173223f6674ee90acbaa0efd4d620cf594aa7c76b4a3b90554374a6ad5b44f2c745716a26c610ffbe83d4ab22803dfd2422db6b79a146013dc8d3b05487749c5f87382f1cb163691df77ae5cf7943e6ee4dec2ddf2a912e0571836dde38d222b6bfbfecf8676ef75dd0c548f47272a1751906e399976f290c86caa3d4b085485cddebd297184e30197817b64cb5d9daa1daf49a0476b64de48c3cac9fe62d376a4285ef5697d9f11ba53e7599a4d25cf29f3a289823042fb58079793884755a0a0a4f24c88140dae0ef337edb3c7a546e1d9466c58550dec4649becea69ec759ec967e378a91b95c4078899c60fbdad270267845ce7d9d77ccdf87813b0242f134c69b6c0f721aaa5e87c48acae0ff93e94e1b130a91c8f4b28e0f6ea546a0e88f35b9af9ccfd0572d1587fcb36c955987053bd600464962dec8f92669905a81879c57ebe9f34ba3bd4c6c1cffafe0335f519ed47876eeef1a67772031c2ded303f056b0502b5f851f322958e719718882e28b1e0347a0872ffd5143ea7907baf8f5c0fe816518547ea2582e321d918ea7921a6deba82fefb702bff194709dee8dbfa75d4e356a90c8ca7696a1dd99cf2af85fc1e89cbee2d48e9a06916c5cd81d19839dcb452155a904c3075c9fa9e69d026410360708cc8ce0eb259ef993da7379ab6118d8a9b3fe41b7412ebad9dbe111c82ca7fe088b117056fcc495c399abe0d8b476d7f492081535f8291c2f581c7b893110da6014c688361a895ab49cd1b3b932c96735b0d347819444020b5dea0431c4ff82f980c0e9d210e66d0568158fb03af4636bf8ce0c54c4aea242e3a30886e0ae42bc56a7dd3918318271b6355a6de6148b963f0980e9908e4f25a7ac58831f3ce46fc636936e9c44706769e78f6d788141f6bfc6fe68019299dff36dce7438e4b030c3d1c598ea32239f441c27093c82af7dc422d493ef32ba87807d7fbf7643af3e6467dc8070c45df5c9e8411cb305f859772acb0a31ceb4a93761130a203f686628ed4a00993f56abb1f94ac79b43f304cce6ef47c9f68f336f64808851fdf32618f2f6d327a55004bf758afb89d648c3d85ca26e7448ba6057da53b1293067e024512ed00b409d337c89343cd5a5708d416e3c453a655b5bb157d76e58ac5201c7962f07a14d36576c1a6c24a48410588ebe124663a4d0110afa9a536dfecc9596500bfa718058b2bfa6513ef31c48090ab5dea897dbf9e1a5d26eae87b644fb063a068280d4852c35b21b22f0234b430af0fb7c6582310ad1c6bc8a9f9adc8e831cf3dafb02ab072ed9ef9efc769f1c98f198d6bea91301be9e7d74caaa393c3c4e3204e57666922c57cc6e8ae37f60267e0fd93a3452ef9b3254bd83e2a4052bf3af4e8a094d217da1ee369215f9883c27b926398b920da13f017487d37f4341146676d6daf2aa04282a8a86931f8bb7d18ee42b3426ece42633d884b65ce6216ecf098c02cc059ea48f0c63344f2d01f849c48eb91128bbc31ec432941a06a956731fb878f233beac0fa6a48e3d9b8c85c32622461d9636cd0ea88c0a837407bcf6963e46243e0754d2fd9010167da96b69d05569de97f4885f54e8c0fec3416864eb449a69732da29d0370ade979602b8944977ea386f276dbc67bb8ea9795c1ccffa18bfa57f80df3fa8bee472bf1b6772a3659affa0624f8f5b5092fab2262012889e7cda50c9dfa9743509bac1918fd4f986199ae7f45a49fd0946ed59e8da52464d5428838a590144442ae434828bc116007e1e5b854e1f657f91dd5f839e06d4b7880cb5f869d7ffa809b01cf39626f900fa1cfabc3c4170582e8a21e91ee07f38dc17d7a3d2fcccf5583b3f2d6075c71d18616c9eafb446b7dc5e28adf8477fcde8d19c1f91714febf83c193fef0837386bb05fc3512893a1f4116cbf090906f90bb37d718baef961c6696fcad851280817cf5b99c0fd03fcd0f564c3e803cb08de093a6543e6bc389c3e4667de1cb520fa0cc1cc3eff8f6da792135283449538fa3d75828bcf935080fdc24739c370474fa906bf29ba87c0eb43a5dbed4be22ecc492e9286dd38b1d83ce0860926f0cc7974d6fc2fa6874bdf812075cd39bb4415ee0915dc88fba50394c82037f161fb9be4840fb25fe82c87b7e401fea94006f7817d82e6c29fcf0784ee874af7c5ca9c99a217d369a7b2bc8540c2646eadfb67eb9a0f5f6c6d3811540caba3701e28357c0923063c8c1d3204783b387ecf4c20cc4d50c9d9dca3cee2788da207874dba4ee623cfe0b872d3c28bf8d885c9939dbca1c63fb947cc713fe9964b3ccf2781f302d3f19ed66c79b14c5c34a8b3957df6f613572469215d31f692c80726c518163bcc0fd20913df54a63aa21b65ff0b01876bf6f7b26a00a311268544868fbeb49cf9866efb435bd0c7960706157866f80e428927f8cded167a07d11f95792b95eb0450399122377036ec7549ba041f21ea26568a1892a492af345e0de6316cf2e525d7763bb90ce77f487a0136a56b161bdd4d6437fa0582860dca41156d3dda80b0acd3916f841f784ba343a6e9e788f2d5ecb93146f5e5ab7f0f96d1f7b060c51cf38af96f032fdd68d7045f18ef49da3df30287f57299b8fb88c3d37c70f65ba9bd902fc3730cd5a8cd8575e04e59649212e9bd041ddd4d02c1356ddd4c32e4ec6e566fd9475c83cb0dde2bf9bf7efec1cc225bd84218521ec820d7f969b191330483582718637e8b686feedd5c4d7886897855e46e65103bb680710d8e61e97f4e43eaf85598f18f240206da6bf8d4fcac498dda1074587a138f3e7c5f7ba31d76f212986babdb872eb9be8b9b3274f7dc8ceea08815d914278caabf1473050b2210a3d66b8be5dca7f807fade22e16a3c966c74fbd4b579834bdbd2f0c3ef9407f63b2ebedafaa007cab2edbf68ba1a4166654b6faf6bc144773145d7ff484640c0cee05f09a740548c0ae9810560e9b917b371874442d8eea80af2656e047216e62df3a40864831a909259342e454b70f67151a6e40952b8cf14d4b8f5fae1ed2052c12b2b8d22997813d4666675ad63752057956e13bd1d55be850cb2274fba7f9a5019322039c7f74e6c7ca5c55920a7c545d717bb92119c08aeca2634700f74a6076a1f2667703f517dd647a4f7c2ba88e7e36c3e9f0517c00bf56ed3cf36982c4c261827181ccf8b11b72f1147c2340670aa030fc67713d32b806f4e3840a62ff29c562e6d6eab523ab90be76262c8d9e3f23e0a288aa862ef59b6396deaae83c3fef5054a38b0ce5cbe8b42919ac33da2a780528678254996f00896a5777a01514e3dabe7d439d0c67f1d8f7ef8a2009b55d7eb0761f4e91a6dc9936260fee518b3229cf00e1b5edfed198fb5ba0e76884bcd239dac58dedaf52cfd3f0f988b47a4cac3568c3f499878c69385a41cfb1aaf83a447ccea92da39acf6df6dc0cbee2eed76013c409322b316d492013194e230e857a23d5eb8626fd812b8d93065ddeb3347ec0e5ebc3c05a9f476b53eb8f10d9cb2427f630f25935f842da4624b896fa98174c84d93077d3d4511514faf3d59a6688a73650eb973755a338da26478c9be8987e717a25cd23b0ece505b8d9da3a761eca17243b2a3a654f2ba0103024c593f1e4c8a376846b054f406541b891825d2f2446fc52e1237f48454d716f407e224988417634991bc261ea9a6d129c194ea60e348500d487c8b89f14376af70e3cbdda61d924b47566e4e727ae4cd9c9648e0f7067484d522af30a87d7f33bd54a86ce38571d78db4996e8f890cc6cedfc925d67d0eede66ca3ed214cbec8632be859952db900766935b79d9245caba449e8a7edb875d0d7af11c9c9289d2341cb953fea60d828cb1c31295541089e5eea6d6ec2b1b465310f76d635fc665f142ad2927f7a5a9adc8a338ed561e34747818f25518a51ecd262e46812d5da53283dc5811e5d6a26f208024f54cd7667bf47919ff1c6eaeb9338025d24af0a4093e9e80150629ebb9b3f75111a573b7ec3d6894264122422f33187d05e28a6e73a4881f59fc905b18bc7fd76e6743d9b556321507aceee887b1cccc2ce21f16b4673629eac638774459250e77177137a26225af4c19127c3b66b229233ea7ee513aedfc94550b1fafcd168f72ca08ead1db501e180570f4e975a489bbe706a57a4a7cd787eac90d24007f45739ee86586c46c17901c29fe3957f837bc15314555cd426921339af2e17a2c10ea6dbe1baaffe6de9b99927424f5cab4ca00e2051dd3a29d0b13213e0154013027edccf0661201a9908ba193e7e3e08cc622e33a0caed22d426b85a33872460fd39ee593f82b22abaad7510fd99672afea99b976f8ba0161118adc53f1ea42f42d2426a3b0123994fda7ac2cca3102ed33204ddc4fd1b1da146b4b2b590128cd40ce4da7e592917d68071c4c129b218bd3570612838dc4289d42655171b019893280cebfc03dea5adafcc1a75d009b375c1e0a9c1703f52e355e6dcea784f1f56a0e7f5889a6164f95b7ad906abe2c33e7e7e9e0bd1ecadb4d2c31059b95cbcdff19f53fd8b292585bea565d9859a69c381383859441f4c4c71740087d8916ebd0f4b78727c5a81ebee2fc339261da3d5e53af42f039958b6f5deb0037fce04f1eff13fbf07c9553b0e361faf83d55fcd56aaefd62c766abb3c5e0a7564800341ad33725083b683c690d5da3e9624aa02bccb5c66093aef746babec219db7b602e7b37837505c647a2f4df31eed64cf77eb657a5de7eb933ee6d9b2328177ba8f5d65b868ff4140b8528a44264f59aad391e686135b6cbcf7d69f26dd1d19f483ea96706147d7b678b20655f67d148c88e2130035c0fbfc1502159d5a5e5dc9f11da8374c1f44e72229aaa28cc6e3f6fce38e5615c8d41f7755ad89d73227eafcf8d7e739c0cb25132641892460027286165753d973c4ee8c2bb81c2e8b375a45bb045c9f044f84de5218ff960d884243b2a4438733cd1f60ab4c1251f172cf1f14e827f39f6cbd84872dd6e8d0905b1f98f6a67cf04d8da5a97f31baafb8e5814bed082983001114507c9cc8a300ebbbd50f7d4c251c51e283551fdc8cff3927edb2d115d1528d325cda2f52d6dce03142ada5a0b73b42f690c43b7050e36c8f71c8a7bd05e60a99eb707082f3f7ba035fdfeec606848a07a92d4932d556b391c8d6db1198a58c443f06af1a67dcdad5cdf48e22a9f2eb398abf0158a05bafee281601cc19cea09883f63a2e3ddc144aee011bccbfb6a2dd6bbed90dfbff77b043936a9c7deac6c324c324b535e946b99ec9e9f375f9a067a32d0add2a1a3b9d0ed2d0f432390bb0fb4db39cb1217659f5c23a73b09caf345f54ce19756f9471a387b447afe437f54496c4d684b064972e77b0f5302805ef74dae9a5cb3a3a1b32ee3903f2b2f748531321e188dea0eca5eb6fd1554e37f6dfe31e70911c710738208341cd34b0840126629d128561996bd110d62c69d738f3b61d3e528dd2e2db330ce7f84060cbeb2acc750c49c20a803f6079aaa11b2d9306c1017f70bb4e62d891c583aa9942c889edc5cf0b4ed4c391064070711021bfb7d84269dfeffa32270d86ee9dcc101d14ec567d510427f80cc455b9132d2eaef592f72bc991a8efed65fa4caa8f4643c056a3bf829645156f211eb83fa6109246042ce552187539ad57d6e05a97e39b6da2ca65cacee944380c5733e2b10005a35bf2c56a458d77ac38e934f4941578da955d5fb011d1ef8a075dd334c8ac6db2146ab66c759eb8dfe56ddd64a5c3b3ca603619344b3e7dfaea7b1f778d3c35541b8723f8896e5ebf1b8d979eaa4816f19fcd52edb8748e85470199b39e3e9e1d8817469e0bbbdc2f3df3a717d569ead3bab057dbd652ef1d4218577937596c3f1481c00ff4a2ba689c9b91da29cbaf5382bf9023b2e81e9e5eec051a74a0b8f2b11319e35a5852297d109031fdf760cbc415ce472122c7e6183cc78d31ba19049669147c6a84812c301f78ac68f2c18fabaceeff1c4f368a16f3c4dd8e4820903915cd5518d13aa1d0c190ef450dc211206be9ce6f57b911082bf6b591273190621d1d42684cf608c75f2e365312c3e2892630165b3fb91e1704b2c43ec59122161bf28eb63d84d86872ac9cdbc43bb2d06f81f251d2331a250f92a30d4ccd37098d8bae55c67fe8bf4096a8a32ab181e76bdcf5edf229bb808b42d5e6ba191e2ef9aac1f6baa82149606ed8b8be88ee29b192378b6bb212f01e6d21aefba4cf78957b3e97a62572b58b5d9626ec59414da1e254409c15b60159a3eac365d4b12beb473f5bd2623558c51a317139362d314aeb8ba3fa8bddf707a460f75e560e6d07eb79ce348ecd7eddb417ebbe28b725287367bc771efd7753eb8e5fca0a0df595232f12884a66555723f97763c40e56f37a67af65fc1fd6d64e712cc99fe6514f0b0059662501ee747a71568a4c680941f653d00b38fd10c04baad51a263dda1256137c92c767fa27a6177d7eb7e32677532c969391d4ca928dcbd8a0e9eb23f7edf248a6e6219696d375757fa2a13a972efb8e5a23040eb311cb31fc6fc00166595d23ee5f4b5e37f5ff150bca345e61cace1efb2cc839b99884b4b9a96193f145d6be9a1b9d8902ee2f007e1d3bed2e0be4840ab7858130952421b0a40e73ca8b87752242aa90136aa2ce31233c9e26e8b9c2e2c17806f48eebcb67a1dbaa382bc3510f66e4e25feda9d5a0a161ae96054120326d5c1ccbf3cb18e3f483e6e41613c98f398a23b5814ddc9e6fc4af06bd59b688aeeca15cfd484f94304ab55a8b48006afe5caadb0e6aea48203512c7c3284249002a0093a4b93b694db7dd3c4e86cb62dff433efddee9b50cb7062722c86f359b64bc28ba4c38511bc308904abec7bbeca1747e1bdeb22f40174943c57f112b3437b37466b121d8f0a53bd98bd381be54191d2939df29fb6da9c405428203a05c581933c267406a0feb545fcd6b2d3e8a4b103c605817f0b9da144e13e6542957aa84779a81964e5cccc0330feccb7c90cb0a303adf06710bffaa94af54dea3aa15331ef13fc5817ae1908152df05a954527a37103e8ec4adccc88eadc0ab563bd1bfed93fad187950f1636169a06dc308dd55b6c488f37947add97c3486d73f9bcbb99f9b86f7144aec91f4c342c3829817deff069d12be3149482f59b5b464dc1435472061c577b4b1154deb3a5b8848b00529d36bf70a95a6f3c64c72fd647526824a54aa970f899053e1f2e169378f362b2ddc4482a1968408d4d1774759db629462155f0b99a1cfa84f2aa9f7e567179d0e2ce21d6471e50641aeffd6ab4d6585f75bb2cbf19be4a8741e0694ec0122b1a4e0ca1141c0c2e6af7f7025cd3fd5950eb51d72ab40d3dcceef335ee73d577b8aa8cc6df3389f7f4a59b968323bdd45ad5c83f40de1ff7a7814019228355b3f6cb946af2821b75c58372ae9f2412a10f9e47011a062aa44768f3fee5523f9ffb6f3a9dd99fa6ba0bb365edff29afb7317f</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">您好, 这里需要密码.</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">有东西被加密了, 请输入密码查看.</summary>
    
    
    
    
    <category term="竹云" scheme="https://xiaoyan94.github.io/tags/%E7%AB%B9%E4%BA%91/"/>
    
  </entry>
  
  <entry>
    <title>导出 jar 包的几种方式（命令行、Idea、Eclipse）</title>
    <link href="https://xiaoyan94.github.io/2020/08/23/%E5%AF%BC%E5%87%BAjar%E5%8C%85%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/"/>
    <id>https://xiaoyan94.github.io/2020/08/23/%E5%AF%BC%E5%87%BAjar%E5%8C%85%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/</id>
    <published>2020-08-22T18:05:51.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>要单独将一个处理器类导出为 jar 包，除了用 Eclipse，用 <code>jar</code> 命令和 maven 打包也是很方便的。本文介绍了导出 Jar 包的几种方式。</p><a id="more"></a><h3 id="第一种，使用-Eclipse-的-Export-功能"><a href="#第一种，使用-Eclipse-的-Export-功能" class="headerlink" title="第一种，使用 Eclipse 的 Export 功能"></a>第一种，使用 <code>Eclipse</code> 的 <code>Export</code> 功能</h3><ul><li>新建 <code>lib</code> 目录放入第三方 jar 包，然后点击 <code>Add to Path</code></li><li>在类的 java 文件上右键 <code>Export</code> 选择导出 <code>Jar</code> 包</li></ul><h3 id="第二种，使用-mvn-package-命令"><a href="#第二种，使用-mvn-package-命令" class="headerlink" title="第二种，使用 mvn package 命令"></a>第二种，使用 <code>mvn package</code> 命令</h3><p>首先将使用到的第三方 jar 包安装到 Maven 本地仓库：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">  yan  ~/Downloads  mvn install:install-file -Dfile=bfw-api-1.3.1.jar -DgroupId=com.bamboocloud -DartifactId=bfw-api-1.3.1 -Dversion=1.3.1 -Dpackaging=jar</span><br><span class="line">[INFO] Scanning <span class="keyword">for</span> projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ------------------&lt; org.apache.maven:standalone-pom &gt;-------------------</span><br><span class="line">[INFO] Building Maven Stub Project (No POM) 1</span><br><span class="line">[INFO] --------------------------------[ pom ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-install-plugin:2.4:install-file (default-cli) @ standalone-pom ---</span><br><span class="line">[INFO] Installing /Users/yan/Downloads/bfw-api-1.3.1.jar to /Users/yan/.m2/repository/com/bamboocloud/bfw-api-1.3.1/1.3.1/bfw-api-1.3.1-1.3.1.jar</span><br><span class="line">[INFO] Installing /var/folders/bp/qj5wrpcx2vldm47jrf2pwhg00000gn/T/mvninstall4925133153419211597.pom to /Users/yan/.m2/repository/com/bamboocloud/bfw-api-1.3.1/1.3.1/bfw-api-1.3.1-1.3.1.pom</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  0.311 s</span><br><span class="line">[INFO] Finished at: 2020-08-23T01:20:17+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">  yan  ~/Downloads </span><br><span class="line">  yan  ~/Downloads  mvn install:install-file -Dfile=bim-api-6.5.0.jar -DgroupId=com.bamboocloud -DartifactId=bim-api-6.5.0 -Dversion=6.5.0 -Dpackaging=jar</span><br><span class="line">[INFO] Scanning <span class="keyword">for</span> projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ------------------&lt; org.apache.maven:standalone-pom &gt;-------------------</span><br><span class="line">[INFO] Building Maven Stub Project (No POM) 1</span><br><span class="line">[INFO] --------------------------------[ pom ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-install-plugin:2.4:install-file (default-cli) @ standalone-pom ---</span><br><span class="line">[INFO] Installing /Users/yan/Downloads/bim-api-6.5.0.jar to /Users/yan/.m2/repository/com/bamboocloud/bim-api-6.5.0/6.5.0/bim-api-6.5.0-6.5.0.jar</span><br><span class="line">[INFO] Installing /var/folders/bp/qj5wrpcx2vldm47jrf2pwhg00000gn/T/mvninstall7064391259515368380.pom to /Users/yan/.m2/repository/com/bamboocloud/bim-api-6.5.0/6.5.0/bim-api-6.5.0-6.5.0.pom</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  0.398 s</span><br><span class="line">[INFO] Finished at: 2020-08-23T01:18:54+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">  yan  ~/Downloads </span><br></pre></td></tr></table></figure></div><ul><li>在 Idea 设置中找到 Maven 设置，点击进入仓库更新本地仓库，这样可以在 <code>pom.xml</code> 文件中有代码补全自动提示</li></ul><p>然后在 <code>pom.xml</code> 中引用安装在本地仓库的 jar 包</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定 java 版本号以解决 Maven 编译 Error:</span></span><br><span class="line"><span class="comment">    [ERROR] 不再支持源选项 5。请使用 7 或更高版本。</span></span><br><span class="line"><span class="comment">    [ERROR] 不再支持目标选项 5。请使用 7 或更高版本。 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">maven.compiler.encoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.bamboocloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>BCJavaHandler<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.5.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        安装到 Maven 本地仓库的 jar 包 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.bamboocloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>bfw-api-1.3.1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.bamboocloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>bim-api-6.5.0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>然后进入项目根目录，打包</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">  yan  ~/IdeaProjects/BCJavaHandler  mvn clean  </span><br><span class="line">[INFO] Scanning <span class="keyword">for</span> projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] -------------------&lt; com.bamboocloud:BCJavaHandler &gt;--------------------</span><br><span class="line">[INFO] Building BCJavaHandler 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ BCJavaHandler ---</span><br><span class="line">[INFO] Deleting /Users/yan/IdeaProjects/BCJavaHandler/target</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  0.264 s</span><br><span class="line">[INFO] Finished at: 2020-08-23T01:32:04+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">  yan  ~/IdeaProjects/BCJavaHandler  mvn package</span><br><span class="line">[INFO] Scanning <span class="keyword">for</span> projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] -------------------&lt; com.bamboocloud:BCJavaHandler &gt;--------------------</span><br><span class="line">[INFO] Building BCJavaHandler 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ BCJavaHandler ---</span><br><span class="line">[INFO] Using <span class="string">'UTF-8'</span> encoding to copy filtered resources.</span><br><span class="line">[INFO] Copying 0 resource</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ BCJavaHandler ---</span><br><span class="line">[INFO] Changes detected - recompiling the module!</span><br><span class="line">[INFO] Compiling 1 <span class="built_in">source</span> file to /Users/yan/IdeaProjects/BCJavaHandler/target/classes</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ BCJavaHandler ---</span><br><span class="line">[INFO] Using <span class="string">'UTF-8'</span> encoding to copy filtered resources.</span><br><span class="line">[INFO] skip non existing resourceDirectory /Users/yan/IdeaProjects/BCJavaHandler/src/<span class="built_in">test</span>/resources</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ BCJavaHandler ---</span><br><span class="line">[INFO] Nothing to compile - all classes are up to date</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-surefire-plugin:2.12.4:<span class="built_in">test</span> (default-test) @ BCJavaHandler ---</span><br><span class="line">[INFO] No tests to run.</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ BCJavaHandler ---</span><br><span class="line">[INFO] Building jar: /Users/yan/IdeaProjects/BCJavaHandler/target/BCJavaHandler-1.0-SNAPSHOT.jar</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  1.789 s</span><br><span class="line">[INFO] Finished at: 2020-08-23T01:32:08+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">  yan  ~/IdeaProjects/BCJavaHandler  ll</span><br><span class="line">total 16</span><br><span class="line">-rw-r--r--  1 yan  staff    80B  8 23 01:07 BCJavaHandler.iml</span><br><span class="line">-rw-r--r--  1 yan  staff   1.4K  8 23 01:31 pom.xml</span><br><span class="line">drwxr-xr-x  4 yan  staff   128B  8 23 01:07 src</span><br><span class="line">drwxr-xr-x  8 yan  staff   256B  8 23 01:34 target</span><br><span class="line">  yan  ~/IdeaProjects/BCJavaHandler  <span class="built_in">cd</span> target</span><br><span class="line">  yan  ~/IdeaProjects/BCJavaHandler/target  ll</span><br><span class="line">total 8</span><br><span class="line">-rw-r--r--@ 1 yan  staff   3.0K  8 23 01:32 BCJavaHandler-1.0-SNAPSHOT.jar</span><br><span class="line">drwxr-xr-x  4 yan  staff   128B  8 23 01:52 classes</span><br><span class="line">drwxr-xr-x  3 yan  staff    96B  8 23 01:32 generated-sources</span><br><span class="line">drwxr-xr-x  3 yan  staff    96B  8 23 01:32 maven-archiver</span><br><span class="line">drwxr-xr-x  3 yan  staff    96B  8 23 01:32 maven-status</span><br></pre></td></tr></table></figure></div><h3 id="第三种，使用-jar-cf-命令"><a href="#第三种，使用-jar-cf-命令" class="headerlink" title="第三种，使用 jar -cf 命令"></a>第三种，使用 <code>jar -cf</code> 命令</h3><p>找到 class 所在目录，进入与包名一级的目录，使用 <code>jar</code> 命令创建 jar 包</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  yan  ~/IdeaProjects/BCJavaHandler  <span class="built_in">cd</span> target/classes/</span><br><span class="line">  yan  ~/IdeaProjects/BCJavaHandler/target/classes  ll</span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x  3 yan  staff    96B  8 23 01:32 com</span><br><span class="line">  yan  ~/IdeaProjects/BCJavaHandler/target/classes  jar -cf convert_test_v0.1_jar.jar com</span><br><span class="line">  yan  ~/IdeaProjects/BCJavaHandler/target/classes  ll</span><br><span class="line">total 8</span><br><span class="line">drwxr-xr-x  3 yan  staff    96B  8 23 01:32 com</span><br><span class="line">-rw-r--r--  1 yan  staff   1.7K  8 23 01:52 convert_test_v0.1_jar.jar</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
    <summary type="html">&lt;p&gt;要单独将一个处理器类导出为 jar 包，除了用 Eclipse，用 &lt;code&gt;jar&lt;/code&gt; 命令和 maven 打包也是很方便的。本文介绍了导出 Jar 包的几种方式。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Java" scheme="https://xiaoyan94.github.io/tags/Java/"/>
    
    <category term="Maven" scheme="https://xiaoyan94.github.io/tags/Maven/"/>
    
    <category term="Idea" scheme="https://xiaoyan94.github.io/tags/Idea/"/>
    
  </entry>
  
  <entry>
    <title>JVM 07 对象的实例化内存布局与访问定位</title>
    <link href="https://xiaoyan94.github.io/2020/08/08/JVM-07/"/>
    <id>https://xiaoyan94.github.io/2020/08/08/JVM-07/</id>
    <published>2020-08-08T13:13:37.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="对象的实例化"><a href="#对象的实例化" class="headerlink" title="对象的实例化"></a>对象的实例化</h2><h3 id="对象实例化的几种方式"><a href="#对象实例化的几种方式" class="headerlink" title="对象实例化的几种方式"></a>对象实例化的几种方式</h3><p><em>美团</em>：  </p><ul><li>对象在 JVM 中饭是怎么存储的？</li><li>对象头信息里面有哪些东西？</li></ul><p><em>蚂蚁金服</em>：</p><ul><li>二面：Java 对象头里有什么？</li></ul><p><strong>对象的实例化</strong>：</p><ul><li>创建对象的方式<ul><li><code>new</code><ul><li><code>new</code> 最常见的方式</li><li>变形 1 : Xxx 的静态方法</li><li>变形 2 : XxxBuilder&#x2F;XxxFactory 的静态方法</li></ul></li><li>Class 的 <code>newInstance()</code><ul><li>反射的方式，只能调用空参的构造器，权限必须是 <code>public</code></li></ul></li><li>Constructor 的 <code>newInstance(Xxx)</code><ul><li>反射的方式，可以调用空参、带参的构造器。权限没有要求</li></ul></li><li>使用 <code>clone()</code><ul><li>不调用任何构造器，当前类需要实现 <code>Cloneable</code> 接口, 实现 <code>clone()</code></li></ul></li><li>使用反序列化<ul><li>从文件、网络中获取一个对象的二进制流</li></ul></li><li>第三方库 <code>Objenesis</code></li></ul></li><li>创建对象的步骤<ol><li>判断对象对应的类是否加载、链接、初始化<br> <em>虚拟机遇到一条 <code>new</code> 指令 ，首先去检查这个指令的参数能否在 Metaspace 的常量池中定位到一个类的符号引用，并且检查这个符号引用代表的类是否已经被加载、解忻和初始化。( 即判断类元信息是否存在)。如果没有，那么在双亲委派模式下，使用当前类加载器以 <code>ClassLoader+包名+类名</code> 为 Key 进行查找对应的 .class 文件。如果没有找到文件，则抛出 <code>ClassNotFoundException</code> 异常，如果找到，则进行类加载，并生成对应的 <code>Class</code> 类对象</em></li><li>为对象分配内存<br> <em>首先计算对象占用空间大小，接着在堆中划分一块内存给新对象。如果实例成员变量是引用变量，仅分配引用变量空间即可，即4个字节大小。</em><ol><li>如果内存规整<ol><li>指针碰撞</li></ol></li><li>如果内存不规整<ol><li>虚拟机需要维护一个列表</li><li>空闲列表分配</li></ol></li><li>说明</li></ol></li><li>处理并发安全问题<ol><li>采用 CAS 配上失败重试保证更新的原子性</li><li>每个线程预先分配一块 TLAB</li></ol></li><li>初始化分配到的空间<ol><li>所有属性设置默认值，保证对象实例字段在不赋值时可以直接使用</li></ol></li><li>设置对象的对象头</li><li>执行 <code>init</code> 方法进行初始化</li></ol></li></ul><p>从字节码角度看对象的创建过程</p><hr><h2 id="对象的内存布局"><a href="#对象的内存布局" class="headerlink" title="对象的内存布局"></a>对象的内存布局</h2><hr><h2 id="对象的访问定位"><a href="#对象的访问定位" class="headerlink" title="对象的访问定位"></a>对象的访问定位</h2><hr>]]></content>
    
    
      
      
    <summary type="html"></summary>
      
    
    
    
    
    <category term="Java" scheme="https://xiaoyan94.github.io/tags/Java/"/>
    
    <category term="JVM" scheme="https://xiaoyan94.github.io/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>JVM 06 运行时数据区的总结与常见大厂面试题说明</title>
    <link href="https://xiaoyan94.github.io/2020/08/08/JVM-06/"/>
    <id>https://xiaoyan94.github.io/2020/08/08/JVM-06/</id>
    <published>2020-08-08T12:46:21.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>常见面试题</p><a id="more"></a><p><img src="/2020/08/08/JVM-06/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E7%9A%84%E6%80%BB%E7%BB%931.png" alt="运行时数据区的总结"></p><p><em>百度</em>:</p><ul><li>三面：说一下 JVM 内存模型吧，有哪些区？分别干什么的？</li></ul><p><em>蚂蚁金服</em>:</p><ul><li>Java8 的内存分代改进</li><li>JVM 内存分哪几个区，每个区的作用是什么？</li><li>一面: JVM 内存分布 &#x2F; 内存结构？栈和堆的区别？堆的结构？为什么两个 survivor 区？</li><li>二面: Eden 和 Survior 的比例分配</li></ul><p><em>小米</em>:</p><ul><li>jvm 内存分区，为什么要有新生代和老年代</li></ul><p><em>字节跳动</em>:</p><ul><li>二面: Java 的内存分区</li><li>二面：讲讲 jvm 运行时数据区</li><li>什么时候对象会进入老年代?</li></ul><p><em>京东</em>:</p><ul><li>JVM 的内存结构，Eden 和 Survivor 比例。</li><li>JVM 内存为什么要分成新生代，老年代，持久代。新生代中为什么要分为 Eden 和 Survivor。</li></ul><p><em>天猫</em>: .</p><ul><li>一面: Jvm 内存模型以及分区，需要详细到每个区放什么。</li><li>一面: JVM 的内存模型，Java8 做了什么修改</li></ul><p><em>拼多多</em>:</p><ul><li>JVM 内存分哪几个区，每个区的作用是什么?</li></ul><p><em>美团</em>:</p><ul><li>java 内存分配</li><li>jvm 的永久代中会发生垃圾回收吗？</li><li>一面: jvm 内存分区，为什么要有新生代和老年代?</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;常见面试题&lt;/p&gt;</summary>
    
    
    
    
    <category term="Java" scheme="https://xiaoyan94.github.io/tags/Java/"/>
    
    <category term="JVM" scheme="https://xiaoyan94.github.io/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>JVM 05 运行时数据区之方法区 (MethodArea)</title>
    <link href="https://xiaoyan94.github.io/2020/07/17/JVM-05/"/>
    <id>https://xiaoyan94.github.io/2020/07/17/JVM-05/</id>
    <published>2020-07-17T06:36:32.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>方法区概述</p><ul><li><a href="#1-%E6%A0%88%E5%92%8C%E5%A0%86%E5%92%8C%E6%96%B9%E6%B3%95%E5%8C%BA%E9%97%B4%E7%9A%84%E4%BA%A4%E4%BA%92%E5%85%B3%E7%B3%BB">1 栈和堆和方法区间的交互关系</a></li><li><a href="#2-%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E7%90%86%E8%A7%A3">2 方法区的理解</a><ul><li><a href="#%E6%96%B9%E6%B3%95%E5%8C%BA%E5%9C%A8%E5%93%AA%E9%87%8C">方法区在哪里</a></li><li><a href="#HotSpot%E4%B8%AD%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E6%BC%94%E8%BF%9B">HotSpot中方法区的演进</a></li></ul></li><li><a href="#3-%E8%AE%BE%E7%BD%AE%E6%96%B9%E6%B3%95%E5%8C%BA%E5%A4%A7%E5%B0%8F%E4%B8%8EOOM">3 设置方法区大小与OOM</a></li><li><a href="#4-%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84">4 方法区的内部结构</a><ul><li><a href="#%E6%96%B9%E6%B3%95%E5%8C%BA-Method-Area-%E5%AD%98%E5%82%A8%E4%BB%80%E4%B9%88">方法区 (Method Area) 存储什么</a><ul><li><a href="#%E7%B1%BB%E5%9E%8B%E4%BF%A1%E6%81%AF">类型信息</a></li><li><a href="#%E5%9F%9F-Field-%E4%BF%A1%E6%81%AF">域 (Field) 信息</a></li><li><a href="#%E6%96%B9%E6%B3%95-Method-%E4%BF%A1%E6%81%AF">方法 (Method) 信息</a></li><li><a href="#%E5%AD%97%E8%8A%82%E7%A0%81%E8%A7%92%E5%BA%A6%E4%B8%BE%E4%BE%8B%E6%9F%A5%E7%9C%8B">字节码角度举例查看</a></li></ul></li><li><a href="#non-final-%E7%9A%84%E7%B1%BB%E5%8F%98%E9%87%8F">non-final 的类变量</a></li><li><a href="#%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E%E5%85%A8%E5%B1%80%E5%B8%B8%E9%87%8Ffinal-static">补充说明：全局常量：<code>final static</code></a></li><li><a href="#class-%E6%96%87%E4%BB%B6%E4%B8%AD%E5%B8%B8%E9%87%8F%E6%B1%A0%E7%9A%84%E7%90%86%E8%A7%A3">class 文件中常量池的理解</a><ul><li><a href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0-VS-%E5%B8%B8%E9%87%8F%E6%B1%A0">运行时常量池 VS 常量池</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%B8%B8%E9%87%8F%E6%B1%A0">为什么需要常量池</a></li><li><a href="#%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E6%9C%89%E4%BB%80%E4%B9%88">常量池中有什么</a></li><li><a href="#%E5%B0%8F%E7%BB%93">小结</a></li></ul></li><li><a href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0%E7%9A%84%E7%90%86%E8%A7%A3">运行时常量池的理解</a><ul><li><a href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0">运行时常量池</a></li></ul></li></ul></li><li><a href="#5-%E6%96%B9%E6%B3%95%E5%8C%BA%E4%BD%BF%E7%94%A8%E4%B8%BE%E4%BE%8B">5 方法区使用举例</a></li><li><a href="#6-%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E6%BC%94%E8%BF%9B%E7%BB%86%E8%8A%82">6 方法区的演进细节</a><ul><li><a href="#%E6%B0%B8%E4%B9%85%E4%BB%A3%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E8%A2%AB%E5%85%83%E7%A9%BA%E9%97%B4%E6%9B%BF%E6%8D%A2">永久代为什么要被元空间替换</a></li><li><a href="#StringTable%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E8%B0%83%E6%95%B4%E4%BD%8D%E7%BD%AE">StringTable为什么要调整位置</a></li><li><a href="#%E5%A6%82%E4%BD%95%E8%AF%81%E6%98%8E%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%E5%AD%98%E5%9C%A8%E5%93%AA">如何证明静态变量存在哪</a></li></ul></li><li><a href="#7-%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6">7 方法区的垃圾回收</a></li><li><a href="#8-%E6%80%BB%E7%BB%93">8 总结</a></li></ul><a id="more"></a><h2 id="1-栈和堆和方法区间的交互关系"><a href="#1-栈和堆和方法区间的交互关系" class="headerlink" title="1 栈和堆和方法区间的交互关系"></a>1 栈和堆和方法区间的交互关系</h2><p><img src="/2020/07/17/JVM-05/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="运行时数据区结构图"></p><p>从运行时数据区结构来看，方法区是要讨论的另一个结构。</p><p>从线程共享与否的角度来看</p><p><img src="/2020/07/17/JVM-05/%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F.svg" alt="内存区域"></p><p>栈、堆、方法区的交互关系</p><p><img src="/2020/07/17/JVM-05/%E6%A0%88%E5%A0%86%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E4%BA%A4%E4%BA%92%E5%85%B3%E7%B3%BB.png" alt="栈、堆、方法区的交互关系"></p><hr><h2 id="2-方法区的理解"><a href="#2-方法区的理解" class="headerlink" title="2 方法区的理解"></a>2 方法区的理解</h2><p><a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.5.4" target="_blank" rel="noopener">摘自 Oracle 官网 JVM 规范 2.5.4. Method Area</a></p><p>The Java Virtual Machine has a method area that is shared among all Java Virtual Machine threads. The method area is analogous to the storage area for compiled code of a conventional language or analogous to the “text” segment in an operating system process. It stores per-class structures such as the run-time constant pool, field and method data, and the code for methods and constructors, including the special methods (<a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.9" target="_blank" rel="noopener">§2.9</a>) used in class and instance initialization and interface initialization.</p><p>The method area is created on virtual machine start-up. Although the method area is logically part of the heap, simple implementations may choose not to either garbage collect or compact it. This specification does not mandate the location of the method area or the policies used to manage compiled code. The method area may be of a fixed size or may be expanded as required by the computation and may be contracted if a larger method area becomes unnecessary. The memory for the method area does not need to be contiguous.</p><p><em>A Java Virtual Machine implementation may provide the programmer or the user control over the initial size of the method area, as well as, in the case of a varying-size method area, control over the maximum and minimum method area size.</em></p><p>The following exceptional condition is associated with the method area:</p><ul><li><strong>If memory in the method area cannot be made available to satisfy an allocation request, the Java Virtual Machine throws an OutOfMemoryError.</strong></li></ul><h3 id="方法区在哪里"><a href="#方法区在哪里" class="headerlink" title="方法区在哪里"></a>方法区在哪里</h3><p>《Java 虚拟机规范》中明确说明：“尽管所有的方法区在逻辑上是属于堆的一部分，但一些简单的实现可能不会选择去进行垃圾收集或者进行压缩。” 但对于 HotSpot JVM 而言，方法区还有一个别名叫做 Non-Heap（非堆），目的就是要和堆分开。</p><p>所以，<strong>方法区看作是一块独立于 Java 堆的内存空间</strong>。</p><ul><li>方法区 (Method Area) 与 Java 堆一样，是各个线程共享的内存区域。</li><li>方法区在 JVM 启动的时候被创建，并且它的实际的物理内存空间中和 Java 堆区一样都可以是不连续的。</li><li>方法区的大小，跟堆空间一样，可以选择固定大小或者可扩展。</li><li>方法区的大小决定了系统可以保存多少个类，如果系统定义了太多的类，导致方法区溢出，虚拟机同样会抛出内存溢出错误: <code>java.lang.OutOfMemoryError: PermGen space</code> 或者 <code>java.lang.OutOfMemoryError: Metaspace</code><ul><li>加载大量第三方的 jar 包；Tomcat 部署的工程过多（30-50）个；大量动态的生产反射类</li></ul></li><li>关闭 JVM 就会释放这个区域的内存。</li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MethodAreaDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"start..."</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"end..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>上面这段简单的代码，运行的时候会加载多少个类呢？</p><p><img src="/2020/07/17/JVM-05/LoadedClassesNumber.png" alt="Visual VM"></p><p>运行程序，使用 Visual VM 的 Sampler 查看发现如此简单的几句代码执行时竟然加载了一千五百多个类。</p><h3 id="HotSpot中方法区的演进"><a href="#HotSpot中方法区的演进" class="headerlink" title="HotSpot中方法区的演进"></a>HotSpot中方法区的演进</h3><ul><li>在 jdk7 及以前，习惯上把方法区，称为永久代。jdk8 开始，使用元空间取代了永久代。</li><li>本质上，方法区和永久代并不等价。仅是对 Hotspot 而言的。《Java 虚拟机规范》对如何实现方法区，不做统一要求。例如: BEA JRockit &#x2F; IBM J9 中不存在永久代的概念。<ul><li>➢ 现在来看，当年使用永久代，不是好的 idea。导致 Java 程序更容易 <code>OOM</code> (超过 <code>-XX:MaxPermSize</code> 上限)</li></ul></li></ul><p><img src="/2020/07/17/JVM-05/%E6%96%B9%E6%B3%95%E5%8C%BA1.svg" alt="方法区概述"></p><p>而到了 JDK 8 ，终于完全废弃了永久代的概念，该用与 JRockit、J9 一样在本地内存中实现的元空间（Metaspace）来代替</p><p>元空间的本质和永久代类似，都是对 JVM 规范中的方法区的实现 。不过元空间与永久代最大的区别在于；<strong>元空间不在虚拟机设置的内存中，而是使用本地内存</strong>。</p><p>永久代、元空间二者并不只是名字变了，内部机构也调整了。</p><p>根据《Java 虚拟机规范》的规定，如果方法区无法满足新的内存分配需求时，将 抛出 OOM 异常。</p><hr><h2 id="3-设置方法区大小与OOM"><a href="#3-设置方法区大小与OOM" class="headerlink" title="3 设置方法区大小与OOM"></a>3 设置方法区大小与OOM</h2><p>方法区的大小不必是固定的，jvm 可以根据应用的需要动态调整。</p><ul><li>jdk7 及以前:<ul><li>➢ 通过 <code>-XX:PermSize</code> 来设置永久代初始分配空间。默认值是 20.75M</li><li>➢ <code>-XX:MaxPermSize</code> 来设定永久代最大可分配空间。32 位机器默认是 64M， 64 位机器模式是 82M</li><li>➢ 当 JVM 加载的类信 息容量超过了这个值，会报异常 <code>OutOfMemoryError : PermGen space</code>。</li></ul></li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  测试设置方法区大小参数的默认值</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  jdk7及以前：</span></span><br><span class="line"><span class="comment"> *  -XX:PermSize=100m -XX:MaxPermSize=100m</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  jdk8及以后：</span></span><br><span class="line"><span class="comment"> *  -XX:MetaspaceSize=100m  -XX:MaxMetaspaceSize=100m</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart  shkstart@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020  12:16</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MethodAreaDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"start..."</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"end..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>首先，在 Idea 中将环境调整为 JDK 7:</p><ol><li>打开 <code>Project Structure</code> - <code>Modules</code> - 选中当前 <code>chapter09</code> , 将 <code>Sources</code> 选项中的 <code>Language Level</code> 调整为 <code>7</code> ;</li><li>打开 <code>Run</code> - <code>Edit Configurations</code> ，将 <code>JRE</code> 调整为 <code>JDK7</code> .</li></ol><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  yan  ~/Documents/JVMDemo  jps</span><br><span class="line"><span class="number">90656</span> MethodAreaDemo</span><br><span class="line"><span class="number">59491</span> Main</span><br><span class="line"><span class="number">49030</span></span><br><span class="line"><span class="number">59257</span></span><br><span class="line"><span class="number">91596</span> Jps</span><br><span class="line"><span class="number">90655</span> Launcher</span><br><span class="line">  yan  ~/Documents/JVMDemo  jinfo -flag MetaspaceSize <span class="number">90656</span></span><br><span class="line">no such flag <span class="string">'MetaspaceSize'</span></span><br><span class="line">  yan  ~/Documents/JVMDemo  jinfo -flag PermSize <span class="number">90656</span></span><br><span class="line">-XX:PermSize=<span class="number">21757952</span></span><br></pre></td></tr></table></figure></div><p>21757952 &#x2F; 1024 &#x2F; 1024 &#x3D; 20.75 M</p><p>然后，将 <code>Language Level</code> 和 <code>JRE</code> 重新设置为 JDK 8，重新运行上面的程序和命令：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  yan  ~/Documents/JVMDemo  jps</span><br><span class="line"><span class="number">59491</span> Main</span><br><span class="line"><span class="number">91940</span> Jps</span><br><span class="line"><span class="number">91927</span> MethodAreaDemo</span><br><span class="line"><span class="number">49030</span></span><br><span class="line"><span class="number">91926</span> Launcher</span><br><span class="line"><span class="number">59257</span></span><br><span class="line">  yan  ~/Documents/JVMDemo  jinfo -flag PermSize <span class="number">91927</span></span><br><span class="line">no such flag <span class="string">'PermSize'</span></span><br><span class="line">  yan  ~/Documents/JVMDemo  jinfo -flag MetaspaceSize <span class="number">91927</span></span><br><span class="line">-XX:MetaspaceSize=<span class="number">21807104</span></span><br></pre></td></tr></table></figure></div><ul><li>jdk8 及以后:<ul><li>➢ 元数据区大小可以使用参数 <code>-XX:MetaspaceSize</code> 和 <code>-XX:MaxMetaspaceSize</code> 指定，替代上述原有的两个参数。</li><li>➢ 默认值依赖于平台。windows 下，<code>-XX:MetaspaceSize</code> 是 21M， <code>-XX:MaxMetaspaceSize</code> 的值是 - 1，即没有限制。</li><li>➢ 与永久代不同，如果不指定大小，默认情况下，虚拟机会耗尽所有的可用系统内存。如果元数据区发生溢出，虚拟机一样会拋出异常 <code>OutOfMemoryError: Metaspace</code></li><li>➢ <code>-XX:MetaspaceSize</code> : 设置初始的元空间大小。 对于一个 64 位的服务器端 JVM 来说，其默认的 <code>-XX:MetaspaceSize</code> 值为 21MB. 这就是初始的高水位线，一旦触及这个水位线，Full GC 将会被触发并卸载没用的类 (即这些类对应的类加载器不再存活)，然后这个高水位线将会重置。新的高水位线的值取决于 GC 后释放了多少元空间。如果释放的空间不足，那么在不超过 <code>MaxMetaspaceSize</code> 时，适当提高该值。如果释放空间过多，则适当降低该值。</li><li>➢ 如果初始化的高水位线设置过低， 上述高水位线调整情况会发生很多次。 通过垃圾回收器的日志可以观察到 Full GC 多次调用。为了避免频繁地 GC，建议将 <code>XX:MetaspaceSize</code> 设置为一个相对较高的值。</li></ul></li></ul><p>OOMTest:</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sun.xml.internal.ws.org.objectweb.asm.ClassWriter;</span><br><span class="line"><span class="keyword">import</span> jdk.internal.org.objectweb.asm.Opcodes;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * jdk6/7中：</span></span><br><span class="line"><span class="comment"> * -XX:PermSize=10m -XX:MaxPermSize=10m</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * jdk8中：</span></span><br><span class="line"><span class="comment"> * -XX:MetaspaceSize=10m -XX:MaxMetaspaceSize=10m</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart  shkstart@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020  22:24</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OOMTest</span> <span class="keyword">extends</span> <span class="title">ClassLoader</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            OOMTest test = <span class="keyword">new</span> OOMTest();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">                <span class="comment">//创建ClassWriter对象，用于生成类的二进制字节码</span></span><br><span class="line">                ClassWriter classWriter = <span class="keyword">new</span> ClassWriter(<span class="number">0</span>);</span><br><span class="line">                <span class="comment">//指明版本号，修饰符，类名，包名，父类，接口</span></span><br><span class="line">                classWriter.visit(Opcodes.V1_6, Opcodes.ACC_PUBLIC, <span class="string">"Class"</span> + i, <span class="keyword">null</span>, <span class="string">"java/lang/Object"</span>, <span class="keyword">null</span>);</span><br><span class="line">                <span class="comment">//返回byte[]</span></span><br><span class="line">                <span class="keyword">byte</span>[] code = classWriter.toByteArray();</span><br><span class="line">                <span class="comment">//类的加载</span></span><br><span class="line">                test.defineClass(<span class="string">"Class"</span> + i, code, <span class="number">0</span>, code.length);<span class="comment">//Class对象</span></span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><iframe width="1665" height="596" src="https://www.youtube.com/embed/2jNi1siWLn0?list=PLtGk8Nqe2ZcK0xUtbQjHeX2gqgoOdKJnX" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><p><strong>如何解决这些OOM</strong>？（涉及调优，以后细说）</p><ol><li>要解决 OOM 异常或 heap space 的异常，一般的手段是首先通过内存映像分析工具 (如 Eclipse Memory Analyzer) 对 dump 出来的堆转储快照进行分析，重点是确认内存中的对象是否是必要的，也就是要先分清楚到底是出现了内存泄漏 (Memory Leak) 还是内存溢出 (Memory overflow)。</li><li>如果是内存泄漏，可进一步通过工具查看泄漏对象到 GC Roots 的引用链。于是就能找到泄漏对象是通过怎样的路径与 GCRoots 相关联并导致垃圾收集器无法自动回收它们的。掌握了泄漏对象的类型信息，以及 GC Roots 引用链的信息，就可以比较准确地定位出泄漏代码的位置。</li><li>如果不存在内存泄漏，换句话说就是内存中的对象确实都还必须存活着，那就应当检查虚拟机的堆参数 (<code>-Xmx</code> 与 <code>-Xms</code>) ，与机器物理内存对比看是否还可以调大，从代码上检查是否存在某些对象生命周期过长、持有状态时间过长的情况，尝试减少程序运行期的内存消耗。</li></ol><hr><h2 id="4-方法区的内部结构"><a href="#4-方法区的内部结构" class="headerlink" title="4 方法区的内部结构"></a>4 方法区的内部结构</h2><p><img src="/2020/07/17/JVM-05/%E6%96%B9%E6%B3%95%E5%8C%BA2.svg" alt="方法区内部结构简图"></p><h3 id="方法区-Method-Area-存储什么"><a href="#方法区-Method-Area-存储什么" class="headerlink" title="方法区 (Method Area) 存储什么"></a>方法区 (Method Area) 存储什么</h3><p>《深入理解 Java 虛拟机》书中对方法区 (Method Area) 存储内容描述如下:<br>它用于存储已被虚拟机加载的 <strong>类型信息、常量、静态变量、即时编译器编译后的代码缓存</strong> 等。</p><h4 id="类型信息"><a href="#类型信息" class="headerlink" title="类型信息"></a>类型信息</h4><p>对每个加载的类型 (类 class、接口 interface、枚举 enum、注解 annotation)，JVM 必须在方法区中存储以下类型信息:</p><ul><li>①这个类型的完整有效名称 (全名 &#x3D; 包名。类名)</li><li>②这个类型直接父类的完整有效名 (对于 interface 或是 java. lang .object，都没有父类)</li><li>③这个类型的修饰符 (public, abstract, final 的某个子集)</li><li>④这个类型直接接口的一个有序列表</li></ul><h4 id="域-Field-信息"><a href="#域-Field-信息" class="headerlink" title="域 (Field) 信息"></a>域 (Field) 信息</h4><ul><li>JVM 必须在方法区中保存类型的所有域的相关信息以及域的声明顺序。</li><li>域的相关信息包括：域名称、域类型、域修饰符 (public, private,protected, static, final, <em>volatile</em>, <em>transient</em> 的某个子集)</li></ul><h4 id="方法-Method-信息"><a href="#方法-Method-信息" class="headerlink" title="方法 (Method) 信息"></a>方法 (Method) 信息</h4><p>JVM 必须保存所有方法的以下信息，同域信息 - - 样包括声明顺序:</p><ul><li>方法名称</li><li>方法的返回类型 (或 void)</li><li>方法参数的数量和类型 (按顺序)</li><li>方法的修饰符 (public, private, protected， static, final,synchronized, native, abstract 的一个子集)</li><li>方法的字节码 (bytecodes)、 操作数栈、局部变量表及大小 (abstract 和 native 方法除外)</li><li>异常表 (abstract 和 native 方法除外)<ul><li>➢ 每个异常处理的开始位置、结束位置、代码处理在程序计数器中的偏移地址、被捕获的异常类的常量池索引</li></ul></li></ul><h4 id="字节码角度举例查看"><a href="#字节码角度举例查看" class="headerlink" title="字节码角度举例查看"></a>字节码角度举例查看</h4><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试方法区的内部构成</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart  shkstart@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020  23:39</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MethodInnerStrucTest</span> <span class="keyword">extends</span> <span class="title">Object</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">String</span>&gt;,<span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="comment">//属性</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> num = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String str = <span class="string">"测试方法的内部结构"</span>;</span><br><span class="line">    <span class="comment">//构造器</span></span><br><span class="line">    <span class="comment">//方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">20</span>;</span><br><span class="line">        System.out.println(<span class="string">"count = "</span> + count);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">test2</span><span class="params">(<span class="keyword">int</span> cal)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> value = <span class="number">30</span>;</span><br><span class="line">            result = value / cal;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(String o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p><code>javap</code> 解析字节码文件：<code>javap -v -p MethodInnerStrucTest.class &gt; a2.txt</code></p><p>加 <code>-p</code> 参数的原因是显示使用 <code>private</code> 修饰符修饰的内容</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br></pre></td><td class="code"><pre><span class="line">Classfile /Users/yan/Documents/JVMDemo/out/production/chapter09/com/atguigu/java/MethodInnerStrucTest<span class="class">.<span class="keyword">class</span></span></span><br><span class="line"><span class="class">  <span class="title">Last</span> <span class="title">modified</span> 2020年7月26日</span>; size <span class="number">1626</span> bytes</span><br><span class="line">  SHA-<span class="number">256</span> checksum <span class="number">0</span>d22603b5d8e755868a46a34db2d475555262f6854e1941535d1d232314ff9bb</span><br><span class="line">  Compiled from <span class="string">"MethodInnerStrucTest.java"</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">atguigu</span>.<span class="title">java</span>.<span class="title">MethodInnerStrucTest</span> <span class="keyword">extends</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Object</span> <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Comparable</span>&lt;<span class="title">java</span>.<span class="title">lang</span>.<span class="title">String</span>&gt;, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span></span></span><br><span class="line">  minor version: 0</span><br><span class="line">  major version: <span class="number">52</span></span><br><span class="line">  flags: (<span class="number">0x0021</span>) ACC_PUBLIC, ACC_SUPER</span><br><span class="line">  this_class: #17                         // com/atguigu/java/MethodInnerStrucTest</span><br><span class="line">  super_class: #18                        // java/lang/Object</span><br><span class="line">  interfaces: <span class="number">2</span>, fields: <span class="number">2</span>, methods: <span class="number">6</span>, attributes: <span class="number">2</span></span><br><span class="line">Constant pool:</span><br><span class="line">   #1 = Methodref          #18.#52        // java/lang/Object."&lt;init&gt;":()V</span><br><span class="line">   #2 = Fieldref           #17.#53        // com/atguigu/java/MethodInnerStrucTest.num:I</span><br><span class="line">   #3 = Fieldref           #54.#55        // java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">   #4 = Class              #56            // java/lang/StringBuilder</span><br><span class="line">   #5 = Methodref          #4.#52         // java/lang/StringBuilder."&lt;init&gt;":()V</span><br><span class="line">   #6 = String             #57            // count =</span><br><span class="line">   #7 = Methodref          #4.#58         // java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span><br><span class="line">   #8 = Methodref          #4.#59         // java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;</span><br><span class="line">   #9 = Methodref          #4.#60         // java/lang/StringBuilder.toString:()Ljava/lang/String;</span><br><span class="line">  #10 = Methodref          #61.#62        // java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">  #11 = Class              #63            // java/lang/Exception</span><br><span class="line">  #12 = Methodref          #11.#64        // java/lang/Exception.printStackTrace:()V</span><br><span class="line">  #13 = Class              #65            // java/lang/String</span><br><span class="line">  #14 = Methodref          #17.#66        // com/atguigu/java/MethodInnerStrucTest.compareTo:(Ljava/lang/String;)I</span><br><span class="line">  #15 = String             #67            // 测试方法的内部结构</span><br><span class="line">  #16 = Fieldref           #17.#68        // com/atguigu/java/MethodInnerStrucTest.str:Ljava/lang/String;</span><br><span class="line">  #17 = Class              #69            // com/atguigu/java/MethodInnerStrucTest</span><br><span class="line">  #18 = Class              #70            // java/lang/Object</span><br><span class="line">  #19 = Class              #71            // java/lang/Comparable</span><br><span class="line">  #20 = Class              #72            // java/io/Serializable</span><br><span class="line">  #21 = Utf8               num</span><br><span class="line">  #22 = Utf8               I</span><br><span class="line">  #23 = Utf8               str</span><br><span class="line">  #24 = Utf8               Ljava/lang/String;</span><br><span class="line">  #25 = Utf8               &lt;init&gt;</span><br><span class="line">  #26 = Utf8               ()V</span><br><span class="line">  #27 = Utf8               Code</span><br><span class="line">  #28 = Utf8               LineNumberTable</span><br><span class="line">  #29 = Utf8               LocalVariableTable</span><br><span class="line">  #30 = Utf8               this</span><br><span class="line">  #31 = Utf8               Lcom/atguigu/java/MethodInnerStrucTest;</span><br><span class="line">  #32 = Utf8               test1</span><br><span class="line">  #33 = Utf8               count</span><br><span class="line">  #34 = Utf8               test2</span><br><span class="line">  #35 = Utf8               (I)I</span><br><span class="line">  #36 = Utf8               value</span><br><span class="line">  #37 = Utf8               e</span><br><span class="line">  #38 = Utf8               Ljava/lang/Exception;</span><br><span class="line">  #39 = Utf8               cal</span><br><span class="line">  #40 = Utf8               result</span><br><span class="line">  #41 = Utf8               StackMapTable</span><br><span class="line">  #42 = Class              #63            // java/lang/Exception</span><br><span class="line">  #43 = Utf8               compareTo</span><br><span class="line">  #44 = Utf8               (Ljava/lang/String;)I</span><br><span class="line">  #45 = Utf8               o</span><br><span class="line">  #46 = Utf8               (Ljava/lang/Object;)I</span><br><span class="line">  #47 = Utf8               &lt;clinit&gt;</span><br><span class="line">  #48 = Utf8               Signature</span><br><span class="line">  #49 = Utf8               Ljava/lang/Object;Ljava/lang/Comparable&lt;Ljava/lang/String;&gt;;Ljava/io/Serializable;</span><br><span class="line">  #50 = Utf8               SourceFile</span><br><span class="line">  #51 = Utf8               MethodInnerStrucTest.java</span><br><span class="line">  #52 = NameAndType        #25:#26        // "&lt;init&gt;":()V</span><br><span class="line">  #53 = NameAndType        #21:#22        // num:I</span><br><span class="line">  #54 = Class              #73            // java/lang/System</span><br><span class="line">  #55 = NameAndType        #74:#75        // out:Ljava/io/PrintStream;</span><br><span class="line">  #56 = Utf8               java/lang/StringBuilder</span><br><span class="line">  #57 = Utf8               count =</span><br><span class="line">  #58 = NameAndType        #76:#77        // append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span><br><span class="line">  #59 = NameAndType        #76:#78        // append:(I)Ljava/lang/StringBuilder;</span><br><span class="line">  #60 = NameAndType        #79:#80        // toString:()Ljava/lang/String;</span><br><span class="line">  #61 = Class              #81            // java/io/PrintStream</span><br><span class="line">  #62 = NameAndType        #82:#83        // println:(Ljava/lang/String;)V</span><br><span class="line">  #63 = Utf8               java/lang/Exception</span><br><span class="line">  #64 = NameAndType        #84:#26        // printStackTrace:()V</span><br><span class="line">  #65 = Utf8               java/lang/String</span><br><span class="line">  #66 = NameAndType        #43:#44        // compareTo:(Ljava/lang/String;)I</span><br><span class="line">  #67 = Utf8               测试方法的内部结构</span><br><span class="line">  #68 = NameAndType        #23:#24        // str:Ljava/lang/String;</span><br><span class="line">  #69 = Utf8               com/atguigu/java/MethodInnerStrucTest</span><br><span class="line">  #70 = Utf8               java/lang/Object</span><br><span class="line">  #71 = Utf8               java/lang/Comparable</span><br><span class="line">  #72 = Utf8               java/io/Serializable</span><br><span class="line">  #73 = Utf8               java/lang/System</span><br><span class="line">  #74 = Utf8               out</span><br><span class="line">  #75 = Utf8               Ljava/io/PrintStream;</span><br><span class="line">  #76 = Utf8               append</span><br><span class="line">  #77 = Utf8               (Ljava/lang/String;)Ljava/lang/StringBuilder;</span><br><span class="line">  #78 = Utf8               (I)Ljava/lang/StringBuilder;</span><br><span class="line">  #79 = Utf8               toString</span><br><span class="line">  #80 = Utf8               ()Ljava/lang/String;</span><br><span class="line">  #81 = Utf8               java/io/PrintStream</span><br><span class="line">  #82 = Utf8               println</span><br><span class="line">  #83 = Utf8               (Ljava/lang/String;)V</span><br><span class="line">  #84 = Utf8               printStackTrace</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">int</span> num;</span><br><span class="line">    descriptor: I</span><br><span class="line">    flags: (<span class="number">0x0001</span>) ACC_PUBLIC</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> java.lang.String str;</span><br><span class="line">    descriptor: Ljava/lang/String;</span><br><span class="line">    flags: (<span class="number">0x000a</span>) ACC_PRIVATE, ACC_STATIC</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> com.atguigu.java.MethodInnerStrucTest();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: (<span class="number">0x0001</span>) ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         1: invokespecial #1                  // Method java/lang/Object."&lt;init&gt;":()V</span><br><span class="line">         <span class="number">4</span>: aload_0</span><br><span class="line">         <span class="number">5</span>: bipush        <span class="number">10</span></span><br><span class="line">         7: putfield      #2                  // Field num:I</span><br><span class="line">        <span class="number">10</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">10</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">12</span>: <span class="number">4</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>      <span class="number">11</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lcom/atguigu/java/MethodInnerStrucTest;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>;</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: (<span class="number">0x0001</span>) ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">3</span>, locals=<span class="number">2</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: bipush        <span class="number">20</span></span><br><span class="line">         <span class="number">2</span>: istore_1</span><br><span class="line">         3: getstatic     #3                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">         6: new           #4                  // class java/lang/StringBuilder</span><br><span class="line">         <span class="number">9</span>: dup</span><br><span class="line">        10: invokespecial #5                  // Method java/lang/StringBuilder."&lt;init&gt;":()V</span><br><span class="line">        13: ldc           #6                  // String count =</span><br><span class="line">        15: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span><br><span class="line">        <span class="number">18</span>: iload_1</span><br><span class="line">        19: invokevirtual #8                  // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;</span><br><span class="line">        22: invokevirtual #9                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;</span><br><span class="line">        25: invokevirtual #10                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">        <span class="number">28</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">17</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">18</span>: <span class="number">3</span></span><br><span class="line">        line <span class="number">19</span>: <span class="number">28</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>      <span class="number">29</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lcom/atguigu/java/MethodInnerStrucTest;</span><br><span class="line">            <span class="number">3</span>      <span class="number">26</span>     <span class="number">1</span> count   I</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">test2</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br><span class="line">    descriptor: (I)I</span><br><span class="line">    flags: (<span class="number">0x0009</span>) ACC_PUBLIC, ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">3</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: iconst_0</span><br><span class="line">         <span class="number">1</span>: istore_1</span><br><span class="line">         <span class="number">2</span>: bipush        <span class="number">30</span></span><br><span class="line">         <span class="number">4</span>: istore_2</span><br><span class="line">         <span class="number">5</span>: iload_2</span><br><span class="line">         <span class="number">6</span>: iload_0</span><br><span class="line">         <span class="number">7</span>: idiv</span><br><span class="line">         <span class="number">8</span>: istore_1</span><br><span class="line">         <span class="number">9</span>: goto          <span class="number">17</span></span><br><span class="line">        <span class="number">12</span>: astore_2</span><br><span class="line">        <span class="number">13</span>: aload_2</span><br><span class="line">        14: invokevirtual #12                 // Method java/lang/Exception.printStackTrace:()V</span><br><span class="line">        <span class="number">17</span>: iload_1</span><br><span class="line">        <span class="number">18</span>: ireturn</span><br><span class="line">      Exception table:</span><br><span class="line">         from    to  target type</span><br><span class="line">             <span class="number">2</span>     <span class="number">9</span>    <span class="number">12</span>   Class java/lang/Exception</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">21</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">23</span>: <span class="number">2</span></span><br><span class="line">        line <span class="number">24</span>: <span class="number">5</span></span><br><span class="line">        line <span class="number">27</span>: <span class="number">9</span></span><br><span class="line">        line <span class="number">25</span>: <span class="number">12</span></span><br><span class="line">        line <span class="number">26</span>: <span class="number">13</span></span><br><span class="line">        line <span class="number">28</span>: <span class="number">17</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">5</span>       <span class="number">4</span>     <span class="number">2</span> value   I</span><br><span class="line">           <span class="number">13</span>       <span class="number">4</span>     <span class="number">2</span>     e   Ljava/lang/Exception;</span><br><span class="line">            <span class="number">0</span>      <span class="number">19</span>     <span class="number">0</span>   cal   I</span><br><span class="line">            <span class="number">2</span>      <span class="number">17</span>     <span class="number">1</span> result   I</span><br><span class="line">      StackMapTable: number_of_entries = <span class="number">2</span></span><br><span class="line">        frame_type = <span class="number">255</span> <span class="comment">/* full_frame */</span></span><br><span class="line">          offset_delta = <span class="number">12</span></span><br><span class="line">          locals = [ <span class="keyword">int</span>, <span class="keyword">int</span> ]</span><br><span class="line">          stack = [ class java/lang/Exception ]</span><br><span class="line">        frame_type = <span class="number">4</span> <span class="comment">/* same */</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(java.lang.String)</span></span>;</span><br><span class="line">    descriptor: (Ljava/lang/String;)I</span><br><span class="line">    flags: (<span class="number">0x0001</span>) ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">2</span>, args_size=<span class="number">2</span></span><br><span class="line">         <span class="number">0</span>: iconst_0</span><br><span class="line">         <span class="number">1</span>: ireturn</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">33</span>: <span class="number">0</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">2</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lcom/atguigu/java/MethodInnerStrucTest;</span><br><span class="line">            <span class="number">0</span>       <span class="number">2</span>     <span class="number">1</span>     o   Ljava/lang/String;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(java.lang.Object)</span></span>;</span><br><span class="line">    descriptor: (Ljava/lang/Object;)I</span><br><span class="line">    flags: (<span class="number">0x1041</span>) ACC_PUBLIC, ACC_BRIDGE, ACC_SYNTHETIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">2</span>, args_size=<span class="number">2</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: aload_1</span><br><span class="line">         2: checkcast     #13                 // class java/lang/String</span><br><span class="line">         5: invokevirtual #14                 // Method compareTo:(Ljava/lang/String;)I</span><br><span class="line">         <span class="number">8</span>: ireturn</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">10</span>: <span class="number">0</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">9</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lcom/atguigu/java/MethodInnerStrucTest;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> &#123;&#125;;</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: (<span class="number">0x0008</span>) ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">0</span>, args_size=<span class="number">0</span></span><br><span class="line">         0: ldc           #15                 // String 测试方法的内部结构</span><br><span class="line">         2: putstatic     #16                 // Field str:Ljava/lang/String;</span><br><span class="line">         <span class="number">5</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">13</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line">Signature: #49                          // Ljava/lang/Object;Ljava/lang/Comparable&lt;Ljava/lang/String;&gt;;Ljava/io/Serializable;</span><br><span class="line">SourceFile: <span class="string">"MethodInnerStrucTest.java"</span></span><br></pre></td></tr></table></figure></div><h3 id="non-final-的类变量"><a href="#non-final-的类变量" class="headerlink" title="non-final 的类变量"></a>non-final 的类变量</h3><ul><li>静态变量和类关联在一起，随着类的加载而加载，它们成为类数据在逻辑上的一部分。</li><li>类变量被类的所有实例共享，即使没有类的实例时也可以访问它。</li></ul><p>比如下面的代码：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * non-final的类变量</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart  shkstart@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020  20:37</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MethodAreaTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Order order = <span class="keyword">null</span>;</span><br><span class="line">        order.hello();</span><br><span class="line">        System.out.println(order.count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> number = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"hello!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>在执行时是不会报空指针异常的。其编译后生成的字节码文件中实际上是直接调用的类的静态方法和静态变量。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">Classfile /Users/yan/Documents/JVMDemo/out/production/chapter09/com/atguigu/java/MethodAreaTest<span class="class">.<span class="keyword">class</span></span></span><br><span class="line"><span class="class">  <span class="title">Last</span> <span class="title">modified</span> 2020年7月23日</span>; size <span class="number">676</span> bytes</span><br><span class="line">  SHA-<span class="number">256</span> checksum <span class="number">807</span>cacb27b90d94a2df4bb43df8748ef47e8e0304335d36100cb97d1f0c964a0</span><br><span class="line">  Compiled from <span class="string">"MethodAreaTest.java"</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">atguigu</span>.<span class="title">java</span>.<span class="title">MethodAreaTest</span></span></span><br><span class="line">  minor version: 0</span><br><span class="line">  major version: <span class="number">52</span></span><br><span class="line">  flags: (<span class="number">0x0021</span>) ACC_PUBLIC, ACC_SUPER</span><br><span class="line">  this_class: #6                          // com/atguigu/java/MethodAreaTest</span><br><span class="line">  super_class: #7                         // java/lang/Object</span><br><span class="line">  interfaces: <span class="number">0</span>, fields: <span class="number">0</span>, methods: <span class="number">2</span>, attributes: <span class="number">1</span></span><br><span class="line">Constant pool:</span><br><span class="line">   #1 = Methodref          #7.#23         // java/lang/Object."&lt;init&gt;":()V</span><br><span class="line">   #2 = Methodref          #24.#25        // com/atguigu/java/Order.hello:()V</span><br><span class="line">   #3 = Fieldref           #26.#27        // java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">   #4 = Fieldref           #24.#28        // com/atguigu/java/Order.count:I</span><br><span class="line">   #5 = Methodref          #29.#30        // java/io/PrintStream.println:(I)V</span><br><span class="line">   #6 = Class              #31            // com/atguigu/java/MethodAreaTest</span><br><span class="line">   #7 = Class              #32            // java/lang/Object</span><br><span class="line">   #8 = Utf8               &lt;init&gt;</span><br><span class="line">   #9 = Utf8               ()V</span><br><span class="line">  #10 = Utf8               Code</span><br><span class="line">  #11 = Utf8               LineNumberTable</span><br><span class="line">  #12 = Utf8               LocalVariableTable</span><br><span class="line">  #13 = Utf8               this</span><br><span class="line">  #14 = Utf8               Lcom/atguigu/java/MethodAreaTest;</span><br><span class="line">  #15 = Utf8               main</span><br><span class="line">  #16 = Utf8               ([Ljava/lang/String;)V</span><br><span class="line">  #17 = Utf8               args</span><br><span class="line">  #18 = Utf8               [Ljava/lang/String;</span><br><span class="line">  #19 = Utf8               order</span><br><span class="line">  #20 = Utf8               Lcom/atguigu/java/Order;</span><br><span class="line">  #21 = Utf8               SourceFile</span><br><span class="line">  #22 = Utf8               MethodAreaTest.java</span><br><span class="line">  #23 = NameAndType        #8:#9          // "&lt;init&gt;":()V</span><br><span class="line">  #24 = Class              #33            // com/atguigu/java/Order</span><br><span class="line">  #25 = NameAndType        #34:#9         // hello:()V</span><br><span class="line">  #26 = Class              #35            // java/lang/System</span><br><span class="line">  #27 = NameAndType        #36:#37        // out:Ljava/io/PrintStream;</span><br><span class="line">  #28 = NameAndType        #38:#39        // count:I</span><br><span class="line">  #29 = Class              #40            // java/io/PrintStream</span><br><span class="line">  #30 = NameAndType        #41:#42        // println:(I)V</span><br><span class="line">  #31 = Utf8               com/atguigu/java/MethodAreaTest</span><br><span class="line">  #32 = Utf8               java/lang/Object</span><br><span class="line">  #33 = Utf8               com/atguigu/java/Order</span><br><span class="line">  #34 = Utf8               hello</span><br><span class="line">  #35 = Utf8               java/lang/System</span><br><span class="line">  #36 = Utf8               out</span><br><span class="line">  #37 = Utf8               Ljava/io/PrintStream;</span><br><span class="line">  #38 = Utf8               count</span><br><span class="line">  #39 = Utf8               I</span><br><span class="line">  #40 = Utf8               java/io/PrintStream</span><br><span class="line">  #41 = Utf8               println</span><br><span class="line">  #42 = Utf8               (I)V</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> com.atguigu.java.MethodAreaTest();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: (<span class="number">0x0001</span>) ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         1: invokespecial #1                  // Method java/lang/Object."&lt;init&gt;":()V</span><br><span class="line">         <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">8</span>: <span class="number">0</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">5</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lcom/atguigu/java/MethodAreaTest;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(java.lang.String[])</span></span>;</span><br><span class="line">    descriptor: ([Ljava/lang/String;)V</span><br><span class="line">    flags: (<span class="number">0x0009</span>) ACC_PUBLIC, ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">2</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aconst_null</span><br><span class="line">         <span class="number">1</span>: astore_1</span><br><span class="line">         <span class="number">2</span>: aload_1</span><br><span class="line">         <span class="number">3</span>: pop</span><br><span class="line">         4: invokestatic  #2                  // Method com/atguigu/java/Order.hello:()V</span><br><span class="line">         7: getstatic     #3                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">        <span class="number">10</span>: aload_1</span><br><span class="line">        <span class="number">11</span>: pop</span><br><span class="line">        12: getstatic     #4                  // Field com/atguigu/java/Order.count:I</span><br><span class="line">        15: invokevirtual #5                  // Method java/io/PrintStream.println:(I)V</span><br><span class="line">        <span class="number">18</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">10</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">11</span>: <span class="number">2</span></span><br><span class="line">        line <span class="number">12</span>: <span class="number">7</span></span><br><span class="line">        line <span class="number">13</span>: <span class="number">18</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>      <span class="number">19</span>     <span class="number">0</span>  args   [Ljava/lang/String;</span><br><span class="line">            <span class="number">2</span>      <span class="number">17</span>     <span class="number">1</span> order   Lcom/atguigu/java/Order;</span><br><span class="line">&#125;</span><br><span class="line">SourceFile: <span class="string">"MethodAreaTest.java"</span></span><br></pre></td></tr></table></figure></div><h3 id="补充说明：全局常量：final-static"><a href="#补充说明：全局常量：final-static" class="headerlink" title="补充说明：全局常量：final static"></a>补充说明：全局常量：<code>final static</code></h3><p>被声明为 <code>final</code> 的类变量的处理方法则不同，每个全局常量在编译的时候就会被分配了。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">Classfile /Users/yan/Documents/JVMDemo/out/production/chapter09/com/atguigu/java/Order<span class="class">.<span class="keyword">class</span></span></span><br><span class="line"><span class="class">  <span class="title">Last</span> <span class="title">modified</span> 2020年7月23日</span>; size <span class="number">615</span> bytes</span><br><span class="line">  SHA-<span class="number">256</span> checksum d47aa5a5154fe954fcf79b1b36e77c54565d5b454e89e8d545a0bb0d97d2e749</span><br><span class="line">  Compiled from <span class="string">"MethodAreaTest.java"</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">atguigu</span>.<span class="title">java</span>.<span class="title">Order</span></span></span><br><span class="line">  minor version: 0</span><br><span class="line">  major version: <span class="number">52</span></span><br><span class="line">  flags: (<span class="number">0x0020</span>) ACC_SUPER</span><br><span class="line">  this_class: #6                          // com/atguigu/java/Order</span><br><span class="line">  super_class: #7                         // java/lang/Object</span><br><span class="line">  interfaces: <span class="number">0</span>, fields: <span class="number">2</span>, methods: <span class="number">3</span>, attributes: <span class="number">1</span></span><br><span class="line">Constant pool:</span><br><span class="line">   #1 = Methodref          #7.#24         // java/lang/Object."&lt;init&gt;":()V</span><br><span class="line">   #2 = Fieldref           #25.#26        // java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">   #3 = String             #27            // hello!</span><br><span class="line">   #4 = Methodref          #28.#29        // java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">   #5 = Fieldref           #6.#30         // com/atguigu/java/Order.count:I</span><br><span class="line">   #6 = Class              #31            // com/atguigu/java/Order</span><br><span class="line">   #7 = Class              #32            // java/lang/Object</span><br><span class="line">   #8 = Utf8               count</span><br><span class="line">   #9 = Utf8               I</span><br><span class="line">  #10 = Utf8               number</span><br><span class="line">  #11 = Utf8               ConstantValue</span><br><span class="line">  #12 = Integer            2</span><br><span class="line">  #13 = Utf8               &lt;init&gt;</span><br><span class="line">  #14 = Utf8               ()V</span><br><span class="line">  #15 = Utf8               Code</span><br><span class="line">  #16 = Utf8               LineNumberTable</span><br><span class="line">  #17 = Utf8               LocalVariableTable</span><br><span class="line">  #18 = Utf8               this</span><br><span class="line">  #19 = Utf8               Lcom/atguigu/java/Order;</span><br><span class="line">  #20 = Utf8               hello</span><br><span class="line">  #21 = Utf8               &lt;clinit&gt;</span><br><span class="line">  #22 = Utf8               SourceFile</span><br><span class="line">  #23 = Utf8               MethodAreaTest.java</span><br><span class="line">  #24 = NameAndType        #13:#14        // "&lt;init&gt;":()V</span><br><span class="line">  #25 = Class              #33            // java/lang/System</span><br><span class="line">  #26 = NameAndType        #34:#35        // out:Ljava/io/PrintStream;</span><br><span class="line">  #27 = Utf8               hello!</span><br><span class="line">  #28 = Class              #36            // java/io/PrintStream</span><br><span class="line">  #29 = NameAndType        #37:#38        // println:(Ljava/lang/String;)V</span><br><span class="line">  #30 = NameAndType        #8:#9          // count:I</span><br><span class="line">  #31 = Utf8               com/atguigu/java/Order</span><br><span class="line">  #32 = Utf8               java/lang/Object</span><br><span class="line">  #33 = Utf8               java/lang/System</span><br><span class="line">  #34 = Utf8               out</span><br><span class="line">  #35 = Utf8               Ljava/io/PrintStream;</span><br><span class="line">  #36 = Utf8               java/io/PrintStream</span><br><span class="line">  #37 = Utf8               println</span><br><span class="line">  #38 = Utf8               (Ljava/lang/String;)V</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> count;</span><br><span class="line">    descriptor: I</span><br><span class="line">    flags: (<span class="number">0x0009</span>) ACC_PUBLIC, ACC_STATIC</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> number;</span><br><span class="line">    descriptor: I</span><br><span class="line">    flags: (<span class="number">0x0019</span>) ACC_PUBLIC, ACC_STATIC, ACC_FINAL</span><br><span class="line">    ConstantValue: <span class="keyword">int</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line">  com.atguigu.java.Order();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: (<span class="number">0x0000</span>)</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         1: invokespecial #1                  // Method java/lang/Object."&lt;init&gt;":()V</span><br><span class="line">         <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">16</span>: <span class="number">0</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">5</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lcom/atguigu/java/Order;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>;</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: (<span class="number">0x0009</span>) ACC_PUBLIC, ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">0</span>, args_size=<span class="number">0</span></span><br><span class="line">         0: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">         3: ldc           #3                  // String hello!</span><br><span class="line">         5: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">         <span class="number">8</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">22</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">23</span>: <span class="number">8</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> &#123;&#125;;</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: (<span class="number">0x0008</span>) ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">0</span>, args_size=<span class="number">0</span></span><br><span class="line">         <span class="number">0</span>: iconst_1</span><br><span class="line">         1: putstatic     #5                  // Field count:I</span><br><span class="line">         <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">17</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line">SourceFile: <span class="string">"MethodAreaTest.java"</span></span><br></pre></td></tr></table></figure></div><p>从</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> count;</span><br><span class="line">  descriptor: I</span><br><span class="line">  flags: (<span class="number">0x0009</span>) ACC_PUBLIC, ACC_STATIC</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> number;</span><br><span class="line">  descriptor: I</span><br><span class="line">  flags: (<span class="number">0x0019</span>) ACC_PUBLIC, ACC_STATIC, ACC_FINAL</span><br><span class="line">  ConstantValue: <span class="keyword">int</span> <span class="number">2</span></span><br></pre></td></tr></table></figure></div><p>可以看出来 <code>static final</code> 的变量在编译时就已经确定好值了，再从</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> &#123;&#125;;</span><br><span class="line">  descriptor: ()V</span><br><span class="line">  flags: (<span class="number">0x0008</span>) ACC_STATIC</span><br><span class="line">  Code:</span><br><span class="line">    stack=<span class="number">1</span>, locals=<span class="number">0</span>, args_size=<span class="number">0</span></span><br><span class="line">       <span class="number">0</span>: iconst_1</span><br><span class="line">       1: putstatic     #5                  // Field count:I</span><br><span class="line">       <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line">    LineNumberTable:</span><br><span class="line">      line <span class="number">17</span>: <span class="number">0</span></span><br></pre></td></tr></table></figure></div><p>可以看出来仅使用 <code>static</code> 修饰的类变量在类加载时才被初始化变量。实际上上面的代码对应的就是字节码中的 <code>&lt;clinit&gt;()</code> 方法，也就是<a href="https://xiaoyan94.github.io/2020/07/03/JVM-01/#%E5%88%9D%E5%A7%8B%E5%8C%96">类加载的<strong>初始化</strong>阶段</a>。</p><h3 id="class-文件中常量池的理解"><a href="#class-文件中常量池的理解" class="headerlink" title="class 文件中常量池的理解"></a>class 文件中常量池的理解</h3><h4 id="运行时常量池-VS-常量池"><a href="#运行时常量池-VS-常量池" class="headerlink" title="运行时常量池 VS 常量池"></a>运行时常量池 VS 常量池</h4><ul><li>方法区，内部包含了运行时常量池。</li><li>字节码文件中，内部包含了常量池。</li><li>要弄清楚方法区，需要理解清除 ClassFile ，因为加载类的信息都在方法区。</li><li>要弄清楚方法区的运行时常量池，需要理解清除 ClassFile 中的常量池。</li></ul><p>一个有效的字节码文件中除了包含类的版本信息、字段、方法以及接口等描述信息外，还包含一项信息那就是常量池表 (Constant Pool Table) ，包括各种字面量和对类型、域和方法的符号引用。</p><h4 id="为什么需要常量池"><a href="#为什么需要常量池" class="headerlink" title="为什么需要常量池"></a>为什么需要常量池</h4><p>一个 java 源文件中的类、接口，编译后产生一个字节码文件。而 Java 中的字节码需要数据支持，通常这种数据会很大以至于不能直接存到字节码里，换另一种方式，可以存到常量池，这个字节码包含了指向常量池的引用。在动态链接的时候会用到运行时常量池，之前有介绍。</p><p>比如：如下的代码:</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleClass</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"hello"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>虽然 <code>SimpleClass.java</code> 只有 194 字节，但是里面却使用了 <code>String</code>、<code>System</code>、<code>PrintStream</code> 及 <code>Object</code> 等结构。这里代码量其实已经很小了。如果代码多，引用到的结构会更多！这里就需要常量池了！</p><iframe width="1496" height="809" src="https://www.youtube.com/embed/ybbNRXVaBc8?list=PLtGk8Nqe2ZcK0xUtbQjHeX2gqgoOdKJnX" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><h4 id="常量池中有什么"><a href="#常量池中有什么" class="headerlink" title="常量池中有什么"></a>常量池中有什么</h4><p>几种在常量池内存储的数据类型包括:</p><ul><li>数量值</li><li>字符串值</li><li>类引用</li><li>字段引用</li><li>方法引用</li></ul><p>例如下面这段代码:</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MethodAreaTest2</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Object obj = <span class="keyword">new</span> Object();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p><code>Object foo = new Object();</code></p><p>将会被编译成如下字节码:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0:  new #2  // Class java/lang/Object</span><br><span class="line"><span class="number">1</span>:  dup</span><br><span class="line">2:  invokespecial #3    // Method java/lang/Object "&lt;init&gt;"( ) V</span><br></pre></td></tr></table></figure><h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p>常量池，可以看做是一张表，虚拟机指令根据这张常量表找到要执行的类名、方法名、参数类型、字面量等类型。</p><h3 id="运行时常量池的理解"><a href="#运行时常量池的理解" class="headerlink" title="运行时常量池的理解"></a>运行时常量池的理解</h3><h4 id="运行时常量池"><a href="#运行时常量池" class="headerlink" title="运行时常量池"></a>运行时常量池</h4><ul><li>运行时常量池 (Runtime Constant Pool) 是方法区的一部分。</li><li>常量池表 ( Constant Pool Table) 是 Class 文件的一部分，<strong>用于存放编译期生成的各种字面量与符号引用，这部分内容将在类加载后存放到方法区的运行时常量池中</strong>。</li><li>运行时常量池，在加载类和接口到虛拟机后，就会创建对应的运行时常量池。</li><li>JVM 为每个已加载的类型 ( 类或接口) 都维护一个常量池。池中的数据项像数组项一样，是<strong>通过索引访问</strong>的。</li><li>运行时常量池中包含多种不同的常量，包括编译期就已经明确的数值字面量，也包括到运行期解析后才能够获得的方法或者字段引用。此时不再是常量池中的符号地址了，这里换为真实地址。<ul><li>➢ 运行时常量池，相对于 Class 文件常量池的另一重要特征是：<strong>具备动态性</strong>。</li></ul></li><li>运行时常量池类似于传统编程语言中的符号表 (symboltable)，但是它所包含的数据却比符号表要更加丰富一些。</li><li>当创建类或接口的运行时常量池时，如果构造运行时常量池所需的内存空间超过了方法区所能提供的最大值，则 JVM 会抛 <code>OutOfMemoryError</code> 异常。</li></ul><hr><h2 id="5-方法区使用举例"><a href="#5-方法区使用举例" class="headerlink" title="5 方法区使用举例"></a>5 方法区使用举例</h2><p>图示举例方法区的使用</p><iframe width="100%" height="480" src="https://www.youtube.com/embed/icLKv_ENEmE?list=PLtGk8Nqe2ZcK0xUtbQjHeX2gqgoOdKJnX" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><hr><h2 id="6-方法区的演进细节"><a href="#6-方法区的演进细节" class="headerlink" title="6 方法区的演进细节"></a>6 方法区的演进细节</h2><ol><li><p>首先明确：只有 HotSpot 才有永久代。</p><p> BEA JRockit、IBM J9等来说，是不存在永久代的概念的。原则上如何实现方法区属于虚拟机实现细节，不受《Java 虚拟机规范》管束，并不要求统一。</p></li><li><p>HotSpot 中方法区的变化：</p><table><thead><tr><th>0</th><th>1</th></tr></thead><tbody><tr><td>jdk1.6 及之前</td><td>有永久代 (permanent generation) ，静态变量存放在永久代上</td></tr><tr><td>jdk1.7</td><td>有永久代，但已经逐步 “去永久代”，字符串常量池、静态变量移除，保存在堆中</td></tr><tr><td>jdk1.8 及之后</td><td>无永久代，类型信息、字段、方法、常量保存在本地内存的元空间，但字符串常量池、静态变量仍在堆</td></tr></tbody></table></li></ol><p><img src="/2020/07/17/JVM-05/HotSpot%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%AD%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E6%BC%94%E8%BF%9B%E7%BB%86%E8%8A%82.svg" alt="HotSpot虚拟机中方法区的演进细节"></p><h3 id="永久代为什么要被元空间替换"><a href="#永久代为什么要被元空间替换" class="headerlink" title="永久代为什么要被元空间替换"></a>永久代为什么要被元空间替换</h3><p><a href="http://openjdk.java.net/jeps/122" target="_blank" rel="noopener">http://openjdk.java.net/jeps/122</a> 中关于 Remove the Permanent Generation 的描述：</p><blockquote><p><strong>Summary</strong><br>Remove the permanent generation from the Hotspot JVM and thus the need to tune the size of the permanent generation.</p></blockquote><p>从 Hotspot JVM 中删除永久代，因此不需要调整永久代的大小。</p><blockquote><p><strong>Motivation</strong><br>This is part of the JRockit and Hotspot convergence effort. JRockit customers do not need to configure the permanent generation (since JRockit does not have a permanent generation) and are accustomed to not configuring the permanent generation.</p></blockquote><p>这是 JRockit 和 Hotspot 融合工作的一部分。 JRockit 客户不需要配置永久代（因为 JRockit 没有永久代），并且习惯于不配置永久代。</p><p>随着 Java8 的到来，HotSpot VM 中再也见不到永久代了。但是这并不意味着类的元数据信息也消失了。这些数据被移到了一个<strong>与堆不相连的本地内存区域</strong>，这个区域叫做**元空间( Metaspace )**。</p><p>由于类的元数据分配在本地内存中，元空间的最大可分配空间就是系统可用内存空间。</p><p>这项改动是很有必要的，原因有:</p><p>1） <strong>为永久代设置空间大小是很难确定的</strong>。<br>在某些场景下，如果动态加载类过多，容易产生 Perm 区的 OOM。比如某个实际 Web 工程中，因为功能点比较多，在运行过程中，要不断动态加载很多类，经常出现致命错误。<br><code>&quot;Exception in thread &#39;dubbo client x.x connector&#39; java.lang.OutOfMemoryError: PermGen space&quot;</code><br>而元空间和永久代之间最大的区别在于：元空间并不在虚拟机中，而是使用本地内存。<br>因此，默认情况下，元空间的大小仅受本地内存限制。</p><p>2） <strong>对永久代进行调优是很困难的</strong>。</p><p><a href="#7-%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6">方法区的垃圾回收</a></p><h3 id="StringTable为什么要调整位置"><a href="#StringTable为什么要调整位置" class="headerlink" title="StringTable为什么要调整位置"></a>StringTable为什么要调整位置</h3><p>与 Jdk1.6 不同，jdk7 中将 StringTable 放到了堆空间中。因为永久代的回收效率很低，在 full gc 的时候才会触发。而 full gc 是老年代的空间不足、永久代不足时才会触发。</p><p>这就导致 StringTable 回收效率不高。而我们开发中会有大量的字符串被创建，回收效率低，导致永久代内存不足。放到堆里，能及时回收内存。</p><h3 id="如何证明静态变量存在哪"><a href="#如何证明静态变量存在哪" class="headerlink" title="如何证明静态变量存在哪"></a>如何证明静态变量存在哪</h3><iframe width="1144" height="576" src="https://www.youtube.com/embed/jXWKqUZgQUo?list=PLtGk8Nqe2ZcK0xUtbQjHeX2gqgoOdKJnX" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><p>参考《深入理解 Java 虚拟机》第三版：4.2.1 节</p><p>通过实验来回答一个简单问题：staticObj、instanceObj、localObj这三个变量本身（而不是它们所指向的对象）存放在哪里？</p><p>代码清单4-6　JHSDB测试代码</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * staticObj、instanceObj、localObj存放在哪里？</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JHSDB_TestCase</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">static</span> ObjectHolder staticObj = <span class="keyword">new</span> ObjectHolder();</span><br><span class="line">        ObjectHolder instanceObj = <span class="keyword">new</span> ObjectHolder();</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            ObjectHolder localObj = <span class="keyword">new</span> ObjectHolder();</span><br><span class="line">            System.out.println(<span class="string">"done"</span>); <span class="comment">// 这里设一个断点</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ObjectHolder</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Test test = <span class="keyword">new</span> JHSDB_TestCase.Test();</span><br><span class="line">        test.foo();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>1.答案读者当然都知道：staticObj随着Test的类型信息存放在方法区，instanceObj随着Test的对象实例存放在Java堆，localObject则是存放在foo()方法栈帧的局部变量表中。这个答案是通过前两章学习的理论知识得出的，现在要做的是通过JHSDB来实践验证这一点。</p><p>2.从《Java虚拟机规范》所定义的概念模型来看，所有Class相关的信息都应该存放在方法区之中， 但方法区该如何实现，《Java虚拟机规范》并未做出规定，这就成了一件允许不同虚拟机自己灵活把握的事情。JDK 7及其以后版本的HotSpot虚拟机选择把静态变量与类型在Java语言一端的映射Class对象存放在一起，存储于Java堆之中，从我们的实验中也明确验证了这一点。</p><p>3.在JDK 7以前，即还没有开始“去永久代”行动时，这些静态变量是存放在永久代上的，JDK 7起把 静态变量、字符常量这些从永久代移除出去。</p></blockquote><hr><h2 id="7-方法区的垃圾回收"><a href="#7-方法区的垃圾回收" class="headerlink" title="7 方法区的垃圾回收"></a>7 方法区的垃圾回收</h2><p>有些人认为方法区 (如 HotSpot 虚拟机中的元空间或者永久代) 是没有垃圾收集行为的，其实不然。《Java 虚拟机规范》对方法区的约束是非常宽松的，提到过可以不要求虚拟机在方法区中实现垃圾收集。事实上也确实有未实现或未能完整实现方法区类型卸载的收集器存在 (如 JDK11 时期的 ZGC 收集器就不支持类卸载)。</p><p>一般来说这个区域的回收效果比较难令人满意，尤其是类型的卸载，条件相当苛刻。但是这部分区域的回收有时又确实是必要的。以前 Sun 公司的 Bug 列表中，曾出现过的若干个严重的 Bug 就是由于低版本的 HotSpot 虚拟机对此区域未完全回收而导致内存泄漏。</p><p><strong>方法区的垃圾收集主要回收两部分内容：常量池中废弃的常量和不再使用的类型</strong>。</p><p>● 先来说说方法区内常量池之中主要存放的两大类常量：字面量和符号引用。字面量比较接近 Java 语言层次的常量概念，如文本字符串、被声明为 final 的常量值等。而符号引用则属于编译原理方面的概念，包括下面三类常量:</p><ul><li>➢ 1、类和接口的全限定名</li><li>➢ 2、字段的名称和描述符</li><li>➢ 3、方法的名称和描述符</li></ul><p>● HotSpot 虚拟机对常量池的回收策略是很明确的，只要常量池中的常量没有被任何地方引用，就可以被回收。</p><p>● 回收废弃常量与回收 Java 堆中的对象非常类似。</p><p>● 判定一个常量是否 “废弃” 还是相对简单，而要判定一个类型是否属于 “不再被使用的类” 的条件就比较苛刻了。需要同时满足下面三个条件:</p><ul><li>➢ 该类所有的实例都已经被回收，也就是 Java 堆中不存在该类及其任何派生子类的实例。</li><li>➢ 加载该类的类加载器已经被回收，这个条件除非是经过精心设计的可替换类加载器的场景，如 OSGi、JSP 的重加载等，否则通常是很难达成的。</li><li>➢ 该类对应的 <code>java.lang.Class</code> 对象没有在任何地方被引用，无法在任何地方通过反射访问该类的方法。</li></ul><p>● Java 虚拟机被允许对满足上述三个条件的无用类进行回收，这里说的仅仅是 “被允许”，而并不是和对象一样，没有引用了就必然会回收。关于是否要对类型进行回收，HotSpot 虚拟机提供了 <code>-Xnoclassgc</code> 参数进行控制，还可以使用 <code>-verbose:class</code> 以及 <code>-XX:+TraceClass-Loading</code>、<code>-XX:+TraceClassUnLoading</code> 查看类加载和卸载信息</p><p>● 在大量使用反射、动态代理、CGLib 等字节码框架，动态生成 JSP 以及 OSGi 这类频繁自定义类加载器的场景中，<strong>通常都需要 Java 虚拟机具备类型卸载的能力，以保证不会对方法区造成过大的内存压力</strong>。</p><hr><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8 总结"></a>8 总结</h2><p>常见面试题</p><p><em>百度</em>:</p><ul><li>三面：说一下 JVM 内存模型吧，有哪些区？分别干什么的？</li></ul><p><em>蚂蚁金服</em>:</p><ul><li>Java8 的内存分代改进</li><li>JVM 内存分哪几个区，每个区的作用是什么？</li><li>一面: JVM 内存分布 &#x2F; 内存结构？栈和堆的区别？堆的结构？为什么两个 survivor 区？</li><li>二面: Eden 和 Survior 的比例分配</li></ul><p><em>小米</em>:</p><ul><li>jvm 内存分区，为什么要有新生代和老年代</li></ul><p><em>字节跳动</em>:</p><ul><li>二面: Java 的内存分区</li><li>二面：讲讲 jvm 运行时数据区</li><li>什么时候对象会进入老年代?</li></ul><p><em>京东</em>:</p><ul><li>JVM 的内存结构，Eden 和 Survivor 比例。</li><li>JVM 内存为什么要分成新生代，老年代，持久代。新生代中为什么要分为 Eden 和 Survivor。</li></ul><p><em>天猫</em>: .</p><ul><li>一面: Jvm 内存模型以及分区，需要详细到每个区放什么。</li><li>一面: JVM 的内存模型，Java8 做了什么修改</li></ul><p><em>拼多多</em>:</p><ul><li>JVM 内存分哪几个区，每个区的作用是什么?</li></ul><p><em>美团</em>:</p><ul><li>java 内存分配</li><li>jvm 的永久代中会发生垃圾回收吗？</li><li>一面: jvm 内存分区，为什么要有新生代和老年代?</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;方法区概述&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#1-%E6%A0%88%E5%92%8C%E5%A0%86%E5%92%8C%E6%96%B9%E6%B3%95%E5%8C%BA%E9%97%B4%E7%9A%84%E4%BA%A4%E4%BA%92%E5%85%B3%E7%B3%BB&quot;&gt;1 栈和堆和方法区间的交互关系&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#2-%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E7%90%86%E8%A7%A3&quot;&gt;2 方法区的理解&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%E6%96%B9%E6%B3%95%E5%8C%BA%E5%9C%A8%E5%93%AA%E9%87%8C&quot;&gt;方法区在哪里&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#HotSpot%E4%B8%AD%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E6%BC%94%E8%BF%9B&quot;&gt;HotSpot中方法区的演进&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#3-%E8%AE%BE%E7%BD%AE%E6%96%B9%E6%B3%95%E5%8C%BA%E5%A4%A7%E5%B0%8F%E4%B8%8EOOM&quot;&gt;3 设置方法区大小与OOM&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#4-%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84&quot;&gt;4 方法区的内部结构&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%E6%96%B9%E6%B3%95%E5%8C%BA-Method-Area-%E5%AD%98%E5%82%A8%E4%BB%80%E4%B9%88&quot;&gt;方法区 (Method Area) 存储什么&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%E7%B1%BB%E5%9E%8B%E4%BF%A1%E6%81%AF&quot;&gt;类型信息&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%9F%9F-Field-%E4%BF%A1%E6%81%AF&quot;&gt;域 (Field) 信息&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E6%96%B9%E6%B3%95-Method-%E4%BF%A1%E6%81%AF&quot;&gt;方法 (Method) 信息&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%AD%97%E8%8A%82%E7%A0%81%E8%A7%92%E5%BA%A6%E4%B8%BE%E4%BE%8B%E6%9F%A5%E7%9C%8B&quot;&gt;字节码角度举例查看&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#non-final-%E7%9A%84%E7%B1%BB%E5%8F%98%E9%87%8F&quot;&gt;non-final 的类变量&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E%E5%85%A8%E5%B1%80%E5%B8%B8%E9%87%8Ffinal-static&quot;&gt;补充说明：全局常量：&lt;code&gt;final static&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#class-%E6%96%87%E4%BB%B6%E4%B8%AD%E5%B8%B8%E9%87%8F%E6%B1%A0%E7%9A%84%E7%90%86%E8%A7%A3&quot;&gt;class 文件中常量池的理解&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0-VS-%E5%B8%B8%E9%87%8F%E6%B1%A0&quot;&gt;运行时常量池 VS 常量池&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%B8%B8%E9%87%8F%E6%B1%A0&quot;&gt;为什么需要常量池&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%B8%B8%E9%87%8F%E6%B1%A0%E4%B8%AD%E6%9C%89%E4%BB%80%E4%B9%88&quot;&gt;常量池中有什么&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%B0%8F%E7%BB%93&quot;&gt;小结&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0%E7%9A%84%E7%90%86%E8%A7%A3&quot;&gt;运行时常量池的理解&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0&quot;&gt;运行时常量池&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#5-%E6%96%B9%E6%B3%95%E5%8C%BA%E4%BD%BF%E7%94%A8%E4%B8%BE%E4%BE%8B&quot;&gt;5 方法区使用举例&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#6-%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E6%BC%94%E8%BF%9B%E7%BB%86%E8%8A%82&quot;&gt;6 方法区的演进细节&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%E6%B0%B8%E4%B9%85%E4%BB%A3%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E8%A2%AB%E5%85%83%E7%A9%BA%E9%97%B4%E6%9B%BF%E6%8D%A2&quot;&gt;永久代为什么要被元空间替换&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#StringTable%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E8%B0%83%E6%95%B4%E4%BD%8D%E7%BD%AE&quot;&gt;StringTable为什么要调整位置&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%A6%82%E4%BD%95%E8%AF%81%E6%98%8E%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%E5%AD%98%E5%9C%A8%E5%93%AA&quot;&gt;如何证明静态变量存在哪&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#7-%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6&quot;&gt;7 方法区的垃圾回收&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#8-%E6%80%BB%E7%BB%93&quot;&gt;8 总结&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    
    <category term="Java" scheme="https://xiaoyan94.github.io/tags/Java/"/>
    
    <category term="JVM" scheme="https://xiaoyan94.github.io/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>JVM 04 运行时数据区之堆 (Heap)</title>
    <link href="https://xiaoyan94.github.io/2020/07/11/JVM-04/"/>
    <id>https://xiaoyan94.github.io/2020/07/11/JVM-04/</id>
    <published>2020-07-11T09:02:59.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-堆的核心概述"><a href="#1-堆的核心概述" class="headerlink" title="1 堆的核心概述"></a>1 堆的核心概述</h2><ul><li>● 一个 JVM 实例只存在一个堆内存，堆也是 Java 内存管理的核心区域。</li><li>● Java 堆区在 JVM 启动的时候即被创建，其空间大小也就确定了。是 JVM 管理的最大一块内存空间。<ul><li>➢ 堆内存的大小是可以调节的。</li></ul></li><li>● 《Java 虚拟机规范》规定，堆可以处于物理上不连续的内存空间中，但在逻辑上它应该被视为连续的。</li><li>● 所有的线程共享 Java 堆，在这里还可以划分线程私有的缓冲区 (ThreadLocal Allocation Buffer， TLAB)</li></ul><p>一个 JVM 实例对应一个进程，方法区和堆是一个进程一份，而程序计数器、本地方法栈、虚拟机栈是一个线程对应一份，一个进程中的所有线程共享方法区和堆（并不是完整的堆都一定是共享的，比如 TLAB）。</p><a id="more"></a><ul><li><a href="#1-%E5%A0%86%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E8%BF%B0">1 堆的核心概述</a><ul><li><a href="#%E5%86%85%E5%AD%98%E7%BB%86%E5%88%86">内存细分</a></li></ul></li><li><a href="#2-%E8%AE%BE%E7%BD%AE%E5%A0%86%E5%86%85%E5%AD%98%E5%A4%A7%E5%B0%8F%E4%B8%8E-OOM">2 设置堆内存大小与 OOM</a><ul><li><a href="#%E5%A0%86%E7%A9%BA%E9%97%B4%E5%A4%A7%E5%B0%8F%E7%9A%84%E8%AE%BE%E7%BD%AE">堆空间大小的设置</a></li><li><a href="#OutOfMemoryError-%E7%9A%84%E8%AF%B4%E6%98%8E%E4%B8%8E%E4%B8%BE%E4%BE%8B"><code>OutOfMemoryError</code> 的说明与举例</a></li></ul></li><li><a href="#3-%E5%B9%B4%E8%BD%BB%E4%BB%A3%E4%B8%8E%E8%80%81%E5%B9%B4%E4%BB%A3">3 年轻代与老年代</a></li><li><a href="#4-%E5%9B%BE%E8%A7%A3%E5%AF%B9%E8%B1%A1%E5%88%86%E9%85%8D%E8%BF%87%E7%A8%8B">4 图解对象分配过程</a></li><li><a href="#5-Minor-GC-%E5%92%8C-Major-GC-%E5%92%8C-Full-GC">5 Minor GC 和 Major GC 和 Full GC</a><ul><li><a href="#%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E5%88%86%E4%BB%A3%E5%BC%8FGC%E7%AD%96%E7%95%A5%E7%9A%84%E8%A7%A6%E5%8F%91%E6%9D%A1%E4%BB%B6">最简单的分代式GC策略的触发条件</a></li><li><a href="#GC%E4%B8%BE%E4%BE%8B%E4%B8%8E%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90">GC举例与日志分析</a></li></ul></li><li><a href="#6-%E5%A0%86%E7%A9%BA%E9%97%B4%E5%88%86%E4%BB%A3%E6%80%9D%E6%83%B3">6 堆空间分代思想</a></li><li><a href="#7-%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5">7 内存分配策略</a></li><li><a href="#8-%E4%B8%BA%E5%AF%B9%E8%B1%A1%E5%88%86%E9%85%8D%E5%86%85%E5%AD%98TLAB">8 为对象分配内存：TLAB</a></li><li><a href="#9-%E5%B0%8F%E7%BB%93%E5%A0%86%E7%A9%BA%E9%97%B4%E7%9A%84%E5%8F%82%E6%95%B0%E8%AE%BE%E7%BD%AE">9 小结堆空间的参数设置</a></li><li><a href="#X-%E5%A0%86%E6%98%AF%E5%88%86%E9%85%8D%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%94%AF%E4%B8%80%E9%80%89%E6%8B%A9%E5%90%97">X 堆是分配对象的唯一选择吗</a><ul><li><a href="#%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90%E6%A6%82%E8%BF%B0">逃逸分析概述</a></li><li><a href="#%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90%E4%B9%8B%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96">逃逸分析之代码优化</a><ul><li><a href="#%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E4%B9%8B%E6%A0%88%E4%B8%8A%E5%88%86%E9%85%8D">代码优化之栈上分配</a></li><li><a href="#%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E4%B9%8B%E5%90%8C%E6%AD%A5%E7%9C%81%E7%95%A5%E6%B6%88%E9%99%A4">代码优化之同步省略（消除）</a></li><li><a href="#-%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E4%B9%8B%E6%A0%87%E9%87%8F%E6%9B%BF%E6%8D%A2">🌿 代码优化之标量替换</a></li><li><a href="#%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90%E5%B0%8F%E7%BB%93">逃逸分析小结</a></li></ul></li></ul></li><li><a href="#%E6%9C%AC%E7%AB%A0%E5%B0%8F%E7%BB%93">本章小结</a></li></ul><h3 id="内存细分"><a href="#内存细分" class="headerlink" title="内存细分"></a>内存细分</h3><p>现代垃圾收集器大部分都基于分代收集理论设计，堆空间细分为：</p><p>Java 7 及之前堆内存逻辑上分为三部分：新生区 + 养老区 +<strong>永久区</strong></p><ul><li>➢ Young Generation Space 新生区 Young&#x2F;New  <ul><li>又被划分为 Eden 区和 Survivor 区</li></ul></li><li>➢ Tenure generation space 养老区 0ld&#x2F;Tenure</li><li>➢ Permanent Space 永久区 Perm</li></ul><p>Java 8 及之后堆内存逻辑上分为三部分：新生区 + 养老区 +<strong>元空间</strong></p><ul><li>➢ Young Generation Space 新生区 Young&#x2F;New<ul><li>又被划分为 Eden 区和 Survivor 区</li></ul></li><li>➢ Tenure generation space 养老区 0ld&#x2F;Tenure</li><li>➢ Meta Space 元空间 Meta</li></ul><p>约定：新生区 &#x2F; 新生代 &#x2F; 年轻代、养老区 &#x2F; 老年区 &#x2F; 老年代、永久区 &#x2F; 永久代</p><p><img src="/2020/07/11/JVM-04/%E5%A0%86%E7%A9%BA%E9%97%B4%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84.png" alt="堆空间内部结构"></p><p><img src="/2020/07/11/JVM-04/%E6%B0%B8%E4%B9%85%E4%BB%A3%E5%92%8C%E5%85%83%E7%A9%BA%E9%97%B4.jpeg" alt="永久代和元空间"></p><p>演示 JVM 实例：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * -Xms10m -Xmx10m</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart  shkstart@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020  16:41</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeapDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String [] args)</span> </span>&#123;</span><br><span class="line">        System.out.println (<span class="string">"start..."</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep (<span class="number">1000000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace ();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println (<span class="string">"end..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><hr><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * -Xms20m -Xmx20m</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart  shkstart@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020  16:42</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeapDemo1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String [] args)</span> </span>&#123;</span><br><span class="line">        System.out.println (<span class="string">"start..."</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep (<span class="number">1000000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace ();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println (<span class="string">"end..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>在 Idea 中，依次点击 <code>Run</code> - <code>Edit Configurations</code> 在 <code>VM options</code> 中输入参数 <code>-Xms20m -Xmx20m</code>。然后打开 <a href="https://visualvm.github.io/" target="_blank" rel="noopener">Visual VM</a>，这个软件在 JDK 1.8 以后就不再内置，需要 <a href="https://visualvm.github.io/download.html" target="_blank" rel="noopener">手动下载</a>， 在 <code>Tools</code> - <code>Plugins</code> 中安装 <code>Visual GC</code> 插件。</p><p><img src="/2020/07/11/JVM-04/HeapDemo0.png" alt="HeapDemo Overview"></p><p>从上图中可以看到设置的 JVM 内存参数。</p><p><img src="/2020/07/11/JVM-04/HeapDemo.png" alt="HeapDemo"></p><p><img src="/2020/07/11/JVM-04/HeapDemo1.png" alt="HeapDemo1"></p><p>从以上图中可以看到，（JDK1.8 下运行时）伊甸园区、<strong>两个幸存者区</strong>、老年区加起来正好是我们设置的总内存大小 20M。（实测JDK1.7 下运行时，伊甸园区、<em>一个幸存者区</em>、老年区加起来是 20M）</p><hr><ul><li>《Java 虚拟机规范》中对 Java 堆的描述是：所有的对象实例以及数组都应当在运行时分配在堆上。(The heap is the run-time data area from which memory for all class instances and arrays is allocated )<ul><li>➢ 我要说的是：“几乎” 所有的对象实例都在这里分配内存。—— 从实际使用角度看的。</li></ul></li><li>数组和对象可能永远不会存储在栈上，因为栈帧中保存引用，这个引用指向对象或者数组在堆中的位置。</li><li>在方法结束后，堆中的对象不会马上被移除，仅仅在垃圾收集的时候才会被移除。</li><li>堆，是 GC ( Garbage Collection, 垃圾收集器）执行垃圾回收的重点区域。</li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart  shkstart@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020  17:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleHeap</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;<span class="comment">// 属性、成员变量</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SimpleHeap</span> <span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println (<span class="string">"My ID is"</span> + id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String [] args)</span> </span>&#123;</span><br><span class="line">        SimpleHeap sl = <span class="keyword">new</span> SimpleHeap (<span class="number">1</span>);</span><br><span class="line">        SimpleHeap s2 = <span class="keyword">new</span> SimpleHeap (<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> [] arr = <span class="keyword">new</span> <span class="keyword">int</span> [<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line">        Object [] arr1 = <span class="keyword">new</span> Object [<span class="number">10</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>设置 VM 参数：<code>-Xms10m -Xmx10m -XX:+PrintGCDetails</code> , 在 JDK1.8 下运行 SimpleHeap</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Heap</span><br><span class="line"> PSYoungGen      total <span class="number">2560</span>K, used <span class="number">1406</span>K [<span class="number">0x00000007bfd00000</span>, <span class="number">0x00000007c0000000</span>, <span class="number">0x00000007c0000000</span>)</span><br><span class="line">  eden space <span class="number">2048</span>K, <span class="number">68</span>% used [<span class="number">0x00000007bfd00000</span>,<span class="number">0x00000007bfe5fbe8</span>,<span class="number">0x00000007bff00000</span>)</span><br><span class="line">  from space <span class="number">512</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bff80000</span>,<span class="number">0x00000007bff80000</span>,<span class="number">0x00000007c0000000</span>)</span><br><span class="line">  to   space <span class="number">512</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bff00000</span>,<span class="number">0x00000007bff00000</span>,<span class="number">0x00000007bff80000</span>)</span><br><span class="line"> ParOldGen       total <span class="number">7168</span>K, used <span class="number">0</span>K [<span class="number">0x00000007bf600000</span>, <span class="number">0x00000007bfd00000</span>, <span class="number">0x00000007bfd00000</span>)</span><br><span class="line">  object space <span class="number">7168</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bf600000</span>,<span class="number">0x00000007bf600000</span>,<span class="number">0x00000007bfd00000</span>)</span><br><span class="line"> Metaspace       used <span class="number">2950</span>K, capacity <span class="number">4496</span>K, committed <span class="number">4864</span>K, reserved <span class="number">1056768</span>K</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">space</span>    <span class="title">used</span> 320<span class="title">K</span>, <span class="title">capacity</span> 388<span class="title">K</span>, <span class="title">committed</span> 512<span class="title">K</span>, <span class="title">reserved</span> 1048576<span class="title">K</span></span></span><br></pre></td></tr></table></figure></div><p>在 JDK1.7 下运行：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Heap</span><br><span class="line"> PSYoungGen      total <span class="number">3072</span>K, used <span class="number">1176</span>K [<span class="number">0x00000007ffc80000</span>, <span class="number">0x0000000800000000</span>, <span class="number">0x0000000800000000</span>)</span><br><span class="line">  eden space <span class="number">2560</span>K, <span class="number">45</span>% used [<span class="number">0x00000007ffc80000</span>,<span class="number">0x00000007ffda6258</span>,<span class="number">0x00000007fff00000</span>)</span><br><span class="line">  from space <span class="number">512</span>K, <span class="number">0</span>% used [<span class="number">0x00000007fff80000</span>,<span class="number">0x00000007fff80000</span>,<span class="number">0x0000000800000000</span>)</span><br><span class="line">  to   space <span class="number">512</span>K, <span class="number">0</span>% used [<span class="number">0x00000007fff00000</span>,<span class="number">0x00000007fff00000</span>,<span class="number">0x00000007fff80000</span>)</span><br><span class="line"> ParOldGen       total <span class="number">7168</span>K, used <span class="number">0</span>K [<span class="number">0x00000007ff580000</span>, <span class="number">0x00000007ffc80000</span>, <span class="number">0x00000007ffc80000</span>)</span><br><span class="line">  object space <span class="number">7168</span>K, <span class="number">0</span>% used [<span class="number">0x00000007ff580000</span>,<span class="number">0x00000007ff580000</span>,<span class="number">0x00000007ffc80000</span>)</span><br><span class="line"> PSPermGen       total <span class="number">21504</span>K, used <span class="number">2859</span>K [<span class="number">0x00000007fa380000</span>, <span class="number">0x00000007fb880000</span>, <span class="number">0x00000007ff580000</span>)</span><br><span class="line">  object space <span class="number">21504</span>K, <span class="number">13</span>% used [<span class="number">0x00000007fa380000</span>,<span class="number">0x00000007fa64af68</span>,<span class="number">0x00000007fb880000</span>)</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure></div><p>可以看到，JDK1.8 以后就是元空间了。</p><p><img src="/2020/07/11/JVM-04/SimpleHeap.png" alt="局部变量表、堆、方法区"></p><p>对象、数组在堆中创建，局部变量表中只保留对他们的引用。</p><hr><h2 id="2-设置堆内存大小与-OOM"><a href="#2-设置堆内存大小与-OOM" class="headerlink" title="2 设置堆内存大小与 OOM"></a>2 设置堆内存大小与 OOM</h2><h3 id="堆空间大小的设置"><a href="#堆空间大小的设置" class="headerlink" title="堆空间大小的设置"></a>堆空间大小的设置</h3><ul><li>Java 堆区用于存储 Java 对象实例，那么堆的大小在 JVM 启动时就已经设定好了，大家可以通过选项 “<code>-Xmx</code>“ 和”<code>-Xms</code>“ 来进行设置。<ul><li>➢“<code>-Xms</code>“ 用于表示堆区的起始内存，等价于 <code>-XX: InitialHeapSize</code></li><li>➢“<code>-Xmx</code>“ 则用于表示堆区的最大内存，等价于 <code>-XX :MaxHeapSize</code></li></ul></li><li>一旦堆区中的内存大小超过 “<code>-Xmx</code>“ 所指定的最大内存时，将会抛出 <code>OutOfMemoryError</code> 异常。</li><li>通常会将 <code>-Xms</code> 和 <code>-Xmx</code> 两个参数配置相同的值，其目的是为了能够在 java 垃圾回收机制清理完堆区后不需要重新分隔计算堆区的大小，从而提高性能。</li><li>默认情况下，初始内存大小：物理电脑内存大小 &#x2F; 64</li><li>最大内存大小：物理电脑内存大小 &#x2F; 4</li></ul><p><code>-X</code> 参数用法：<a href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html" target="_blank" rel="noopener">https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html</a></p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. 设置堆空间大小的参数</span></span><br><span class="line"><span class="comment"> * -Xms 用来设置堆空间（年轻代 + 老年代）的初始内存大小</span></span><br><span class="line"><span class="comment"> *      -X 是 jvm 的运行参数</span></span><br><span class="line"><span class="comment"> *      ms 是 memory start</span></span><br><span class="line"><span class="comment"> * -Xmx 用来设置堆空间（年轻代 + 老年代）的最大内存大小</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 2. 默认堆空间的大小</span></span><br><span class="line"><span class="comment"> *    初始内存大小：物理电脑内存大小 / 64</span></span><br><span class="line"><span class="comment"> *             最大内存大小：物理电脑内存大小 / 4</span></span><br><span class="line"><span class="comment"> * 3. 手动设置：-Xms600m -Xmx600m</span></span><br><span class="line"><span class="comment"> *     开发中建议将初始堆内存和最大的堆内存设置成相同的值。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 4. 查看设置的参数：方式一： jps   /  jstat -gc 进程 id</span></span><br><span class="line"><span class="comment"> *                  方式二：-XX:+PrintGCDetails</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart  shkstart@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020  20:15</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeapSpaceInitial</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String [] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 返回 Java 虚拟机中的堆内存总量</span></span><br><span class="line">        <span class="keyword">long</span> initialMemory = Runtime.getRuntime ().totalMemory () / <span class="number">1024</span> / <span class="number">1024</span>;</span><br><span class="line">        <span class="comment">// 返回 Java 虚拟机试图使用的最大堆内存量</span></span><br><span class="line">        <span class="keyword">long</span> maxMemory = Runtime.getRuntime ().maxMemory () / <span class="number">1024</span> / <span class="number">1024</span>;</span><br><span class="line"></span><br><span class="line">        System.out.println (<span class="string">"-Xms :"</span> + initialMemory + <span class="string">"M"</span>);</span><br><span class="line">        System.out.println (<span class="string">"-Xmx :"</span> + maxMemory + <span class="string">"M"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 默认设置时，即不设置虚拟机参数使用默认分配内存大小</span></span><br><span class="line"><span class="comment">//        System.out.println ("系统内存大小为：" + initialMemory * 64.0 / 1024 + "G");</span></span><br><span class="line"><span class="comment">//        System.out.println ("系统内存大小为：" + maxMemory * 4.0 / 1024 + "G");</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep (<span class="number">1000000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace ();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>程序输出：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-Xms : <span class="number">575</span>M</span><br><span class="line">-Xmx : <span class="number">575</span>M</span><br></pre></td></tr></table></figure></div><p>为什么输出结果不是设置的 600M？</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  jps</span><br><span class="line">32736</span><br><span class="line">49124 Launcher</span><br><span class="line">49125 HeapSpaceInitial</span><br><span class="line">49161 Jps</span><br><span class="line">34013 Main</span><br><span class="line">  jstat -gc 49125</span><br><span class="line"> S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT    CGC    CGCT     GCT</span><br><span class="line">25600.0 25600.0  0.0    0.0   153600.0 15360.5   409600.0     0.0     4480.0 780.7  384.0   76.6       0    0.000   0      0.000   -          -    0.000</span><br></pre></td></tr></table></figure></div><p>通过下面两个柿子：</p><ol><li>25600 (S0C) + 25600 (S1C) + 153600 (EC) + 409600 (OC) &#x3D; 614400, 614400 ÷ 1024 &#x3D; 600</li><li>25600 (S0C&#x2F;S1C) + 153600 (EC) + 409600 (OC) &#x3D; 588800, 588800 ÷ 1024 &#x3D; 575</li></ol><p>可知，575 为两个幸存者区其中一个幸存者区 + 伊甸园区 + 老年区的大小总和。</p><p>也可以使用 <code>-XX:+PrintGCDetails</code> 查看：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-Xms : <span class="number">575</span>M</span><br><span class="line">-Xmx : <span class="number">575</span>M</span><br><span class="line">Heap</span><br><span class="line"> PSYoungGen      total <span class="number">179200</span>K, used <span class="number">9216</span>K [<span class="number">0x00000007b3800000</span>, <span class="number">0x00000007c0000000</span>, <span class="number">0x00000007c0000000</span>)</span><br><span class="line">  eden space <span class="number">153600</span>K, <span class="number">6</span>% used [<span class="number">0x00000007b3800000</span>,<span class="number">0x00000007b41001a0</span>,<span class="number">0x00000007bce00000</span>)</span><br><span class="line">  from space <span class="number">25600</span>K, <span class="number">0</span>% used [<span class="number">0x00000007be700000</span>,<span class="number">0x00000007be700000</span>,<span class="number">0x00000007c0000000</span>)</span><br><span class="line">  to   space <span class="number">25600</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bce00000</span>,<span class="number">0x00000007bce00000</span>,<span class="number">0x00000007be700000</span>)</span><br><span class="line"> ParOldGen       total <span class="number">409600</span>K, used <span class="number">0</span>K [<span class="number">0x000000079a800000</span>, <span class="number">0x00000007b3800000</span>, <span class="number">0x00000007b3800000</span>)</span><br><span class="line">  object space <span class="number">409600</span>K, <span class="number">0</span>% used [<span class="number">0x000000079a800000</span>,<span class="number">0x000000079a800000</span>,<span class="number">0x00000007b3800000</span>)</span><br><span class="line"> Metaspace       used <span class="number">2953</span>K, capacity <span class="number">4496</span>K, committed <span class="number">4864</span>K, reserved <span class="number">1056768</span>K</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">space</span>    <span class="title">used</span> 321<span class="title">K</span>, <span class="title">capacity</span> 388<span class="title">K</span>, <span class="title">committed</span> 512<span class="title">K</span>, <span class="title">reserved</span> 1048576<span class="title">K</span></span></span><br></pre></td></tr></table></figure></div><p>179200K &#x3D; 153600K + 25600K ，年轻代总大小为伊甸园区 + 一个幸存者 (from 或 to) 区的大小。</p><h3 id="OutOfMemoryError-的说明与举例"><a href="#OutOfMemoryError-的说明与举例" class="headerlink" title="OutOfMemoryError 的说明与举例"></a><code>OutOfMemoryError</code> 的说明与举例</h3><p>演示程序：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * -Xms600m -Xmx600m</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart  shkstart@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020  21:12</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OOMTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String [] args)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Picture&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep (<span class="number">20</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace ();</span><br><span class="line">            &#125;</span><br><span class="line">            list.add (<span class="keyword">new</span> Picture (<span class="keyword">new</span> Random ().nextInt (<span class="number">1024</span> * <span class="number">1024</span>)));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Picture</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span> [] pixels;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Picture</span> <span class="params">(<span class="keyword">int</span> length)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pixels = <span class="keyword">new</span> <span class="keyword">byte</span> [length];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>程序最终肯定会输出异常信息：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">"main"</span> java.lang.OutOfMemoryError: Java heap space</span><br><span class="line">  at com.atguigu.java.Picture.&lt;init&gt;(OOMTest.java:<span class="number">29</span>)</span><br><span class="line">  at com.atguigu.java.OOMTest.main (OOMTest.java:<span class="number">20</span>)</span><br></pre></td></tr></table></figure></div><p>在 Visual VM 中，通过 Visual GC 可以动态监控堆内存变化情况，通过 Sampler - Memory 还可以分析是什么原因导致堆内存溢出异常。</p><p><img src="/2020/07/11/JVM-04/VisualVM.gif" alt="VisualVM - Visual GC"><br><img src="/2020/07/11/JVM-04/VisualVMSampler.png" alt="VisualVM - Sampler - Memory"></p><hr><h2 id="3-年轻代与老年代"><a href="#3-年轻代与老年代" class="headerlink" title="3 年轻代与老年代"></a>3 年轻代与老年代</h2><ul><li>存储在 JVM 中的 Java 对象可以被划分为两类：<ul><li>➢ 一类是生命周期较短的瞬时对象，这类对象的创建和消亡都非常迅速</li><li>➢ 另外一类对象的生命周期却非常长，在某些极端的情况下还能够与 JVM 的生命周期保持一致。</li></ul></li><li>Java 堆区进一步细分的话，可以划分为年轻代 (YoungGen) 和老年代 (OldGen)</li><li>其中年轻代又可以划分为 Eden 空间、Survivor0 空间和 Survivor1 空间（有时也叫做 from 区、to 区）。</li></ul><p><img src="/2020/07/11/JVM-04/HeapMemoryDivision.png" alt="堆空间内部结构划分"></p><p>下面这参数开发中一般不会调：</p><p>配置新生代与老年代在堆结构的占比。</p><ul><li>➢ 默认 <code>-XX:NewRatio=2</code>，表示新生代占 1，老年代占 2，新生代占整个堆的 1&#x2F;3</li><li>➢ 可以修改 <code>-XX:NewRatio=4</code>，表示新生代占 1，老年代占 4，新生代占整个堆的 1&#x2F;5</li></ul><p>测试：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java1;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * -Xms600m -Xmx600m</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * -XX:NewRatio ： 设置新生代与老年代的比例。默认值是 2.</span></span><br><span class="line"><span class="comment"> * -XX:SurvivorRatio ：设置新生代中 Eden 区与 Survivor 区的比例。默认值是 8</span></span><br><span class="line"><span class="comment"> * -XX:-UseAdaptiveSizePolicy ：关闭自适应的内存分配策略  （暂时用不到）</span></span><br><span class="line"><span class="comment"> * -Xmn: 设置新生代的空间的大小。 （一般不设置）</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart  shkstart@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020  17:23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EdenSurvivorTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String [] args)</span> </span>&#123;</span><br><span class="line">        System.out.println (<span class="string">"我只是来打个酱油～"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep (<span class="number">1000000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace ();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>设置 VM Option 参数：<code>-Xms600m -Xmx600m</code> ，可以使用 <code>jinfo</code> 命令查看 <code>NewRatio</code> 参数：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> ✘  yan  ~  jps <span class="comment">#jps</span></span><br><span class="line">32736</span><br><span class="line">34013 Main</span><br><span class="line">53645 Launcher</span><br><span class="line">54110 Jps</span><br><span class="line">53646 EdenSurvivorTest</span><br><span class="line">  yan  ~  jinfo -flag NewRatio 53646 <span class="comment">#jinfo</span></span><br><span class="line">-XX:NewRatio=2</span><br><span class="line">  yan  ~  jinfo -flag SurvivorRatio 53646</span><br><span class="line">-XX:SurvivorRatio=8</span><br></pre></td></tr></table></figure></div><p>使用不同的参数运行程序进行测试，得到下表：</p><table><thead><tr><th>参数</th><th>Eden Space</th><th>Survivor 0</th><th>Survivor 1</th><th>Old Gen</th><th>SurvivorRatio</th><th>NewRatio</th></tr></thead><tbody><tr><td><code>-Xms600m -Xmx600m</code></td><td>150</td><td>25</td><td>25</td><td>400</td><td>6</td><td>2</td></tr><tr><td><code>-Xms600m -Xmx600m -XX:-UseAdaptiveSizePolicy</code></td><td>150</td><td>25</td><td>25</td><td>400</td><td>6</td><td>2</td></tr><tr><td><code>-Xms600m -Xmx600m -XX:SurvivorRatio=8</code></td><td>160</td><td>20</td><td>20</td><td>400</td><td>8</td><td>2</td></tr><tr><td><code>-Xms600m -Xmx600m -XX:SurvivorRatio=8 -XX:NewRatio=3</code></td><td>120</td><td>15</td><td>15</td><td>450</td><td>8</td><td>3</td></tr></tbody></table><p>虽然默认的 <code>SurvivorRatio</code> 是 8，官方文档也是 8，但是实际运行中伊甸园区和幸存者区的比例是 150:25 &#x3D; 6:1，即使使用 <code>-XX:-UseAdaptiveSizePolicy</code> ：关闭自适应的内存分配策略，也还是 6:1。除非显式地使用 <code>-XX:SurvivorRatio=8</code> 显式指定比例为 8:1</p><ul><li>在 HotSpot 中，Eden 空间和另外两个 Survivor 空间缺省所占的比例是 8:1:1</li><li>当然开发人员可以通过选项 “<code>-XX:SurvivorRatio</code>“ 调整这个空间比例。比如 <code>-XX:SurvivorRatio=8</code></li><li><strong>几乎所有</strong> 的 Java 对象都是在 Eden 区被 new 出来的。</li><li>绝大部分的 Java 对象的销毁都在新生代进行了。<ul><li>➢ IBM 公司的专门研究表明，新生代中 80% 的对象都是 “朝生夕死” 的。</li></ul></li><li>可以使用选项 “<code>-Xmn</code>“ 设置新生代最大内存大小</li><li>➢这个参数一般使用默认值就可以了。</li></ul><p><img src="/2020/07/11/JVM-04/Survivor.png" alt="年轻代与老年代的关系"></p><p><a href="Plumbr%20Handbook%20Java%20Garbage%20Collection.pdf">参考文档：Plumbr Handbook Java Garbage Collection.pdf</a></p><hr><h2 id="4-图解对象分配过程"><a href="#4-图解对象分配过程" class="headerlink" title="4 图解对象分配过程"></a>4 图解对象分配过程</h2><p>为新对象分配内存是一件非常严谨和复杂的任务，JVM 的设计者们不仅需要考虑内存如何分配、在哪里分配等问题，并且由于内存分配算法与内存回收算法密切相关，所以还需要考虑 GC 执行完内存回收后是否会在内存空间中产生内存碎片。</p><ol><li>new 的对象先放伊甸园区。此区有大小限制。</li><li>当伊甸园的空间填满时，程序又需要创建对象，JVM 的垃圾回收器将对伊甸园区进行垃圾回收 (Minor GC)，将伊甸园区中的不再被其他对象所引用的对象进行销毁。再加载新的对象放到伊甸园区。</li><li>然后将伊甸园区中的剩余对象移动到幸存者 0 区。</li><li>如果再次触发垃圾回收，此时上次幸存下来的放到幸存者 0 区的，如果没有回收，就会放到幸存者 1 区。</li><li>如果再次经历垃圾回收，此时会重新放回幸存者 0 区，接着再去幸存者 1 区。</li><li>啥时候能去养老区呢？可以设置次数。默认是 15 次。<ul><li>可以设置参数: <code>-XX:MaxTenuringThreshold=&lt;N&gt;</code> 进行设置。</li></ul></li></ol><p><img src="/2020/07/11/JVM-04/%E6%96%B0%E7%94%9F%E4%BB%A3%E5%AF%B9%E8%B1%A1%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6%E8%BF%87%E7%A8%8B.png" alt="新生代对象内存分配与回收过程"></p><p>当伊甸园区满的时候，会触发 YGC&#x2F;MinorGC，会将伊甸园区和幸存者区 (from 区) 一起回收。但是幸存者区满的时候不会触发 YGC&#x2F;MinorGC。</p><p>总结：</p><p><strong>针对幸存者 s0，s1 区的总结：复制之后有交换，谁空谁是 to</strong>。</p><p><strong>关于垃圾回收：频繁在新生区收集，很少在养老区收集，几乎不在永久区 &#x2F; 元空间收集</strong>。</p><p>对象分配特殊情况：</p><p><img src="/2020/07/11/JVM-04/%E5%AF%B9%E8%B1%A1%E5%88%86%E9%85%8D%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5.png" alt="对象分配特殊情况"></p><p>代码举例与 JVisualVM 演示对象的分配过程：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * -Xms600m -Xmx600m</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart  shkstart@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020  17:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeapInstanceTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">byte</span> [] buffer = <span class="keyword">new</span> <span class="keyword">byte</span> [<span class="keyword">new</span> Random ().nextInt (<span class="number">1024</span> * <span class="number">200</span>)];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String [] args)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;HeapInstanceTest&gt; list = <span class="keyword">new</span> ArrayList&lt;HeapInstanceTest&gt;();</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            list.add (<span class="keyword">new</span> HeapInstanceTest ());</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep (<span class="number">10</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace ();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>VisualVM - Visual GC：</p><p><img src="/2020/07/11/JVM-04/VisualVMVisualGC.png" alt="查看年轻区、老年区各时间段内存占用对应的图像走势"></p><p>最后，堆空间中老年区满，没有可用空间来为对象继续分配内存，程序会异常终止：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">"main"</span> java.lang.OutOfMemoryError: Java heap space</span><br><span class="line"> at com.atguigu.java1.HeapInstanceTest.&lt;init&gt;(HeapInstanceTest.java:<span class="number">12</span>)</span><br><span class="line"> at com.atguigu.java1.HeapInstanceTest.main (HeapInstanceTest.java:<span class="number">17</span>)</span><br></pre></td></tr></table></figure></div><p>常用调优工具：</p><ul><li>JDK 命令行：<code>jmap</code>, <code>jinfo</code>, <code>jstat</code>,<code>javap</code> 等</li><li>Eclipse : Memory Analyzer Tool</li><li>Jconsole</li><li>VisualVM</li><li>Jprofiler</li><li>Java Flight Recorder</li><li>GCViewer</li><li>GC Easy</li></ul><p><a href="https://blog.csdn.net/wytocsdn/article/details/79258247" target="_blank" rel="noopener">在 <code>Idea</code> 中配置 <code>JProfiler</code></a>：</p><ol><li>安装 JProfiler：官网下载安装 <a href="https://www.ej-technologies.com/download/jprofiler/files" target="_blank" rel="noopener">https://www.ej-technologies.com/download/jprofiler/files</a></li><li>安装 JProfiler Idea 插件：在 <code>Idea</code> 插件市场搜索 JProfiler 安装，在插件设置中设置 JProfiler 目录。</li><li>点击 <code>Run</code> 旁边的 JProfiler 图标运行。</li></ol><hr><h2 id="5-Minor-GC-和-Major-GC-和-Full-GC"><a href="#5-Minor-GC-和-Major-GC-和-Full-GC" class="headerlink" title="5 Minor GC 和 Major GC 和 Full GC"></a>5 Minor GC 和 Major GC 和 Full GC</h2><p>JVM 在进行 GC 时，并非每次都对上面三个内存区域（新生代、老年代、方法区）一起回收的，大部分时候回收的都是指新生代。</p><p>针对 HotSpot VM 的实现，它里面的 GC 按照回收区域又分为两大种类型：一种是部分收集 (Partial GC)，一种是整堆收集 (Full GC)</p><ul><li>部分收集：不是完整收集整个 Java 堆的垃圾收集。其中又分为:<ul><li>➢ 新生代收集 (Minor GC &#x2F; Young GC) : 只是新生代（Eden、s0、s1）的垃圾收集</li><li>➢ 老年代收集 (Major GC &#x2F; Old GC) : 只是老年代的垃圾收集。<ul><li>目前，只有 CMS GC 会有单独收集老年代的行为。<ul><li><em>注意，很多时候 Major GC 会和 Full GC 混淆使用，需要具体分辨是老年代回收还是整堆回收</em>。</li></ul></li></ul></li><li>➢ 混合收集 (Mixed GC): 收集整个新生代以及部分老年代的垃圾收集。<ul><li>目前，只有 G1 GC 会有这种行为</li></ul></li></ul></li><li>整堆收集 (Full GC): 收集整个 java 堆和方法区的垃圾收集。</li></ul><hr><h3 id="最简单的分代式GC策略的触发条件"><a href="#最简单的分代式GC策略的触发条件" class="headerlink" title="最简单的分代式GC策略的触发条件"></a>最简单的分代式GC策略的触发条件</h3><ul><li><p>● <strong>年轻代 GC (Minor GC ) 触发机制</strong>:</p><ul><li>➢ 当年轻代空间不足时，就会触发 Minor GC，这里的年轻代满指的是 Eden 代满，Survivor 满不会引发 GC。(每次 Minor GC 会清理年轻代的内存。)</li><li>➢ 因为 Java<strong>对象大多都具备朝生夕灭的特性</strong>，所以 MinorGC 非常频繁，一般回收速度也比较快。这一定义既清晰又易于理解。</li><li>➢ Minor GC 会引发 STW， 暂停其它用户的线程，等垃圾回收结束，用户线程才恢复运行。</li></ul></li><li><p>● <strong>老年代 GC (Major GC&#x2F;Full GC) 触发机制</strong>:</p><ul><li>➢ 指发生在老年代的 GC，对象从老年代消失时，我们说 “Major GC” 或 “Full GC” 发生了。</li><li>➢ 出现了 Major GC， 经常会伴随至少一次的 Minor GC (但非绝对的，在 Parallel Scavenge 收集器的收集策略里就有直接进行 Major GC 的策略选择过程)。<ul><li>也就是在老年代空间不足时，会先尝试触发 Minor GC。如果之后空间还不足，则触发 Major GC</li></ul></li><li>➢ Major GC 的速度一般会比 Minor GC 慢 10 倍以上，STW 的时间更长。</li><li>➢ 如果 Major GC 后，内存还不足，就报 <code>OOM</code> 了。</li></ul></li><li><p>● <strong>Full GC 触发机制: (后面细讲)</strong><br>触发 Full GC 执行的情况有如下五种:  </p><ul><li>(1) 调用 <code>System.gc()</code> 时，系统建议执行 <strong>Full GC</strong>，但是不必然执行</li><li>(2) 老年代空间不足</li><li>(3) 方法区空间不足</li><li>(4) 通过 Minor GC 后进入老年代的平均大小大于老年代的可用内存</li><li>(5) 由 Eden 区、survivor space0 (From Space) 区向 survivor space1 (To Space) 区复制时，对象大小大于 To Space 可用内存，则把该对象转存到老年代，且老年代的可用内存小于该对象大小</li></ul><p>说明: <strong>Full GC 是开发或调优中尽量要避免的。这样暂时时间会短一些</strong>。</p></li></ul><h3 id="GC举例与日志分析"><a href="#GC举例与日志分析" class="headerlink" title="GC举例与日志分析"></a>GC举例与日志分析</h3><p>测试代码：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试MinorGC 、 MajorGC、FullGC</span></span><br><span class="line"><span class="comment"> * -Xms9m -Xmx9m -XX:+PrintGCDetails</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart  shkstart@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020  14:19</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GCTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            String a = <span class="string">"atguigu.com"</span>;</span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                list.add(a);</span><br><span class="line">                a = a + a;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable t) &#123;</span><br><span class="line">            t.printStackTrace();</span><br><span class="line">            System.out.println(<span class="string">"遍历次数为："</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>设置 VM options，运行：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[GC (Allocation Failure) [PSYoungGen: <span class="number">2036</span>K-&gt;<span class="number">496</span>K(<span class="number">2560</span>K)] <span class="number">2036</span>K-&gt;<span class="number">871</span>K(<span class="number">9728</span>K), <span class="number">0.0062912</span> secs] [Times: user=<span class="number">0.01</span> sys=<span class="number">0.01</span>, real=<span class="number">0.00</span> secs]</span><br><span class="line">[GC (Allocation Failure) [PSYoungGen: <span class="number">1964</span>K-&gt;<span class="number">480</span>K(<span class="number">2560</span>K)] <span class="number">2340</span>K-&gt;<span class="number">1682</span>K(<span class="number">9728</span>K), <span class="number">0.0017672</span> secs] [Times: user=<span class="number">0.01</span> sys=<span class="number">0.00</span>, real=<span class="number">0.00</span> secs]</span><br><span class="line">[GC (Allocation Failure) [PSYoungGen: <span class="number">1941</span>K-&gt;<span class="number">160</span>K(<span class="number">2560</span>K)] <span class="number">3144</span>K-&gt;<span class="number">2770</span>K(<span class="number">9728</span>K), <span class="number">0.0017537</span> secs] [Times: user=<span class="number">0.00</span> sys=<span class="number">0.00</span>, real=<span class="number">0.01</span> secs]</span><br><span class="line">[<span class="function">Full <span class="title">GC</span> <span class="params">(Ergonomics)</span> [PSYoungGen: 1008K-&gt;0<span class="title">K</span><span class="params">(<span class="number">2560</span>K)</span>] [ParOldGen: 6834K-&gt;4588<span class="title">K</span><span class="params">(<span class="number">7168</span>K)</span>] 7843K-&gt;4588<span class="title">K</span><span class="params">(<span class="number">9728</span>K)</span>, [Metaspace: 3012K-&gt;3012<span class="title">K</span><span class="params">(<span class="number">1056768</span>K)</span>], 0.0051738 secs] [Times: user</span>=<span class="number">0.02</span> sys=<span class="number">0.00</span>, real=<span class="number">0.00</span> secs]</span><br><span class="line">[GC (Allocation Failure) [PSYoungGen: <span class="number">0</span>K-&gt;<span class="number">0</span>K(<span class="number">2560</span>K)] <span class="number">4588</span>K-&gt;<span class="number">4588</span>K(<span class="number">9728</span>K), <span class="number">0.0009531</span> secs] [Times: user=<span class="number">0.00</span> sys=<span class="number">0.00</span>, real=<span class="number">0.01</span> secs]</span><br><span class="line">[<span class="function">Full <span class="title">GC</span> <span class="params">(Allocation Failure)</span> [PSYoungGen: 0K-&gt;0<span class="title">K</span><span class="params">(<span class="number">2560</span>K)</span>] [ParOldGen: 4588K-&gt;4570<span class="title">K</span><span class="params">(<span class="number">7168</span>K)</span>] 4588K-&gt;4570<span class="title">K</span><span class="params">(<span class="number">9728</span>K)</span>, [Metaspace: 3012K-&gt;3012<span class="title">K</span><span class="params">(<span class="number">1056768</span>K)</span>], 0.0038536 secs] [Times: user</span>=<span class="number">0.02</span> sys=<span class="number">0.00</span>, real=<span class="number">0.00</span> secs]</span><br><span class="line">遍历次数为：<span class="number">16</span></span><br><span class="line">Heap</span><br><span class="line"> PSYoungGen      total <span class="number">2560</span>K, used <span class="number">136</span>K [<span class="number">0x00000007bfd00000</span>, <span class="number">0x00000007c0000000</span>, <span class="number">0x00000007c0000000</span>)</span><br><span class="line">  eden space <span class="number">2048</span>K, <span class="number">6</span>% used [<span class="number">0x00000007bfd00000</span>,<span class="number">0x00000007bfd22300</span>,<span class="number">0x00000007bff00000</span>)</span><br><span class="line">  from space <span class="number">512</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bff80000</span>,<span class="number">0x00000007bff80000</span>,<span class="number">0x00000007c0000000</span>)</span><br><span class="line">  to   space <span class="number">512</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bff00000</span>,<span class="number">0x00000007bff00000</span>,<span class="number">0x00000007bff80000</span>)</span><br><span class="line"> ParOldGen       total <span class="number">7168</span>K, used <span class="number">4570</span>K [<span class="number">0x00000007bf600000</span>, <span class="number">0x00000007bfd00000</span>, <span class="number">0x00000007bfd00000</span>)</span><br><span class="line">  object space <span class="number">7168</span>K, <span class="number">63</span>% used [<span class="number">0x00000007bf600000</span>,<span class="number">0x00000007bfa76938</span>,<span class="number">0x00000007bfd00000</span>)</span><br><span class="line"> Metaspace       used <span class="number">3086</span>K, capacity <span class="number">4496</span>K, committed <span class="number">4864</span>K, reserved <span class="number">1056768</span>K</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">space</span>    <span class="title">used</span> 337<span class="title">K</span>, <span class="title">capacity</span> 388<span class="title">K</span>, <span class="title">committed</span> 512<span class="title">K</span>, <span class="title">reserved</span> 1048576<span class="title">K</span></span></span><br><span class="line">java.lang.OutOfMemoryError: Java heap space</span><br><span class="line"> at java.util.Arrays.copyOf(Arrays.java:<span class="number">3332</span>)</span><br><span class="line"> at java.lang.AbstractStringBuilder.ensureCapacityInternal(AbstractStringBuilder.java:<span class="number">124</span>)</span><br><span class="line"> at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:<span class="number">448</span>)</span><br><span class="line"> at java.lang.StringBuilder.append(StringBuilder.java:<span class="number">136</span>)</span><br><span class="line"> at com.atguigu.java1.GCTest.main(GCTest.java:<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure></div><p><em>分析</em>：</p><p><code>[GC (Allocation Failure) [PSYoungGen: 2036K-&gt;496K(2560K)] 2036K-&gt;871K(9728K), 0.0062912 secs] [Times: user=0.01 sys=0.01, real=0.00 secs]</code></p><p>年轻代GC：GC前年轻代 2036K，GC后年轻代496K (年轻代总大小2560K, 2.5M)；GC前堆2036K，GC后堆871K（堆总大小9728K, 9.5M 包括老年代）</p><p>GC后年轻代大小没有变成 0K，因为有一部分对象保存在幸存者区没有被垃圾回收。</p><p><code>[Full GC (Ergonomics) [PSYoungGen: 1008K-&gt;0K(2560K)] [ParOldGen: 6834K-&gt;4588K(7168K)] 7843K-&gt;4588K(9728K), [Metaspace: 3012K-&gt;3012K(1056768K)], 0.0051738 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]</code></p><p>Full GC：GC前年轻代1008K，GC后年轻代0K （年轻代总大小2560K，2.5M）；GC前老年代6834K，GC后老年代4588K （老年代总大小7168K，7M）；GC前堆7834K，GC后堆4588K （堆总大小 9728K, 9.5M ）</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Heap</span><br><span class="line"> PSYoungGen      total 2560K, used 136K [0x00000007bfd00000, 0x00000007c0000000, 0x00000007c0000000)</span><br><span class="line">  eden space 2048K, 6% used [0x00000007bfd00000,0x00000007bfd22300,0x00000007bff00000)</span><br><span class="line">  from space 512K, 0% used [0x00000007bff80000,0x00000007bff80000,0x00000007c0000000)</span><br><span class="line">  to   space 512K, 0% used [0x00000007bff00000,0x00000007bff00000,0x00000007bff80000)</span><br><span class="line"> ParOldGen       total 7168K, used 4570K [0x00000007bf600000, 0x00000007bfd00000, 0x00000007bfd00000)</span><br><span class="line">  object space 7168K, 63% used [0x00000007bf600000,0x00000007bfa76938,0x00000007bfd00000)</span><br><span class="line"> Metaspace       used 3086K, capacity 4496K, committed 4864K, reserved 1056768K</span><br><span class="line">  class space    used 337K, capacity 388K, committed 512K, reserved 1048576K</span><br></pre></td></tr></table></figure></div><p>年轻代2560K，2.5M ；伊甸园区2M，from、to各0.5M<br>老年代7168K，7 M  </p><p>🤔🤔从上面日志可以看出，堆空间实际上大于设置的参数9M❓</p><hr><iframe width="1015" height="549" src="https://www.youtube.com/embed/vY-gi_7M_Mc?list=PLtGk8Nqe2ZcK0xUtbQjHeX2gqgoOdKJnX" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><hr><h2 id="6-堆空间分代思想"><a href="#6-堆空间分代思想" class="headerlink" title="6 堆空间分代思想"></a>6 堆空间分代思想</h2><p>为什么需要对 Java 堆进行分代？不分代就不能正常工作了吗？</p><ul><li>经研究，不同对象的生命周期不同。70%-99% 的对象是临时对象。<ul><li>➢ 新生代：有 Eden、两块大小相同的 Survivor (又称为 from&#x2F;to， s0&#x2F;s1) 构成，to 总为空。</li><li>➢ 老年代：存放新生代中经历多次 GC 仍然存活的对象。</li></ul></li><li>其实不分代完全可以，分代的唯一理由就是优化 Gc 性能。如果没有分代，那所有的对象都在一块，就如同把一个学校的人都关在一个教室。GC 的时候要找到哪些对象没用，这样就会对堆的所有区域进行扫描。而很多对象都是朝生夕死的，如果分代的话，把新创建的对象放到某一地方， 当 GC 的时候先把这块存储 “朝生夕死” 对象的区域进行回收，这样就会腾出很大的空间出来。</li></ul><hr><h2 id="7-内存分配策略"><a href="#7-内存分配策略" class="headerlink" title="7 内存分配策略"></a>7 内存分配策略</h2><p>如果对象在 Eden 出生并经过第次 MinorGC 后仍然存活，并且能被 Survivor 容纳的话，将被移动到 survivor 空间中，并将对象年龄设为 1。对象在 Survivor 区中每熬过一次 MinorGC，年龄就增加 1 岁，当它的年龄增加到一定<br>程度 (默认为 15 岁，其实每个 JVM、每个 GC 都有所不同) 时，就会被晋升到老年代中。</p><p>对象晋升老年代的年龄阈值，可以通过选项 <code>-XX:MaxTenuringThreshold</code> 来设置</p><p>针对不同年龄段的对象分配原则如下所示:</p><ul><li>● 优先分配到 Eden</li><li>● 大对象直接分配到老年代<ul><li>尽量避免程序中出现过多的大对象</li></ul></li><li>● 长期存活的对象分配到老年代</li><li>● 动态对象年龄判断<ul><li>如果 Survivor 区中相同年龄的所有对象大小的总和大于 Survivor 空间的一半，<strong>年龄大于或等于</strong>该年龄的对象可以直接进入老年代，无须等到 <code>MaxTenuringThreshold</code> 中要求的年龄。</li></ul></li><li>● 空间分配担保<ul><li><code>-XX:HandlePromotionFailure</code></li></ul></li></ul><p>测试：大对象直接分配到老年代</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java1;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 测试：大对象直接进入老年代</span></span><br><span class="line"><span class="comment"> * -Xms60m -Xmx60m -XX:NewRatio=2 -XX:SurvivorRatio=8 -XX:+PrintGCDetails</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart  shkstart@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020  21:48</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">YoungOldAreaTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span> * <span class="number">1024</span> * <span class="number">20</span>];<span class="comment">//20m</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>设置 VM options 为 <code>-Xms60m -Xmx60m -XX:NewRatio=2 -XX:SurvivorRatio=8 -XX:+PrintGCDetails</code> ，在 Java 8 下运行：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Heap</span><br><span class="line"> PSYoungGen      total <span class="number">18432</span>K, used <span class="number">2308</span>K [<span class="number">0x00000007bec00000</span>, <span class="number">0x00000007c0000000</span>, <span class="number">0x00000007c0000000</span>)</span><br><span class="line">  eden space <span class="number">16384</span>K, <span class="number">14</span>% used [<span class="number">0x00000007bec00000</span>,<span class="number">0x00000007bee41048</span>,<span class="number">0x00000007bfc00000</span>)</span><br><span class="line">  from space <span class="number">2048</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bfe00000</span>,<span class="number">0x00000007bfe00000</span>,<span class="number">0x00000007c0000000</span>)</span><br><span class="line">  to   space <span class="number">2048</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bfc00000</span>,<span class="number">0x00000007bfc00000</span>,<span class="number">0x00000007bfe00000</span>)</span><br><span class="line"> ParOldGen       total <span class="number">40960</span>K, used <span class="number">20480</span>K [<span class="number">0x00000007bc400000</span>, <span class="number">0x00000007bec00000</span>, <span class="number">0x00000007bec00000</span>)</span><br><span class="line">  object space <span class="number">40960</span>K, <span class="number">50</span>% used [<span class="number">0x00000007bc400000</span>,<span class="number">0x00000007bd800010</span>,<span class="number">0x00000007bec00000</span>)</span><br><span class="line"> Metaspace       used <span class="number">3080</span>K, capacity <span class="number">4496</span>K, committed <span class="number">4864</span>K, reserved <span class="number">1056768</span>K</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">space</span>    <span class="title">used</span> 337<span class="title">K</span>, <span class="title">capacity</span> 388<span class="title">K</span>, <span class="title">committed</span> 512<span class="title">K</span>, <span class="title">reserved</span> 1048576<span class="title">K</span></span></span><br></pre></td></tr></table></figure></div><p>在 JDK1.7 下运行结果如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Heap</span><br><span class="line"> PSYoungGen      total <span class="number">18432</span>K, used <span class="number">1967</span>K [<span class="number">0x00000007fec00000</span>, <span class="number">0x0000000800000000</span>, <span class="number">0x0000000800000000</span>)</span><br><span class="line">  eden space <span class="number">16384</span>K, <span class="number">12</span>% used [<span class="number">0x00000007fec00000</span>,<span class="number">0x00000007fedebc28</span>,<span class="number">0x00000007ffc00000</span>)</span><br><span class="line">  from space <span class="number">2048</span>K, <span class="number">0</span>% used [<span class="number">0x00000007ffe00000</span>,<span class="number">0x00000007ffe00000</span>,<span class="number">0x0000000800000000</span>)</span><br><span class="line">  to   space <span class="number">2048</span>K, <span class="number">0</span>% used [<span class="number">0x00000007ffc00000</span>,<span class="number">0x00000007ffc00000</span>,<span class="number">0x00000007ffe00000</span>)</span><br><span class="line"> ParOldGen       total <span class="number">40960</span>K, used <span class="number">20480</span>K [<span class="number">0x00000007fc400000</span>, <span class="number">0x00000007fec00000</span>, <span class="number">0x00000007fec00000</span>)</span><br><span class="line">  object space <span class="number">40960</span>K, <span class="number">50</span>% used [<span class="number">0x00000007fc400000</span>,<span class="number">0x00000007fd800010</span>,<span class="number">0x00000007fec00000</span>)</span><br><span class="line"> PSPermGen       total <span class="number">21504</span>K, used <span class="number">2986</span>K [<span class="number">0x00000007f7200000</span>, <span class="number">0x00000007f8700000</span>, <span class="number">0x00000007fc400000</span>)</span><br><span class="line">  object space <span class="number">21504</span>K, <span class="number">13</span>% used [<span class="number">0x00000007f7200000</span>,<span class="number">0x00000007f74eab58</span>,<span class="number">0x00000007f8700000</span>)</span><br></pre></td></tr></table></figure></div><p>设置了堆空间最小 &#x2F; 大为 60M，新生代与老年代之间的比例为 2:1，伊甸园区与幸存者区之间的比例为 8:1:1，打印 GC 日志详情。新生代（伊甸园区 16M + 两个幸存者区 2M*2）20M，老年代 40M，老年代已用空间 20M，由此可见，伊甸园区容纳不下 20M 的数组，分配的一个 20M 的数组直接进入了老年代。</p><hr><h2 id="8-为对象分配内存：TLAB"><a href="#8-为对象分配内存：TLAB" class="headerlink" title="8 为对象分配内存：TLAB"></a>8 为对象分配内存：TLAB</h2><p><strong>为什么有 TLAB ( Thread Local Allocation Buffer )</strong> ?</p><ul><li>● 堆区是线程共享区域，任何线程都可以访问到堆区中的共享数据</li><li>● 由于对象实例的创建在 JVM 中非常频繁，因此在并发环境下从堆区中划分内存空间是线程不安全的</li><li>● 为避免多个线程操作同一地址，需要使用加锁等机制，进而影响分配速度。</li></ul><p><strong>什么是 TLAB</strong> ?</p><ul><li>从内存模型而不是垃圾收集的角度，对 Eden 区域继续进行划分，JVM <strong>为每个线程分配了一个私有缓存区域</strong>，它包含在 Eden 空间内。</li><li>多线程同时分配内存时，使用 TLAB 可以避免一系列的<del>非</del>线程安全问题，同时还能够提升内存分配的吞吐量，因此我们可以将这种内存分配方式称之为<strong>快速分配</strong>策略。</li><li>据我所知所有 OpenJDK 衍生出来的 JVM 都提供了 TLAB 的设计。</li></ul><p><strong>TLAB 的再说明</strong>:</p><ul><li>尽管不是所有的对象实例都能够在 TLAB 中成功分配内存 (因为空间很小)，但 <strong>JVM 确实是将 TLAB 作为内存分配的首选</strong> （使用命令 <code>jinfo -flag UseTLAB pid</code> 查看 TLAB 是否开启，默认是开启的）。</li><li>在程序中，开发人员可以通过选项 “<code>-XX:UseTLAB</code>“ 设置是否开启 TLAB 空间。</li><li>默认情况下，TLAB 空间的内存非常小，**仅占有整个 Eden 空间的 1%**，可以使用命令 <code>jinfo -flag TLABWasteTargetPercent pid</code> 查看 TLAB 占伊甸园区的百分比，当然我们可以通过选项 <a href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html" target="_blank" rel="noopener">“<code>-XX:TLABWasteTargetPercent</code>“</a> 设置 TLAB 空间所占用 Eden 空间的百分比大小。</li><li>一旦对象在 TLAB 空间分配内存失败时，JVM 就会尝试着 <strong>通过使用加锁机制</strong> 确保数据操作的原子性，从而直接在 Eden 空间中分配内存。</li></ul><p><img src="/2020/07/11/JVM-04/TLAB.png" alt="对象分配过程：TLAB"></p><hr><h2 id="9-小结堆空间的参数设置"><a href="#9-小结堆空间的参数设置" class="headerlink" title="9 小结堆空间的参数设置"></a>9 小结堆空间的参数设置</h2><p>堆空间的参数设置</p><p>官网说明：<a href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html" target="_blank" rel="noopener">https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html</a></p><ul><li><code>-XX:+PrintFlagsInitial</code> : 查看所有的参数的默认初始值</li><li><code>-XX:+PrintFlagsFinal</code> : 查看所有的参数的最终值 (可能会存在修改，不再是初始值)</li><li><code>-Xms</code> : 初始堆空间内存 ( 默认为物理内存的 1&#x2F;64)</li><li><code>-Xmx</code> : 最大堆空间内存 ( 默认为物理内存的 1&#x2F;4)</li><li><code>-Xmn</code> : 设置新生代的大小。(初始值及最大值)</li><li><code>-XX:NewRatio</code> : 配置新生代与老年代在堆结构的占比</li><li><code>-XX:SurvivorRatio</code> : 设置新生代中 Eden 和 S0&#x2F;S1 空间的比例</li><li><code>-XX:MaxTenuringThreshold</code> : 设置新生代垃圾的最大年龄</li><li><code>-XX:+PrintGCDetails</code> : 输出详细的 GC 处理日志<ul><li>➢ 打印 GC 简要信息: ① <code>-XX:+PrintGC</code> ② <code>-verbose:gc</code></li></ul></li><li><code>-XX:HandlePromotionFailure</code> : 是否设置空间分配担保</li></ul><p><strong>关于参数</strong> <code>-XX:SurvivorRatio</code></p><p>年轻代中，若伊甸园区设置过大，幸存者区较小，则容易导致在 YGC &#x2F; Minor GC 时，伊甸园区中剩余的对象直接晋升老年代，则分代的意义就不大了。</p><p>若伊甸园区设置过小，幸存者区过大，则容易导致 YGC &#x2F; Minor GC 的频率增加，更加频繁的垃圾回收会增加 STW 的总体时间，影响程序的性能。</p><p>从性能调优的角度，都应该降低 GC 的频率。</p><p><strong>关于参数</strong> <code>-XX:HandlePromotionFailure</code></p><p>在发生 Minor GC 之前，虚拟机会<strong>检查老年代最大可用的连续空间是否大于新生代所有对象的总空间</strong>。</p><ul><li>如果大于，则此次 Minor GC 是安全的</li><li>如果小于，则虚拟机会查看 <code>-XX:HandlePromotionFailure</code> 设置值是否允许担保失败。<ul><li>如果 <code>HandlePromotionFailure</code>&#x3D;true， 那么会继续<strong>检查老年代最大可用连续空间是否大于历次晋升到老年代的对象的平均大小</strong>。<ul><li>如果大于，则尝试进行一次 Minor GC，但这次 Minor GC 依然是有风险的；</li><li>如果小于，则改为进行一次 Full GC。</li></ul></li><li>如果 <code>HandlePromotionFailure</code>&#x3D;false， 则改为进行一次 Full GC。</li></ul></li></ul><p>在 JDK6 Update24 之后，HandlePromotionFailure 参数不会再影响到虛拟机的空间分配担保策略，观察 OpenJDK 中的源码变化，虽然源码中还定义了 HandlePromotionFailure 参数，但是在代码中已经不会再使用它。JDK6 Update24 之后的规则变为<strong>只要老年代的连续空间大于新生代对象总大小或者历次晋升的平均大小就会进行 Minor GC， 否则将进行 Full GC</strong>。</p><hr><h2 id="X-堆是分配对象的唯一选择吗"><a href="#X-堆是分配对象的唯一选择吗" class="headerlink" title="X 堆是分配对象的唯一选择吗"></a>X 堆是分配对象的唯一选择吗</h2><p><strong>堆是分配对象的唯一选择吗</strong> ？</p><p>在《深入理解 Java 虚拟机》中关于 Java 堆内存有这样一段描述:</p><p>随着 JIT 编译期的发展与<strong>逃逸分析技术</strong>逐渐成熟，<strong>栈上分配、标量替换优化技术</strong>将会导致一些微妙的变化，所有的对象都分配到堆上也渐渐变得不那么 “绝对” 了。</p><p>在 Java 虚拟机中，对象是在 Java 堆中分配内存的，这是一个普遍的常识。但是，有一种特殊情况，那就是如果经过<strong>逃逸分析 (Escape Analysis) 后发现，一个对象并没有逃逸出方法的话，那么就可能被优化成栈上分配</strong>。这样就无需在堆上分配内存，也无须进行垃圾回收了。这也是最常见的堆外存储技术。</p><p>此外，前面提到的基于 OpenJDK 深度定制的 TaoBaoVM, 其中创新的 GCIH (GC invisible heap) 技术实现 off-heap, 将生命周期较长的 Java 对象从 heap 中移至 heap 外，并且 GC 不能管理 GCIH 内部的 Java 对象，以此达到降低 GC 的回收频率和提升 GC 的回收效率的目的。</p><h3 id="逃逸分析概述"><a href="#逃逸分析概述" class="headerlink" title="逃逸分析概述"></a>逃逸分析概述</h3><ul><li>如何将堆上的对象分配到栈，需要使用逃逸分析手段。</li><li>这是一种可以有效减少Java程序中同步负载和内存堆分配压力的跨函数全局数据流分析算法。</li><li>通过逃逸分析，Java Hotspot编译器能够分析出一个新的对象的引用的使用范围从而决定是否要将这个对象分配到堆上。</li><li>逃逸分析的基本行为就是分析对象动态作用域:;<ul><li>➢ 当一个对象在方法中被定义后，对象只在方法内部使用，则认为没有发生逃逸。</li><li>➢ 当一个对象在方法中被定义后，它被外部方法所引用，则认为发生逃逸。例如作为调用参数传递到其他地方中。</li></ul></li></ul><p>例如：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">my_method</span><span class="params">()</span></span>&#123;</span><br><span class="line">    V v = <span class="keyword">new</span> V();</span><br><span class="line">    <span class="comment">// use v</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    v = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>没有发生逃逸的现象，则可以分配到栈上，随着方法执行的结束，栈空间就被移除。</p><p>由例如，</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> StringBuffer <span class="title">createStringBuffer</span><span class="params">(String s2, String s2)</span></span>&#123;</span><br><span class="line">    StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    sb.append(s1);</span><br><span class="line">    sb.append(s2);</span><br><span class="line">    <span class="keyword">return</span> sb;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>上述代码中，如果想要 StringBuffer sb 不逃出方法，可以这样写：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">createStringBuffer</span><span class="params">(String s2, String s2)</span></span>&#123;</span><br><span class="line">    StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    sb.append(s1);</span><br><span class="line">    sb.append(s2);</span><br><span class="line">    <span class="keyword">return</span> sb.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>逃逸分析的各种情况：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 逃逸分析</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  如何快速的判断是否发生了逃逸分析，大家就看new的对象实体是否有可能在方法外被调用。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020 下午 4:00</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EscapeAnalysis</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> EscapeAnalysis obj;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    方法返回EscapeAnalysis对象，发生逃逸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> EscapeAnalysis <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> obj == <span class="keyword">null</span>? <span class="keyword">new</span> EscapeAnalysis() : obj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    为成员属性赋值，发生逃逸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setObj</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.obj = <span class="keyword">new</span> EscapeAnalysis();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//思考：如果当前的obj引用声明为static的？仍然会发生逃逸。</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    对象的作用域仅在当前方法中有效，没有发生逃逸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">useEscapeAnalysis</span><span class="params">()</span></span>&#123;</span><br><span class="line">        EscapeAnalysis e = <span class="keyword">new</span> EscapeAnalysis();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    引用成员变量的值，发生逃逸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">useEscapeAnalysis1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        EscapeAnalysis e = getInstance();</span><br><span class="line">        <span class="comment">//getInstance().xxx()同样会发生逃逸</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>参数设置:</p><ul><li>● 在 JDK 6u23 版本之后，HotSpot 中默认就已经开启了逃逸分析。</li><li>● 如果使用的是较早的版本，开发人员则可以通过:<ul><li>➢ 选项 “<code>-XX:+DoEscapeAnalysis</code>“ 显式开启逃逸分析</li><li>➢ 通过选项 “<code>-XX:+PrintEscapeAnalysis</code>“ 查看逃逸分析的筛选结果。<ul><li>（实测这个参数不被识别，报错 <code>Unrecognized VM option &#39;PrintEscapeAnalysis&#39;</code> 创建 JVM 失败，需要使用带 debug 的 JDK，例如第三方编译的 <code>java-1.8.0-openjdk-fastdebug-1.8.0.111-1.b15.ojdkbuild.windows.x86_64.zip</code> ）</li></ul></li></ul></li></ul><p>结论：<strong>开发中能使用局部变量的，就不要使用在方法外定义。</strong></p><h3 id="逃逸分析之代码优化"><a href="#逃逸分析之代码优化" class="headerlink" title="逃逸分析之代码优化"></a>逃逸分析之代码优化</h3><p>使用逃逸分析，编译器可以对代码做如下优化:</p><ul><li>一、<strong>栈上分配</strong>。将堆分配转化为栈分配。如果-一个对象在子程序中被分配, 要使指向该对象的指针永远不会逃逸，对象可能是栈分配的候选，而不是堆分配。</li><li>二、<strong>同步省略</strong>。如果一个对象被发现只能从一个线程被访问到，那么对于这个对象的操作可以不考虑同步。</li><li>三、<strong>分离对象或标量替换</strong>。有的对象可能不需要作为一个连续的内存结构存在也可以被访问到，那么对象的部分(或全部)可以不存储在内存，而是存储在 CPU 寄存器中。</li></ul><h4 id="代码优化之栈上分配"><a href="#代码优化之栈上分配" class="headerlink" title="代码优化之栈上分配"></a>代码优化之栈上分配</h4><ul><li>JIT 编译器在编译期间根据逃逸分析的结果，发现如果一个对象并没有逃逸出方法的话，就可能被优化成栈上分配。分配完成后，继续在调用栈内执行，最后线程结束，栈空间被回收，局部变量对象也被回收。这样就无须进行垃圾回收了。</li><li>常见的栈上分配的场景<ul><li>➢ 在逃逸分析中，已经说明了。逃逸出方法：分别是给成员变量赋值、方法返回值、实例引用传递。</li></ul></li></ul><p>代码演示：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 栈上分配测试</span></span><br><span class="line"><span class="comment"> * -Xmx1G -Xms1G -XX:-DoEscapeAnalysis -XX:+PrintGCDetails</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart  shkstart@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020  10:31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StackAllocation</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000000</span>; i++) &#123;</span><br><span class="line">            alloc();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 查看执行时间</span></span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"花费的时间为： "</span> + (end - start) + <span class="string">" ms"</span>);</span><br><span class="line">        <span class="comment">// 为了方便查看堆内存中对象个数，线程sleep</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e1) &#123;</span><br><span class="line">            e1.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">alloc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();<span class="comment">//未发生逃逸</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>两种情况下运行，使用 VisualVM Sampler 查看 Memory 情况。</p><p>设置 VM options 为 <code>-Xmx1G -Xms1G -XX:-DoEscapeAnalysis -XX:+PrintGCDetails</code>, 运行;</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">花费的时间为： <span class="number">97</span> ms</span><br><span class="line">Heap</span><br><span class="line"> PSYoungGen      total <span class="number">305664</span>K, used <span class="number">188744</span>K [<span class="number">0x00000007aab00000</span>, <span class="number">0x00000007c0000000</span>, <span class="number">0x00000007c0000000</span>)</span><br><span class="line">  eden space <span class="number">262144</span>K, <span class="number">72</span>% used [<span class="number">0x00000007aab00000</span>,<span class="number">0x00000007b63521c8</span>,<span class="number">0x00000007bab00000</span>)</span><br><span class="line">  from space <span class="number">43520</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bd580000</span>,<span class="number">0x00000007bd580000</span>,<span class="number">0x00000007c0000000</span>)</span><br><span class="line">  to   space <span class="number">43520</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bab00000</span>,<span class="number">0x00000007bab00000</span>,<span class="number">0x00000007bd580000</span>)</span><br><span class="line"> ParOldGen       total <span class="number">699392</span>K, used <span class="number">0</span>K [<span class="number">0x0000000780000000</span>, <span class="number">0x00000007aab00000</span>, <span class="number">0x00000007aab00000</span>)</span><br><span class="line">  object space <span class="number">699392</span>K, <span class="number">0</span>% used [<span class="number">0x0000000780000000</span>,<span class="number">0x0000000780000000</span>,<span class="number">0x00000007aab00000</span>)</span><br><span class="line"> Metaspace       used <span class="number">3608</span>K, capacity <span class="number">4540</span>K, committed <span class="number">4864</span>K, reserved <span class="number">1056768</span>K</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">space</span>    <span class="title">used</span> 399<span class="title">K</span>, <span class="title">capacity</span> 428<span class="title">K</span>, <span class="title">committed</span> 512<span class="title">K</span>, <span class="title">reserved</span> 1048576<span class="title">K</span></span></span><br></pre></td></tr></table></figure></div><p><img src="/2020/07/11/JVM-04/StackAllocation1.png" alt="关闭逃逸分析"></p><p>对比 VM options 为 <code>-Xmx1G -Xms1G -XX:+DoEscapeAnalysis -XX:+PrintGCDetails</code>, 运行。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">花费的时间为： <span class="number">4</span> ms</span><br><span class="line">Heap</span><br><span class="line"> PSYoungGen      total <span class="number">305664</span>K, used <span class="number">78643</span>K [<span class="number">0x00000007aab00000</span>, <span class="number">0x00000007c0000000</span>, <span class="number">0x00000007c0000000</span>)</span><br><span class="line">  eden space <span class="number">262144</span>K, <span class="number">30</span>% used [<span class="number">0x00000007aab00000</span>,<span class="number">0x00000007af7ccfd8</span>,<span class="number">0x00000007bab00000</span>)</span><br><span class="line">  from space <span class="number">43520</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bd580000</span>,<span class="number">0x00000007bd580000</span>,<span class="number">0x00000007c0000000</span>)</span><br><span class="line">  to   space <span class="number">43520</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bab00000</span>,<span class="number">0x00000007bab00000</span>,<span class="number">0x00000007bd580000</span>)</span><br><span class="line"> ParOldGen       total <span class="number">699392</span>K, used <span class="number">0</span>K [<span class="number">0x0000000780000000</span>, <span class="number">0x00000007aab00000</span>, <span class="number">0x00000007aab00000</span>)</span><br><span class="line">  object space <span class="number">699392</span>K, <span class="number">0</span>% used [<span class="number">0x0000000780000000</span>,<span class="number">0x0000000780000000</span>,<span class="number">0x00000007aab00000</span>)</span><br><span class="line"> Metaspace       used <span class="number">8857</span>K, capacity <span class="number">9194</span>K, committed <span class="number">9344</span>K, reserved <span class="number">1056768</span>K</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">space</span>    <span class="title">used</span> 1037<span class="title">K</span>, <span class="title">capacity</span> 1132<span class="title">K</span>, <span class="title">committed</span> 1152<span class="title">K</span>, <span class="title">reserved</span> 1048576<span class="title">K</span></span></span><br></pre></td></tr></table></figure></div><p><img src="/2020/07/11/JVM-04/StackAllocation2.png" alt="开启逃逸分析"></p><p>从上面可以看出是否开启逃逸分析时的内存占用情况，开启了逃逸分析内存占用明显降低，由于使用了栈上分配，不用维护 1000 万个 User 对象了，而且创建 1000 万个 User 对象所用时间也明显降低。</p><p>在 Windows (使用的是上面提到的 fastdebug JDK，否则 <code>+PrintEscapeAnalysis</code> 不可用) 中运行上述程序，打印逃逸分析日志：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="POWERSHELL"><figure class="iseeu highlight /powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\yan\java&gt; java <span class="literal">-Xmx1G</span> <span class="literal">-Xms1G</span> <span class="literal">-XX</span>:+DoEscapeAnalysis <span class="literal">-XX</span>:+PrintGCDetails <span class="literal">-XX</span>:+PrintEscapeAnalysis <span class="string">'StackAllocation'</span></span><br><span class="line"></span><br><span class="line">======== Connection graph <span class="keyword">for</span>  StackAllocation::alloc</span><br><span class="line">JavaObject NoEscape(NoEscape) [ [ <span class="number">36</span> ]]   <span class="number">24</span>    Allocate        ===  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">1</span> ( <span class="number">22</span>  <span class="number">20</span>  <span class="number">21</span>  <span class="number">1</span>  <span class="number">1</span> ) [[ <span class="number">25</span>  <span class="number">26</span>  <span class="number">27</span>  <span class="number">34</span>  <span class="number">35</span>  <span class="number">36</span> ]]  rawptr:NotNull ( int:&gt;=<span class="number">0</span>, java/lang/Object:NotNull *, bool, top ) StackAllocation::alloc <span class="selector-tag">@</span> bci:<span class="number">0</span> !jvms: StackAllocation::alloc <span class="selector-tag">@</span> bci:<span class="number">0</span></span><br><span class="line">LocalVar [ <span class="number">24</span><span class="type">P</span> [ ]]   <span class="number">36</span>        Proj    ===  <span class="number">24</span>  [[ <span class="number">37</span> ]] <span class="comment">#5 !jvms: StackAllocation::alloc @ bci:0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">======== Connection graph <span class="keyword">for</span>  StackAllocation::main</span><br><span class="line">JavaObject NoEscape(NoEscape) [ [ <span class="number">119</span> ]]   <span class="number">107</span>  Allocate        ===  <span class="number">86</span>  <span class="number">76</span>  <span class="number">103</span>  <span class="number">8</span>  <span class="number">1</span> ( <span class="number">32</span>  <span class="number">105</span>  <span class="number">20</span>  <span class="number">1</span>  <span class="number">1</span>  <span class="number">29</span>  <span class="number">1</span>  <span class="number">79</span>  <span class="number">1</span>  <span class="number">1</span>  <span class="number">1</span> ) [[ <span class="number">108</span>  <span class="number">109</span>  <span class="number">110</span>  <span class="number">117</span>  <span class="number">118</span>  <span class="number">119</span> ]]  rawptr:NotNull ( int:&gt;=<span class="number">0</span>, java/lang/Object:NotNull *, bool, top ) StackAllocation::alloc <span class="selector-tag">@</span> bci:<span class="number">0</span> StackAllocation::main <span class="selector-tag">@</span> bci:<span class="number">12</span> !jvms: StackAllocation::alloc <span class="selector-tag">@</span> bci:<span class="number">0</span> StackAllocation::main <span class="selector-tag">@</span> bci:<span class="number">12</span></span><br><span class="line">LocalVar [ <span class="number">107</span><span class="type">P</span> [ ]]   <span class="number">119</span>      Proj    ===  <span class="number">107</span>  [[ <span class="number">120</span> ]] <span class="comment">#5 !jvms: StackAllocation::alloc @ bci:0 StackAllocation::main @ bci:12</span></span><br><span class="line"></span><br><span class="line">花费的时间为： <span class="number">15</span> ms</span><br><span class="line"></span><br><span class="line">======== Connection graph <span class="keyword">for</span>  StackAllocation::main</span><br><span class="line">JavaObject NoEscape(NoEscape) [ [ <span class="number">98</span> ]]   <span class="number">86</span>    Allocate        ===  <span class="number">366</span>  <span class="number">68</span>  <span class="number">358</span>  <span class="number">8</span>  <span class="number">1</span> ( <span class="number">84</span>  <span class="number">83</span>  <span class="number">26</span>  <span class="number">1</span>  <span class="number">1</span>  <span class="number">24</span>  <span class="number">1</span>  <span class="number">70</span>  <span class="number">1</span>  <span class="number">1</span>  <span class="number">1</span> ) [[ <span class="number">87</span>  <span class="number">88</span>  <span class="number">89</span>  <span class="number">96</span>  <span class="number">97</span>  <span class="number">98</span> ]]  rawptr:NotNull ( int:&gt;=<span class="number">0</span>, java/lang/Object:NotNull *, bool, top ) StackAllocation::alloc <span class="selector-tag">@</span> bci:<span class="number">0</span> StackAllocation::main <span class="selector-tag">@</span> bci:<span class="number">12</span> !jvms: StackAllocation::alloc <span class="selector-tag">@</span> bci:<span class="number">0</span> StackAllocation::main <span class="selector-tag">@</span> bci:<span class="number">12</span></span><br><span class="line">LocalVar [ <span class="number">86</span><span class="type">P</span> [ ]]   <span class="number">98</span>        Proj    ===  <span class="number">86</span>  [[ <span class="number">99</span> ]] <span class="comment">#5 !jvms: StackAllocation::alloc @ bci:0 StackAllocation::main @ bci:12</span></span><br><span class="line"></span><br><span class="line">Heap</span><br><span class="line"> PSYoungGen      total <span class="number">305664</span>K, used <span class="number">36700</span>K [<span class="number">0</span><span class="type">x00000000eab00000</span>, <span class="number">0</span><span class="type">x0000000100000000</span>, <span class="number">0</span><span class="type">x0000000100000000</span>)</span><br><span class="line">  <span class="type">eden</span> <span class="type">space</span> <span class="number">262144</span><span class="type">K</span>, <span class="number">14</span>% <span class="type">used</span> [<span class="number">0</span><span class="type">x00000000eab00000</span>,<span class="number">0</span><span class="type">x00000000eced7188</span>,<span class="number">0</span><span class="type">x00000000fab00000</span>)</span><br><span class="line">  <span class="type">from</span> <span class="type">space</span> <span class="number">43520</span><span class="type">K</span>, <span class="number">0</span>% <span class="type">used</span> [<span class="number">0</span><span class="type">x00000000fd580000</span>,<span class="number">0</span><span class="type">x00000000fd580000</span>,<span class="number">0</span><span class="type">x0000000100000000</span>)</span><br><span class="line">  <span class="type">to</span>   <span class="type">space</span> <span class="number">43520</span><span class="type">K</span>, <span class="number">0</span>% <span class="type">used</span> [<span class="number">0</span><span class="type">x00000000fab00000</span>,<span class="number">0</span><span class="type">x00000000fab00000</span>,<span class="number">0</span><span class="type">x00000000fd580000</span>)</span><br><span class="line"> <span class="type">ParOldGen</span>       <span class="type">total</span> <span class="number">699392</span><span class="type">K</span>, <span class="type">used</span> <span class="number">0</span><span class="type">K</span> [<span class="number">0</span><span class="type">x00000000c0000000</span>, <span class="number">0</span><span class="type">x00000000eab00000</span>, <span class="number">0</span><span class="type">x00000000eab00000</span>)</span><br><span class="line">  <span class="type">object</span> <span class="type">space</span> <span class="number">699392</span><span class="type">K</span>, <span class="number">0</span>% <span class="type">used</span> [<span class="number">0</span><span class="type">x00000000c0000000</span>,<span class="number">0</span><span class="type">x00000000c0000000</span>,<span class="number">0</span><span class="type">x00000000eab00000</span>)</span><br><span class="line"> <span class="type">Metaspace</span>       <span class="type">used</span> <span class="number">2885</span><span class="type">K</span>, <span class="type">capacity</span> <span class="number">4486</span><span class="type">K</span>, <span class="type">committed</span> <span class="number">4864</span><span class="type">K</span>, <span class="type">reserved</span> <span class="number">1056768</span><span class="type">K</span></span><br><span class="line">  <span class="type">class</span> <span class="type">space</span>    <span class="type">used</span> <span class="number">273</span><span class="type">K</span>, <span class="type">capacity</span> <span class="number">386</span><span class="type">K</span>, <span class="type">committed</span> <span class="number">512</span><span class="type">K</span>, <span class="type">reserved</span> <span class="number">1048576</span><span class="type">K</span></span><br><span class="line"></span><br><span class="line"><span class="type">PS</span> <span class="type">C</span>:\<span class="type">Users</span>\<span class="type">yan</span>\<span class="type">java</span>&gt; <span class="type">java</span> -<span class="type">Xmx1G</span> -<span class="type">Xms1G</span> -<span class="type">XX</span>:-<span class="type">DoEscapeAnalysis</span> -<span class="type">XX</span>:+<span class="type">PrintGCDetails</span> -<span class="type">XX</span>:+<span class="type">PrintEscapeAnalysis</span> <span class="string">'StackAllocation'</span></span><br><span class="line">花费的时间为： <span class="number">47</span> <span class="type">ms</span></span><br><span class="line"><span class="type">Heap</span></span><br><span class="line"> <span class="type">PSYoungGen</span>      <span class="type">total</span> <span class="number">305664</span><span class="type">K</span>, <span class="type">used</span> <span class="number">167772</span><span class="type">K</span> [<span class="number">0</span><span class="type">x00000000eab00000</span>, <span class="number">0</span><span class="type">x0000000100000000</span>, <span class="number">0</span><span class="type">x0000000100000000</span>)</span><br><span class="line">  <span class="type">eden</span> <span class="type">space</span> <span class="number">262144</span><span class="type">K</span>, <span class="number">64</span>% <span class="type">used</span> [<span class="number">0</span><span class="type">x00000000eab00000</span>,<span class="number">0</span><span class="type">x00000000f4ed72c8</span>,<span class="number">0</span><span class="type">x00000000fab00000</span>)</span><br><span class="line">  <span class="type">from</span> <span class="type">space</span> <span class="number">43520</span><span class="type">K</span>, <span class="number">0</span>% <span class="type">used</span> [<span class="number">0</span><span class="type">x00000000fd580000</span>,<span class="number">0</span><span class="type">x00000000fd580000</span>,<span class="number">0</span><span class="type">x0000000100000000</span>)</span><br><span class="line">  <span class="type">to</span>   <span class="type">space</span> <span class="number">43520</span><span class="type">K</span>, <span class="number">0</span>% <span class="type">used</span> [<span class="number">0</span><span class="type">x00000000fab00000</span>,<span class="number">0</span><span class="type">x00000000fab00000</span>,<span class="number">0</span><span class="type">x00000000fd580000</span>)</span><br><span class="line"> <span class="type">ParOld</span></span><br></pre></td></tr></table></figure></div><p>如果将 heap 的大小设置为 256M , 并且不使用逃逸分析，可以看到发生了 GC：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="POWERSHELL"><figure class="iseeu highlight /powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\yan\java&gt; java <span class="literal">-Xmx256M</span> <span class="literal">-Xms256M</span> <span class="literal">-XX</span>:<span class="literal">-DoEscapeAnalysis</span> <span class="literal">-XX</span>:+PrintGCDetails <span class="literal">-XX</span>:+PrintEscapeAnalysis <span class="string">'StackAllocation'</span></span><br><span class="line">[<span class="type">GC</span> (<span class="type">Allocation</span> <span class="type">Failure</span>) [<span class="type">PSYoungGen</span>: <span class="number">65536</span><span class="type">K</span>-&gt;<span class="number">760</span><span class="type">K</span>(<span class="number">76288</span><span class="type">K</span>)] <span class="number">65536</span><span class="type">K</span>-&gt;<span class="number">768</span><span class="type">K</span>(<span class="number">251392</span><span class="type">K</span>), <span class="number">0.0093114</span> <span class="type">secs</span>] [<span class="type">Times</span>: <span class="type">user</span>=<span class="number">0.00</span> <span class="type">sys</span>=<span class="number">0.00</span>, <span class="type">real</span>=<span class="number">0.00</span> <span class="type">secs</span>]</span><br><span class="line">[<span class="type">GC</span> (<span class="type">Allocation</span> <span class="type">Failure</span>) [<span class="type">PSYoungGen</span>: <span class="number">66296</span><span class="type">K</span>-&gt;<span class="number">688</span><span class="type">K</span>(<span class="number">76288</span><span class="type">K</span>)] <span class="number">66304</span><span class="type">K</span>-&gt;<span class="number">696</span><span class="type">K</span>(<span class="number">251392</span><span class="type">K</span>), <span class="number">0.0071857</span> <span class="type">secs</span>] [<span class="type">Times</span>: <span class="type">user</span>=<span class="number">0.02</span> <span class="type">sys</span>=<span class="number">0.00</span>, <span class="type">real</span>=<span class="number">0.02</span> <span class="type">secs</span>]</span><br><span class="line">花费的时间为： <span class="number">63</span> ms</span><br><span class="line">Heap</span><br><span class="line"> PSYoungGen      total <span class="number">76288</span>K, used <span class="number">29524</span>K [<span class="number">0</span><span class="type">x00000000fab00000</span>, <span class="number">0</span><span class="type">x0000000100000000</span>, <span class="number">0</span><span class="type">x0000000100000000</span>)</span><br><span class="line">  <span class="type">eden</span> <span class="type">space</span> <span class="number">65536</span><span class="type">K</span>, <span class="number">44</span>% <span class="type">used</span> [<span class="number">0</span><span class="type">x00000000fab00000</span>,<span class="number">0</span><span class="type">x00000000fc729048</span>,<span class="number">0</span><span class="type">x00000000feb00000</span>)</span><br><span class="line">  <span class="type">from</span> <span class="type">space</span> <span class="number">10752</span><span class="type">K</span>, <span class="number">6</span>% <span class="type">used</span> [<span class="number">0</span><span class="type">x00000000ff580000</span>,<span class="number">0</span><span class="type">x00000000ff62c040</span>,<span class="number">0</span><span class="type">x0000000100000000</span>)</span><br><span class="line">  <span class="type">to</span>   <span class="type">space</span> <span class="number">10752</span><span class="type">K</span>, <span class="number">0</span>% <span class="type">used</span> [<span class="number">0</span><span class="type">x00000000feb00000</span>,<span class="number">0</span><span class="type">x00000000feb00000</span>,<span class="number">0</span><span class="type">x00000000ff580000</span>)</span><br><span class="line"> <span class="type">ParOldGen</span>       <span class="type">total</span> <span class="number">175104</span><span class="type">K</span>, <span class="type">used</span> <span class="number">8</span><span class="type">K</span> [<span class="number">0</span><span class="type">x00000000f0000000</span>, <span class="number">0</span><span class="type">x00000000fab00000</span>, <span class="number">0</span><span class="type">x00000000fab00000</span>)</span><br><span class="line">  <span class="type">object</span> <span class="type">space</span> <span class="number">175104</span><span class="type">K</span>, <span class="number">0</span>% <span class="type">used</span> [<span class="number">0</span><span class="type">x00000000f0000000</span>,<span class="number">0</span><span class="type">x00000000f0002000</span>,<span class="number">0</span><span class="type">x00000000fab00000</span>)</span><br><span class="line"> <span class="type">Metaspace</span>       <span class="type">used</span> <span class="number">2885</span><span class="type">K</span>, <span class="type">capacity</span> <span class="number">4486</span><span class="type">K</span>, <span class="type">committed</span> <span class="number">4864</span><span class="type">K</span>, <span class="type">reserved</span> <span class="number">1056768</span><span class="type">K</span></span><br><span class="line">  <span class="type">class</span> <span class="type">space</span>    <span class="type">used</span> <span class="number">273</span><span class="type">K</span>, <span class="type">capacity</span> <span class="number">386</span><span class="type">K</span>, <span class="type">committed</span> <span class="number">512</span><span class="type">K</span>, <span class="type">reserved</span> <span class="number">1048576</span><span class="type">K</span></span><br></pre></td></tr></table></figure></div><p>如果将 heap 的大小设置为 256M , 开启使用逃逸分析，可以看到没有发生 GC ：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="POWERSHELL"><figure class="iseeu highlight /powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\yan\java&gt; java <span class="literal">-Xmx256M</span> <span class="literal">-Xms256M</span> <span class="literal">-XX</span>:+DoEscapeAnalysis <span class="literal">-XX</span>:+PrintGCDetails <span class="literal">-XX</span>:+PrintEscapeAnalysis <span class="string">'StackAllocation'</span></span><br><span class="line"></span><br><span class="line">======== Connection graph <span class="keyword">for</span>  StackAllocation::alloc</span><br><span class="line">JavaObject NoEscape(NoEscape) [ [ <span class="number">36</span> ]]   <span class="number">24</span>    Allocate        ===  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">1</span> ( <span class="number">22</span>  <span class="number">20</span>  <span class="number">21</span>  <span class="number">1</span>  <span class="number">1</span> ) [[ <span class="number">25</span>  <span class="number">26</span>  <span class="number">27</span>  <span class="number">34</span>  <span class="number">35</span>  <span class="number">36</span> ]]  rawptr:NotNull ( int:&gt;=<span class="number">0</span>, java/lang/Object:NotNull *, bool, top ) StackAllocation::alloc <span class="selector-tag">@</span> bci:<span class="number">0</span> !jvms: StackAllocation::alloc <span class="selector-tag">@</span> bci:<span class="number">0</span></span><br><span class="line">LocalVar [ <span class="number">24</span><span class="type">P</span> [ ]]   <span class="number">36</span>        Proj    ===  <span class="number">24</span>  [[ <span class="number">37</span> ]] <span class="comment">#5 !jvms: StackAllocation::alloc @ bci:0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">======== Connection graph <span class="keyword">for</span>  StackAllocation::main</span><br><span class="line">JavaObject NoEscape(NoEscape) [ [ <span class="number">119</span> ]]   <span class="number">107</span>  Allocate        ===  <span class="number">86</span>  <span class="number">76</span>  <span class="number">103</span>  <span class="number">8</span>  <span class="number">1</span> ( <span class="number">32</span>  <span class="number">105</span>  <span class="number">20</span>  <span class="number">1</span>  <span class="number">1</span>  <span class="number">29</span>  <span class="number">1</span>  <span class="number">79</span>  <span class="number">1</span>  <span class="number">1</span>  <span class="number">1</span> ) [[ <span class="number">108</span>  <span class="number">109</span>  <span class="number">110</span>  <span class="number">117</span>  <span class="number">118</span>  <span class="number">119</span> ]]  rawptr:NotNull ( int:&gt;=<span class="number">0</span>, java/lang/Object:NotNull *, bool, top ) StackAllocation::alloc <span class="selector-tag">@</span> bci:<span class="number">0</span> StackAllocation::main <span class="selector-tag">@</span> bci:<span class="number">12</span> !jvms: StackAllocation::alloc <span class="selector-tag">@</span> bci:<span class="number">0</span> StackAllocation::main <span class="selector-tag">@</span> bci:<span class="number">12</span></span><br><span class="line">LocalVar [ <span class="number">107</span><span class="type">P</span> [ ]]   <span class="number">119</span>      Proj    ===  <span class="number">107</span>  [[ <span class="number">120</span> ]] <span class="comment">#5 !jvms: StackAllocation::alloc @ bci:0 StackAllocation::main @ bci:12</span></span><br><span class="line"></span><br><span class="line">花费的时间为： <span class="number">31</span> ms</span><br><span class="line">======== Connection graph <span class="keyword">for</span></span><br><span class="line"> StackAllocation::main</span><br><span class="line">JavaObject NoEscape(NoEscape) [ [ <span class="number">98</span> ]]   <span class="number">86</span>    Allocate        ===  <span class="number">366</span>  <span class="number">68</span>  <span class="number">358</span>  <span class="number">8</span>  <span class="number">1</span> ( <span class="number">84</span>  <span class="number">83</span>  <span class="number">26</span>  <span class="number">1</span>  <span class="number">1</span>  <span class="number">24</span>  <span class="number">1</span>  <span class="number">70</span>  <span class="number">1</span>  <span class="number">1</span>  <span class="number">1</span> ) [[ <span class="number">87</span>  <span class="number">88</span>  <span class="number">89</span>  <span class="number">96</span>  <span class="number">97</span>  <span class="number">98</span> ]]  rawptr:NotNull ( int:&gt;=<span class="number">0</span>, java/lang/Object:NotNull *, bool, top ) StackAllocation::alloc <span class="selector-tag">@</span> bci:<span class="number">0</span> StackAllocation::main <span class="selector-tag">@</span> bci:<span class="number">12</span> !jvms: StackAllocation::alloc <span class="selector-tag">@</span> bci:<span class="number">0</span> StackAllocation::main <span class="selector-tag">@</span> bci:<span class="number">12</span></span><br><span class="line">LocalVar [ <span class="number">86</span><span class="type">P</span> [ ]]   <span class="number">98</span>        Proj    ===  <span class="number">86</span>  [[ <span class="number">99</span> ]] <span class="comment">#5 !jvms: StackAllocation::alloc @ bci:0 StackAllocation::main @ bci:12</span></span><br><span class="line"></span><br><span class="line">Heap</span><br><span class="line"> PSYoungGen      total <span class="number">76288</span>K, used <span class="number">26214</span>K [<span class="number">0</span><span class="type">x00000000fab00000</span>, <span class="number">0</span><span class="type">x0000000100000000</span>, <span class="number">0</span><span class="type">x0000000100000000</span>)</span><br><span class="line">  <span class="type">eden</span> <span class="type">space</span> <span class="number">65536</span><span class="type">K</span>, <span class="number">40</span>% <span class="type">used</span> [<span class="number">0</span><span class="type">x00000000fab00000</span>,<span class="number">0</span><span class="type">x00000000fc499a88</span>,<span class="number">0</span><span class="type">x00000000feb00000</span>)</span><br><span class="line">  <span class="type">from</span> <span class="type">space</span> <span class="number">10752</span><span class="type">K</span>, <span class="number">0</span>% <span class="type">used</span> [<span class="number">0</span><span class="type">x00000000ff580000</span>,<span class="number">0</span><span class="type">x00000000ff580000</span>,<span class="number">0</span><span class="type">x0000000100000000</span>)</span><br><span class="line">  <span class="type">to</span>   <span class="type">space</span> <span class="number">10752</span><span class="type">K</span>, <span class="number">0</span>% <span class="type">used</span> [<span class="number">0</span><span class="type">x00000000feb00000</span>,<span class="number">0</span><span class="type">x00000000feb00000</span>,<span class="number">0</span><span class="type">x00000000ff580000</span>)</span><br><span class="line"> <span class="type">ParOldGen</span>       <span class="type">total</span> <span class="number">175104</span><span class="type">K</span>, <span class="type">used</span> <span class="number">0</span><span class="type">K</span> [<span class="number">0</span><span class="type">x00000000f0000000</span>, <span class="number">0</span><span class="type">x00000000fab00000</span>, <span class="number">0</span><span class="type">x00000000fab00000</span>)</span><br><span class="line">  <span class="type">object</span> <span class="type">space</span> <span class="number">175104</span><span class="type">K</span>, <span class="number">0</span>% <span class="type">used</span> [<span class="number">0</span><span class="type">x00000000f0000000</span>,<span class="number">0</span><span class="type">x00000000f0000000</span>,<span class="number">0</span><span class="type">x00000000fab00000</span>)</span><br><span class="line"> <span class="type">Metaspace</span>       <span class="type">used</span> <span class="number">2885</span><span class="type">K</span>, <span class="type">capacity</span> <span class="number">4486</span><span class="type">K</span>, <span class="type">committed</span> <span class="number">4864</span><span class="type">K</span>, <span class="type">reserved</span> <span class="number">1056768</span><span class="type">K</span></span><br><span class="line">  <span class="type">class</span> <span class="type">space</span>    <span class="type">used</span> <span class="number">273</span><span class="type">K</span>, <span class="type">capacity</span> <span class="number">386</span><span class="type">K</span>, <span class="type">committed</span> <span class="number">512</span><span class="type">K</span>, <span class="type">reserved</span> <span class="number">1048576</span><span class="type">K</span></span><br><span class="line"><span class="type">PS</span> <span class="type">C</span>:\<span class="type">Users</span>\<span class="type">yan</span>\<span class="type">java</span>&gt;</span><br></pre></td></tr></table></figure></div><h4 id="代码优化之同步省略（消除）"><a href="#代码优化之同步省略（消除）" class="headerlink" title="代码优化之同步省略（消除）"></a>代码优化之同步省略（消除）</h4><ul><li>线程同步的代价是相当高的，同步的后果是降低并发性和性能。</li><li>在动态编译同步块的时候，JIT 编译器可以借助逃逸分析来<strong>判断同步块所使用的锁对象是否只能够被一个线程访问而没有被发布到其他线程</strong>。如果（是上述情况、）没有（被发布到其他线程），那么 JIT 编译器在编译这个同步块的时候就会取消对这部分代码的同步。这样就能大大提高并发性和性能。这个取消同步的过程就叫同步省略，也叫<strong>锁消除</strong>。</li></ul><p>如以下代码:</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">f</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Object hollis = <span class="keyword">new</span> Object();</span><br><span class="line">    <span class="keyword">synchronized</span>(hollis)&#123;</span><br><span class="line">        System.out.println(hollis);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>代码中对 hollis 这个对象进行加锁，但是 hollis 对象的生命周期只在 f() 方法中，并不会被其他线程所访问到，所以在 JIT 编译阶段就会被优化掉。优化成:</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">f</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Object hollis = <span class="keyword">new</span> Object();</span><br><span class="line">    System.out.println(hollis);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>实际上，上面这么写也起不到同步作用，因为使用本地局部变量当作锁对象，每个进程调用这个方法都会 new 一个新的锁对象，从而每个线程所使用的对象监视器都是不同的，起不到同步的作用。<br>而且，上面那种写法 javac 编译阶段生成的字节码中还是会有同步的字节码指令生成 （ <code>monitorenter</code> 和 <code>monitorexit</code> ）。f() 对应字节码指令如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> 0 new #2 &lt;java/lang/Object&gt;</span><br><span class="line"> <span class="number">3</span> dup</span><br><span class="line"> 4 invokespecial #1 &lt;java/lang/Object.&lt;init&gt;&gt;</span><br><span class="line"> <span class="number">7</span> astore_1</span><br><span class="line"> <span class="number">8</span> aload_1</span><br><span class="line"> <span class="number">9</span> dup</span><br><span class="line"><span class="number">10</span> astore_2</span><br><span class="line"><span class="number">11</span> monitorenter</span><br><span class="line">12 getstatic #3 &lt;java/lang/System.out&gt;</span><br><span class="line"><span class="number">15</span> aload_1</span><br><span class="line">16 invokevirtual #4 &lt;java/io/PrintStream.println&gt;</span><br><span class="line"><span class="number">19</span> aload_2</span><br><span class="line"><span class="number">20</span> monitorexit</span><br><span class="line"><span class="number">21</span> goto <span class="number">29</span> (+<span class="number">8</span>)</span><br><span class="line"><span class="number">24</span> astore_3</span><br><span class="line"><span class="number">25</span> aload_2</span><br><span class="line"><span class="number">26</span> monitorexit</span><br><span class="line"><span class="number">27</span> aload_3</span><br><span class="line"><span class="number">28</span> athrow</span><br><span class="line"><span class="number">29</span> <span class="keyword">return</span></span><br></pre></td></tr></table></figure></div><h4 id="🌿-代码优化之标量替换"><a href="#🌿-代码优化之标量替换" class="headerlink" title="🌿 代码优化之标量替换"></a>🌿 代码优化之标量替换</h4><p><strong>标量 (Scalar)</strong> 是指一个无法再分解成更小的数据的数据。Java 中的原始数据类型就是标量。</p><p>相对的，那些还可以分解的数据叫做<strong>聚合量 (Aggregate)</strong> ，Java 中的对象就是聚合量，因为他可以分解成其他聚合量和标量。</p><p>在 JIT 阶段，如果经过逃逸分析，发现一个对象不会被外界访问的话，那么经过 JIT 优化，就会把这个对象拆解成若千个其中包含的若干个成员变量来代替。这个过程就是<strong>标量替换</strong>。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    alloc();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">alloc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Point point = <span class="keyword">new</span> Point(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">    System.out.println(<span class="string">"point.x="</span> + point.x + <span class="string">"; point.y="</span> + point.y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>以上代码，经过标量替换后，就会变成:</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">alloc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> y = <span class="number">2</span>;</span><br><span class="line">    System.out.println(<span class="string">"point.x="</span> + x + <span class="string">"; point.y="</span> + y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>可以看到，Point 这个聚合量经过逃逸分析后，发现他并没有逃逸，就被替换成两个聚合量了。那么标量替换有什么好处呢？就是可以大大减少堆内存的占用。因为一旦不需要创建对象了，那么就不再需要分配堆内存了。</p><p>标量替换为栈上分配提供了很好的基础。</p><p><strong>标量替换参数设置</strong>:</p><p>参数 <code>-XX:+EliminateAllocations</code> : 开启了标量替换(默认打开)，允许将对象打散分配在栈上。</p><p>测试：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 标量替换测试</span></span><br><span class="line"><span class="comment"> *  -Xmx100m -Xms100m -XX:+DoEscapeAnalysis -XX:+PrintGC -XX:-EliminateAllocations</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart  shkstart@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020  12:01</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScalarReplace</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line">        <span class="keyword">public</span> String name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">alloc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        User u = <span class="keyword">new</span> User();<span class="comment">//未发生逃逸</span></span><br><span class="line">        u.id = <span class="number">5</span>;</span><br><span class="line">        u.name = <span class="string">"www.atguigu.com"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000000</span>; i++) &#123;</span><br><span class="line">            alloc();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"花费的时间为： "</span> + (end - start) + <span class="string">" ms"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">class Customer&#123;</span></span><br><span class="line"><span class="comment">    String name;</span></span><br><span class="line"><span class="comment">    int id;</span></span><br><span class="line"><span class="comment">    Account acct;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">class Account&#123;</span></span><br><span class="line"><span class="comment">    double balance;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></div><p>上述代码在主函数中进行了 10000000 次 alloc() 。 调用进行对象创建，由于 User 对象实例需要占据约 16 字节的空间，因此累计分配空间达到将近 152 MB。如果堆空间小于这个值，就必然会发生 GC。 使用如下参数运行上述代码:  </p><p><code>-server -Xmx100m -Xms100m -XX:+DoEscapeAnalysis -XX:+PrintGC -XX:+EliminateAllocations +PrintEliminateAllocations</code>  </p><p>这里使用参数如下:  </p><ul><li>● 参数 <code>-server</code>: 启动 server 模式， 因为在 Server 模式下，才可以启用逃逸分析 (不用手动写这个参数是因为使用 <code>java -version</code> 可以查看到 JDK 版本默认就是 Server VM)。  </li><li>● 参数 <code>-XX:+DoEscapeAnalysis</code> : 启用逃逸分析  </li><li>● 参数 <code>-Xmx10m</code> : 指定了堆空间最大为 10MB  </li><li>● 参数 <code>-XX:+PrintGC</code> : 将打印 GC 日志。  </li><li>● 参数 <code>-XX:+EliminateAllocations</code> : 开启了标量替换 (默认打开)，允许将对象打散分配在栈上，比如对 象拥有 id 和name两个字段，那么这两个字段将会被视为两个独立的局部变量进行分配。  </li><li><code>+PrintEliminateAllocations</code> : 打印标量替换信息，Non-product builds: Print out when allocations are eliminated，非产品版本，需要使用 debug JDK 运行。</li></ul><p>设置 VM options 为 <code>-Xmx100m -Xms100m -XX:+DoEscapeAnalysis -XX:+PrintGC -XX:-EliminateAllocations</code>，先不使用标量替换 <code>-XX:-EliminateAllocations</code>，运行上述程序：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[GC (Allocation Failure)  <span class="number">25600</span>K-&gt;<span class="number">584</span>K(<span class="number">98304</span>K), <span class="number">0.0015866</span> secs]</span><br><span class="line">[GC (Allocation Failure)  <span class="number">26184</span>K-&gt;<span class="number">616</span>K(<span class="number">98304</span>K), <span class="number">0.0014574</span> secs]</span><br><span class="line">[GC (Allocation Failure)  <span class="number">26216</span>K-&gt;<span class="number">520</span>K(<span class="number">98304</span>K), <span class="number">0.0013473</span> secs]</span><br><span class="line">[GC (Allocation Failure)  <span class="number">26120</span>K-&gt;<span class="number">536</span>K(<span class="number">98304</span>K), <span class="number">0.0012746</span> secs]</span><br><span class="line">[GC (Allocation Failure)  <span class="number">26136</span>K-&gt;<span class="number">456</span>K(<span class="number">98304</span>K), <span class="number">0.0013713</span> secs]</span><br><span class="line">[GC (Allocation Failure)  <span class="number">26056</span>K-&gt;<span class="number">480</span>K(<span class="number">101376</span>K), <span class="number">0.0016144</span> secs]</span><br><span class="line">[GC (Allocation Failure)  <span class="number">32224</span>K-&gt;<span class="number">440</span>K(<span class="number">101376</span>K), <span class="number">0.0015301</span> secs]</span><br><span class="line">[GC (Allocation Failure)  <span class="number">32184</span>K-&gt;<span class="number">440</span>K(<span class="number">101376</span>K), <span class="number">0.0011484</span> secs]</span><br><span class="line">花费的时间为： <span class="number">82</span> ms</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure></div><p>设置 VM options 为 <code>-Xmx100m -Xms100m -XX:+DoEscapeAnalysis -XX:+PrintGC -XX:+EliminateAllocations</code>，使用标量替换 <code>-XX:+EliminateAllocations</code>，再次运行上述程序：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">花费的时间为： <span class="number">4</span> ms</span><br><span class="line"></span><br><span class="line">Process finished with exit code</span><br></pre></td></tr></table></figure></div><p>从程序的运行结果对比来看，开启标量替换时，没有发生垃圾回收，而且执行 <code>alloc()</code> 方法创建对象 1000 万次的时间很明显降低了。</p><h4 id="逃逸分析小结"><a href="#逃逸分析小结" class="headerlink" title="逃逸分析小结"></a>逃逸分析小结</h4><p>逃逸分析小结:逃逸分析并不成熟</p><ul><li>关于逃逸分析的论文在 1999 年就已经发表了，但直到 JDK 1.6 才有实现，而且这项技术到如今也并不是十分成熟的。</li><li>其根本原因就是 <strong>无法保证逃逸分析的性能消耗一定能高于他的消耗。虽然经过逃逸分析可以做标量替换、栈上分配、和锁消除。但是逃逸分析自身也是需要进行一系列复杂的分析的，这其实也是一个相对耗时的过程</strong>。</li><li>一个极端的例子，就是经过逃逸分析之后，发现没有一个对象是不逃逸的。那这个逃逸分析的过程就白白浪费掉了。</li><li>虽然这项技术并不十分成熟，但是它也<strong>是即时编译器优化技术中一个十分重要的手段</strong>。</li><li>注意到有一些观点，认为通过逃逸分析，JVM 会在栈上分配那些不会逃逸的对象，这在理论上是可行的，但是取决于 JVM 设计者的选择。据我所知，Oracle Hotspot JVM 中并未这么做，这一点在逃逸分析相关的文档里已经说明，所以可以明确所有的对象实例都是创建在堆上。<ul><li>前面演示的程序之所以会有栈上分配的那种效果，可以理解为：逃逸分析 + 标量替换 &#x3D;&gt; 栈上分配；基于逃逸分析和标量替换，某种程度上可以说是达到了栈上分配的效果。</li></ul></li><li>目前很多书籍还是基于 JDK 7 以前的版本，JDK 已经发生了很大变化，intern 字符串的缓存和静态变量曾经都被分配在永久代上，而永久代已经被元数据区取代。但是，intern 字符串缓存和静态变量并不是被转移到元数据区，而是直接在堆上分配，所以这一点同样符合前面一点的结论：对象实例都是分配在堆上。</li></ul><h2 id="本章小结"><a href="#本章小结" class="headerlink" title="本章小结"></a>本章小结</h2><ul><li>年轻代是对象的诞生、成长、消亡的区域，一个对象在这里产生、应用，最后被垃圾回收器收集、结束生命。</li><li>老年代放置长生命周期的对象，通常都是从 Survivor 区域筛选拷贝过来的 Java 对象。当然，也有特殊情况，我们知道普通的对象会被分配在 TLAB 上；如果对象较大，JVM 会试图直接分配在 Eden 其他位置上；如果对象太大，完全无法在新生代找到足够长的连续空闲空间，JVM 就会直接分配到老年代。</li><li>当 GC 只发生在年轻代中，回收年轻代对象的行为被称为 Minor GC。当 GC 发生在老年代时则被称为 Major GC 或者 Full GC。一般的，Minor GC 的发生频率要比 MajorGC 高很多，即老年代中垃圾回收发生的频率将大大低于年轻代。</li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;1-堆的核心概述&quot;&gt;&lt;a href=&quot;#1-堆的核心概述&quot; class=&quot;headerlink&quot; title=&quot;1 堆的核心概述&quot;&gt;&lt;/a&gt;1 堆的核心概述&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;● 一个 JVM 实例只存在一个堆内存，堆也是 Java 内存管理的核心区域。&lt;/li&gt;
&lt;li&gt;● Java 堆区在 JVM 启动的时候即被创建，其空间大小也就确定了。是 JVM 管理的最大一块内存空间。&lt;ul&gt;
&lt;li&gt;➢ 堆内存的大小是可以调节的。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;● 《Java 虚拟机规范》规定，堆可以处于物理上不连续的内存空间中，但在逻辑上它应该被视为连续的。&lt;/li&gt;
&lt;li&gt;● 所有的线程共享 Java 堆，在这里还可以划分线程私有的缓冲区 (ThreadLocal Allocation Buffer， TLAB)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一个 JVM 实例对应一个进程，方法区和堆是一个进程一份，而程序计数器、本地方法栈、虚拟机栈是一个线程对应一份，一个进程中的所有线程共享方法区和堆（并不是完整的堆都一定是共享的，比如 TLAB）。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Java" scheme="https://xiaoyan94.github.io/tags/Java/"/>
    
    <category term="JVM" scheme="https://xiaoyan94.github.io/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>JVM 03 运行时数据区之虚拟机栈 (Stack)</title>
    <link href="https://xiaoyan94.github.io/2020/07/05/JVM-03/"/>
    <id>https://xiaoyan94.github.io/2020/07/05/JVM-03/</id>
    <published>2020-07-05T08:06:02.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<ul><li>1 虚拟机栈概述</li><li>2 栈的存储单位</li><li>3 局部变量表</li><li>4 操作数栈</li><li>5 代码追踪</li><li>6 栈顶缓存技术</li><li>7 动态链接</li><li>8 方法的调用:解析与分派</li><li>9 方法返回地址</li><li>10 一些附加信息</li><li>11 栈的相关面试题</li></ul><a id="more"></a><h2 id="1-虚拟机栈概述"><a href="#1-虚拟机栈概述" class="headerlink" title="1 虚拟机栈概述"></a>1 虚拟机栈概述</h2><p>由于跨平台性的设计，Java的指令都是根据栈来设计的。不同平台CPU架构不同，所以不能设计为基于寄存器的。</p><p><strong>优点是跨平台，指令集小，编译器容易实现，缺点是性能下降，实现同样的功能需要更多的指令。</strong></p><p>有不少Java开发人员一提到Java内存结构，就会非常粗粒度地将JVM中的内存区理解为仅有Java堆(heap)和Java栈(stack)?为什么?</p><p><em>不全面。也许堆和栈太重要。</em></p><p>内存中的栈与堆</p><p><strong>栈是运行时的单位，而堆是存储的单位。</strong></p><p>即: 栈解决程序的运行问题，即程序如何执行，或者说如何处理数据。  堆解决的是数据存储的问题，即数据怎么放、放在哪儿。</p><hr><h3 id="虚拟机栈基本内容"><a href="#虚拟机栈基本内容" class="headerlink" title="虚拟机栈基本内容"></a>虚拟机栈基本内容</h3><p>● <strong>Java虚拟机栈是什么</strong>?</p><p>Java虚拟机栈(Java Virtual Machine Stack) ，早期也叫Java栈。每个线程在创建时都会创建一个虚拟机栈，其内部保存一个个的栈帧(Stack Frame) ，对应着一次次的Java方法调用。<br>➢ 是线程私有的</p><p>● <strong>生命周期</strong></p><p>生命周期和线程一致。</p><p>● <strong>作用</strong></p><p>主管Java程序的运行，它保存方法的局部变量（八种基本数据类型、对象的引用地址）、部分结果，并参与方法的调用和返回。<br>➢ 局部变量 vs 成员变量(或属性)<br>➢ 基本数据变量 VS 引用类型变量(类、数组、接口)</p><hr><p>栈的特点(优点)</p><ul><li>● 栈是一种快速有效的分配存储方式，访问速度仅次于程序计数器。</li><li>● JVM直接 对Java栈的操作只有两个:  <ul><li>➢ 每个方法执行，伴随着进栈(入栈、压栈)  </li><li>➢ 执行结束后的出栈工作</li></ul></li><li>● 对于栈来说不存在垃圾回收问题</li></ul><hr><p>面试题: 开发中遇到的异常有哪些?</p><p>栈中可能出现的异常<br>● Java虚拟机规范<strong>允许Java栈的大小是动态的或者是固定不变的</strong>。<br>➢ 如果采用固定大小的Java虚拟机栈，那每一个线程的Java虚拟机栈容量可以在线程创建的时候独立选定。如果线程请求分配的栈容量超过Java虚拟机栈允许的最大容量，Java 虚拟机将会抛出一个 <code>StackOverflowError</code> 异常。<br>➢ 如果Java虛拟机栈可以动态扩展，并且在尝试扩展的时候无法申请到足够的内存，或者在创建新的线程时没有足够的内存去创建对应的虚拟机栈，那Java虚拟机将会抛出一个 <code>OutOfMemoryError</code> 异常。</p><hr><p>设置栈内存大小</p><p>我们可以使用参数 <code>-Xss</code> 选项来设置线程的最大栈空间，栈的大小直接决定了函数调用的最大可达深度。</p><p>IntelliJ IDEA 设置栈大小的方法：点击 <code>Run</code> - <code>Edit Configurations</code> - <code>VM options</code> ，输入 <code>-Xss256K</code> 或 <code>-Xss256k</code> ，设置栈的大小为256k （k、m、g或K、M、G是单位，大小写均可）。</p><p>以下运行环境：Java8、macOS。下面的程序输出视运行环境不同（系统不同、JDK版本不同均有影响）而有不同的结果。</p><p>StackDeepTest.java</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StackDeepTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">recursion</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        count++;</span><br><span class="line">        recursion();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            recursion();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"deep of calling = "</span> + count);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>使用默认设置栈的大小时，程序输出：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deep of calling = <span class="number">22387</span></span><br><span class="line">java.lang.StackOverflowError</span><br><span class="line"> at com.atguigu.java.StackDeepTest.recursion(StackDeepTest.java:<span class="number">8</span>)</span><br><span class="line"> at com.atguigu.java.StackDeepTest.recursion(StackDeepTest.java:<span class="number">8</span>)</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div><p>指定栈的大小为256K时，程序输出：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deep of calling = <span class="number">2712</span></span><br><span class="line">java.lang.StackOverflowError</span><br><span class="line"> at com.atguigu.java.StackDeepTest.recursion(StackDeepTest.java:<span class="number">8</span>)</span><br><span class="line"> at com.atguigu.java.StackDeepTest.recursion(StackDeepTest.java:<span class="number">8</span>)</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div><hr><p>StackErrorTest.java</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 演示栈中的异常:StackOverflowError</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020 下午 9:08</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  默认情况下：count : 11420</span></span><br><span class="line"><span class="comment"> *  设置栈的大小： -Xss256k : count : 2465</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StackErrorTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">1</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(count);</span><br><span class="line">        count++;</span><br><span class="line">        main(args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><hr><h2 id="2-栈的存储单位"><a href="#2-栈的存储单位" class="headerlink" title="2 栈的存储单位"></a>2 栈的存储单位</h2><h3 id="栈中存储什么"><a href="#栈中存储什么" class="headerlink" title="栈中存储什么"></a>栈中存储什么</h3><ul><li>每个线程都有自己的栈，栈中的数据都是以 <strong>栈帧(Stack Frame) 的格式存在</strong>。</li><li>在这个线程上正在执行的每个方法都各自对应一个栈帧(Stack Frame )。</li><li>栈帧是一个内存区块，是一个数据集，维系着方法执行过程中的各种数据信息。</li></ul><h3 id="栈运行原理"><a href="#栈运行原理" class="headerlink" title="栈运行原理"></a>栈运行原理</h3><ul><li>JVM直接对Java栈的操作只有两个，就是对栈帧的<strong>压栈</strong>和<strong>出栈</strong>，遵循“先进后出”&#x2F;“后进先出”原则。</li><li>在一条活动线程中，一个时间点上，只会有一个活动的栈帧。即只有当前正在执行的方法的栈帧(栈顶栈帧)是有效的，这个栈帧被称为**当前栈帧(Current Frame)<strong>，与当前栈帧相对应的方法就是</strong>当前方法(CurrentMethod)<strong>，定义这个方法的类就是</strong>当前类(Current Class)**。</li><li>执行引擎运行的所有字节码指令只针对当前栈帧进行操作。</li><li>如果在该方法中调用了其他方法，对应的新的栈帧会被创建出来，放在栈的顶端，成为新的当前帧。</li><li>不同线程中所包含的栈帧是不允许存在相互引用的，即不可能在一个栈帧之中引用另外一个线程的栈帧。</li><li>如果当前方法调用了其他方法，方法返回之际，当前栈帧会传回此方法的执行结果给前一个栈帧，接着，虚拟机会丢弃当前栈帧，使得前一个栈帧重新成为当前栈帧。</li><li>Java方法有两种返回函数的方式，一种是正常的函数返回，使用return指令;另外一种是抛出异常（没有处理的异常）。不管使用哪种方式，都会导致栈帧被弹出。</li></ul><p>StackFrameTest.java</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java1;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020 下午 4:11</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 方法的结束方式分为两种：① 正常结束，以return为代表  ② 方法执行中出现未捕获处理的异常，以抛出异常的方式结束</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StackFrameTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            StackFrameTest test = <span class="keyword">new</span> StackFrameTest();</span><br><span class="line">            test.method1();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"main()正常结束"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"method1()开始执行..."</span>);</span><br><span class="line">        method2();</span><br><span class="line">        System.out.println(<span class="string">"method1()执行结束..."</span>);</span><br><span class="line">        <span class="comment">//        System.out.println(10 / 0);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//        return ;//可以省略</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">method2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"method2()开始执行..."</span>);</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> m = (<span class="keyword">int</span>) method3();</span><br><span class="line">        System.out.println(<span class="string">"method2()即将结束..."</span>);</span><br><span class="line">        <span class="keyword">return</span> i + m;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">method3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"method3()开始执行..."</span>);</span><br><span class="line">        <span class="keyword">double</span> j = <span class="number">20.0</span>;</span><br><span class="line">        System.out.println(<span class="string">"method3()即将结束..."</span>);</span><br><span class="line">        <span class="keyword">return</span> j;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>反编译StackFrameTest.class</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br></pre></td><td class="code"><pre><span class="line">$ javap StackFrameTest<span class="class">.<span class="keyword">class</span></span></span><br><span class="line">Compiled from "StackFrameTest.java"</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">atguigu</span>.<span class="title">java1</span>.<span class="title">StackFrameTest</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> com.atguigu.java1.StackFrameTest();</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(java.lang.String[])</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">method2</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">method3</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$ javap -v StackFrameTest<span class="class">.<span class="keyword">class</span></span></span><br><span class="line"><span class="class"><span class="title">Classfile</span> /<span class="title">Users</span>/<span class="title">yan</span>/<span class="title">Documents</span>/<span class="title">JVMDemo</span>/<span class="title">out</span>/<span class="title">production</span>/<span class="title">chapter05</span>/<span class="title">com</span>/<span class="title">atguigu</span>/<span class="title">java1</span>/<span class="title">StackFrameTest</span>.<span class="title">class</span></span></span><br><span class="line"><span class="class">  <span class="title">Last</span> <span class="title">modified</span> 2020年7月5日</span>; size <span class="number">1373</span> bytes</span><br><span class="line">  SHA-<span class="number">256</span> checksum c61db00f51e8ffb48977aa8245b58fb7b3e49f4678d4e147dffdd989f0a43478</span><br><span class="line">  Compiled from <span class="string">"StackFrameTest.java"</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">atguigu</span>.<span class="title">java1</span>.<span class="title">StackFrameTest</span></span></span><br><span class="line">  minor version: 0</span><br><span class="line">  major version: <span class="number">52</span></span><br><span class="line">  flags: (<span class="number">0x0021</span>) ACC_PUBLIC, ACC_SUPER</span><br><span class="line">  this_class: #2                          // com/atguigu/java1/StackFrameTest</span><br><span class="line">  super_class: #20                        // java/lang/Object</span><br><span class="line">  interfaces: <span class="number">0</span>, fields: <span class="number">0</span>, methods: <span class="number">5</span>, attributes: <span class="number">1</span></span><br><span class="line">Constant pool:</span><br><span class="line">   #1 = Methodref          #20.#49        // java/lang/Object."&lt;init&gt;":()V</span><br><span class="line">   #2 = Class              #50            // com/atguigu/java1/StackFrameTest</span><br><span class="line">   #3 = Methodref          #2.#49         // com/atguigu/java1/StackFrameTest."&lt;init&gt;":()V</span><br><span class="line">   #4 = Methodref          #2.#51         // com/atguigu/java1/StackFrameTest.method1:()V</span><br><span class="line">   #5 = Class              #52            // java/lang/Exception</span><br><span class="line">   #6 = Methodref          #5.#53         // java/lang/Exception.printStackTrace:()V</span><br><span class="line">   #7 = Fieldref           #54.#55        // java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">   #8 = String             #56            // main()正常结束</span><br><span class="line">   #9 = Methodref          #57.#58        // java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">  #10 = String             #59            // method1()开始执行...</span><br><span class="line">  #11 = Methodref          #2.#60         // com/atguigu/java1/StackFrameTest.method2:()I</span><br><span class="line">  #12 = String             #61            // method1()执行结束...</span><br><span class="line">  #13 = String             #62            // method2()开始执行...</span><br><span class="line">  #14 = Methodref          #2.#63         // com/atguigu/java1/StackFrameTest.method3:()D</span><br><span class="line">  #15 = String             #64            // method2()即将结束...</span><br><span class="line">  #16 = String             #65            // method3()开始执行...</span><br><span class="line">  #17 = Double             20.0d</span><br><span class="line">  #19 = String             #66            // method3()即将结束...</span><br><span class="line">  #20 = Class              #67            // java/lang/Object</span><br><span class="line">  #21 = Utf8               &lt;init&gt;</span><br><span class="line">  #22 = Utf8               ()V</span><br><span class="line">  #23 = Utf8               Code</span><br><span class="line">  #24 = Utf8               LineNumberTable</span><br><span class="line">  #25 = Utf8               LocalVariableTable</span><br><span class="line">  #26 = Utf8               this</span><br><span class="line">  #27 = Utf8               Lcom/atguigu/java1/StackFrameTest;</span><br><span class="line">  #28 = Utf8               main</span><br><span class="line">  #29 = Utf8               ([Ljava/lang/String;)V</span><br><span class="line">  #30 = Utf8               test</span><br><span class="line">  #31 = Utf8               e</span><br><span class="line">  #32 = Utf8               Ljava/lang/Exception;</span><br><span class="line">  #33 = Utf8               args</span><br><span class="line">  #34 = Utf8               [Ljava/lang/String;</span><br><span class="line">  #35 = Utf8               StackMapTable</span><br><span class="line">  #36 = Class              #52            // java/lang/Exception</span><br><span class="line">  #37 = Utf8               method1</span><br><span class="line">  #38 = Utf8               method2</span><br><span class="line">  #39 = Utf8               ()I</span><br><span class="line">  #40 = Utf8               i</span><br><span class="line">  #41 = Utf8               I</span><br><span class="line">  #42 = Utf8               m</span><br><span class="line">  #43 = Utf8               method3</span><br><span class="line">  #44 = Utf8               ()D</span><br><span class="line">  #45 = Utf8               j</span><br><span class="line">  #46 = Utf8               D</span><br><span class="line">  #47 = Utf8               SourceFile</span><br><span class="line">  #48 = Utf8               StackFrameTest.java</span><br><span class="line">  #49 = NameAndType        #21:#22        // "&lt;init&gt;":()V</span><br><span class="line">  #50 = Utf8               com/atguigu/java1/StackFrameTest</span><br><span class="line">  #51 = NameAndType        #37:#22        // method1:()V</span><br><span class="line">  #52 = Utf8               java/lang/Exception</span><br><span class="line">  #53 = NameAndType        #68:#22        // printStackTrace:()V</span><br><span class="line">  #54 = Class              #69            // java/lang/System</span><br><span class="line">  #55 = NameAndType        #70:#71        // out:Ljava/io/PrintStream;</span><br><span class="line">  #56 = Utf8               main()正常结束</span><br><span class="line">  #57 = Class              #72            // java/io/PrintStream</span><br><span class="line">  #58 = NameAndType        #73:#74        // println:(Ljava/lang/String;)V</span><br><span class="line">  #59 = Utf8               method1()开始执行...</span><br><span class="line">  #60 = NameAndType        #38:#39        // method2:()I</span><br><span class="line">  #61 = Utf8               method1()执行结束...</span><br><span class="line">  #62 = Utf8               method2()开始执行...</span><br><span class="line">  #63 = NameAndType        #43:#44        // method3:()D</span><br><span class="line">  #64 = Utf8               method2()即将结束...</span><br><span class="line">  #65 = Utf8               method3()开始执行...</span><br><span class="line">  #66 = Utf8               method3()即将结束...</span><br><span class="line">  #67 = Utf8               java/lang/Object</span><br><span class="line">  #68 = Utf8               printStackTrace</span><br><span class="line">  #69 = Utf8               java/lang/System</span><br><span class="line">  #70 = Utf8               out</span><br><span class="line">  #71 = Utf8               Ljava/io/PrintStream;</span><br><span class="line">  #72 = Utf8               java/io/PrintStream</span><br><span class="line">  #73 = Utf8               println</span><br><span class="line">  #74 = Utf8               (Ljava/lang/String;)V</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> com.atguigu.java1.StackFrameTest();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: (<span class="number">0x0001</span>) ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         1: invokespecial #1                  // Method java/lang/Object."&lt;init&gt;":()V</span><br><span class="line">         <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">9</span>: <span class="number">0</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">5</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lcom/atguigu/java1/StackFrameTest;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(java.lang.String[])</span></span>;</span><br><span class="line">    descriptor: ([Ljava/lang/String;)V</span><br><span class="line">    flags: (<span class="number">0x0009</span>) ACC_PUBLIC, ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">2</span>, args_size=<span class="number">1</span></span><br><span class="line">         0: new           #2                  // class com/atguigu/java1/StackFrameTest</span><br><span class="line">         <span class="number">3</span>: dup</span><br><span class="line">         4: invokespecial #3                  // Method "&lt;init&gt;":()V</span><br><span class="line">         <span class="number">7</span>: astore_1</span><br><span class="line">         <span class="number">8</span>: aload_1</span><br><span class="line">         9: invokevirtual #4                  // Method method1:()V</span><br><span class="line">        <span class="number">12</span>: goto          <span class="number">20</span></span><br><span class="line">        <span class="number">15</span>: astore_1</span><br><span class="line">        <span class="number">16</span>: aload_1</span><br><span class="line">        17: invokevirtual #6                  // Method java/lang/Exception.printStackTrace:()V</span><br><span class="line">        20: getstatic     #7                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">        23: ldc           #8                  // String main()正常结束</span><br><span class="line">        25: invokevirtual #9                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">        <span class="number">28</span>: <span class="keyword">return</span></span><br><span class="line">      Exception table:</span><br><span class="line">         from    to  target type</span><br><span class="line">             <span class="number">0</span>    <span class="number">12</span>    <span class="number">15</span>   Class java/lang/Exception</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">12</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">13</span>: <span class="number">8</span></span><br><span class="line">        line <span class="number">17</span>: <span class="number">12</span></span><br><span class="line">        line <span class="number">15</span>: <span class="number">15</span></span><br><span class="line">        line <span class="number">16</span>: <span class="number">16</span></span><br><span class="line">        line <span class="number">19</span>: <span class="number">20</span></span><br><span class="line">        line <span class="number">21</span>: <span class="number">28</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">8</span>       <span class="number">4</span>     <span class="number">1</span>  test   Lcom/atguigu/java1/StackFrameTest;</span><br><span class="line">           <span class="number">16</span>       <span class="number">4</span>     <span class="number">1</span>     e   Ljava/lang/Exception;</span><br><span class="line">            <span class="number">0</span>      <span class="number">29</span>     <span class="number">0</span>  args   [Ljava/lang/String;</span><br><span class="line">      StackMapTable: number_of_entries = <span class="number">2</span></span><br><span class="line">        frame_type = <span class="number">79</span> <span class="comment">/* same_locals_1_stack_item */</span></span><br><span class="line">          stack = [ class java/lang/Exception ]</span><br><span class="line">        frame_type = <span class="number">4</span> <span class="comment">/* same */</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>;</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: (<span class="number">0x0001</span>) ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         0: getstatic     #7                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">         3: ldc           #10                 // String method1()开始执行...</span><br><span class="line">         5: invokevirtual #9                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">         <span class="number">8</span>: aload_0</span><br><span class="line">         9: invokevirtual #11                 // Method method2:()I</span><br><span class="line">        <span class="number">12</span>: pop</span><br><span class="line">        13: getstatic     #7                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">        16: ldc           #12                 // String method1()执行结束...</span><br><span class="line">        18: invokevirtual #9                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">        <span class="number">21</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">24</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">25</span>: <span class="number">8</span></span><br><span class="line">        line <span class="number">26</span>: <span class="number">13</span></span><br><span class="line">        line <span class="number">30</span>: <span class="number">21</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>      <span class="number">22</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lcom/atguigu/java1/StackFrameTest;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">method2</span><span class="params">()</span></span>;</span><br><span class="line">    descriptor: ()I</span><br><span class="line">    flags: (<span class="number">0x0001</span>) ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">3</span>, args_size=<span class="number">1</span></span><br><span class="line">         0: getstatic     #7                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">         3: ldc           #13                 // String method2()开始执行...</span><br><span class="line">         5: invokevirtual #9                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">         <span class="number">8</span>: bipush        <span class="number">10</span></span><br><span class="line">        <span class="number">10</span>: istore_1</span><br><span class="line">        <span class="number">11</span>: aload_0</span><br><span class="line">        12: invokevirtual #14                 // Method method3:()D</span><br><span class="line">        <span class="number">15</span>: d2i</span><br><span class="line">        <span class="number">16</span>: istore_2</span><br><span class="line">        17: getstatic     #7                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">        20: ldc           #15                 // String method2()即将结束...</span><br><span class="line">        22: invokevirtual #9                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">        <span class="number">25</span>: iload_1</span><br><span class="line">        <span class="number">26</span>: iload_2</span><br><span class="line">        <span class="number">27</span>: iadd</span><br><span class="line">        <span class="number">28</span>: ireturn</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">33</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">34</span>: <span class="number">8</span></span><br><span class="line">        line <span class="number">35</span>: <span class="number">11</span></span><br><span class="line">        line <span class="number">36</span>: <span class="number">17</span></span><br><span class="line">        line <span class="number">37</span>: <span class="number">25</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>      <span class="number">29</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lcom/atguigu/java1/StackFrameTest;</span><br><span class="line">           <span class="number">11</span>      <span class="number">18</span>     <span class="number">1</span>     i   I</span><br><span class="line">           <span class="number">17</span>      <span class="number">12</span>     <span class="number">2</span>     m   I</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">method3</span><span class="params">()</span></span>;</span><br><span class="line">    descriptor: ()D</span><br><span class="line">    flags: (<span class="number">0x0001</span>) ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">3</span>, args_size=<span class="number">1</span></span><br><span class="line">         0: getstatic     #7                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">         3: ldc           #16                 // String method3()开始执行...</span><br><span class="line">         5: invokevirtual #9                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">         8: ldc2_w        #17                 // double 20.0d</span><br><span class="line">        <span class="number">11</span>: dstore_1</span><br><span class="line">        12: getstatic     #7                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">        15: ldc           #19                 // String method3()即将结束...</span><br><span class="line">        17: invokevirtual #9                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">        <span class="number">20</span>: dload_1</span><br><span class="line">        <span class="number">21</span>: dreturn</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">41</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">42</span>: <span class="number">8</span></span><br><span class="line">        line <span class="number">43</span>: <span class="number">12</span></span><br><span class="line">        line <span class="number">44</span>: <span class="number">20</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>      <span class="number">22</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lcom/atguigu/java1/StackFrameTest;</span><br><span class="line">           <span class="number">12</span>      <span class="number">10</span>     <span class="number">1</span>     j   D</span><br><span class="line">&#125;</span><br><span class="line">SourceFile: <span class="string">"StackFrameTest.java"</span></span><br></pre></td></tr></table></figure></div><p><code>return</code>, <code>ireturn</code>, <code>dreturn</code> 中 <code>i</code> 代表 int， <code>d</code> 代表 double。</p><h3 id="◆-栈帧的内部结构"><a href="#◆-栈帧的内部结构" class="headerlink" title="◆ 栈帧的内部结构"></a>◆ 栈帧的内部结构</h3><p><img src="/2020/07/05/JVM-03/%E6%A0%88%E5%B8%A71.png" alt="栈帧的内部结构"></p><p>毎个栈帧中存儲着:</p><ul><li><strong>局部变量表(Local Variables)</strong></li><li><strong>操作数栈(Operand Stack) ( 或表达式栈)</strong></li><li>动态链接(Dynamic Linking) ( 或指向运行时常量池的方法引用)</li><li>方法返回地址(Return Address) (或方法正常退出或者异常退出的定乂)</li><li>一些附加信息</li></ul><hr><h2 id="3-🌿-局部变量表"><a href="#3-🌿-局部变量表" class="headerlink" title="3 🌿 局部变量表"></a>3 🌿 局部变量表</h2><ul><li><p>局部变量表也被称之为局部变量数组或本地变量表</p></li><li><p><strong>定义为一个数字数组，主要用于存储方法参数和定义在方法体内的局部变量</strong>，这些数据类型包括各类本数据类型、对象引用(reference) ，以及returnAddress类型。</p></li><li><p>由于局部变量表是建立在线程的栈上，是线程的私有数据，因此<strong>不存在数据安全问题</strong></p></li><li><p><strong>局部变量表所需的容量大小是在编译期确定下来的</strong>，并保存在方法的Code属性的 <code>maximum local variables</code> 数据项中。在方法运行期间是不会改变局部变量表的大小的。</p></li><li><p><strong>方法嵌套调用的次数由栈的大小决定</strong>。一般来说，栈越大，方法嵌套调用次数越多。对一个函数而言，它的参数和局部变量越多，使得局部变量表膨胀，它的栈帧就越大，以满足方法调用所需传递的信息增大的需求。进而函数调用就会占用更多的栈空间，导致其嵌套调用次数就会减少。</p></li><li><p><strong>局部变量表中的变量只在当前方法调用中有效</strong>。在方法执行时，虚拟机通过使用局部变量表完成参数值到参数变量列表的传递过程。<strong>当方法调用结束后，随着方法栈帧的销毁，局部变量表也会随之销毁</strong>。</p></li></ul><h3 id="字节码中方法内部结构的剖析"><a href="#字节码中方法内部结构的剖析" class="headerlink" title="字节码中方法内部结构的剖析"></a>字节码中方法内部结构的剖析</h3><p>以main方法为例：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    LocalVariablesTest test = <span class="keyword">new</span> LocalVariablesTest();</span><br><span class="line">    <span class="keyword">int</span> num = <span class="number">10</span>;</span><br><span class="line">    test.test1();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p><code>javap -v</code> 得到的内容，main方法部分：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(java.lang.String[])</span></span>;</span><br><span class="line">  descriptor: ([Ljava/lang/String;)V</span><br><span class="line">  flags: (<span class="number">0x0009</span>) ACC_PUBLIC, ACC_STATIC</span><br><span class="line">  Code:</span><br><span class="line">    stack=<span class="number">2</span>, locals=<span class="number">3</span>, args_size=<span class="number">1</span></span><br><span class="line">       0: new           #1                  // class com/atguigu/java1/LocalVariablesTest</span><br><span class="line">       <span class="number">3</span>: dup</span><br><span class="line">       4: invokespecial #2                  // Method "&lt;init&gt;":()V</span><br><span class="line">       <span class="number">7</span>: astore_1</span><br><span class="line">       <span class="number">8</span>: bipush        <span class="number">10</span></span><br><span class="line">      <span class="number">10</span>: istore_2</span><br><span class="line">      <span class="number">11</span>: aload_1</span><br><span class="line">      12: invokevirtual #3                  // Method test1:()V</span><br><span class="line">      <span class="number">15</span>: <span class="keyword">return</span></span><br><span class="line">    LineNumberTable:</span><br><span class="line">      line <span class="number">13</span>: <span class="number">0</span></span><br><span class="line">      line <span class="number">14</span>: <span class="number">8</span></span><br><span class="line">      line <span class="number">15</span>: <span class="number">11</span></span><br><span class="line">      line <span class="number">16</span>: <span class="number">15</span></span><br><span class="line">    LocalVariableTable:</span><br><span class="line">      Start  Length  Slot  Name   Signature</span><br><span class="line">          <span class="number">0</span>      <span class="number">16</span>     <span class="number">0</span>  args   [Ljava/lang/String;</span><br><span class="line">          <span class="number">8</span>       <span class="number">8</span>     <span class="number">1</span>  test   Lcom/atguigu/java1/LocalVariablesTest;</span><br><span class="line">         <span class="number">11</span>       <span class="number">5</span>     <span class="number">2</span>   num   I</span><br></pre></td></tr></table></figure></div><p>以上信息中：  </p><table><thead><tr><th>这些东西</th><th>是啥意思？</th></tr></thead><tbody><tr><td>descriptor: ([Ljava&#x2F;lang&#x2F;String;)V</td><td>描述符：[表示一维数组，L表示引用类型变量，V表示方法返回值 <code>void</code></td></tr><tr><td>flags: (0x0009) ACC_PUBLIC, ACC_STATIC</td><td>Access flags即访问标识 <code>public static</code></td></tr><tr><td>Code:</td><td>字节码：</td></tr><tr><td>stack&#x3D;2, locals&#x3D;3, args_size&#x3D;1</td><td>locals&#x3D;3表示局部变量表深度为3，stack&#x3D;2表示操作数栈深度为2</td></tr><tr><td>Code: 0到15</td><td>字节码指令号</td></tr><tr><td>LineNumberTable line 13: 0</td><td>行号表 line 13表示java源代码中的行号13: 0表示字节码指令号0</td></tr><tr><td>LocalVariableTable：Start Length Slot</td><td>局部变量表：Start和Length在一起表示了局部变量的作用范围：字节码指令中从Start开始，长度为Length，Slot为槽的索引</td></tr></tbody></table><h3 id="关于Slot的理解"><a href="#关于Slot的理解" class="headerlink" title="关于Slot的理解"></a>关于Slot的理解</h3><ul><li>参数值的存放总是在局部变量数组的index0开始，到数组长度-1的索引结束。</li><li><strong>局部变量表，最基本的存储单元是Slot (变量槽)</strong></li><li>局部变量表中存放编译期可知的各种基本数据类型(8种)，引用类型(reference)，returnAddress类型。</li><li><strong>在局部变量表里，32位以内的类型只占用一个slot (包括returnAddress类型)，64位的类型(long和double)占用两个slot</strong>。<ul><li>➢ byte、short、char 在存储前被转换为int, boolean也被转换为int，0表示false, 非0表示true。</li><li>➢ long和double 则占据两个Slot。</li></ul></li></ul><p><img src="/2020/07/05/JVM-03/%E5%8F%98%E9%87%8F%E6%A7%BDSlot1.png" alt="变量槽Slot"></p><ul><li>JVM会为局部变量表中的每一个Slot都分配一个访问索引，通过这个索引即可成功访问到局部变量表中指定的局部变量值</li><li>当一个实例方法被调用的时候，它的方法参数和方法体内部定义的局部变量将会<strong>按照顺序被复制</strong>到局部变量表中的每一个slot上</li><li><strong>如果需要访问局部变量表中一个64bit的局部变量值时，只需要使用前一个索引即可</strong>。(比如:访问long或double类型变量)</li><li>如果当前帧是由构造方法或者实例方法创建的，那么<strong>该对象引用this将会存放在index为0的slot处</strong>，其余的参数按照参数表顺序继续排列。</li></ul><p>又如 test2 方法：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test2</span><span class="params">(Date dateP, String name2)</span> </span>&#123;</span><br><span class="line">    dateP = <span class="keyword">null</span>;</span><br><span class="line">    name2 = <span class="string">"songhongkang"</span>;</span><br><span class="line">    <span class="keyword">double</span> weight = <span class="number">130.5</span>;<span class="comment">//占据两个slot</span></span><br><span class="line">    <span class="keyword">char</span> gender = <span class="string">'男'</span>;</span><br><span class="line">    <span class="keyword">return</span> dateP + name2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>test2方法的局部变量表如下：其中slot index0是对象引用<code>this</code>，slot index3和4是<code>double</code>类型的变量（只需要索引index 3即可访问double类型的变量weight），slot index5是<code>char</code>类型变量。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> java.lang.<span class="function">String <span class="title">test2</span><span class="params">(java.util.Date, java.lang.String)</span></span>;</span><br><span class="line">  descriptor: (Ljava/util/Date;Ljava/lang/String;)Ljava/lang/String;</span><br><span class="line">  flags: (<span class="number">0x0001</span>) ACC_PUBLIC</span><br><span class="line">  Code:</span><br><span class="line">    stack=<span class="number">2</span>, locals=<span class="number">6</span>, args_size=<span class="number">3</span></span><br><span class="line">       <span class="number">0</span>: aconst_null</span><br><span class="line">       <span class="number">1</span>: astore_1</span><br><span class="line">       2: ldc           #18                 // String songhongkang</span><br><span class="line"></span><br><span class="line">    .......中间省略.........</span><br><span class="line"></span><br><span class="line">    LocalVariableTable:</span><br><span class="line">      Start  Length  Slot  Name   Signature</span><br><span class="line">          <span class="number">0</span>      <span class="number">33</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lcom/atguigu/java1/LocalVariablesTest;</span><br><span class="line">          <span class="number">0</span>      <span class="number">33</span>     <span class="number">1</span> dateP   Ljava/util/Date;</span><br><span class="line">          <span class="number">0</span>      <span class="number">33</span>     <span class="number">2</span> name2   Ljava/lang/String;</span><br><span class="line">          <span class="number">9</span>      <span class="number">24</span>     <span class="number">3</span> weight   D</span><br><span class="line">         <span class="number">14</span>      <span class="number">19</span>     <span class="number">5</span> gender   C</span><br></pre></td></tr></table></figure></div><h3 id="Slot的重复利用"><a href="#Slot的重复利用" class="headerlink" title="Slot的重复利用"></a>Slot的重复利用</h3><p><strong>栈帧中的局部变量表中的槽位是可以重用的</strong>，如果一个局部变量过了其作用域，那么在其作用域之后申明的新的局部变量就很有可能会复用过期局部变量的槽位，从而<strong>达到节省资源的目的</strong>。test4方法演示了这一点：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> b = <span class="number">0</span>;</span><br><span class="line">        b = a + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//变量c使用之前已经销毁的变量b占据的slot的位置</span></span><br><span class="line">    <span class="keyword">int</span> c = a + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>下面是 <code>javap -v</code> 得到的test4方法部分的局部变量表 LocalVariableTable:</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span></span>;</span><br><span class="line">  descriptor: ()V</span><br><span class="line">  flags: (<span class="number">0x0001</span>) ACC_PUBLIC</span><br><span class="line">  Code:</span><br><span class="line">    stack=<span class="number">2</span>, locals=<span class="number">3</span>, args_size=<span class="number">1</span></span><br><span class="line">       <span class="number">0</span>: iconst_0</span><br><span class="line">       <span class="number">1</span>: istore_1</span><br><span class="line">       <span class="number">2</span>: iconst_0</span><br><span class="line">       <span class="number">3</span>: istore_2</span><br><span class="line">       <span class="number">4</span>: iload_1</span><br><span class="line">       <span class="number">5</span>: iconst_1</span><br><span class="line">       <span class="number">6</span>: iadd</span><br><span class="line">       <span class="number">7</span>: istore_2</span><br><span class="line">       <span class="number">8</span>: iload_1</span><br><span class="line">       <span class="number">9</span>: iconst_1</span><br><span class="line">      <span class="number">10</span>: iadd</span><br><span class="line">      <span class="number">11</span>: istore_2</span><br><span class="line">      <span class="number">12</span>: <span class="keyword">return</span></span><br><span class="line">    LineNumberTable:</span><br><span class="line">      line <span class="number">53</span>: <span class="number">0</span></span><br><span class="line">      line <span class="number">55</span>: <span class="number">2</span></span><br><span class="line">      line <span class="number">56</span>: <span class="number">4</span></span><br><span class="line">      line <span class="number">59</span>: <span class="number">8</span></span><br><span class="line">      line <span class="number">60</span>: <span class="number">12</span></span><br><span class="line">    LocalVariableTable:</span><br><span class="line">      Start  Length  Slot  Name   Signature</span><br><span class="line">          <span class="number">4</span>       <span class="number">4</span>     <span class="number">2</span>     b   I</span><br><span class="line">          <span class="number">0</span>      <span class="number">13</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lcom/atguigu/java1/LocalVariablesTest;</span><br><span class="line">          <span class="number">2</span>      <span class="number">11</span>     <span class="number">1</span>     a   I</span><br><span class="line">         <span class="number">12</span>       <span class="number">1</span>     <span class="number">2</span>     c   I</span><br></pre></td></tr></table></figure></div><p>从 LocalVariableTable 可以看出，局部变量 <em>b</em> 的作用域范围是4（Start）到8（Start+Length），即test4方法中用 <code>{</code> 和 <code>}</code> 括起来的部分。从9开始，Slot 2这个槽实际就相当于空着了，所以局部变量 <em>c</em> 的作用域范围从12开始，局部变量 <em>c</em> 就重复利用了过期局部变量 <em>b</em> 的槽位。</p><h3 id="举例-静态变量与局部变量的对比"><a href="#举例-静态变量与局部变量的对比" class="headerlink" title="举例:静态变量与局部变量的对比"></a>举例:静态变量与局部变量的对比</h3><p>● 参数表分配完毕之后，再根据方法体内定义的变量的顺序和作用域分配。<br>● 我们知道类变量表有两次初始化的机会，第一次是在“<strong>准备阶段</strong>”，执行系统初始化，对类变量设置零值，另一次则是在“<strong>初始化</strong>”阶段，赋予程序员在代码中定义的初始值。<br>● 和类变量初始化不同的是，局部变量表不存在系统初始化的过程，这意味着一旦定义了局部变量则必须人为的初始化，否则无法使用。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    变量的分类：按照数据类型分：</span></span><br><span class="line"><span class="comment">    ① 基本数据类型  ② 引用数据类型</span></span><br><span class="line"><span class="comment">    按照在类中声明的位置分：</span></span><br><span class="line"><span class="comment">    ① 成员变量：在使用前，都经历过默认初始化赋值</span></span><br><span class="line"><span class="comment">      类变量： linking的prepare阶段：给类变量默认赋值  ---&gt; initial阶段：给类变量显式赋值即静态代码块赋值</span></span><br><span class="line"><span class="comment">      实例变量：随着对象的创建，会在堆空间中分配实例变量空间，并进行默认赋值</span></span><br><span class="line"><span class="comment">    ② 局部变量：在使用前，必须要进行显式赋值的！否则，编译不通过</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test5Temp</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> num;</span><br><span class="line">        <span class="comment">//System.out.println(num);//错误信息：变量num未进行初始化</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><p><em><strong>这样的代码是错误的，没有赋值不能够使用</strong></em>。</p><h3 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h3><p>● 在栈帧中，与性能调优关系最为密切的部分就是前面提到的局部变量表。在方法执行时，虚拟机使用局部变量表完成方法的传递。<br>● <strong>局部变量表中的变量也是重要的垃圾回收根节点，只要被局部变量表中直接或间接引用的对象都不会被回收</strong>。  </p><hr><h2 id="4-操作数栈"><a href="#4-操作数栈" class="headerlink" title="4 操作数栈"></a>4 操作数栈</h2><ul><li>每一个独立的栈帧中除了包含局部变量表以外，还包含一个后进先出(Last-In-First-out )的操作数栈，也可以称之为表达式栈(Expression Stack) 。</li><li>**操作数栈，在方法执行过程中，根据字节码指令，往栈中写入数据或提取数据，即入栈(push) &#x2F;出栈(pop)**。<ul><li>➢ 某些字节码指令将值压入操作数栈，其余的字节码指令将操作数取出栈。使用它们后再把结果压入栈。</li><li>➢ 比如:执行复制、交换、求和等操作</li></ul></li><li>操作数栈，<strong>主要用于保存计算过程的中间结果，同时作为计算过程中变量临时的存储空间</strong>。</li><li>操作数栈就是JVM执行引擎的一个工作区，当一个方法刚开始执行的时候，一个新的栈帧也会随之被创建出来，<strong>这个方法的操作数栈是空的</strong>。</li><li>每一个操作数栈都会拥有一个明确的栈深度用于存储数值，其所需的最大深度<strong>在编译期就定义好了</strong>，保存在方法的Code属性中（比如<code>stack=2</code>），为max_stack的值。</li><li>栈中的任何一个元素都是可以任意的Java数据类型。<ul><li>➢ 32bit的类型占用一个栈单位深度</li><li>➢ 64bit的类型占用两个栈单位深度</li></ul></li><li>操作数栈<strong>并非采用访问索引的方式来进行数据访问</strong>的，而是只能通过标准的入栈(push) 和出栈(pop) 操作来完成一次数据访问。</li><li><strong>如果被调用的方法带有返回值的话，其返回值将会被压入当前栈帧的操作数栈中</strong>，并更新PC寄存器中下一条需要执行的字节码指令。</li><li>操作数栈中元素的数据类型必须与字节码指令的序列严格匹配，这由编译器在编译器期间进行验证，同时在类加载过程中的类检验阶段的数据流分析阶段要再次验证。</li><li>另外，我们说Java虚拟机的<strong>解释引擎是基于栈的执行引擎</strong>，其中的栈指的就是操作数栈。</li></ul><p>代码追踪：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAddOperation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//byte、short、char、boolean：都以int型来保存</span></span><br><span class="line">        <span class="keyword">byte</span> i = <span class="number">15</span>;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">8</span>;</span><br><span class="line">        <span class="keyword">int</span> k = i + j;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// int m = 800;</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><p><code>javap -v 类名.class</code></p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAddOperation</span><span class="params">()</span></span>;</span><br><span class="line">  descriptor: ()V</span><br><span class="line">  flags: (<span class="number">0x0001</span>) ACC_PUBLIC</span><br><span class="line">  Code:</span><br><span class="line">    stack=<span class="number">2</span>, locals=<span class="number">4</span>, args_size=<span class="number">1</span></span><br><span class="line">       <span class="number">0</span>: bipush        <span class="number">15</span></span><br><span class="line">       <span class="number">2</span>: istore_1</span><br><span class="line">       <span class="number">3</span>: bipush        <span class="number">8</span></span><br><span class="line">       <span class="number">5</span>: istore_2</span><br><span class="line">       <span class="number">6</span>: iload_1</span><br><span class="line">       <span class="number">7</span>: iload_2</span><br><span class="line">       <span class="number">8</span>: iadd</span><br><span class="line">       <span class="number">9</span>: istore_3</span><br><span class="line">      <span class="number">10</span>: <span class="keyword">return</span></span><br><span class="line">    LineNumberTable:</span><br><span class="line">      line <span class="number">10</span>: <span class="number">0</span></span><br><span class="line">      line <span class="number">11</span>: <span class="number">3</span></span><br><span class="line">      line <span class="number">12</span>: <span class="number">6</span></span><br><span class="line">      line <span class="number">16</span>: <span class="number">10</span></span><br><span class="line">    LocalVariableTable:</span><br><span class="line">      Start  Length  Slot  Name   Signature</span><br><span class="line">          <span class="number">0</span>      <span class="number">11</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lcom/atguigu/java1/OperandStackTest;</span><br><span class="line">          <span class="number">3</span>       <span class="number">8</span>     <span class="number">1</span>     i   B</span><br><span class="line">          <span class="number">6</span>       <span class="number">5</span>     <span class="number">2</span>     j   I</span><br><span class="line">         <span class="number">10</span>       <span class="number">1</span>     <span class="number">3</span>     k   I</span><br></pre></td></tr></table></figure></div><p>分析（是我推测，不知对否，回头再看）：</p><table><thead><tr><th>字节码指令</th><th>操作数栈（动作，栈元素 栈底 –&gt; 栈顶）</th><th>局部变量表（Slot0123）</th></tr></thead><tbody><tr><td>0: bipush        15</td><td>入栈，15</td><td>this,</td></tr><tr><td>2: istore_1</td><td>出栈，空</td><td>this, 15</td></tr><tr><td>3: bipush        8</td><td>入栈，8</td><td>this, 15</td></tr><tr><td>5: istore_2</td><td>出栈，空</td><td>this, 15, 8</td></tr><tr><td>6: iload_1</td><td>入栈，15</td><td>this, 15, 8</td></tr><tr><td>7: iload_2</td><td>入栈，15, 8</td><td>this, 15, 8</td></tr><tr><td>8: iadd</td><td>出栈(8)，出栈(15)，入栈(23) ，23</td><td>this, 15, 8</td></tr><tr><td>9: istore_3</td><td>出栈，空</td><td>this, 15, 8, 23</td></tr><tr><td>10: return</td><td>无动作，空</td><td>this, 15, 8, 23</td></tr></tbody></table><hr><h2 id="5-代码追踪"><a href="#5-代码追踪" class="headerlink" title="5 代码追踪"></a>5 代码追踪</h2><iframe width="945" height="511" src="https://www.youtube.com/embed/LwvJVxoExqU?list=PLtGk8Nqe2ZcK0xUtbQjHeX2gqgoOdKJnX" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><hr><h3 id="i-和-i-的区别"><a href="#i-和-i-的区别" class="headerlink" title="i++ 和 ++i 的区别"></a><code>i++</code> 和 <code>++i</code> 的区别</h3><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  程序员面试过程中， 常见的i++和++i 的区别，放到字节码篇章时再介绍。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="comment">//第1类问题：</span></span><br><span class="line">      <span class="keyword">int</span> i1 = <span class="number">10</span>;</span><br><span class="line">      i1++;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">int</span> i2 = <span class="number">10</span>;</span><br><span class="line">      ++i2;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//第2类问题：</span></span><br><span class="line">      <span class="keyword">int</span> i3 = <span class="number">10</span>;</span><br><span class="line">      <span class="keyword">int</span> i4 = i3++;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">int</span> i5 = <span class="number">10</span>;</span><br><span class="line">      <span class="keyword">int</span> i6 = ++i5;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//第3类问题：</span></span><br><span class="line">      <span class="keyword">int</span> i7 = <span class="number">10</span>;</span><br><span class="line">      i7 = i7++;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">int</span> i8 = <span class="number">10</span>;</span><br><span class="line">      i8 = ++i8;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//第4类问题：</span></span><br><span class="line">      <span class="keyword">int</span> i9 = <span class="number">10</span>;</span><br><span class="line">      <span class="keyword">int</span> i10 = i9++ + ++i9;</span><br><span class="line">      <span class="comment">//System.out.println(i10);//22</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></div><p>尝试通过分析字节码的方式去理解：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span></span>;</span><br><span class="line">  descriptor: ()V</span><br><span class="line">  flags: (<span class="number">0x0001</span>) ACC_PUBLIC</span><br><span class="line">  Code:</span><br><span class="line">    stack=<span class="number">2</span>, locals=<span class="number">11</span>, args_size=<span class="number">1</span></span><br><span class="line">       <span class="number">0</span>: bipush        <span class="number">10</span></span><br><span class="line">       <span class="number">2</span>: istore_1</span><br><span class="line">       <span class="number">3</span>: iinc          <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">       <span class="number">6</span>: bipush        <span class="number">10</span></span><br><span class="line">       <span class="number">8</span>: istore_2</span><br><span class="line">       <span class="number">9</span>: iinc          <span class="number">2</span>, <span class="number">1</span></span><br><span class="line">      <span class="number">12</span>: bipush        <span class="number">10</span></span><br><span class="line">      <span class="number">14</span>: istore_3</span><br><span class="line">      <span class="number">15</span>: iload_3</span><br><span class="line">      <span class="number">16</span>: iinc          <span class="number">3</span>, <span class="number">1</span></span><br><span class="line">      <span class="number">19</span>: istore        <span class="number">4</span></span><br><span class="line">      <span class="number">21</span>: bipush        <span class="number">10</span></span><br><span class="line">      <span class="number">23</span>: istore        <span class="number">5</span></span><br><span class="line">      <span class="number">25</span>: iinc          <span class="number">5</span>, <span class="number">1</span></span><br><span class="line">      <span class="number">28</span>: iload         <span class="number">5</span></span><br><span class="line">      <span class="number">30</span>: istore        <span class="number">6</span></span><br><span class="line">      <span class="number">32</span>: bipush        <span class="number">10</span></span><br><span class="line">      <span class="number">34</span>: istore        <span class="number">7</span></span><br><span class="line">      <span class="number">36</span>: iload         <span class="number">7</span></span><br><span class="line">      <span class="number">38</span>: iinc          <span class="number">7</span>, <span class="number">1</span></span><br><span class="line">      <span class="number">41</span>: istore        <span class="number">7</span></span><br><span class="line">      <span class="number">43</span>: bipush        <span class="number">10</span></span><br><span class="line">      <span class="number">45</span>: istore        <span class="number">8</span></span><br><span class="line">      <span class="number">47</span>: iinc          <span class="number">8</span>, <span class="number">1</span></span><br><span class="line">      <span class="number">50</span>: iload         <span class="number">8</span></span><br><span class="line">      <span class="number">52</span>: istore        <span class="number">8</span></span><br><span class="line">      <span class="number">54</span>: bipush        <span class="number">10</span></span><br><span class="line">      <span class="number">56</span>: istore        <span class="number">9</span></span><br><span class="line">      <span class="number">58</span>: iload         <span class="number">9</span></span><br><span class="line">      <span class="number">60</span>: iinc          <span class="number">9</span>, <span class="number">1</span></span><br><span class="line">      <span class="number">63</span>: iinc          <span class="number">9</span>, <span class="number">1</span></span><br><span class="line">      <span class="number">66</span>: iload         <span class="number">9</span></span><br><span class="line">      <span class="number">68</span>: iadd</span><br><span class="line">      <span class="number">69</span>: istore        <span class="number">10</span></span><br><span class="line">      <span class="number">71</span>: <span class="keyword">return</span></span><br></pre></td></tr></table></figure></div><p>程序员面试过程中，常见的 <code>i++</code> 和 <code>++i</code> 的区别, 放到字节码篇章时再介绍。</p><hr><h2 id="6-栈顶缓存技术"><a href="#6-栈顶缓存技术" class="headerlink" title="6 栈顶缓存技术"></a>6 栈顶缓存技术</h2><p>前面提过，基于栈式架构的虛拟机所使用的零地址指令更加紧凑，但完成一项操作的时候必然需要使用更多的入栈和出栈指令，这同时也就意味着将需要更多的指令分派(instruction dispatch)次数和内存读&#x2F;写次数。</p><p>由于操作数是存储在内存中的，因此频繁地执行内存读&#x2F;写操作必然会影响执行速度。为了解决这个问题，HotSpot JVM的设计者们提出了栈顶缓存(ToS，Top-of-Stack Cashing)技术，<strong>将栈顶元素全部缓存在物理CPU的寄存器中，以此降低对内存的读&#x2F;写次数，提升执行引擎的执行效率</strong>。</p><hr><h2 id="7-动态链接"><a href="#7-动态链接" class="headerlink" title="7 动态链接"></a>7 动态链接</h2><p><img src="/2020/07/05/JVM-03/%E6%A0%88%E5%B8%A71.png" alt="帧数据区"></p><p>动态链接(或指向运行时常量池的方法引用)</p><p>每一个栈帧内部都包含一个指向 <em>运行时常量池</em> 中 <strong>该栈帧所属方法的引用</strong>。包含这个引用的目的就是为了支持当前方法的代码能够实现<strong>动态链接(Dynamic Linking)</strong> 。比如: invokedynamic指令</p><p>在Java源文件被编译到字节码文件中时，所有的变量和方法引用都作为符号引用(Symbolic Reference) 保存在 class文件的常量池（运行起来以后保存到方法区就是运行时常量池）里。比如:描述一个方法调用了另外的其他方法时，就是通过常量池中指向方法的符号引用来表示的，那么<strong>动态链接的作用就是为了将这些符号引用转换为调用方法的直接引用</strong>。</p><p><img src="/2020/07/05/JVM-03/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A51.png" alt="动态链接"></p><p><strong>为什么需要常量池呢</strong>？</p><p>常量池的作用，就是为了提供一些符号和常量，便于指令的识别。</p><hr><h2 id="8-方法的调用-解析与分派"><a href="#8-方法的调用-解析与分派" class="headerlink" title="8 方法的调用:解析与分派"></a>8 方法的调用:解析与分派</h2><p>原理、过程</p><h3 id="方法的绑定机制"><a href="#方法的绑定机制" class="headerlink" title="方法的绑定机制"></a>方法的绑定机制</h3><p>在JVM中，将符号引用转换为调用方法的直接引用与方法的绑定机制相关。</p><p>● <strong>静态链接</strong>:<br>当一个字节码文件被装载进JVM内部时，如果被调用的<strong>目标方法在编译期可知</strong>,且运行期保持不变时。这种情况下将调用方法的符号引用转换为直接引用的过程称之为静态链接。</p><p>● <strong>动态链接</strong>:<br>如果<strong>被调用的方法在编译期无法被确定下来</strong>，也就是说，只能够在程序运行期将调用方法的符号引用转换为直接引用，由于这种引用转换过程具备动态性，因此也就被称之为动态链接。</p><p>对应的方法的绑定机制为:早期绑定(Early Binding)和晚期绑定(Late Binding) 。<strong>绑定是一个字段、方法或者类在符号引用被替换为直接引用的过程，这仅仅发生一次</strong>。</p><p>● <strong>早期绑定</strong>:<br>早期绑定就是指被调用的<strong>目标方法如果在编译期可知，且运行期保持不变时</strong>,即可将这个方法与所属的类型进行绑定，这样一来，由于明确了被调用的目标方法究竟是哪一个，因此也就可以使用静态链接的方式将符号引用转换为直接引用。</p><p>● <strong>晚期绑定</strong>:<br>如果<strong>被调用的方法在编译期无法被确定下来，只能够在程序运行期根据实际的类型绑定相关的方法</strong>，这种绑定方式也就被称之为晚期绑定。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 说明早期绑定和晚期绑定的例子</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020 上午 11:59</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"动物进食"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Huntable</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">hunt</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> <span class="keyword">implements</span> <span class="title">Huntable</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"狗吃骨头"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hunt</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"捕食耗子，多管闲事"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> <span class="keyword">implements</span> <span class="title">Huntable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Cat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();<span class="comment">//表现为：早期绑定</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Cat</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>();<span class="comment">//表现为：早期绑定</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.eat();<span class="comment">//表现为：早期绑定</span></span><br><span class="line">        System.out.println(<span class="string">"猫吃鱼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hunt</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"捕食耗子，天经地义"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnimalTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showAnimal</span><span class="params">(Animal animal)</span></span>&#123;</span><br><span class="line">        animal.eat();<span class="comment">//表现为：晚期绑定</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showHunt</span><span class="params">(Huntable h)</span></span>&#123;</span><br><span class="line">        h.hunt();<span class="comment">//表现为：晚期绑定</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>随着高级语言的横空出世，类似于Java一样的基于面向对象的编程语言如今越来越多，尽管这类编程语言在语法风格上存在一定的差别，但是它们彼此之间始终保持着一个共性，那就是都支持封装、继承和多态等面向对象特性，既然<strong>这一类的编程语言具备多态特性，那么自然也就具备早期绑定和晚期绑定两种绑定方式</strong>。</p><p>Java中任何一个普通的方法其实都具备虚函数的特征，它们相当于C++语言中的虚函数(C++中则需要使用关键字 <code>virtual</code> 来显式定义)。如果在Java程序中不希望某个方法拥有虚函数的特征时，则可以使用关键字 <code>final</code> 来标记这个方法。</p><h3 id="虚方法与非虚方法"><a href="#虚方法与非虚方法" class="headerlink" title="虚方法与非虚方法"></a>虚方法与非虚方法</h3><p><strong>非虚方法</strong>:</p><p>● 如果方法在编译期就确定了具体的调用版木，这个版木在运行时是不可变的。这样的方法称为<strong>非虚方法</strong>。<br>● <strong>静态方法、私有方法、final方法、实例构造器、父类方法都是非虚方法</strong>。<br>● 其他方法称为虚方法。  </p><p>子类对象的多态性的使用前提: ① 类的继承关系 ② 方法的重写.</p><h3 id="4种方法调用指令区分非虚方法与虚方法"><a href="#4种方法调用指令区分非虚方法与虚方法" class="headerlink" title="4种方法调用指令区分非虚方法与虚方法"></a>4种方法调用指令区分非虚方法与虚方法</h3><p>虚拟机中提供了以下几条方法调用指令:</p><ul><li>普通调用指令:<ol><li><strong><code>invokestatic</code>: 调用静态方法，解析阶段确定唯一方法版本</strong></li><li><strong><code>invokespecial</code>: 调用&lt;init&gt;方法、 私有及父类方法，解析阶段确定唯一方法版本</strong></li><li><code>invokevirtual</code>: 调用所有虚方法</li><li><code>invokeinterface</code>: 调用接口方法</li></ol></li><li>动态调用指令:<ol><li><code>invokedynamic</code>: 动态解析出需要调用的方法，然后执行</li></ol></li></ul><p>前四条指令固化在虛拟机内部，方法的调用执行不可人为干预，而 <code>invokedynamic</code> 指令则支持由用户确定方法版本。其中 <strong><code>invokestatic</code> 指令和 <code>invokespecial</code> 指令调用的方法称为非虛方法，其余的( <code>final</code> 修饰的除外)称为虚方法</strong>。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 解析调用中非虚方法、虚方法的测试</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * invokestatic指令和invokespecial指令调用的方法称为非虚方法</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020 下午 12:07</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Father</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"father的构造器"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showStatic</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"father "</span> + str);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">showFinal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"father show final"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showCommon</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"father 普通方法"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Son</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//invokespecial</span></span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Son</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//invokespecial</span></span><br><span class="line">        <span class="keyword">this</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//不是重写的父类的静态方法，因为静态方法不能被重写！</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showStatic</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"son "</span> + str);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showPrivate</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"son private"</span> + str);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//invokestatic</span></span><br><span class="line">        showStatic(<span class="string">"atguigu.com"</span>);</span><br><span class="line">        <span class="comment">//invokestatic</span></span><br><span class="line">        <span class="keyword">super</span>.showStatic(<span class="string">"good!"</span>);</span><br><span class="line">        <span class="comment">//invokespecial</span></span><br><span class="line">        showPrivate(<span class="string">"hello!"</span>);</span><br><span class="line">        <span class="comment">//invokespecial</span></span><br><span class="line">        <span class="keyword">super</span>.showCommon();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//invokevirtual</span></span><br><span class="line">        showFinal();<span class="comment">//因为此方法声明有final，不能被子类重写，所以也认为此方法是非虚方法。</span></span><br><span class="line">        <span class="comment">//虚方法如下：</span></span><br><span class="line">        <span class="comment">//invokevirtual</span></span><br><span class="line">        showCommon();</span><br><span class="line">        info();</span><br><span class="line"></span><br><span class="line">        MethodInterface in = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//invokeinterface</span></span><br><span class="line">        in.methodA();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">info</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">(Father f)</span></span>&#123;</span><br><span class="line">        f.showCommon();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Son so = <span class="keyword">new</span> Son();</span><br><span class="line">        so.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">MethodInterface</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">methodA</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="关于-invokedynamic-指令"><a href="#关于-invokedynamic-指令" class="headerlink" title="关于 invokedynamic 指令"></a>关于 <code>invokedynamic</code> 指令</h3><p>JVM字节码指令集一直比较稳定，一直到Java7中才增加了一个 <code>invokedynamic</code> 指令，这是<strong>Java为了实现「动态类型语言」支持而做的一种改进</strong>。</p><p>但是在Java7中并没有提供直接生成 <code>invokedynamic</code> 指令的方法，需要借助 ASM 这种底层字节码工具来产生 <code>invokedynamic</code> 指令。<strong>直到 Java8 的 Lambda 表达式的出现，<code>invokedynamic</code> 指令的生成，在Java中才有了直接的生成方式</strong>。</p><p>Java7 中增加的动态语言类型支持的本质是对 Java虚拟机规范的修改，而不是对Java语言规则的修改，这一块相对来讲比较复杂，增加了虚拟机中的方法调用，最直接的受益者就是运行在Java平台的动态语言的编译器。</p><p>静态类型语言与动态类型语言：</p><p>动态类型语言和静态类型语言两者的区别就在于对类型的检查是在编译期还是在运行期，满足前者就是静态类型语言，反之是动态类型语言。</p><p>说的再直白一点就是，<strong>静态类型语言是判断变量自身的类型信息；动态类型语言是判断变量值的类型信息，变量没有类型信息，变量值才有类型信息</strong>，这是动态语言的一“个重要特征。</p><p>比如， 静态类型语言Java；动态类型语言JS，Python。  </p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Java: String info &#x3D; &quot;atguigu&quot;; &#x2F;&#x2F;info &#x3D; atguigu;  </span><br><span class="line">JS: var name &#x3D; &quot;shkstart&quot;; var name &#x3D; 10 ;  </span><br><span class="line">Python: info &#x3D; 130.5</span><br></pre></td></tr></table></figure></div><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 体会invokedynamic指令</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020 下午 3:09</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Func</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">func</span><span class="params">(String str)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Lambda</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lambda</span><span class="params">(Func func)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Lambda lambda = <span class="keyword">new</span> Lambda();</span><br><span class="line"></span><br><span class="line">        Func func = s -&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        lambda.lambda(func);</span><br><span class="line"></span><br><span class="line">        lambda.lambda(s -&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>main方法对应字节码指令如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> 0 new #2 &lt;com/atguigu/java2/Lambda&gt;</span><br><span class="line"> <span class="number">3</span> dup</span><br><span class="line"> 4 invokespecial #3 &lt;com/atguigu/java2/Lambda.&lt;init&gt;&gt;</span><br><span class="line"> <span class="number">7</span> astore_1</span><br><span class="line"> 8 invokedynamic #4 &lt;func, BootstrapMethods #0&gt;</span><br><span class="line"><span class="number">13</span> astore_2</span><br><span class="line"><span class="number">14</span> aload_1</span><br><span class="line"><span class="number">15</span> aload_2</span><br><span class="line">16 invokevirtual #5 &lt;com/atguigu/java2/Lambda.lambda&gt;</span><br><span class="line"><span class="number">19</span> aload_1</span><br><span class="line">20 invokedynamic #6 &lt;func, BootstrapMethods #1&gt;</span><br><span class="line">25 invokevirtual #5 &lt;com/atguigu/java2/Lambda.lambda&gt;</span><br><span class="line"><span class="number">28</span> <span class="keyword">return</span></span><br></pre></td></tr></table></figure></div><h3 id="方法重写的本质"><a href="#方法重写的本质" class="headerlink" title="方法重写的本质"></a>方法重写的本质</h3><p>Java语言中方法重写的本质:</p><ol><li>找到操作数栈项的第一个元素所执行的对象的实际类型，记作 <code>C</code>.</li><li>如果在类型 <code>C</code> 中找到与常量中的描述符合简单名称都相符的方法，则进行访问权限校验，如果通过则返回这个方法的直接引用，查找过程结束；如果不通过，则返回 <code>java.lang.IllegalAccessError</code> 异常。</li><li>否则，按照继承关系从下往上依次对 <code>C</code> 的各个父类进行第2步的搜索和验证过程。</li><li>如果始终没有找到合适的方法，则抛出 <code>java.lang.AbstractMethodError</code> 异常。</li></ol><p><strong>IllegalAccessError介绍</strong>: 程序试图访问或修改一个属性或调用一个方法， 这个属性或方法，你没有权限访问。一般的，这个会引起编译器异常。这个错误如果发生在运行时，就说明一个类发生了不兼容的改变。</p><p>⚠️：Maven的jar包管理冲突时容易出现这个问题，且不易发现。</p><h3 id="虚方法表"><a href="#虚方法表" class="headerlink" title="虚方法表"></a>虚方法表</h3><p>从方法重写的本质可以看出来，频繁的查找效率低。</p><p>● 在面向对象的编程中，会很频繁的使用到动态分派，如果在每次动态分派的过程中都要重新在类的方法元数据中搜索合适的目标的话就可能影响到执行效率。因此，<strong>为了提高性能</strong>，<strong>JVM采用在类的方法区建立一个虚方法表(virtual method table) (非虚方法不会出现在表中)来实现。使用索引表来代替查找</strong>。</p><p>● 每个类中都有一个虚方法表，表中存放着各个方法的实际入口。</p><p>● 那么虚方法表什么时候被创建?<br>虚方法表会在类加载的链接阶段被创建并开始初始化，类的变量初始值准备完成之后，JVM会把该类的方法表也初始化完毕。</p><hr><h2 id="9-方法返回地址"><a href="#9-方法返回地址" class="headerlink" title="9 方法返回地址"></a>9 方法返回地址</h2><p><img src="/2020/07/05/JVM-03/%E6%A0%88%E5%B8%A71.png" alt="栈帧中的方法返回地址"></p><p>方法返回地址(return address)。</p><p>● 存放调用该方法的pc寄存器的值。</p><p>一个方法的结束，有两种方式:</p><ul><li>➢ 正常执行完成</li><li>➢ 出现未处理的异常，非正常退出</li></ul><p>无论通过哪种方式退出，在方法退出后都返回到该方法被调用的位置。方法正常退出时，<strong>调用者的pc计数器的值作为返回地址，即调用该方法的指令的下一条指令的地址</strong>。而通过异常退出的，返回地址是要通过异常表来确定，栈帧中-般不会保存这部分信息。</p><p>当一个方法开始执行后，只有两种方式可以退出这个方法:</p><p>1、执行引擎遇到任意一个方法返回的字节码指令(return) ，会有返回值传递给上层的方法调用者，简称<strong>正常完成出口</strong>；</p><ul><li>➢ 一个方法在正常调用完成之后究竟需要使用哪一个返回指令还需要根据方法返回值的实际数据类型而定。</li><li>➢ 在字节码指令中，返回指令包含 <code>ireturn</code> (当返回值是 <code>boolean</code>、 <code>byte</code>、<code>char</code>、 <code>short</code> 和 <code>int</code> 类型时使用)、<code>lreturn</code> （long）、 <code>freturn</code> （float）、 <code>dreturn</code> （double） 以及 <a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.areturn" target="_blank" rel="noopener"><code>areturn</code> （返回引用类型）</a>,另外还有一个 <code>return</code> 指令供声明为 <code>void</code> 的方法、实例初始化方法、类和接口的初始化方法使用。</li></ul><p>2、在方法执行的过程中遇到了异常(Exception)，并且这个异常没有在方法内进行处理，也就是只要在本方法的异常表中没有搜索到匹配的异常处理器，就会导致方法退出。简称<strong>异常完成出口</strong>。</p><p>方法执行过程中抛出异常时的异常处理，存储在一个异常处理表，方便在发生异常的时候找到处理异常的代码。</p><table><thead><tr><th>Exception table:</th><th></th><th></th><th></th></tr></thead><tbody><tr><td>from</td><td>to</td><td>target</td><td>type</td></tr><tr><td>4</td><td>16</td><td>19</td><td>any</td></tr><tr><td>19</td><td>21</td><td>19</td><td>any</td></tr></tbody></table><p>本质上，方法的退出就是当前栈帧出栈的过程。此时，需要恢复上层方法的局部变量表、操作数栈、将返回值压入调用者栈帧的操作数栈、设置PC寄存器值等，让调用者方法继续执行下去。</p><p><strong>正常完成出口和异常完成出口的区别在于:通过异常完成出口退出的不会给他的上层调用者产生任何的返回值</strong>。</p><hr><h2 id="10-一些附加信息"><a href="#10-一些附加信息" class="headerlink" title="10 一些附加信息"></a>10 一些附加信息</h2><p>栈帧中还允许携带与Java虛拟机实现相关的一些附加信息。例如,对程序调试提供支持的信息。</p><hr><h2 id="11-虚拟机栈的相关面试题"><a href="#11-虚拟机栈的相关面试题" class="headerlink" title="11 虚拟机栈的相关面试题"></a>11 虚拟机栈的相关面试题</h2><p>这一章主要讲了虚拟机栈的内部结构，其中栈帧的结构包含局部变量表、操作数栈、方法返回地址、动态链接和一些附加信息。也提到了方法调用和一些字节码指令。</p><ul><li>● 举例栈溢出的情况? （<code>StackOverflowError</code>）<ul><li>通过 <code>-Xss</code> 设置栈的大小：<code>OOM</code>(栈大小动态扩容内存不足时出现)</li></ul></li><li>● 调整栈大小，就能保证不出现溢出吗? （不能）</li><li>● 分配的栈内存越大越好吗? （不是。比如物理机器内存容量有限，会挤占其他进程的内存空间）</li><li>● 垃圾回收是否会涉及到虚拟机栈? （不会）<table><thead><tr><th>运行时数据区</th><th>Error</th><th>GC</th></tr></thead><tbody><tr><td>程序计数器</td><td>❌</td><td>❌</td></tr><tr><td>虚拟机栈</td><td>✅</td><td>❌</td></tr><tr><td>本地方法栈</td><td>✅</td><td>❌</td></tr><tr><td>堆</td><td>✅</td><td>✅</td></tr><tr><td>方法区</td><td>✅</td><td>✅</td></tr></tbody></table></li><li>● 方法中定义的局部变量是否线程安全? （具体问题具体分析）</li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java3;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 面试题：</span></span><br><span class="line"><span class="comment"> * 方法中定义的局部变量是否线程安全？具体情况具体分析</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *   何为线程安全？</span></span><br><span class="line"><span class="comment"> *      如果只有一个线程才可以操作此数据，则必是线程安全的。</span></span><br><span class="line"><span class="comment"> *      如果有多个线程操作此数据，则此数据是共享数据。如果不考虑同步机制的话，会存在线程安全问题。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020 下午 7:48</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringBuilderTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> num = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//s1的声明方式是线程安全的</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//StringBuilder:线程不安全</span></span><br><span class="line">        StringBuilder s1 = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        s1.append(<span class="string">"a"</span>);</span><br><span class="line">        s1.append(<span class="string">"b"</span>);</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//sBuilder的操作过程：是线程不安全的</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">(StringBuilder sBuilder)</span></span>&#123;</span><br><span class="line">        sBuilder.append(<span class="string">"a"</span>);</span><br><span class="line">        sBuilder.append(<span class="string">"b"</span>);</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//s1的操作：是线程不安全的</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> StringBuilder <span class="title">method3</span><span class="params">()</span></span>&#123;</span><br><span class="line">        StringBuilder s1 = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        s1.append(<span class="string">"a"</span>);</span><br><span class="line">        s1.append(<span class="string">"b"</span>);</span><br><span class="line">        <span class="keyword">return</span> s1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//s1的操作：是线程安全的</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">method4</span><span class="params">()</span></span>&#123;</span><br><span class="line">        StringBuilder s1 = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        s1.append(<span class="string">"a"</span>);</span><br><span class="line">        s1.append(<span class="string">"b"</span>);</span><br><span class="line">        <span class="keyword">return</span> s1.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        StringBuilder s = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            s.append(<span class="string">"a"</span>);</span><br><span class="line">            s.append(<span class="string">"b"</span>);</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        method2(s);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><hr><h2 id="本地方法栈-Native-Method-Stack"><a href="#本地方法栈-Native-Method-Stack" class="headerlink" title="本地方法栈(Native Method Stack)"></a>本地方法栈(Native Method Stack)</h2><p><img src="/2020/07/05/JVM-03/%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%A0%881.png" alt="HotSpot JVM 本地方法栈"></p><p><strong>Java虛拟机栈用于管理Java方法的调用，而本地方法栈用于管理本地方法的调用</strong>。</p><p>本地方法栈，也是线程私有的。</p><p>允许被实现成固定或者是可动态扩展的内存大小。( 在内存溢出方面是相同的)</p><ul><li>➢ 如果线程请求分配的栈容量超过本地方法栈允许的最大容量，Java虚拟机将会抛出一个 <code>stackoverflowError</code> 异常。</li><li>➢ 如果本地方法栈可以动态扩展，并且在尝试扩展的时候无法申请到足够的内存，或者在创建新的线程时没有足够的内存去创建对应的本地方法栈，那么Java虚拟机将会抛出一个 <code>outOfMemoryError</code> 异常。</li></ul><p>本地方法是使用C语言实现的。</p><p>它的具体做法是Native Method Stack中登记native方法，在Execution Engine 执行时加载本地方法库。</p><p><strong>当某个线程调用一个本地方法时，它就进入了一个全新的并且不再受虚拟机限制的世界。它和虚拟机拥有同样的权限</strong>。</p><ul><li>➢ 本地方法可以通过本地方法接口来<strong>访问虚拟机内部的运行时数据区</strong>。</li><li>➢ 它甚至可以直接使用本地处理器中的寄存器</li><li>➢ 直接从本地内存的堆中分配任意数量的内存。</li></ul><p>● <strong>并不是所有的JVM都支持本地方法。因为Java虚拟机规范并没有明确要求本地方法栈的使用语言、具体实现方式、数据结构等</strong>。如果JVM产品不打算支持native方法，也可以无需实现本地方法栈。</p><p>● 在Hotspot JVM中，直接将本地方法栈和虚拟机栈合二为一。</p>]]></content>
    
    
    <summary type="html">&lt;ul&gt;
&lt;li&gt;1 虚拟机栈概述&lt;/li&gt;
&lt;li&gt;2 栈的存储单位&lt;/li&gt;
&lt;li&gt;3 局部变量表&lt;/li&gt;
&lt;li&gt;4 操作数栈&lt;/li&gt;
&lt;li&gt;5 代码追踪&lt;/li&gt;
&lt;li&gt;6 栈顶缓存技术&lt;/li&gt;
&lt;li&gt;7 动态链接&lt;/li&gt;
&lt;li&gt;8 方法的调用:解析与分派&lt;/li&gt;
&lt;li&gt;9 方法返回地址&lt;/li&gt;
&lt;li&gt;10 一些附加信息&lt;/li&gt;
&lt;li&gt;11 栈的相关面试题&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    
    <category term="Java" scheme="https://xiaoyan94.github.io/tags/Java/"/>
    
    <category term="JVM" scheme="https://xiaoyan94.github.io/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>JVM 02 运行时数据区概述及线程、程序计数器</title>
    <link href="https://xiaoyan94.github.io/2020/07/05/JVM-02/"/>
    <id>https://xiaoyan94.github.io/2020/07/05/JVM-02/</id>
    <published>2020-07-05T06:32:53.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="JVM内存布局及Java线程、PC寄存器"><a href="#JVM内存布局及Java线程、PC寄存器" class="headerlink" title="JVM内存布局及Java线程、PC寄存器"></a>JVM内存布局及Java线程、PC寄存器</h2><h3 id="JVM内存划分"><a href="#JVM内存划分" class="headerlink" title="JVM内存划分"></a>JVM内存划分</h3><p>内存是非常重要的系统资源，是硬盘和CPU的中间仓库及桥梁，承载着操作系统和应用程序的实时运行。JVM内存布局规定了JAVA在运行过程中内存申请、分配、管理的策略，保证了JVM的高效稳定运行。<strong>不同的JVM对于内存的划分方式和管理机制存在着部分差异</strong>。</p><a id="more"></a><p>Java虚拟机定义了若干种程序运行期间会使用到的运行时数据区，其中有一些会随着虚拟机启动而创建，随着虚拟机退出而销毁。另外一些则是与线程一一对应的，这些与线程对应的数据区域会随着线程开始和结束而创建和销毁。</p><p>如图，灰色的区域为单独线程私有的，红色的为多个线程共享的，即</p><ul><li>➢ 每个线程: 独立包括程序计数器、栈、本地栈。</li><li>➢ 线程间共享: 堆、堆外内存(永久代或元空间、代码缓存)</li></ul><p>一般来说，jvm优化95%是优化堆区，5%优化的是方法区，至于栈区无非是 出栈入栈操作优化较少。</p><p><img src="/2020/07/05/JVM-02/JVM%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%801.png" alt="JVM内存布局1"></p><p>Every Java application has a single instance of class Runtime that allows the application to interface with theenvironment in which the application is running. The current runtime can be obtained from the getRuntime method.<br>每个Java应用程序都有一个Runtime类的实例（单例），该实例允许该应用程序与运行该应用程序的环境进行交互。 当前运行时可以从getRuntime方法获得。</p><p><img src="/2020/07/05/JVM-02/JVM%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%802.png" alt="JVM内存划分（阿里）JDK8以后版本"></p><h3 id="Java线程"><a href="#Java线程" class="headerlink" title="Java线程"></a>Java线程</h3><ul><li>线程是一个程序里的运行单元，JVM允许一个程序有多个线程并行的执行；</li><li>在HotSpot JVM，每个线程都与操作系统的本地线程直接映射。<ul><li>当一个java线程准备好执行以后，此时一个操作系统的本地线程也同时创建。java线程执行终止后。本地线程也会回收。</li></ul></li><li>操作系统负责所有线程的安排调度到任何一个可用的CPU上。一旦本地线程初始化成功，它就会调用java线程中的run()方法。</li></ul><p>如果你使用jconsole或者任何一个调试工具，都能看到在后台有许多线程在运行。这些后台线程不包括调用main方法的main线程以及所有这个main线程自己创建的线程。</p><p>这些主要的后台系统线程在HotSpot JVM里主要是以下几个：</p><ul><li>虚拟机线程：这种线程的操作时需要JVM达到安全点才会出现。这些操作必须在不同的线程中发生的原因是他们都需要JVM达到安全点，这样堆才不会变化。这种线程的执行包括“stop-the-world”的垃圾收集，线程栈收集，线程挂起以及偏向锁撤销</li><li>周期任务线程：这种线程是时间周期事件的提现（比如中断），他们一般用于周期性操作的调度执行。</li><li>GC线程：这种线程对于JVM里不同种类的垃圾收集行为提供了支持</li><li>编译线程：这种线程在运行时会降字节码编译成本地代码</li><li>信号调度线程：这种线程接收信号并发送给JVM,在它内部通过调用适当的方法进行处理。</li></ul><hr><h2 id="程序计数器（PC寄存器）"><a href="#程序计数器（PC寄存器）" class="headerlink" title="程序计数器（PC寄存器）"></a>程序计数器（PC寄存器）</h2><h3 id="1-PC-Register介绍"><a href="#1-PC-Register介绍" class="headerlink" title="1 PC Register介绍"></a>1 PC Register介绍</h3><p><img src="/2020/07/05/JVM-02/PC%E8%AE%A1%E6%95%B0%E5%99%A81.png" alt="PC Register"></p><p>JVM中的程序计数寄存器(Program Counter Register) 中，(Register 的命名源于CPU的寄存器)，寄存器存储指令相关的现场信息。CPU只有把数据装载到寄存器才能够运行。</p><p>这里，并非是广义上所指的物理寄存器，或许将其翻译为PC计数器(或指令计数器)会更加贴<br>切(也称为程序钩子)，并且也不容易引起一些不必要的误会。<strong>JVM中的PC寄存器是对物理PC<br>寄存器的一种抽象模拟。</strong></p><p><img src="/2020/07/05/JVM-02/PC%E8%AE%A1%E6%95%B0%E5%99%A82.png" alt="程序计数器"></p><p><strong>作用:</strong><br>PC寄存器用来存储指向下一条指令的地址, 也即 将要执行的指令代码。由执行引擎读取下一条指令。</p><p>● 它是一块很小的内存空间，几乎可以忽略不记。也是运行速度最快的存储区域。</p><p>● 在JVM规范中，每个线程都有它自己的程序计数器，是线程私有的，生命周期与线程的生命周期保持一致。</p><p>● 任何时间一个线程都只有一个方法在执行，也就是所谓的当前方法。程序计数器会存储当前线程正在执行的Java方法的JVM指令地址; 或者，如果是在执行native方法，则是未指定值(undefined) 。</p><p>● 它是程序控制流的指示器，分支、循环、跳转、异常处理、线程恢复等基础功能都需要依赖这个计数器来完成。</p><p>● 字节码解释器工作时就是通过改变这个计数器的值来选取下–条需要执行的字节码指令。</p><p>● 它是唯一一个在Java虚拟机规范中没有规定任何OutOfMemoryError情况的区域。</p><h3 id="2-举例说明"><a href="#2-举例说明" class="headerlink" title="2 举例说明"></a>2 举例说明</h3><p>PCRegisterTest.java</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shkstart</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2020 下午 6:46</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PCRegisterTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">20</span>;</span><br><span class="line">        <span class="keyword">int</span> k = i + j;</span><br><span class="line"></span><br><span class="line">        String s = <span class="string">"abc"</span>;</span><br><span class="line">        System.out.println(i);</span><br><span class="line">        System.out.println(k);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>反编译字节码文件PCRegisterTest.class</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">✘  yan  ~/Documents/JVMDemo/out/production/chapter04/com/atguigu/java  javap -v PCRegisterTest<span class="class">.<span class="keyword">class</span></span></span><br><span class="line"><span class="class"><span class="title">Classfile</span> /<span class="title">Users</span>/<span class="title">yan</span>/<span class="title">Documents</span>/<span class="title">JVMDemo</span>/<span class="title">out</span>/<span class="title">production</span>/<span class="title">chapter04</span>/<span class="title">com</span>/<span class="title">atguigu</span>/<span class="title">java</span>/<span class="title">PCRegisterTest</span>.<span class="title">class</span></span></span><br><span class="line"><span class="class">  <span class="title">Last</span> <span class="title">modified</span> 2020年7月5日</span>; size <span class="number">675</span> bytes</span><br><span class="line">  SHA-<span class="number">256</span> checksum <span class="number">6</span>d6064bc667d30ba9df207ccebde55ddbd06ff1e10082daf6379a03eae51bfa2</span><br><span class="line">  Compiled from <span class="string">"PCRegisterTest.java"</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">atguigu</span>.<span class="title">java</span>.<span class="title">PCRegisterTest</span></span></span><br><span class="line">  minor version: 0</span><br><span class="line">  major version: <span class="number">52</span></span><br><span class="line">  flags: (<span class="number">0x0021</span>) ACC_PUBLIC, ACC_SUPER</span><br><span class="line">  this_class: #5                          // com/atguigu/java/PCRegisterTest</span><br><span class="line">  super_class: #6                         // java/lang/Object</span><br><span class="line">  interfaces: <span class="number">0</span>, fields: <span class="number">0</span>, methods: <span class="number">2</span>, attributes: <span class="number">1</span></span><br><span class="line">Constant pool:</span><br><span class="line">   #1 = Methodref          #6.#26         // java/lang/Object."&lt;init&gt;":()V</span><br><span class="line">   #2 = String             #27            // abc</span><br><span class="line">   #3 = Fieldref           #28.#29        // java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">   #4 = Methodref          #30.#31        // java/io/PrintStream.println:(I)V</span><br><span class="line">   #5 = Class              #32            // com/atguigu/java/PCRegisterTest</span><br><span class="line">   #6 = Class              #33            // java/lang/Object</span><br><span class="line">   #7 = Utf8               &lt;init&gt;</span><br><span class="line">   #8 = Utf8               ()V</span><br><span class="line">   #9 = Utf8               Code</span><br><span class="line">  #10 = Utf8               LineNumberTable</span><br><span class="line">  #11 = Utf8               LocalVariableTable</span><br><span class="line">  #12 = Utf8               this</span><br><span class="line">  #13 = Utf8               Lcom/atguigu/java/PCRegisterTest;</span><br><span class="line">  #14 = Utf8               main</span><br><span class="line">  #15 = Utf8               ([Ljava/lang/String;)V</span><br><span class="line">  #16 = Utf8               args</span><br><span class="line">  #17 = Utf8               [Ljava/lang/String;</span><br><span class="line">  #18 = Utf8               i</span><br><span class="line">  #19 = Utf8               I</span><br><span class="line">  #20 = Utf8               j</span><br><span class="line">  #21 = Utf8               k</span><br><span class="line">  #22 = Utf8               s</span><br><span class="line">  #23 = Utf8               Ljava/lang/String;</span><br><span class="line">  #24 = Utf8               SourceFile</span><br><span class="line">  #25 = Utf8               PCRegisterTest.java</span><br><span class="line">  #26 = NameAndType        #7:#8          // "&lt;init&gt;":()V</span><br><span class="line">  #27 = Utf8               abc</span><br><span class="line">  #28 = Class              #34            // java/lang/System</span><br><span class="line">  #29 = NameAndType        #35:#36        // out:Ljava/io/PrintStream;</span><br><span class="line">  #30 = Class              #37            // java/io/PrintStream</span><br><span class="line">  #31 = NameAndType        #38:#39        // println:(I)V</span><br><span class="line">  #32 = Utf8               com/atguigu/java/PCRegisterTest</span><br><span class="line">  #33 = Utf8               java/lang/Object</span><br><span class="line">  #34 = Utf8               java/lang/System</span><br><span class="line">  #35 = Utf8               out</span><br><span class="line">  #36 = Utf8               Ljava/io/PrintStream;</span><br><span class="line">  #37 = Utf8               java/io/PrintStream</span><br><span class="line">  #38 = Utf8               println</span><br><span class="line">  #39 = Utf8               (I)V</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> com.atguigu.java.PCRegisterTest();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: (<span class="number">0x0001</span>) ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         1: invokespecial #1                  // Method java/lang/Object."&lt;init&gt;":()V</span><br><span class="line">         <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">7</span>: <span class="number">0</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">5</span>     <span class="number">0</span>  <span class="keyword">this</span>   Lcom/atguigu/java/PCRegisterTest;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(java.lang.String[])</span></span>;</span><br><span class="line">    descriptor: ([Ljava/lang/String;)V</span><br><span class="line">    flags: (<span class="number">0x0009</span>) ACC_PUBLIC, ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">5</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: bipush        <span class="number">10</span></span><br><span class="line">         <span class="number">2</span>: istore_1</span><br><span class="line">         <span class="number">3</span>: bipush        <span class="number">20</span></span><br><span class="line">         <span class="number">5</span>: istore_2</span><br><span class="line">         <span class="number">6</span>: iload_1</span><br><span class="line">         <span class="number">7</span>: iload_2</span><br><span class="line">         <span class="number">8</span>: iadd</span><br><span class="line">         <span class="number">9</span>: istore_3</span><br><span class="line">        10: ldc           #2                  // String abc</span><br><span class="line">        <span class="number">12</span>: astore        <span class="number">4</span></span><br><span class="line">        14: getstatic     #3                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">        <span class="number">17</span>: iload_1</span><br><span class="line">        18: invokevirtual #4                  // Method java/io/PrintStream.println:(I)V</span><br><span class="line">        21: getstatic     #3                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">        <span class="number">24</span>: iload_3</span><br><span class="line">        25: invokevirtual #4                  // Method java/io/PrintStream.println:(I)V</span><br><span class="line">        <span class="number">28</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">10</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">11</span>: <span class="number">3</span></span><br><span class="line">        line <span class="number">12</span>: <span class="number">6</span></span><br><span class="line">        line <span class="number">14</span>: <span class="number">10</span></span><br><span class="line">        line <span class="number">15</span>: <span class="number">14</span></span><br><span class="line">        line <span class="number">16</span>: <span class="number">21</span></span><br><span class="line">        line <span class="number">18</span>: <span class="number">28</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>      <span class="number">29</span>     <span class="number">0</span>  args   [Ljava/lang/String;</span><br><span class="line">            <span class="number">3</span>      <span class="number">26</span>     <span class="number">1</span>     i   I</span><br><span class="line">            <span class="number">6</span>      <span class="number">23</span>     <span class="number">2</span>     j   I</span><br><span class="line">           <span class="number">10</span>      <span class="number">19</span>     <span class="number">3</span>     k   I</span><br><span class="line">           <span class="number">14</span>      <span class="number">15</span>     <span class="number">4</span>     s   Ljava/lang/String;</span><br><span class="line">&#125;</span><br><span class="line">SourceFile: <span class="string">"PCRegisterTest.java"</span></span><br></pre></td></tr></table></figure></div><hr><p><img src="/2020/07/05/JVM-02/PC%E8%AE%A1%E6%95%B0%E5%99%A83.png" alt="理解PC计数器"></p><h3 id="3-两个面试常见问题"><a href="#3-两个面试常见问题" class="headerlink" title="3 两个面试常见问题"></a>3 两个面试常见问题</h3><p><strong>（一） 使用PC寄存器存储字节码指令地址有什么用呢</strong>?<br>或者说<br><strong>为什么使用PC寄存器记录当前线程的执行地址呢</strong>?</p><p>因为CPU需要不停的切换各个线程，这时候切换回来以后，就得知道接着从哪开始继续执行。<br>JVM的字节码解释器就需要通过改变PC寄存器的值来明确下一条应该执行什么样的字节码指令。</p><p><strong>（二） PC寄存器为什么会被设定为线程私有</strong>?</p><p>我们都知道所谓的多线程在一个特定的时间段内只会执行其中某一个线程的方法， CPU会不停地做任务切换，这样必然导致经常中断或恢复，如何保证分毫无差呢? <strong>为了能够准确地记录各个线程正在执行的当前字节码指令地址，最好的办法自然是为每一个线程都分配一个PC寄存器</strong>，这样一来各个线程之间便可以进行独立计算，从而不会出现相互干扰的情况。</p><p>由于CPU时间片轮限制，众多线程在并发执行过程中，任何一个确定的时刻，一个处理器或者多核处理器中的一个内核，只会执行某个线程中的一条指令。</p><p>这样必然导致经常中断或恢复，如何保证分毫无差呢? 每个线程在创建后，都会产生自己的程序计数器和栈帧，程序计数器在各个线程之间互不影响。</p><hr><p>CPU时间片</p><p>CPU时间片即CPU分配给各个程序的时间，每个线程被分配一个时间段，称作它的时间片。</p><p>在宏观上:我们可以同时打开多个应用程序，每个程序并行不悖，同时运行。</p><p>但在微观上:由于只有一个CPU，一次只能处理程序要求的一部分，如何处理公平，一种方法就是引入时间片，每个程序轮流执行。</p><hr>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;JVM内存布局及Java线程、PC寄存器&quot;&gt;&lt;a href=&quot;#JVM内存布局及Java线程、PC寄存器&quot; class=&quot;headerlink&quot; title=&quot;JVM内存布局及Java线程、PC寄存器&quot;&gt;&lt;/a&gt;JVM内存布局及Java线程、PC寄存器&lt;/h2&gt;&lt;h3 id=&quot;JVM内存划分&quot;&gt;&lt;a href=&quot;#JVM内存划分&quot; class=&quot;headerlink&quot; title=&quot;JVM内存划分&quot;&gt;&lt;/a&gt;JVM内存划分&lt;/h3&gt;&lt;p&gt;内存是非常重要的系统资源，是硬盘和CPU的中间仓库及桥梁，承载着操作系统和应用程序的实时运行。JVM内存布局规定了JAVA在运行过程中内存申请、分配、管理的策略，保证了JVM的高效稳定运行。&lt;strong&gt;不同的JVM对于内存的划分方式和管理机制存在着部分差异&lt;/strong&gt;。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Java" scheme="https://xiaoyan94.github.io/tags/Java/"/>
    
    <category term="JVM" scheme="https://xiaoyan94.github.io/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>JVM 01 类加载器及类加载过程</title>
    <link href="https://xiaoyan94.github.io/2020/07/03/JVM-01/"/>
    <id>https://xiaoyan94.github.io/2020/07/03/JVM-01/</id>
    <published>2020-07-03T08:13:14.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述类的加载器及类加载过程"><a href="#概述类的加载器及类加载过程" class="headerlink" title="概述类的加载器及类加载过程"></a>概述类的加载器及类加载过程</h2><ul><li>类的加载过程一： Loading 加载</li><li>类的加载过程二： Linking 链接<ul><li>Verification 验证</li><li>Preparation 准备</li><li>Resolution 解析</li></ul></li><li>类的加载过程三： Initialization 初始化</li></ul><a id="more"></a><h3 id="概述类的加载器"><a href="#概述类的加载器" class="headerlink" title="概述类的加载器"></a>概述类的加载器</h3><p><img src="/2020/07/03/JVM-01/JVM.png" alt="JVM"></p><p>Java环境： Java 8</p><h4 id="类加载器子系统作用"><a href="#类加载器子系统作用" class="headerlink" title="类加载器子系统作用"></a>类加载器子系统作用</h4><ul><li>类加载器子系统负责从文件系统或者网络中加载Class文件，class文件在文件开头有特定的文件标识。</li><li>ClassLoader只负责class文件的加载，至于它是否可以运行，则由Execution Engine决定。</li><li>加载的类信息存放于一块称为方法区的内存空间。除了类的信息外，方法区中还会存放运行时常量池信息，可能还包括字符串字面量和数字常量(这部分常量信息是Class文件中常量池部分的内存映射)</li></ul><h4 id="类加载器ClassLoader角色"><a href="#类加载器ClassLoader角色" class="headerlink" title="类加载器ClassLoader角色"></a>类加载器ClassLoader角色</h4><ol><li>class file 存在于本地硬盘上，可以理解为设计师画在纸上的模板，而最终这个模板在执行的时候是要加载到JVM当中来根据这个文件实例化出n个一模一样的实例。</li><li>class file 加载到JVM中,被称为DNA元数据模板,放在方法区。</li><li>在.class文件-&gt; JVM -&gt;最终成为元数据模板,此过程就要一个运输工具(类装载器Class Loader) ,扮演一个快递员的角色。</li></ol><h3 id="类的加载过程"><a href="#类的加载过程" class="headerlink" title="类的加载过程"></a>类的加载过程</h3><ul><li>Loading 加载</li><li>Linking 链接<ul><li>Verification 验证</li><li>Preparation 准备</li><li>Resolution 解析</li></ul></li><li>Initialization 初始化</li></ul><h4 id="加载"><a href="#加载" class="headerlink" title="加载"></a>加载</h4><ol><li>通过一个类的全限定名获取定义此类的二进制字节流</li><li>将这个字节流所代表的静态存储结构转化为方法区的运行时数据结构</li><li>在内存中生成一个代表这个类的java.lang.Class对象，作为方法区这个类的各种数据的访问入口</li></ol><p>补充:加载.class 文件的方式</p><ul><li>从本地系统中直接加载</li><li>通过网络获取，典型场景: Web Applet</li><li>从zip压缩包中读取，成为日后jar、war格式的基础</li><li>运行时计算生成，使用最多的是:动态代理技术</li><li>由其他文件生成，典型场景: JSP应用</li><li>从专有数据库中提取.class文件，比较少见</li><li>从加密文件中获取，典型的防Class文件被反编译的保护措施</li></ul><h4 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h4><p>验证(Verify) :</p><ul><li>目的在于确保Class文件的字节流中包含信息符合当前虚拟机要求，保证被加载类的正确性，不会危害虚拟机自身安全。</li><li>主要包括四种验证，文件格式验证，元数据验证，字节码验证，符号引用验证。</li></ul><p>准备(Prepare) :</p><ul><li>为类变量分配内存并且设置该类变量的默认初始值，即零值。</li><li>这里不包含用final修饰的static,因为final在编译的时候就会分配了，准备阶段会显式初始化;</li><li>这里不会为实例变量分配初始化，类变量会分配在方法区中，而实例变量是会随着对象一起分配到Java堆中。</li></ul><p>解析(Resolve) :</p><ul><li>将常量池内的符号引用转换为直接引用的过程。</li><li>事实上，解析操作往往会伴随着JVM在执行完初始化之后再执行。</li><li>符号引用就是一组符号来描述所引用的目标。符号引用的字面量形式明确定义在《java虚拟机规范》的Class文件格式中。直接引用就是直接指向目标的指针、相对偏移量或一个间接定位到目标的句柄。</li><li>解析动作主要针对类或接口、字段、类方法、接口方法、方法类型等。对应常量池中的 CONSTANT_Class_info、 CONSTANT_Fieldref_info、 CONSTANT_Methodref_info等 。</li></ul><h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><ul><li><strong>初始化阶段就是执行类构造器方法&lt;clinit&gt;()的过程。</strong></li><li>此方法不需定义，是javac编译器自动收集类中的所有类变量的赋值动作和静态代码块中的语句合并而来。</li><li>构造器方法中指令按语句在源文件中出现的顺序执行。</li><li><strong>&lt;clinit&gt;()不同于类的构造器。(关联:构造器是虚拟机视角下的&lt;init&gt;())</strong></li><li>若该类具有父类，JVM会保证子类的&lt;clinit&gt;()执行前，父类的&lt;clinit&gt;()已经执行完毕。</li><li>虚拟机必须保证一个类的&lt;clinit&gt;()方法在多线程下被同步加锁。</li></ul><hr><h4 id="相关代码"><a href="#相关代码" class="headerlink" title="相关代码"></a>相关代码</h4><p>ClassInitTest.java</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassInitTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> num = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        num = <span class="number">2</span>;</span><br><span class="line">        number = <span class="number">20</span>;</span><br><span class="line">        <span class="comment">// System.out.println(num); //不会报错</span></span><br><span class="line">        <span class="comment">// System.out.println(number);// 报错，非法的前向引用 Illegal forward reference</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> number = <span class="number">10</span>; <span class="comment">//linking之prepare: number = 0 --&gt; initial: 20 --&gt; 10</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(ClassInitTest.num);<span class="comment">//2</span></span><br><span class="line">        System.out.println(ClassInitTest.number);<span class="comment">//10</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ClassInitTest.class</p><p>字节码文件：Method - &lt;clinit&gt; -  code</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">0</span> iconst_1</span><br><span class="line"> 1 putstatic #3 &lt;com/example/java/ClassInitTest.num&gt;</span><br><span class="line"> <span class="number">4</span> iconst_2</span><br><span class="line"> 5 putstatic #3 &lt;com/example/java/ClassInitTest.num&gt;</span><br><span class="line"> <span class="number">8</span> bipush <span class="number">20</span></span><br><span class="line">10 putstatic #5 &lt;com/example/java/ClassInitTest.number&gt;</span><br><span class="line"><span class="number">13</span> bipush <span class="number">10</span></span><br><span class="line">15 putstatic #5 &lt;com/example/java/ClassInitTest.number&gt;</span><br><span class="line"><span class="number">18</span> <span class="keyword">return</span></span><br></pre></td></tr></table></figure></div><hr><p>ClinitTest.java</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClinitTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">//任何一个类声明以后，内部至少存在一个类的构造器</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> c = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> b = <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ClinitTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        a = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> d = <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ClinitTest.class</p><p>字节码文件：Method - &lt;clinit&gt; -  code</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> iconst_3</span><br><span class="line">1 putstatic #3 &lt;com/example/java/ClinitTest.c&gt;</span><br><span class="line"><span class="number">4</span> <span class="keyword">return</span></span><br></pre></td></tr></table></figure></div><p>字节码文件：Method - &lt;init&gt; -  code</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> aload_0</span><br><span class="line"> 1 invokespecial #1 &lt;java/lang/Object.&lt;init&gt;&gt;</span><br><span class="line"> <span class="number">4</span> aload_0</span><br><span class="line"> <span class="number">5</span> iconst_1</span><br><span class="line"> 6 putfield #2 &lt;com/example/java/ClinitTest.a&gt;</span><br><span class="line"> <span class="number">9</span> aload_0</span><br><span class="line"><span class="number">10</span> bipush <span class="number">10</span></span><br><span class="line">12 putfield #2 &lt;com/example/java/ClinitTest.a&gt;</span><br><span class="line"><span class="number">15</span> bipush <span class="number">20</span></span><br><span class="line"><span class="number">17</span> istore_1</span><br><span class="line"><span class="number">18</span> <span class="keyword">return</span></span><br></pre></td></tr></table></figure></div><hr><p>多线程，验证 &lt;clinit&gt;() 方法被同步加锁：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeadThreadTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Runnable r = () -&gt; &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">"开始"</span>);</span><br><span class="line">            DeadThread dead = <span class="keyword">new</span> DeadThread();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">"结束"</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(r, <span class="string">"线程1 "</span>);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(r, <span class="string">"线程2 "</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DeadThread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">"初始化当前类"</span>);</span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>程序输出：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">线程1 开始</span><br><span class="line">线程2 开始</span><br><span class="line">线程1 初始化当前类</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 130 (interrupted by signal 2: SIGINT)</span><br></pre></td></tr></table></figure></div><p>或者是</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">线程2 开始</span><br><span class="line">线程1 开始</span><br><span class="line">线程2 初始化当前类</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 130 (interrupted by signal 2: SIGINT)</span><br></pre></td></tr></table></figure></div><hr><h3 id="类加载器的分类"><a href="#类加载器的分类" class="headerlink" title="类加载器的分类"></a>类加载器的分类</h3><ul><li>JVM支持两种类型的类加载器，分别为<strong>引导类加载器 (Bootstrap ClassLoader)</strong> 和<strong>自定义类加载器(User-Defined ClassLoader)</strong> 。</li><li>从概念上来讲，自定义类加载器一般指的是程序中由开发人员自定义的一类类加载器，但是Java虚拟机规范却没有这么定义，而是<strong>将所有派生于抽象类 <code>ClassLoader</code> 的类加载器都划分为自定义类加载器。</strong></li><li>无论类加载器的类型如何划分，在程序中我们最常见的类加载器始终只有3个，如下所示:<ul><li>Bootstrap Class Loader</li><li>Extension Class Loader</li><li>System Class Loader</li><li>User Defined Class Loader</li></ul></li></ul><p>这里的四者之间的关系是包含关系。不是上层下层，也不是子父类的继承关系。</p><hr><p>ClassLoaderTest.java</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassLoaderTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//获取系统类加载器</span></span><br><span class="line">        ClassLoader systemClassLoader = ClassLoader.getSystemClassLoader();</span><br><span class="line">        System.out.println(systemClassLoader);<span class="comment">//sun.misc.Launcher$AppClassLoader@18b4aac2</span></span><br><span class="line">        <span class="comment">//获取其上层: 扩展类加载器</span></span><br><span class="line">        ClassLoader extClassLoader = systemClassLoader.getParent();</span><br><span class="line">        System.out.println(extClassLoader);<span class="comment">//sun.misc.Launcher$ExtClassLoader@1540e19d</span></span><br><span class="line">        <span class="comment">//获取其上层: 获取不到引导类加载器</span></span><br><span class="line">        ClassLoader bootstrapClassLoader = extClassLoader.getParent();</span><br><span class="line">        System.out.println(bootstrapClassLoader);<span class="comment">//null</span></span><br><span class="line">        <span class="comment">//对于用户自定义类来说: 默认使用系统类加载器进行加载</span></span><br><span class="line">        ClassLoader classLoader = ClassLoaderTest<span class="class">.<span class="keyword">class</span>.<span class="title">getClassLoader</span>()</span>;</span><br><span class="line">        System.out.println(classLoader);<span class="comment">//sun.misc.Launcher$AppClassLoader@18b4aac2</span></span><br><span class="line">        <span class="comment">//String类使用引导类加载器进行加载的。---&gt; Java的核心类库都是使用引导类加载器进行加载的。</span></span><br><span class="line">        ClassLoader classLoader1 = String<span class="class">.<span class="keyword">class</span>.<span class="title">getClassLoader</span>()</span>;</span><br><span class="line">        System.out.println(classLoader1);<span class="comment">//null</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>输出：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sun.misc.Launcher$AppClassLoader@<span class="number">18</span>b4aac2</span><br><span class="line">sun.misc.Launcher$ExtClassLoader@<span class="number">61</span>bbe9ba</span><br><span class="line"><span class="keyword">null</span></span><br><span class="line">sun.misc.Launcher$AppClassLoader@<span class="number">18</span>b4aac2</span><br><span class="line"><span class="keyword">null</span></span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure></div><hr><h4 id="虚拟机自带的加载器"><a href="#虚拟机自带的加载器" class="headerlink" title="虚拟机自带的加载器"></a>虚拟机自带的加载器</h4><p>启动类加载器(引导类加载器，Bootstrap ClassLoader)</p><ul><li>➢ 这个类加载使用C&#x2F;C++语言实现的，嵌套在JVM内部。</li><li>➢ 它用来加载Java的核心库( <code>JAVA_ HOME/jre/lib/rt.jar</code> 、<code>resources.jar</code> 或 <code>sun.boot.class.path</code> 路径下的内容) , 用于提供JVM自身需要的类</li><li>➢ 并不继承自 <code>java.lang.ClassLoader</code> ,没有父加载器。</li><li>➢ 加载扩展类和应用程序类加载器，并指定为他们的父类加载器。</li><li>➢ 出于安全考虑，Bootstrap启动类加载器只加载包名为 <code>java、javax、sun</code> 等开头的类</li></ul><p>扩展类加载器(Extension ClassLoader)</p><ul><li>➢ <strong>Java语言编写</strong>，由 <code>sun.misc.Launcher$ExtClassLoader</code> 实现。</li><li>➢ <strong>派生于 <code>ClassLoader</code> 类</strong></li><li>➢ 父类加载器为启动类加载器</li><li>➢ 从 <code>java.ext.dirs</code> 系统属性所指定的目录中加载类库，或从JDK的安装目录的 <code>jre/lib/ext</code> 子目录(扩展目录)下加载类库。如果用户创建的JAR放在此目录下，也会自动由扩展类加载器加载。</li></ul><p>应用程序类加载器(系统类加载器，AppClassLoader)</p><ul><li>➢ java语言编写，由 <code>sun.misc.Launcher$AppClassLoader</code> 实现</li><li>➢ 派生于 <code>ClassLoader</code> 类</li><li>➢ 父类加载器为扩展类加载器</li><li>➢ 它负责加载环境变量classpath或系统属性 <code>java.class.path</code> 指定路径下的类库</li><li>➢ <strong>该类加载是程序中默认的类加载器</strong>，一般来说，Java应用的类都是由它来完成加载</li><li>➢ 通过 <code>ClassLoader#getSystemClassLoader()</code> 方法可以获取到该类加载器</li></ul><hr><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.security.Provider;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassLoaderTest1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"******启动类加載器*******"</span>);</span><br><span class="line">        <span class="comment">//荻取BootstrapClassLoader能够加栽的api的路径</span></span><br><span class="line">        URL[] urLs = sun.misc.Launcher.getBootstrapClassPath().getURLs();</span><br><span class="line">        <span class="keyword">for</span> (URL element : urLs) &#123;</span><br><span class="line">            System.out.println(element.toExternalForm());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//从上面的路径中随意选择一个美, 来看看他的类加載器是什么:</span></span><br><span class="line">        ClassLoader classLoader = Provider<span class="class">.<span class="keyword">class</span>.<span class="title">getClassLoader</span>()</span>;</span><br><span class="line">        System.out.println(classLoader); <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"******扩展类加載器******"</span>);</span><br><span class="line">        String extDirs = System.getProperty(<span class="string">"java.ext.dirs"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// macOS下环境变量的分隔符是:</span></span><br><span class="line">        <span class="comment">// Windows下分隔符是;</span></span><br><span class="line">        <span class="keyword">for</span> (String path : extDirs.split(<span class="string">":"</span>)) &#123;</span><br><span class="line">            System.out.println(path);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//从上面的路径中随意选择一个类，来看看他的类加载器是什么:扩展类加载器</span></span><br><span class="line">        ClassLoader classLoader1 = CurveDB<span class="class">.<span class="keyword">class</span>.<span class="title">getClassLoader</span>()</span>;</span><br><span class="line">        System.out.println(classLoader1);<span class="comment">//sun.misc.Launcher$ExtClassLoader@1540e19d</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>输出：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">******启动类加載器*******</span><br><span class="line">file:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/resources.jar</span><br><span class="line">file:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/rt.jar</span><br><span class="line">file:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/sunrsasign.jar</span><br><span class="line">file:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/jsse.jar</span><br><span class="line">file:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/jce.jar</span><br><span class="line">file:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/charsets.jar</span><br><span class="line">file:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/jfr.jar</span><br><span class="line">file:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/classes</span><br><span class="line">null</span><br><span class="line">******扩展类加載器******</span><br><span class="line">/Users/yan/Library/Java/Extensions</span><br><span class="line">/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/ext</span><br><span class="line">/Library/Java/Extensions</span><br><span class="line">/Network/Library/Java/Extensions</span><br><span class="line">/System/Library/Java/Extensions</span><br><span class="line">/usr/lib/java</span><br><span class="line">sun.misc.Launcher<span class="variable">$ExtClassLoader</span>@355da254</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 0</span><br></pre></td></tr></table></figure></div><hr><h4 id="用户自定义类加载器"><a href="#用户自定义类加载器" class="headerlink" title="用户自定义类加载器"></a>用户自定义类加载器</h4><ul><li>在Java的日常应用程序开发中，类的加载几乎是由上述3种类加载器相互配合执行的，在必要时，我们还可以自定义类加载器，来定制类的加载方式。</li><li>为什么要自定义类加载器?<ul><li>➢ 隔离加载类</li><li>➢ 修改类加载的方式</li><li>➢ 扩展加载源</li><li>➢ 防止源码泄漏</li></ul></li></ul><p>用户自定义类加载器实现步骤:</p><ol><li>开发人员可以通过继承抽象类 <code>java.lang.ClassLoader</code> 类的方式，实现自己的类加载器，以满足一些特殊的需求</li><li>在JDK1.2之前，在自定义类加载器时，总会去继承 <code>ClassLoader</code> 类并重写 <code>loadClass()</code> 方法，从而实现自定义的类加载类，但是在JDK1.2之后已不再建议用户去覆盖 <code>loadClass()</code> 方法，而是建议把自定义的类加载逻辑写在 <code>findClass()</code> 方法中</li><li>在编写自定义类加载器时，如果没有太过于复杂的需求，可以直接继承 <code>URLClassLoader</code> 类，这样就可以避免自己去编写 <code>findClass()</code> 方法及其获取字节码流的方式，使自定义类加载器编写更加简洁。</li></ol><hr><p>手写自定义类加载器：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomClassLoader</span> <span class="keyword">extends</span> <span class="title">ClassLoader</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt; findClass(String name) <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">byte</span>[] result = getClassFromCustomPath(name);</span><br><span class="line">            <span class="keyword">if</span> (result == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> FileNotFoundException();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> defineClass(name, result, <span class="number">0</span>, result.length); <span class="comment">//</span></span><br><span class="line">                <span class="comment">// findClass和defineClass配合使用</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ClassNotFoundException(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[] getClassFromCustomPath(String name) &#123;</span><br><span class="line">        <span class="comment">//从自定义路径中加载指定类:细节略</span></span><br><span class="line">        <span class="comment">//如果指定路径的字节码文件进行了加密，则需要在此方法中进行解密操作。</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><hr><p>ClassLoader类， 它是一个抽象类，其后所有的类加载器都继承自 ClassLoader (不包括启动类加载器)</p><blockquote><table><thead><tr><th>方法名称</th><th>描述</th></tr></thead><tbody><tr><td>getParent()</td><td>返回该类加载器的超类加载器</td></tr><tr><td>loadClass(String name)</td><td>加载名称为name的类，返回结果为 <code>java.lang.Class</code> 类的实例</td></tr><tr><td>findClass(String name)</td><td>查找名称为name的类，返回结果为 <code>java.lang.Class</code> 类的实例</td></tr><tr><td>findLoadedClass(String name)</td><td>查找名称为name的已经被加载过的类，返回结果为 <code>java.lang.Class</code> 类的实例</td></tr><tr><td>defineClass(String name, byte[] b, int off, int len)</td><td>把字节数组b中的内容转换为一个Java类，返回结果为 <code>java.lang.Class</code> 类的实例</td></tr><tr><td>resolveClass(Class&lt;?&gt; c)</td><td>连接指定的一个Java类</td></tr></tbody></table></blockquote><p>获取ClassLoader的途径</p><table><thead><tr><th>方式</th><th>方法</th></tr></thead><tbody><tr><td>方式一: 获取当前类的ClassLoader</td><td>clazz.getClassLoader()</td></tr><tr><td>方式二: 获取当前线程上下文的ClassLoader</td><td>Thread.currentThread().getContextClassLoader()</td></tr><tr><td>方式三: 获取系统的ClassLoader</td><td>ClassLoader.getSystemClassLoader()</td></tr><tr><td>方式四: 获取调用者的ClassLoader</td><td>DriverManager.getCallerClassLoader()</td></tr></tbody></table><h4 id="🌿-双亲委派机制"><a href="#🌿-双亲委派机制" class="headerlink" title="🌿 双亲委派机制"></a>🌿 双亲委派机制</h4><p>Java虚拟机对class文件采用的是<strong>按需加载</strong>的方式，也就是说当需要使用该类时才会将它的class文件加载到内存生成class对象。而且加载某个类的class文件时，Java虛拟机采用的是<strong>双亲委派模式</strong>，即把请求交由父类处理，它是一种任务委派模式。</p><p>● 工作原理</p><ol><li>如果一个类加载器收到了类加载请求，它并不会自己先去加载，而是把这个请求委托给父类的加载器去执行;</li><li>如果父类加载器还存在其父类加载器，则进一步向上委托，依次递归，请求最终将到达项层的启动类加载器;</li><li>如果父类加载器可以完成类加载任务，就成功返回，倘若父类加载器无法完成此加载任务，子加载器才会尝试自己去加载，这就是双亲委派模式。</li></ol><hr><p>双亲委派机制举例：自己手写一个String类放在自建的java.lang包下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> java.lang;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"我是自定义的String类的静态代码块"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"hello,String"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>运行，输出：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">错误: 在类 java.lang.String 中找不到 main 方法, 请将 main 方法定义为:</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">否则 JavaFX 应用程序类必须扩展javafx.application.Application</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">Process finished with exit code 1</span></span><br></pre></td></tr></table></figure></div><p><em>为什么有以上输出？</em></p><p>由于双亲委派机制，我们自定义的 <code>java.lang.String</code> 类并不是由系统类加载器加载的，而是向上委托给了扩展类加载器又接着向上委托给了启动类加载器进行加载，而启动类加载器加载的是java核心API中的 <code>java.lang.String</code> 类而不是我们自定义的 <code>java.lang.String</code> 类，其中并没有main方法。</p><hr><p>双亲委派机制举例2</p><p>rt.jar SPI（Service Provider Interface）核心类<br>jdbc.jar SPI接口实现类</p><p>rt.jar中的SPI接口调用接口实现类中的方法：</p><ul><li>SPI接口是由引导类加载器（BootstrapClassLoader）加载的</li><li>SPI接口实现类是由线程上下文加载器（ContextClassLoader）加载的，而线程上下文加载器默认为系统类加载器（AppClassLoader）加载的</li></ul><hr><p>● 双亲委派机制 优势</p><ul><li>➢ 避免类的重复加载 （两个必要条件）</li><li>➢ 保护程序安全，防止核心API被随意篡改<ul><li>自定义类: java.lang.String</li><li>自定义类: java.lang.ShkStart<ul><li>java.lang.SecurityException: Prohibited package name; java.lang</li></ul></li></ul></li></ul><p>● 在JVM中 表示两个class对象是否为同一个类存在两个必要条件:</p><ul><li>➢ 类的完整类名必须一致，包括包名。</li><li>➢ 加载这个类的ClassLoader (指ClassLoader实例对象)必须相同。</li></ul><p>换句话说，在JVM中，即使这两个类对象(class对象)来源同一个Class文件，被同一个虚拟机所加载，但只要加载它们的ClassLoader实例对象不同，那么这两个类对象也是不相等的。</p><p>自定义String类，但是在加载自定义String类的时候会率先使用引导类加载器加载，而引导类加载器在加载的过程中会先加载jdk自带的文件(rt.jar包中java\lang\String.class)，报错信息说没有main方法，就是因为加载的是rt.jar包中的String类。这样可以保证对java核心源代码的保护，这就是<strong>沙箱安全机制</strong>。</p><hr><h3 id="对类加载器的引用、类的主动使用和被动使用"><a href="#对类加载器的引用、类的主动使用和被动使用" class="headerlink" title="对类加载器的引用、类的主动使用和被动使用"></a>对类加载器的引用、类的主动使用和被动使用</h3><p>对类加载器的引用：</p><p>JVM必须知道一个类型是由启动加载器加载的还是由用户类加载器加载的。如果一个类型是由用户类加载器加载的，那么JVM会<strong>将这个类加载器的一个引用作为类型信息的一部分保存在方法区中</strong>。当解析一个类型到另一个类型的引用的时候，JVM需要保证这两个类型的类加载器是相同的。</p><p>类的主动使用和被动使用：</p><p><strong>Java程序对类的使用方式分为: 主动使用和被动使用。</strong><br>● 主动使用，又分为七种情况:</p><ul><li>➢ 创建类的实例</li><li>➢ 访问某个类或接口的静态变量，或者对该静态变量赋值</li><li>➢ 调用类的静态方法</li><li>➢ 反射(比如: <code>Class.forName(&quot;com.atguigu.Test&quot;)</code> )</li><li>➢ 初始化一个类的子类</li><li>➢ Java虚拟机启动时被标明为启动类的类</li><li>➢ JDK 7开始提供的动态语言支持:<ul><li><code>java.lang.invoke.MethodHandle</code> 实例的解析结果</li><li><code>REF_getStatic</code>、 <code>REF_putStatic</code>、 <code>REF_invokeStatic</code> 句柄对应的类没有初始化，则初始化</li></ul></li></ul><p>● 除了以上七种情况，其他使用Java类的方式都被看作是<strong>对类的被动使用，都不会导致类的初始化</strong>。</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;概述类的加载器及类加载过程&quot;&gt;&lt;a href=&quot;#概述类的加载器及类加载过程&quot; class=&quot;headerlink&quot; title=&quot;概述类的加载器及类加载过程&quot;&gt;&lt;/a&gt;概述类的加载器及类加载过程&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;类的加载过程一： Loading 加载&lt;/li&gt;
&lt;li&gt;类的加载过程二： Linking 链接&lt;ul&gt;
&lt;li&gt;Verification 验证&lt;/li&gt;
&lt;li&gt;Preparation 准备&lt;/li&gt;
&lt;li&gt;Resolution 解析&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;类的加载过程三： Initialization 初始化&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    
    <category term="Java" scheme="https://xiaoyan94.github.io/tags/Java/"/>
    
    <category term="JVM" scheme="https://xiaoyan94.github.io/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop Mapreduce作业执行过程中报错 this version of the Java Runtime only recognizes class file versions up to 52.0</title>
    <link href="https://xiaoyan94.github.io/2020/06/30/mapreduce-error-version-of-the-Java-Runtime-only-recognizes-class-file-versions-up-to-52/"/>
    <id>https://xiaoyan94.github.io/2020/06/30/mapreduce-error-version-of-the-Java-Runtime-only-recognizes-class-file-versions-up-to-52/</id>
    <published>2020-06-30T08:48:46.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>该错误告诉我们，我们的类是在比尝试运行它的版本更高的Java版本下编译的。 更具体地说，在这种情况下，我们使用Java 11编译了我们的类，并尝试使用Java 8运行它。</p><a id="more"></a><p><strong>问题描述：</strong></p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">20/06/29 09:49:35 INFO mapreduce.Job: Job job_1593438508655_0001 running <span class="keyword">in</span> uber mode : <span class="literal">false</span></span><br><span class="line">20/06/29 09:49:35 INFO mapreduce.Job:  map 0% reduce 0%</span><br><span class="line">20/06/29 09:49:45 INFO mapreduce.Job: Task Id : attempt_1593438508655_0001_m_000000_0, Status : FAILED</span><br><span class="line">Error: com/kumkee/userAgent/UserAgentParser has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0</span><br><span class="line">20/06/29 09:49:51 INFO mapreduce.Job: Task Id : attempt_1593438508655_0001_m_000000_1, Status : FAILED</span><br><span class="line">--&gt;</span><br><span class="line">Error: com/kumkee/userAgent/UserAgentParser has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0</span><br><span class="line">20/06/29 09:49:58 INFO mapreduce.Job: Task Id : attempt_1593438508655_0001_m_000000_2, Status : FAILED</span><br><span class="line">Error: com/kumkee/userAgent/UserAgentParser has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0</span><br><span class="line">20/06/29 09:50:06 INFO mapreduce.Job:  map 100% reduce 100%</span><br><span class="line">20/06/29 09:50:07 INFO mapreduce.Job: Job job_1593438508655_0001 failed with state FAILED due to: Task failed task_1593438508655_0001_m_000000</span><br><span class="line">Job failed as tasks failed. failedMaps:1 failedReduces:0</span><br></pre></td></tr></table></figure></div><p><strong>解决方法：</strong></p><p><a href="https://www.baeldung.com/java-lang-unsupportedclassversion" target="_blank" rel="noopener">参考这篇文章得到</a>：这个错误是因为类com&#x2F;kumkee&#x2F;userAgent&#x2F;UserAgentParser的编译版本与Hadoop服务器本地所用的Java版本不一致，只要重新用支持的版本号去重新编译引入的这个jar包就行了。</p><p>this version of the Java Runtime only recognizes class file versions up to 52.0 表示Java运行时的版本最高支持到52.0，也就是Java 8，因为机器上装的JDK版本就是JDK 1.8的。</p><p>修改报错的类的<code>pom.xml</code>,将编译器的版本数字从原本的11改为8，也就是java8：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.kumkee<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>UserAgentParser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.8.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">maven.compiler.encoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>然后使用maven重新编译安装到本地仓库：<code>mvn clean install</code></p><p>再在Hadoop项目根目录下重新编译项目，将重新用java8编译的jar包包含进来：<code>mvn assembly:assembly</code></p><p>最后将hadoop项目的jar文件重新上传至hadoop服务器即可正常运行。</p><hr><p>关于主版本号和JAVA版本的对应关系如下：</p><table><thead><tr><th>major version</th><th>Java&#x2F;JDK version</th></tr></thead><tbody><tr><td>45</td><td>Java 1.1</td></tr><tr><td>46</td><td>Java 1.2</td></tr><tr><td>47</td><td>Java 1.3</td></tr><tr><td>48</td><td>Java 1.4</td></tr><tr><td>49</td><td>Java 5</td></tr><tr><td>50</td><td>Java 6</td></tr><tr><td>51</td><td>Java 7</td></tr><tr><td>52</td><td>Java 8</td></tr><tr><td>53</td><td>Java 9</td></tr><tr><td>54</td><td>Java 10</td></tr><tr><td>55</td><td>Java 11</td></tr><tr><td>56</td><td>Java 12</td></tr><tr><td>57</td><td>Java 13</td></tr></tbody></table><p>最后，这种错误的意思就是程序的编译使用的版本与运行版本不一致所导致的，使用更高的java版本编译在低版本的java当然不能运行。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Exception <span class="keyword">in</span> thread <span class="string">"main"</span> java.lang.UnsupportedClassVersionError: com/baeldung/MajorMinorApp</span><br><span class="line">  has been compiled by a more recent version of the Java Runtime (class file version 55.0),</span><br><span class="line">  this version of the Java Runtime only recognizes class file versions up to 52.0</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
    <summary type="html">&lt;p&gt;该错误告诉我们，我们的类是在比尝试运行它的版本更高的Java版本下编译的。 更具体地说，在这种情况下，我们使用Java 11编译了我们的类，并尝试使用Java 8运行它。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Hadoop" scheme="https://xiaoyan94.github.io/tags/Hadoop/"/>
    
    <category term="Java" scheme="https://xiaoyan94.github.io/tags/Java/"/>
    
    <category term="Maven" scheme="https://xiaoyan94.github.io/tags/Maven/"/>
    
  </entry>
  
  <entry>
    <title>8088端口能打开但是打不开hadoop job history Tracking UI和日志Logs等页面</title>
    <link href="https://xiaoyan94.github.io/2020/06/30/couldn-t-open-hadoop-job-tracker-webui-because-of-localhost-in-url/"/>
    <id>https://xiaoyan94.github.io/2020/06/30/couldn-t-open-hadoop-job-tracker-webui-because-of-localhost-in-url/</id>
    <published>2020-06-30T07:54:19.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><p><strong>问题描述：</strong></p><p>通过<code>http://ip:8088/</code>能够访问<code>All Applications</code>页面，但是在执行一个application完之后，通过网页中的<code>Tracking UI</code> -&gt; <code>History</code>链接跳转到<code>http://localhost:8088/proxy/application_..._0001/jobhistory/job/job_..._0001</code>,<code>http://localhost:19888/jobhistory</code>页面。但是因为Hadoop服务器是部署在公网的，而8088端口的管理界面中的jobhistory链接和Logs链接、Node链接中的主机名（hostname）都是 localhost 而不是服务器的公网ip地址。</p><p>而且查看Mapreduce执行时终端的日志信息有这么一句：<br><code>INFO mapreduce.Job: The url to track the job: http://localhost:8088/proxy/application_..._0001/</code><br>这说明了jobtracker服务的url地址是服务器本地主机，并不是公网ip，所以job tracker url没能正确被生成。</p><p><strong>解决方法：</strong></p><p>在NameNode节点的服务器上执行<code>netstat -nltp | grep LISTEN</code>命令之后发现几个重要端口如8088、8042等服务监听都正常，试着手动将浏览器url地址中的localhost改成服务器的公网ip地址，发现是能够打开Logs和Job History等页面的。所以推测是在生成jobtracker url的时候将hostname设置成了localhost。</p><p>解决步骤： 在修改了<code>$HADOOP_HOME/etc/hadoop/mapred-site.xml</code> 和 <code>$HADOOP_HOME/etc/hadoop/yarn-site.xml</code> 两个配置文件中的几处address hostname为服务器的公网ip或者域名之后就正常了。<em>注意：不能填0.0.0.0！</em></p><ul><li>$HADOOP_HOME&#x2F;etc&#x2F;hadoop&#x2F;mapred-site.xml</li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>23.105.206.170:10020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>23.105.206.170:19888<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.done-dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>/history/done<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.intermediate-done-dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>/history/done_intermediate<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobtracker.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>23.105.206.170<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></div><ul><li>$HADOOP_HOME&#x2F;etc&#x2F;hadoop&#x2F;yarn-site.xml</li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--开启日志聚合--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation-enable<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">source</span>&gt;</span>yarn-default.xml<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Site specific YARN configuration properties --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.bind-host<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>23.105.206.170<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>23.105.206.170<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>23.105.206.170:8088<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>修改完这两个配置文件之后重启HDFS和YARN服务，再次用<code>hadoop jar</code>执行一个application：<br><code>INFO mapreduce.Job: The url to track the job: http://23.105.206.170.16clouds.com:8088/proxy/application_1593439350379_0001/</code><br>终端输出的日志信息中的jobtracker url从localhost变成了服务器的ip地址或者域名，此时应该就正常了。再次浏览器打开8088 applications页面，发现网页中的所有超链接都正常指向了公网ip或域名。</p><hr><p>默认配置项及配置项说明文件：  </p><ul><li><a href="https://hadoop.apache.org/docs/r2.4.1/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml" target="_blank" rel="noopener">https://hadoop.apache.org/docs/r2.4.1/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml</a></li><li><a href="https://hadoop.apache.org/docs/r2.9.2/hadoop-yarn/hadoop-yarn-common/yarn-default.xml" target="_blank" rel="noopener">https://hadoop.apache.org/docs/r2.9.2/hadoop-yarn/hadoop-yarn-common/yarn-default.xml</a></li></ul>]]></content>
    
    
      
      
    <summary type="html"></summary>
      
    
    
    
    
    <category term="Hadoop" scheme="https://xiaoyan94.github.io/tags/Hadoop/"/>
    
  </entry>
  
  <entry>
    <title>Maven编译报错：[ERROR] 不再支持源选项 5。请使用 7 或更高版本。[ERROR] 不再支持目标选项 5。请使用 7 或更高版本</title>
    <link href="https://xiaoyan94.github.io/2020/06/28/maven-build-error-and-warning/"/>
    <id>https://xiaoyan94.github.io/2020/06/28/maven-build-error-and-warning/</id>
    <published>2020-06-28T09:23:28.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="Maven编译报错：-ERROR-不再支持源选项-5。请使用-7-或更高版本。-ERROR-不再支持目标选项-5。请使用-7-或更高版本"><a href="#Maven编译报错：-ERROR-不再支持源选项-5。请使用-7-或更高版本。-ERROR-不再支持目标选项-5。请使用-7-或更高版本" class="headerlink" title="Maven编译报错：[ERROR] 不再支持源选项 5。请使用 7 或更高版本。[ERROR] 不再支持目标选项 5。请使用 7 或更高版本"></a>Maven编译报错：[ERROR] 不再支持源选项 5。请使用 7 或更高版本。[ERROR] 不再支持目标选项 5。请使用 7 或更高版本</h2><ul><li><p>执行 <code>mvn package -DskipTests</code>, Maven编译报错信息：</p> <div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">✘  yan  ~/data/UserAgentParser   master ●  mvn package -DskipTests</span><br><span class="line">[INFO] Scanning <span class="keyword">for</span> projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ---------------------&lt; com.kumkee:UserAgentParser &gt;---------------------</span><br><span class="line">[INFO] Building User Agent Parser 0.0.1</span><br><span class="line">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class="line">Downloading from central: https://repo.maven.apache.org/maven2/junit/junit/4.8.2/junit-4.8.2.pom</span><br><span class="line">Downloaded from central: https://repo.maven.apache.org/maven2/junit/junit/4.8.2/junit-4.8.2.pom (1.5 kB at 1.3 kB/s)</span><br><span class="line">Downloading from central: https://repo.maven.apache.org/maven2/junit/junit/4.8.2/junit-4.8.2.jar</span><br><span class="line">Downloaded from central: https://repo.maven.apache.org/maven2/junit/junit/4.8.2/junit-4.8.2.jar (237 kB at 204 kB/s)</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ UserAgentParser ---</span><br><span class="line">[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!</span><br><span class="line">[INFO] skip non existing resourceDirectory /Users/yan/data/UserAgentParser/src/main/resources</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ UserAgentParser ---</span><br><span class="line">[INFO] Changes detected - recompiling the module!</span><br><span class="line">[WARNING] File encoding has not been <span class="built_in">set</span>, using platform encoding UTF-8, i.e. build is platform dependent!</span><br><span class="line">[INFO] Compiling 7 <span class="built_in">source</span> files to /Users/yan/data/UserAgentParser/target/classes</span><br><span class="line">[INFO] -------------------------------------------------------------</span><br><span class="line">[ERROR] COMPILATION ERROR :</span><br><span class="line">[INFO] -------------------------------------------------------------</span><br><span class="line">[ERROR] 不再支持源选项 5。请使用 7 或更高版本。</span><br><span class="line">[ERROR] 不再支持目标选项 5。请使用 7 或更高版本。</span><br><span class="line">[INFO] 2 errors</span><br><span class="line">[INFO] -------------------------------------------------------------</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD FAILURE</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  3.573 s</span><br><span class="line">[INFO] Finished at: 2020-06-28T17:16:58+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project UserAgentParser: Compilation failure: Compilation failure:</span><br><span class="line">[ERROR] 不再支持源选项 5。请使用 7 或更高版本。</span><br><span class="line">[ERROR] 不再支持目标选项 5。请使用 7 或更高版本。</span><br><span class="line">[ERROR] -&gt; [Help 1]</span><br><span class="line">[ERROR]</span><br><span class="line">[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.</span><br><span class="line">[ERROR] Re-run Maven using the -X switch to <span class="built_in">enable</span> full debug logging.</span><br><span class="line">[ERROR]</span><br><span class="line">[ERROR] For more information about the errors and possible solutions, please <span class="built_in">read</span> the following articles:</span><br><span class="line">[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException</span><br></pre></td></tr></table></figure></div><blockquote><p>[ERROR] 不再支持源选项 5。请使用 7 或更高版本。<br>  [ERROR] 不再支持目标选项 5。请使用 7 或更高版本。<br>  可以通过设置编译器版本来解决。</p><p>可以看到除了编译Error报错，还有一个[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!，这个只需要设置文件编码即可。</p></blockquote></li><li><p>解决方法：在 <code>pom.xml</code>文件中指定Maven编译所使用的JDK版本：</p> <div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.kumkee<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>UserAgentParser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>User Agent Parser<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.8.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定编译器版本和字符编码 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">maven.compiler.encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">maven.compiler.encoding</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>13<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>13<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>13<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></div></li></ul><p><a href="https://github.com/LeeKemp/UserAgentParser" target="_blank" rel="noopener">https://github.com/LeeKemp/UserAgentParser</a><br>通过<code>git clone</code>或者浏览器下载到本地后，使用命令行进入到其主目录下，然后通过maven命令对其进行打包并安装到本地仓库里：</p><p><code>mvn clean package -DskipTest</code></p><p><code>mvn clean install -DskipTest</code></p><p>安装完成后，在工程pom.xml 中添加依赖：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 添加UserAgent解析的依赖 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.kumkee<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>UserAgentParser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>]]></content>
    
    
      
      
    <summary type="html"></summary>
      
    
    
    
    
    <category term="Maven" scheme="https://xiaoyan94.github.io/tags/Maven/"/>
    
  </entry>
  
  <entry>
    <title>10000_access.log 慕课网用户行为日志文件下载</title>
    <link href="https://xiaoyan94.github.io/2020/06/28/10000-access-log/"/>
    <id>https://xiaoyan94.github.io/2020/06/28/10000-access-log/</id>
    <published>2020-06-28T07:41:36.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="/resources/10000_access.log">点此下载 10000_access.log</a>，使用“右键另存为”保存文件。</p><a id="more"></a><p><img src="/2020/06/28/10000-access-log/10000_access.log.png" alt="10000_access.log.png"></p><p>以上是慕课网 - 10小时入门大数据-第06章 Hadoop项目实战 <a href="/resources/10000_access.log">10000_access.log</a> 文件下载链接。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;a href=&quot;/resources/10000_access.log&quot;&gt;点此下载 10000_access.log&lt;/a&gt;，使用“右键另存为”保存文件。&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>MapReduce用户接口Mapper、Reducer——job的核心</title>
    <link href="https://xiaoyan94.github.io/2020/06/27/MapReduce-Payload-core-of-the-job/"/>
    <id>https://xiaoyan94.github.io/2020/06/27/MapReduce-Payload-core-of-the-job/</id>
    <published>2020-06-27T12:40:01.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="作业的核心"><a href="#作业的核心" class="headerlink" title="作业的核心"></a>作业的核心</h2><p>应用程序通常实现<code>Mapper</code>和<code>Reducer</code>接口以提供<code>map</code>和<code>reduce</code>方法。 这些构成了<code>job</code>（作业）的核心。</p><h3 id="Mapper"><a href="#Mapper" class="headerlink" title="Mapper"></a><code>Mapper</code></h3><p><code>Mapper</code>将输入的键&#x2F;值对<code>key/value</code>映射为一组中间键&#x2F;值对<code>key/value</code>。映射是将输入记录转换为中间记录的单个任务。 转换后的中间记录不必与输入记录具有相同的类型。 给定的输入对可能映射为零或许多输出对。</p><p>Hadoop MapReduce框架为每个InputSplit生成一个map任务。InputSplit是由InputFormat生成的。</p><p>总体而言，<code>Mapper</code> 的实现类要传递给 <code>Job</code> 使用，须调用 <code>Job.setMapperClass(Class)</code> 方法设置job的map函数；然后，MP框架为该任务的 <code>InputSplit</code> 中的每个键&#x2F;值对调用<code>map(WritableComparable,Writable,Context)</code>方法。 然后，应用程序可以重写<code>cleanup(Context)</code>方法来执行任何必需的清理。</p><p><code>map函数</code>的输出对的类型不一定要与输入对的类型一样。 给定的输入对可能 map 映射为零或许多个输出对。 通过调用 <code>context.write(WritableComparable, Writable)</code> 方法来收集输出对。</p><p><code>Application应用程序</code>可以使用<code>Counter</code>来报告它的统计信息。</p><p>与给定输出键 <code>key</code> 相关联的所有中间值 <code>values</code> 随后被MR框架分组，然后传递给 <code>Reducer</code> 以得到最终输出。用户可以通过 <code>Job.setGroupingCompatorClass(Class)</code> 方法指定一个 <code>Comparator</code> 来控制分组。</p><p>对<code>Mapper</code>的输出进行排序，然后按每个<code>Reducer</code>进行划分（<code>partition</code>）。分区(<code>partitions</code>) 的总数与作业（<code>job</code>）的<code>reduce</code>任务数相同。</p><p>用户可以通过实现自定义的 <code>Partitioner</code> 类来控制哪些键 <code>key</code> (以及记录 <code>records</code> )进入哪个<code>Reducer</code>进行处理。</p><p>用户还可以通过 <code>Job.setCombinerClass(Class)</code> 方法指定一个 <code>Combiner</code> ，以在本地执行中间输出的聚合（local aggregation）操作，这样可以减少<code>Mapper</code>到<code>Reducer</code>之间的数据传输量。实际上就是在<code>map</code>操作之后，在本地再执行一次 <code>reduce</code>操作，可以参考前面写的<code>PartitionApp</code>类的代码。</p><p>The intermediate, sorted outputs are always stored in a simple (key-len, key, value-len, value) format. Applications can control if, and how, the intermediate outputs are to be compressed and the <a href="https://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.7.0/api/org/apache/hadoop/io/compress/CompressionCodec.html" target="_blank" rel="noopener"><code>CompressionCodec</code></a> to be used via the <code>Configuration</code>.</p><blockquote><p>原文是这样，这句话不是很理解。</p></blockquote><h4 id="多少个-Map"><a href="#多少个-Map" class="headerlink" title="多少个 Map"></a>多少个 <code>Map</code></h4><p><code>map</code> 的数量通常由输入的总大小（即输入文件的块总数 <code>the total number of blocks of the input files</code>）决定。</p><p><code>map</code> 的正确并行度似乎是每个节点大约10-100个 <code>map</code> ，尽管已经为 <code>very cpu-light map</code>（<em>CPU非常轻的任务</em>）任务设置了300个<code>map</code>。 因为任务的设置需要一段时间，所以执行<code>map</code>的时间最好满足至少一分钟。</p><p>因此，如果您期望的输入数据大小为10TB，块大小为128MB，那么最终将获得82,000个映射<code>map</code>, （<code>10 * 1024 * 1024 ÷ 128 = 81920</code>），除非使用 <code>Configuration.set(MRJobConfig.NUM_MAPS, int)</code>(它只给框架提供了一个提示 <code>hint</code>)将其设置得更高。</p><h3 id="Reducer"><a href="#Reducer" class="headerlink" title="Reducer"></a><code>Reducer</code></h3><p><a href="https://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.7.0/api/org/apache/hadoop/mapreduce/Reducer.html" target="_blank" rel="noopener"><code>Reducer</code></a> 将同一个 <code>key</code> 对应的一组中间值的集合归约为一个更小的<code>values</code>的集合。</p><p>用户通过 <code>Job.setNumReduceTasks(int)</code> 方法设置作业的 <code>reduce</code>的数量。</p><p>相似地，<code>Reducer</code> 的实现类要传递给 <code>Job</code> 使用，须调用 <code>Job.setReducerClass(Class)</code> 方法设置job的<code>reduce</code>函数；然后，MP框架为分组输入（grouped inputs）中的每个键&#x2F;值对调用<code>reduce(WritableComparable, Iterable&lt;Writable&gt;, Context)</code>方法。 然后，应用程序可以重写<code>cleanup(Context)</code>方法来执行任何必需的清理。</p><p><code>Reducer</code> 主要有三个主要阶段：<code>shuffle</code>, <code>sort</code> 和 <code>reduce</code>。</p><h4 id="Shuffle"><a href="#Shuffle" class="headerlink" title="Shuffle"></a><code>Shuffle</code></h4><p><code>Reducer</code> 的输入是 <code>Mapper</code> 的排序输出。在这个阶段，MP框架通过HTTP获取所有<code>mapper</code>输出的相关的分区（relevant partition）。</p><h4 id="Sort"><a href="#Sort" class="headerlink" title="Sort"></a><code>Sort</code></h4><p>在此阶段，框架按键 <code>key</code>对Reducer的输入进行分组(因为不同的<code>mapper</code>可能输出相同的键<code>key</code>)。<code>shuffle</code>和<code>sort</code>阶段同时发生；当获取mapper的输出时，它们被合并。</p><h4 id="Secondary-Sort"><a href="#Secondary-Sort" class="headerlink" title="Secondary Sort"></a><code>Secondary Sort</code></h4><p>如果 <em>将中间键分组的等价规则</em> 与 <em>归约前的键分组的等价规则</em> 需要不同，则可以通过 <code>Job.setSortCompatorClass(Class)</code> 指定一个 <code>Comparator</code>。由于 <code>Job.setGroupingComparatorClass(Class)</code>能够用来控制中间键（intermediate keys）的分组方式，这些可以被结合起来以模拟对值<code>values</code>的二次排序 <code>secondary sort</code>。</p><h4 id="Reduce"><a href="#Reduce" class="headerlink" title="Reduce"></a><code>Reduce</code></h4><p>在这个阶段对分组输入中的所有<code>&lt;key, (list of values)&gt; pair</code>调用 <code>reduce(WritableComparable, Iterable&lt;Writable&gt;, Context)</code>方法。</p><p><code>reduce</code>任务的输出通常通过 <code>Context.write(WritableComparable,Writable)</code>写入HDFS文件系统（<a href="https://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.7.0/api/org/apache/hadoop/fs/FileSystem.html" target="_blank" rel="noopener"><code>FileSystem</code></a>）。</p><p>和<code>Map</code>一样，<code>Applications</code>可以使用<code>Counter</code>来报告它的统计信息。</p><p><code>Reducer</code>的输出是没有经过排序的。</p><h4 id="多少个-Reduce"><a href="#多少个-Reduce" class="headerlink" title="多少个 Reduce"></a>多少个 <code>Reduce</code></h4><p>正确的 <code>reduce</code> 数似乎是 <code>0.95或1.75乘以(&lt;no.of nodes&gt; * &lt;no.of maximum containers per node&gt;)</code> 。</p><p>对于0.95，所有的<code>reduce</code>都可以立即启动，并在<code>map</code>完成时开始传输<code>map</code>输出。对于1.75，速度更快的节点将完成他们的第一轮<code>reduce</code>，并启动第二轮<code>reduce</code>，在负载均衡方面做得更好。</p><p>增加<code>reduce</code>的数量，会增加框架的开销，但是也增加了负载均衡和降低了故障成本。</p><p>上面的缩放因子（如0.95,1.95）略小于整数 ( <a href="https://www.mathsisfun.com/whole-numbers.html" target="_blank" rel="noopener"><code>whole numbers</code></a> )，以便在框架中为推测性任务和失败任务保留少部分的<code>reduce</code>插槽（<em>reduce slots</em>）。</p><h4 id="Reducer-NONE"><a href="#Reducer-NONE" class="headerlink" title="Reducer NONE"></a>Reducer NONE</h4><p>如果不需要归约是可以将reduce tasks的数量设置为0的。</p><p>在这种情况下，map tasks的输出将直接写到FileSystem，输出的路径是通过 <code>FileOutputFormat.setOutputPath(Job, Path)</code>方法设置的路径。框架不会在将map的输出写到FileSystem之前对它们进行排序。</p><h3 id="Partitioner"><a href="#Partitioner" class="headerlink" title="Partitioner"></a><code>Partitioner</code></h3><p><code>Partitioner</code>对<code>key</code>空间进行划分。</p><p><code>Partitioner</code>控制map的中间输出的keys的划分。key或key的子集通常通过hash散列函数得到划分分区（partitions）。partitions的总数与<code>reduce</code>任务数相同。因此，这控制了中间<code>key</code>(以及记录<code>record</code>)被发送到m个reduce任务中哪一个reduce任务进行归约操作。</p><p><a href="https://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.7.0/api/org/apache/hadoop/mapreduce/lib/partition/HashPartitioner.html" target="_blank" rel="noopener"><code>HashPertitioner</code></a>是默认的<code>Partitioner</code>。</p><h3 id="Counter"><a href="#Counter" class="headerlink" title="Counter"></a><code>Counter</code></h3><p><a href="https://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.7.0/api/org/apache/hadoop/mapreduce/Counter.html" target="_blank" rel="noopener"><code>Counter</code></a>是MapReduce应用程序报告其统计信息的工具。<code>Mapper</code>和<code>Reducer</code>的实现类可以使用<code>Counter</code>报告统计信息。</p><p>Hadoop Mapreduce提供了一个library，<a href="https://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.7.0/api/org/apache/hadoop/mapreduce/package-summary.html" target="_blank" rel="noopener"><code>org.apache.hadoop.mapreduce</code></a>包含有用的 mappers, reducers, partitioners。</p>]]></content>
    
    
      
      
    <summary type="html"></summary>
      
    
    
    
    
    <category term="Hadoop" scheme="https://xiaoyan94.github.io/tags/Hadoop/"/>
    
    <category term="MapReduce" scheme="https://xiaoyan94.github.io/tags/MapReduce/"/>
    
  </entry>
  
  <entry>
    <title>Java中的静态导入import static（导入类的静态成员）</title>
    <link href="https://xiaoyan94.github.io/2020/06/27/Java-import-static/"/>
    <id>https://xiaoyan94.github.io/2020/06/27/Java-import-static/</id>
    <published>2020-06-27T07:27:22.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="import-static-是什么"><a href="#import-static-是什么" class="headerlink" title="import static 是什么"></a>import static 是什么</h2><p><code>import static</code>是静态导入的声明。静态导入声明 <code>import static</code> 类似于普通导入声明 <code>import</code> 。 普通的导入声明从包中导入类，从而允许在没有包限定的情况下使用类，而静态导入声明从类中导入静态成员，从而允许在没有类限定的情况下使用静态成员。</p><p>使用<code>import static</code>用法，可以导入<code>class</code>中的静态成员。</p><a id="more"></a><p>举个例子，仅使用<code>import</code>关键字时，代码可能是这样的：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.Math;</span><br><span class="line"><span class="comment">//使用类名.静态成员调用</span></span><br><span class="line"><span class="keyword">double</span> r = Math.cos(Math.PI * theta);</span><br></pre></td></tr></table></figure></div><p>使用<code>import static</code>语法导入<code>Math</code>类的静态变量和静态方法之后，代码就更简洁了：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Math.*;</span><br><span class="line"><span class="comment">//直接调用静态成员</span></span><br><span class="line"><span class="keyword">double</span> r = cos(PI * theta);</span><br></pre></td></tr></table></figure></div><hr><p>再来一个例子，使用<code>import static</code>语法的 HelloWorld 长这样：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.System.out;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        out.println(<span class="string">"Hello! World!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>可以直接在类中使用<code>java.lang.System.out</code>成员。</p><hr><p>如果想要导入类中的所有静态成员可以使用 <code>*</code> 通配符：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.System.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.util.Arrays.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UseImportStatic</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] array = &#123;<span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">8</span>&#125;;</span><br><span class="line"></span><br><span class="line">        sort(array);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i : array) &#123;</span><br><span class="line">            out.print(i + <span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>当自己定义了一个静态的<code>sort</code>方法与从<code>Arrays</code>类导入的<code>sort</code>方法冲突之后，编译器会报异常:</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reference to sort is ambiguous, <span class="function">both method <span class="title">sort</span><span class="params">(<span class="keyword">float</span>[])</span> in onlyfun.caterpillar.Arrays and method <span class="title">sort</span><span class="params">(<span class="keyword">float</span>[])</span> in java.util.Arrays match</span></span><br></pre></td></tr></table></figure></div></blockquote><h2 id="import-static-什么时候用"><a href="#import-static-什么时候用" class="headerlink" title="import static 什么时候用"></a>import static 什么时候用</h2><p><strong>最好不用！</strong> 为什么呢？</p><p>因为 <code>import static</code> 与 <code>import</code> 背道而驰，理由如下：</p><ul><li>违背面向对象的设计原则；</li><li>容易造成命名冲突，污染命名空间，产生歧义；</li><li>仅仅是为了偷懒少写一点代码，却让代码难以阅读和维护，时间久了连自己都不知道静态成员是从哪个类引入的了；</li></ul><p>如果非用不可呢，尽量遵守以下原则：</p><ul><li><strong>谨慎使用</strong>！当需要频繁访问一两个类的静态成员时，可以使用它。</li><li>从类中导入所有静态成员可能对可读性特别有害； 如果只需要一个或两个成员，则分别导入它们。</li><li>通过适当地使用，静态导入可以消除重复的类名样板，从而使程序更具可读性。</li></ul><hr><p>参考： <a href="https://docs.oracle.com/javase/7/docs/technotes/guides/language/static-import.html" target="_blank" rel="noopener">https://docs.oracle.com/javase/7/docs/technotes/guides/language/static-import.html</a></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;import-static-是什么&quot;&gt;&lt;a href=&quot;#import-static-是什么&quot; class=&quot;headerlink&quot; title=&quot;import static 是什么&quot;&gt;&lt;/a&gt;import static 是什么&lt;/h2&gt;&lt;p&gt;&lt;code&gt;import static&lt;/code&gt;是静态导入的声明。静态导入声明 &lt;code&gt;import static&lt;/code&gt; 类似于普通导入声明 &lt;code&gt;import&lt;/code&gt; 。 普通的导入声明从包中导入类，从而允许在没有包限定的情况下使用类，而静态导入声明从类中导入静态成员，从而允许在没有类限定的情况下使用静态成员。&lt;/p&gt;
&lt;p&gt;使用&lt;code&gt;import static&lt;/code&gt;用法，可以导入&lt;code&gt;class&lt;/code&gt;中的静态成员。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Java" scheme="https://xiaoyan94.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop入门案例（一）: WordCount</title>
    <link href="https://xiaoyan94.github.io/2020/06/26/First-MapReduce-example-WordCount/"/>
    <id>https://xiaoyan94.github.io/2020/06/26/First-MapReduce-example-WordCount/</id>
    <published>2020-06-26T09:01:36.000Z</published>
    <updated>2022-08-26T08:30:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MapReduce作业的输入与输出"><a href="#MapReduce作业的输入与输出" class="headerlink" title="MapReduce作业的输入与输出"></a>MapReduce作业的输入与输出</h2><p>MapRecude计算框架是在键值对&lt;key, value&gt;上进行操作的。MapReduce计算框架将作业的输入视为一组&lt;key，value&gt;对，并生成一组&lt;key, value&gt;对作为其输出，可能是不同类型的。&lt;key, value&gt;中：</p><ul><li>key和value的类都要由框架实现序列化，所以都需要实现<code>org.apache.hadoop.io.Writable</code>接口；</li><li>除此之外key的类还需要实现<code>org.apache.hadoop.io.WritableComparable</code>接口，因为在map操作之后还需要对key进行排序操作。</li></ul><p>MapReduce作业的输入和输出类型：</p><blockquote><p>(input) &lt;k1, v1&gt; -&gt; <strong>map</strong> -&gt; &lt;k2, v2&gt; -&gt; <strong>combine</strong> -&gt; &lt;k2, v2&gt; -&gt; <strong>reduce</strong> -&gt; &lt;k3, v3&gt; (output)</p></blockquote><a id="more"></a><hr><h2 id="MapReduce入门程序——WordCount"><a href="#MapReduce入门程序——WordCount" class="headerlink" title="MapReduce入门程序——WordCount"></a>MapReduce入门程序——WordCount</h2><p>WordCount是一个简单的应用程序，可以计算给定输入数据集中每个单词的出现次数。</p><p>WordCountApp.java代码：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Job;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Reducer;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WordCountApp</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Map：读取输入文件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMapper</span> <span class="keyword">extends</span> <span class="title">Mapper</span>&lt;<span class="title">LongWritable</span>, <span class="title">Text</span>, <span class="title">Text</span>,</span></span><br><span class="line"><span class="class">            <span class="title">LongWritable</span>&gt; </span>&#123;</span><br><span class="line">        LongWritable one = <span class="keyword">new</span> LongWritable(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">map</span><span class="params">(LongWritable key, Text value, Context context)</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line">            String line = value.toString(); <span class="comment">//每一行的数据</span></span><br><span class="line">            String[] words = line.split(<span class="string">" "</span>); <span class="comment">//按空格 分隔符拆分</span></span><br><span class="line">            <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">                context.write(<span class="keyword">new</span> Text(word), one);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Reduce：归并操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyReducer</span> <span class="keyword">extends</span> <span class="title">Reducer</span>&lt;<span class="title">Text</span>, <span class="title">LongWritable</span>, <span class="title">Text</span>,</span></span><br><span class="line"><span class="class">            <span class="title">LongWritable</span>&gt; </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">reduce</span><span class="params">(Text key, Iterable&lt;LongWritable&gt; values, Context context)</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (LongWritable value :</span><br><span class="line">                    values) &#123;</span><br><span class="line">                <span class="comment">//求key总次数</span></span><br><span class="line">                sum += value.get();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 输出此次reduce统计结果</span></span><br><span class="line">            context.write(key, <span class="keyword">new</span> LongWritable(sum));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 定义Driver：</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args 第一个参数是输入文件路径，第二个参数是输出文件路径</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException, InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">        Configuration configuration = <span class="keyword">new</span> Configuration();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 删除已存在的输出目录</span></span><br><span class="line">        Path outPath = <span class="keyword">new</span> Path(args[<span class="number">1</span>]);</span><br><span class="line">        FileSystem fs = FileSystem.get(configuration);</span><br><span class="line">        <span class="keyword">if</span> (fs.exists(outPath))&#123;</span><br><span class="line">            fs.delete(outPath, <span class="keyword">true</span>);</span><br><span class="line">            System.out.println(<span class="string">"output file exists, but is has been deleted"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Job job = Job.getInstance(configuration, <span class="string">"wordcount"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置Job处理的类</span></span><br><span class="line">        job.setJarByClass(WordCountApp<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置作业处理的输入路径</span></span><br><span class="line">        FileInputFormat.setInputPaths(job, <span class="keyword">new</span> Path(args[<span class="number">0</span>]));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置map相关参数</span></span><br><span class="line">        job.setMapperClass(MyMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        job.setMapOutputKeyClass(Text<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        job.setMapOutputValueClass(LongWritable<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置reduce相关参数</span></span><br><span class="line">        job.setReducerClass(MyReducer<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        job.setOutputKeyClass(Text<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        job.setOutputValueClass(LongWritable<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置作业处理的输出路径</span></span><br><span class="line">        FileOutputFormat.setOutputPath(job, <span class="keyword">new</span> Path(args[<span class="number">1</span>]));</span><br><span class="line"></span><br><span class="line">        System.exit(job.waitForCompletion(<span class="keyword">true</span>) ? <span class="number">0</span> : <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="WordCount代码分析"><a href="#WordCount代码分析" class="headerlink" title="WordCount代码分析"></a>WordCount代码分析</h3><p>Mapper的实现类如下：在map方法中，一次处理一行的数据，由<code>TextInputFormat</code>指定，它将一行字符串以空格为分隔符拆分成单词，并输出 <code>单词-次数</code> 键值对 <code>&lt;&lt;word&gt;,1&gt;</code></p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMapper</span> <span class="keyword">extends</span> <span class="title">Mapper</span>&lt;<span class="title">LongWritable</span>, <span class="title">Text</span>, <span class="title">Text</span>,</span></span><br><span class="line"><span class="class">        <span class="title">LongWritable</span>&gt; </span>&#123;</span><br><span class="line">    LongWritable one = <span class="keyword">new</span> LongWritable(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">map</span><span class="params">(LongWritable key, Text value, Context context)</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line">        String line = value.toString(); <span class="comment">//每一行的数据</span></span><br><span class="line">        String[] words = line.split(<span class="string">" "</span>); <span class="comment">//按空格 分隔符拆分</span></span><br><span class="line">        <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">            context.write(<span class="keyword">new</span> Text(word), one);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>Reducer的实现类如下：在reduce方法中，只是对values进行求和，这些values是每个key的出现次数（在本示例中单词出现的次数）。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyReducer</span> <span class="keyword">extends</span> <span class="title">Reducer</span>&lt;<span class="title">Text</span>, <span class="title">LongWritable</span>, <span class="title">Text</span>,</span></span><br><span class="line"><span class="class">        <span class="title">LongWritable</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">reduce</span><span class="params">(Text key, Iterable&lt;LongWritable&gt; values, Context context)</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (LongWritable value :</span><br><span class="line">                values) &#123;</span><br><span class="line">            <span class="comment">//求key总次数</span></span><br><span class="line">            sum += value.get();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 输出此次reduce统计结果</span></span><br><span class="line">        context.write(key, <span class="keyword">new</span> LongWritable(sum));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>最后，在main方法指定作业的各个方面，例如作业中的输入&#x2F;输出路径(通过命令行传递)、键&#x2F;值类型、输入&#x2F;输出格式等。 然后，它调用<code>job.waitForCompletion</code>方法来提交作业并监视其进度。</p><h3 id="提交作业"><a href="#提交作业" class="headerlink" title="提交作业"></a>提交作业</h3><p>将写好的程序提交到YARN执行：</p><ol><li><p>因为使用Maven搭建，在项目根目录下执行命令<code>mvn clean package -DskipTests</code>打包</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">$ mvn clean package -DskipTests</span><br><span class="line"> [INFO] Scanning <span class="keyword">for</span> projects...</span><br><span class="line"> [INFO]</span><br><span class="line"> [INFO] ----------------------&lt; org.example:hadoop-train &gt;----------------------</span><br><span class="line"> [INFO] Building hadoop-train 1.0</span><br><span class="line"> [INFO] --------------------------------[ jar ]---------------------------------</span><br><span class="line"> [INFO]</span><br><span class="line"> [INFO] --- maven-clean-plugin:3.1.0:clean (default-clean) @ hadoop-train ---</span><br><span class="line"> [INFO] Deleting /Users/yan/IdeaProjects/com.xxx.hadoop/com.xxx.hadoop/target</span><br><span class="line"> [INFO]</span><br><span class="line"> [INFO] --- maven-resources-plugin:3.0.2:resources (default-resources) @ hadoop-train ---</span><br><span class="line"> [INFO] Using <span class="string">'UTF-8'</span> encoding to copy filtered resources.</span><br><span class="line"> [INFO] skip non existing resourceDirectory /Users/yan/IdeaProjects/com.xxx.hadoop/com.xxx.hadoop/src/main/resources</span><br><span class="line"> [INFO]</span><br><span class="line"> [INFO] --- maven-compiler-plugin:3.8.0:compile (default-compile) @ hadoop-train ---</span><br><span class="line"> [INFO] Changes detected - recompiling the module!</span><br><span class="line"> [INFO] Compiling 5 <span class="built_in">source</span> files to /Users/yan/IdeaProjects/com.xxx.hadoop/com.xxx.hadoop/target/classes</span><br><span class="line"> [INFO]</span><br><span class="line"> [INFO] --- maven-resources-plugin:3.0.2:testResources (default-testResources) @ hadoop-train ---</span><br><span class="line"> [INFO] Using <span class="string">'UTF-8'</span> encoding to copy filtered resources.</span><br><span class="line"> [INFO] skip non existing resourceDirectory /Users/yan/IdeaProjects/com.xxx.hadoop/com.xxx.hadoop/src/<span class="built_in">test</span>/resources</span><br><span class="line"> [INFO]</span><br><span class="line"> [INFO] --- maven-compiler-plugin:3.8.0:testCompile (default-testCompile) @ hadoop-train ---</span><br><span class="line"> [INFO] Changes detected - recompiling the module!</span><br><span class="line"> [INFO] Compiling 1 <span class="built_in">source</span> file to /Users/yan/IdeaProjects/com.xxx.hadoop/com.xxx.hadoop/target/<span class="built_in">test</span>-classes</span><br><span class="line"> [INFO]</span><br><span class="line"> [INFO] --- maven-surefire-plugin:2.22.1:<span class="built_in">test</span> (default-test) @ hadoop-train ---</span><br><span class="line"> [INFO] Tests are skipped.</span><br><span class="line"> [INFO]</span><br><span class="line"> [INFO] --- maven-jar-plugin:3.0.2:jar (default-jar) @ hadoop-train ---</span><br><span class="line"> [INFO] Building jar: /Users/yan/IdeaProjects/com.xxx.hadoop/com.xxx.hadoop/target/hadoop-train-1.0.jar</span><br><span class="line"> [INFO] ------------------------------------------------------------------------</span><br><span class="line"> [INFO] BUILD SUCCESS</span><br><span class="line"> [INFO] ------------------------------------------------------------------------</span><br><span class="line"> [INFO] Total time:  2.800 s</span><br><span class="line"> [INFO] Finished at: 2020-06-24T20:17:52+08:00</span><br><span class="line"> [INFO] ------------------------------------------------------------------------</span><br></pre></td></tr></table></figure></div></li><li><p>使用命令<code>scp -P26885 target/hadoop-train-1.0.jar root@23.105.206.170:~/hadoop/lib</code>将打包好的jar文件上传至远程服务器~&#x2F;hadoop&#x2F;lib目录下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ scp -P26885 target/hadoop-train-1.0.jar root@23.105.206.170:~/hadoop/lib</span><br><span class="line">hadoop-train-1.0.jar     100%   17KB   6.7KB/s   00:02</span><br></pre></td></tr></table></figure></div></li><li><p>以如下流程在服务器上执行上传的程序：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ hadoop fs -put in.txt /in.txt <span class="comment"># 将in.txt上传至HDFS根目录下</span></span><br><span class="line">...</span><br><span class="line">$ hadoop jar ~/hadoop/lib/hadoop-train-1.0.jar org.example.WordCountApp /in.txt /mymprd/wordcount <span class="comment"># 运行WordCount程序</span></span><br><span class="line">...</span><br><span class="line">$ hadoop fs -cat /mymprd/wordcount/part-r-00000 <span class="comment">#查看程序输出结果</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure></div></li><li><p>输入路径也可以是一个文件夹，文件夹内有多个输入文件：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~/hadoop/script<span class="comment"># cat input/in1.txt # 准备输入文件in1、in2</span></span><br><span class="line">Hello World Bye World</span><br><span class="line">root@brave-post-2:~/hadoop/script<span class="comment"># cat input/in2.txt</span></span><br><span class="line">Hello Hadoop Goodbye Hadoop</span><br><span class="line">Hello Goodbye</span><br><span class="line">root@brave-post-2:~/hadoop/script<span class="comment"># hadoop fs -put input / # -put也能上传一个文件夹至HDFS</span></span><br><span class="line">20/06/26 08:05:08 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">root@brave-post-2:~/hadoop/script<span class="comment"># hadoop fs -ls /input</span></span><br><span class="line">20/06/26 08:05:34 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">Found 2 items</span><br><span class="line">-rw-r--r--   1 root supergroup         22 2020-06-26 08:05 /input/in1.txt</span><br><span class="line">-rw-r--r--   1 root supergroup         42 2020-06-26 08:05 /input/in2.txt</span><br><span class="line">root@brave-post-2:~/hadoop/script<span class="comment"># hadoop jar ~/hadoop/lib/hadoop-train-1.0.jar org.example.WordCount2App /input /mymprd/wordcount # 以input文件夹作为输入路径</span></span><br><span class="line">20/06/26 08:06:08 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">output file exists, but is has deleted</span><br><span class="line">20/06/26 08:06:10 INFO client.RMProxy: Connecting to ResourceManager at /0.0.0.0:8032</span><br><span class="line">20/06/26 08:06:13 WARN mapreduce.JobResourceUploader: Hadoop <span class="built_in">command</span>-line option parsing not performed. Implement the Tool interface and execute your application with ToolRunner to remedy this.</span><br><span class="line">20/06/26 08:06:14 INFO input.FileInputFormat: Total input paths to process : 2</span><br><span class="line">20/06/26 08:06:14 INFO mapreduce.JobSubmitter: number of splits:2</span><br><span class="line">20/06/26 08:06:14 INFO mapreduce.JobSubmitter: Submitting tokens <span class="keyword">for</span> job: job_1593005599056_0021</span><br><span class="line">20/06/26 08:06:15 INFO impl.YarnClientImpl: Submitted application application_1593005599056_0021</span><br><span class="line">20/06/26 08:06:15 INFO mapreduce.Job: The url to track the job: http://localhost:8088/proxy/application_1593005599056_0021/</span><br><span class="line">20/06/26 08:06:15 INFO mapreduce.Job: Running job: job_1593005599056_0021</span><br><span class="line">20/06/26 08:06:30 INFO mapreduce.Job: Job job_1593005599056_0021 running <span class="keyword">in</span> uber mode : <span class="literal">false</span></span><br><span class="line">20/06/26 08:06:30 INFO mapreduce.Job:  map 0% reduce 0%</span><br><span class="line">20/06/26 08:06:48 INFO mapreduce.Job:  map 50% reduce 0%</span><br><span class="line">20/06/26 08:06:49 INFO mapreduce.Job:  map 100% reduce 0%</span><br><span class="line">20/06/26 08:07:00 INFO mapreduce.Job:  map 100% reduce 100%</span><br><span class="line">20/06/26 08:07:04 INFO mapreduce.Job: Job job_1593005599056_0021 completed successfully</span><br><span class="line">20/06/26 08:07:05 INFO mapreduce.Job: Counters: 49</span><br><span class="line">    File System Counters</span><br><span class="line">        FILE: Number of bytes <span class="built_in">read</span>=170</span><br><span class="line">        FILE: Number of bytes written=334434</span><br><span class="line">        FILE: Number of <span class="built_in">read</span> operations=0</span><br><span class="line">        FILE: Number of large <span class="built_in">read</span> operations=0</span><br><span class="line">        FILE: Number of write operations=0</span><br><span class="line">        HDFS: Number of bytes <span class="built_in">read</span>=274</span><br><span class="line">        HDFS: Number of bytes written=41</span><br><span class="line">        HDFS: Number of <span class="built_in">read</span> operations=9</span><br><span class="line">        HDFS: Number of large <span class="built_in">read</span> operations=0</span><br><span class="line">        HDFS: Number of write operations=2</span><br><span class="line">    Job Counters</span><br><span class="line">        Launched map tasks=2</span><br><span class="line">        Launched reduce tasks=1</span><br><span class="line">        Data-local map tasks=3</span><br><span class="line">        Total time spent by all maps <span class="keyword">in</span> occupied slots (ms)=31069</span><br><span class="line">        Total time spent by all reduces <span class="keyword">in</span> occupied slots (ms)=8852</span><br><span class="line">        Total time spent by all map tasks (ms)=31069</span><br><span class="line">        Total time spent by all reduce tasks (ms)=8852</span><br><span class="line">        Total vcore-seconds taken by all map tasks=31069</span><br><span class="line">        Total vcore-seconds taken by all reduce tasks=8852</span><br><span class="line">        Total megabyte-seconds taken by all map tasks=31814656</span><br><span class="line">        Total megabyte-seconds taken by all reduce tasks=9064448</span><br><span class="line">    Map-Reduce Framework</span><br><span class="line">        Map input records=3</span><br><span class="line">        Map output records=10</span><br><span class="line">        Map output bytes=144</span><br><span class="line">        Map output materialized bytes=176</span><br><span class="line">        Input split bytes=210</span><br><span class="line">        Combine input records=0</span><br><span class="line">        Combine output records=0</span><br><span class="line">        Reduce input groups=5</span><br><span class="line">        Reduce shuffle bytes=176</span><br><span class="line">        Reduce input records=10</span><br><span class="line">        Reduce output records=5</span><br><span class="line">        Spilled Records=20</span><br><span class="line">        Shuffled Maps =2</span><br><span class="line">        Failed Shuffles=0</span><br><span class="line">        Merged Map outputs=2</span><br><span class="line">        GC time elapsed (ms)=634</span><br><span class="line">        CPU time spent (ms)=3900</span><br><span class="line">        Physical memory (bytes) snapshot=472780800</span><br><span class="line">        Virtual memory (bytes) snapshot=7740059648</span><br><span class="line">        Total committed heap usage (bytes)=264744960</span><br><span class="line">    Shuffle Errors</span><br><span class="line">        BAD_ID=0</span><br><span class="line">        CONNECTION=0</span><br><span class="line">        IO_ERROR=0</span><br><span class="line">        WRONG_LENGTH=0</span><br><span class="line">        WRONG_MAP=0</span><br><span class="line">        WRONG_REDUCE=0</span><br><span class="line">    File Input Format Counters</span><br><span class="line">        Bytes Read=64</span><br><span class="line">    File Output Format Counters</span><br><span class="line">        Bytes Written=41</span><br><span class="line">root@brave-post-2:~/hadoop/script<span class="comment"># hadoop fs -cat /mymprd/wordcount/part-r-00000 # 查看程序执行结果</span></span><br><span class="line">20/06/26 08:07:27 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">Bye 1</span><br><span class="line">Goodbye 2</span><br><span class="line">Hadoop 2</span><br><span class="line">Hello 3</span><br><span class="line">World 2</span><br><span class="line">root@brave-post-2:~/hadoop/script<span class="comment">#</span></span><br></pre></td></tr></table></figure></div></li></ol><hr><h3 id="使用Combiner降低map和reduce之间的数据传输量"><a href="#使用Combiner降低map和reduce之间的数据传输量" class="headerlink" title="使用Combiner降低map和reduce之间的数据传输量"></a>使用Combiner降低map和reduce之间的数据传输量</h3><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Job;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Reducer;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.input.TextInputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CombinerApp</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Map：读取输入文件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMapper</span> <span class="keyword">extends</span> <span class="title">Mapper</span>&lt;<span class="title">LongWritable</span>, <span class="title">Text</span>, <span class="title">Text</span>,</span></span><br><span class="line"><span class="class">            <span class="title">LongWritable</span>&gt; </span>&#123;</span><br><span class="line">        LongWritable one = <span class="keyword">new</span> LongWritable(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">map</span><span class="params">(LongWritable key, Text value, Context context)</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line">            String line = value.toString(); <span class="comment">//每一行的数据</span></span><br><span class="line">            String[] words = line.split(<span class="string">" "</span>); <span class="comment">//按空格 分隔符拆分</span></span><br><span class="line">            <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">                context.write(<span class="keyword">new</span> Text(word), one);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Reduce：归并操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyReducer</span> <span class="keyword">extends</span> <span class="title">Reducer</span>&lt;<span class="title">Text</span>, <span class="title">LongWritable</span>, <span class="title">Text</span>,</span></span><br><span class="line"><span class="class">            <span class="title">LongWritable</span>&gt; </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">reduce</span><span class="params">(Text key, Iterable&lt;LongWritable&gt; values, Context context)</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (LongWritable value :</span><br><span class="line">                    values) &#123;</span><br><span class="line">                <span class="comment">//求key总次数</span></span><br><span class="line">                sum += value.get();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 输出此次reduce统计结果</span></span><br><span class="line">            context.write(key, <span class="keyword">new</span> LongWritable(sum));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 定义Driver：</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException, InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">        Configuration configuration = <span class="keyword">new</span> Configuration();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 删除已存在的输出目录</span></span><br><span class="line">        Path outPath = <span class="keyword">new</span> Path(args[<span class="number">1</span>]);</span><br><span class="line">        FileSystem fs = FileSystem.get(configuration);</span><br><span class="line">        <span class="keyword">if</span> (fs.exists(outPath))&#123;</span><br><span class="line">            fs.delete(outPath, <span class="keyword">true</span>);</span><br><span class="line">            System.out.println(<span class="string">"output file exists, but is has deleted"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Job job = Job.getInstance(configuration, <span class="string">"wordcount"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置Job处理的类</span></span><br><span class="line">        job.setJarByClass(CombinerApp<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置作业处理的输入路径</span></span><br><span class="line">        FileInputFormat.setInputPaths(job, <span class="keyword">new</span> Path(args[<span class="number">0</span>]));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置map相关参数</span></span><br><span class="line">        job.setMapperClass(MyMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        job.setMapOutputKeyClass(Text<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        job.setMapOutputValueClass(LongWritable<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置reduce相关参数</span></span><br><span class="line">        job.setReducerClass(MyReducer<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        job.setOutputKeyClass(Text<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        job.setOutputValueClass(LongWritable<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置Combiner处理类，相当于在Map之后先在本地进行一次合并之后再通过网络传输数据给Reduce Tasks</span></span><br><span class="line">        <span class="comment">// 使用场景：求次数；求和；  不能使用的场景：平均数</span></span><br><span class="line">        job.setCombinerClass(MyReducer<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置作业处理的输出路径</span></span><br><span class="line">        FileOutputFormat.setOutputPath(job, <span class="keyword">new</span> Path(args[<span class="number">1</span>]));</span><br><span class="line"></span><br><span class="line">        System.exit(job.waitForCompletion(<span class="keyword">true</span>) ? <span class="number">0</span> : <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>关于Combiner：设置Combiner处理类，相当于在<code>map</code>操作之后先在本地进行一次合并（即local aggregation）之后再通过网络传输数据给<code>reduce</code>。</p><p>不过combiner的使用是有场景限制的：比如求次数、求和可以用；但是求平均数就不能用。</p><hr><h3 id="和wordcount相似的partitioner"><a href="#和wordcount相似的partitioner" class="headerlink" title="和wordcount相似的partitioner"></a>和wordcount相似的partitioner</h3><p>PartitionerApp 代码：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Job;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Partitioner;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Reducer;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PartitionerApp</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Map：读取输入文件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMapper</span> <span class="keyword">extends</span> <span class="title">Mapper</span>&lt;<span class="title">LongWritable</span>, <span class="title">Text</span>, <span class="title">Text</span>,</span></span><br><span class="line"><span class="class">            <span class="title">LongWritable</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">map</span><span class="params">(LongWritable key, Text value, Context context)</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line">            String line = value.toString(); <span class="comment">//每一行的数据</span></span><br><span class="line">            String[] words = line.split(<span class="string">" "</span>); <span class="comment">//按空格 分隔符拆分</span></span><br><span class="line"></span><br><span class="line">            context.write(<span class="keyword">new</span> Text(words[<span class="number">0</span>]),</span><br><span class="line">                    <span class="keyword">new</span> LongWritable(Long.parseLong(words[<span class="number">1</span>])));</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Reduce：归并操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyReducer</span> <span class="keyword">extends</span> <span class="title">Reducer</span>&lt;<span class="title">Text</span>, <span class="title">LongWritable</span>, <span class="title">Text</span>,</span></span><br><span class="line"><span class="class">            <span class="title">LongWritable</span>&gt; </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">reduce</span><span class="params">(Text key, Iterable&lt;LongWritable&gt; values, Context context)</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (LongWritable value :</span><br><span class="line">                    values) &#123;</span><br><span class="line">                <span class="comment">//求key总次数</span></span><br><span class="line">                sum += value.get();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 输出此次reduce统计结果</span></span><br><span class="line">            context.write(key, <span class="keyword">new</span> LongWritable(sum));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPartitioner</span> <span class="keyword">extends</span> <span class="title">Partitioner</span>&lt;<span class="title">Text</span>, <span class="title">LongWritable</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPartition</span><span class="params">(Text text, LongWritable longWritable, <span class="keyword">int</span> numPartitions)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">switch</span> (text.toString()) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">"xiaomi"</span>:</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">"huawei"</span>:</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">"apple"</span>:</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 定义Driver：</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException, InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">        Configuration configuration = <span class="keyword">new</span> Configuration();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 删除已存在的输出目录</span></span><br><span class="line">        Path outPath = <span class="keyword">new</span> Path(args[<span class="number">1</span>]);</span><br><span class="line">        FileSystem fs = FileSystem.get(configuration);</span><br><span class="line">        <span class="keyword">if</span> (fs.exists(outPath)) &#123;</span><br><span class="line">            fs.delete(outPath, <span class="keyword">true</span>);</span><br><span class="line">            System.out.println(<span class="string">"output file exists, but is has deleted"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Job job = Job.getInstance(configuration, <span class="string">"wordcount"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置Job处理的类</span></span><br><span class="line">        job.setJarByClass(PartitionerApp<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置作业处理的输入路径</span></span><br><span class="line">        FileInputFormat.setInputPaths(job, <span class="keyword">new</span> Path(args[<span class="number">0</span>]));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置map相关参数</span></span><br><span class="line">        job.setMapperClass(MyMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        job.setMapOutputKeyClass(Text<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        job.setMapOutputValueClass(LongWritable<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置reduce相关参数</span></span><br><span class="line">        job.setReducerClass(MyReducer<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        job.setOutputKeyClass(Text<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        job.setOutputValueClass(LongWritable<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置job的Partitioner</span></span><br><span class="line">        job.setPartitionerClass(MyPartitioner<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 同时还需要为job设置4个reduce task，每个partition一个</span></span><br><span class="line">        job.setNumReduceTasks(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置作业处理的输出路径</span></span><br><span class="line">        FileOutputFormat.setOutputPath(job, <span class="keyword">new</span> Path(args[<span class="number">1</span>]));</span><br><span class="line"></span><br><span class="line">        System.exit(job.waitForCompletion(<span class="keyword">true</span>) ? <span class="number">0</span> : <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>对于PartitionerApp，现要统计出不同品牌的手机总销量。假设输入文件in.txt，给出了手机品牌和对应的销量：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">huawei 200</span><br><span class="line">apple 180</span><br><span class="line">xiaomi 100</span><br><span class="line">huawei 150</span><br><span class="line">apple 30</span><br><span class="line">nokia 66</span><br><span class="line">meizu 66</span><br><span class="line">honor 88</span><br></pre></td></tr></table></figure></div><p>在Hadoop上运行PartiitonerApp之后，输出文件夹中会得到四个输出文件，因为在<code>MyPartitioner</code>类中指定了4个划分。这四个输出文件的文件名分别是<code>part-r-00000</code>,<code>part-r-00001</code>,<code>part-r-00002</code>,<code>part-r-00003</code>。</p><p>查看第一个输出文件<code>part-r-00000</code>，会得到第一个划分的结果：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xiaomi 100</span><br></pre></td></tr></table></figure></div><p>查看第二个输出文件<code>part-r-00001</code>，会得到第二个划分的结果：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">huawei 350</span><br></pre></td></tr></table></figure></div><p>查看第三个输出文件<code>part-r-00002</code>，会得到第三个划分的结果：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apple 210</span><br></pre></td></tr></table></figure></div><p>查看第四个输出文件<code>part-r-00003</code>，会得到第四个划分的结果：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">honor 88</span><br><span class="line">meizu 66</span><br><span class="line">nokia 66</span><br></pre></td></tr></table></figure></div><p>从最后一个文件的结果可以看出来MapReduce对<code>key</code>默认根据字母进行了排序。honor &gt; meizu &gt; nokia 。</p><p>与wordcount相比，多了一个Patitioner Class：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPartitioner</span> <span class="keyword">extends</span> <span class="title">Partitioner</span>&lt;<span class="title">Text</span>, <span class="title">LongWritable</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPartition</span><span class="params">(Text text, LongWritable longWritable, <span class="keyword">int</span> numPartitions)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (text.toString()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"xiaomi"</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"huawei"</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"apple"</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p><code>getPartition(Text text, LongWritable longWritable, int numPartitions)</code>第一个参数是<code>key</code>，第二个参数是<code>value</code>，第三个参数<code>int numPartitions</code>是表示哪个partition的整数。</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;MapReduce作业的输入与输出&quot;&gt;&lt;a href=&quot;#MapReduce作业的输入与输出&quot; class=&quot;headerlink&quot; title=&quot;MapReduce作业的输入与输出&quot;&gt;&lt;/a&gt;MapReduce作业的输入与输出&lt;/h2&gt;&lt;p&gt;MapRecude计算框架是在键值对&amp;lt;key, value&amp;gt;上进行操作的。MapReduce计算框架将作业的输入视为一组&amp;lt;key，value&amp;gt;对，并生成一组&amp;lt;key, value&amp;gt;对作为其输出，可能是不同类型的。&amp;lt;key, value&amp;gt;中：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;key和value的类都要由框架实现序列化，所以都需要实现&lt;code&gt;org.apache.hadoop.io.Writable&lt;/code&gt;接口；&lt;/li&gt;
&lt;li&gt;除此之外key的类还需要实现&lt;code&gt;org.apache.hadoop.io.WritableComparable&lt;/code&gt;接口，因为在map操作之后还需要对key进行排序操作。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;MapReduce作业的输入和输出类型：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;(input) &amp;lt;k1, v1&amp;gt; -&amp;gt; &lt;strong&gt;map&lt;/strong&gt; -&amp;gt; &amp;lt;k2, v2&amp;gt; -&amp;gt; &lt;strong&gt;combine&lt;/strong&gt; -&amp;gt; &amp;lt;k2, v2&amp;gt; -&amp;gt; &lt;strong&gt;reduce&lt;/strong&gt; -&amp;gt; &amp;lt;k3, v3&amp;gt; (output)&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    
    <category term="Hadoop" scheme="https://xiaoyan94.github.io/tags/Hadoop/"/>
    
    <category term="MapReduce" scheme="https://xiaoyan94.github.io/tags/MapReduce/"/>
    
  </entry>
  
  <entry>
    <title>Linux/macOS Shell终端快捷键</title>
    <link href="https://xiaoyan94.github.io/2020/06/25/Linux-macOS-Shell%E7%BB%88%E7%AB%AF%E5%BF%AB%E6%8D%B7%E9%94%AE/"/>
    <id>https://xiaoyan94.github.io/2020/06/25/Linux-macOS-Shell%E7%BB%88%E7%AB%AF%E5%BF%AB%E6%8D%B7%E9%94%AE/</id>
    <published>2020-06-25T02:59:14.000Z</published>
    <updated>2023-02-08T06:22:49.000Z</updated>
    
    <content type="html"><![CDATA[<p>1。有时候调用历史命令，都是很长的那种，然后发现并不是自己想要的，需要重新输入，如何快速删除已有&#x2F;已输入的命令&#x2F;内容？</p><p>Ctrl + C</p><p>2。Linux&#x2F;moacOS 终端命令行输入的常用快捷键。</p><a id="more"></a><table><thead><tr><th>快捷键</th><th>功能</th><th>描述</th></tr></thead><tbody><tr><td>Ctrl + W</td><td>往前删除一个单词</td><td>删除光标左边字符直至遇到空格</td></tr><tr><td>Ctrl + U</td><td>删除光标以前的字符</td><td>删除光标左边的所有字符</td></tr><tr><td>Ctrl + K</td><td>删除光标以后的字符</td><td>删除光标右边的所有字符</td></tr><tr><td>Ctrl + A</td><td>移动光标至字符头</td><td>光标移动到最左</td></tr><tr><td>Ctrl + E</td><td>移动光标至字符尾</td><td>光标移动到最右</td></tr><tr><td>Ctrl + L</td><td>清屏</td><td>清除屏幕内容，使用鼠标滚轮向上翻还能查看之前的内容</td></tr><tr><td>Command ⌘ + K</td><td>清屏</td><td>清除屏幕缓存，使用鼠标滚轮向上翻看不到之前的内容了</td></tr></tbody></table><p>3。macOS键盘中的特殊符号含义。</p><table><thead><tr><th>图标</th><th>含义</th></tr></thead><tbody><tr><td>⌘</td><td>command 或 Cmd</td></tr><tr><td>⌥</td><td>option 或 Alt</td></tr><tr><td>⇧</td><td>shift</td></tr><tr><td>⇪</td><td>caps lock</td></tr><tr><td>⌃</td><td>control 或 Ctrl</td></tr><tr><td>↩</td><td>return</td></tr><tr><td>⌅</td><td>enter</td></tr></tbody></table><blockquote><p><a href="https://support.apple.com/zh-cn/HT201236" target="_blank" rel="noopener">Mac 键盘快捷键</a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;1。有时候调用历史命令，都是很长的那种，然后发现并不是自己想要的，需要重新输入，如何快速删除已有&amp;#x2F;已输入的命令&amp;#x2F;内容？&lt;/p&gt;
&lt;p&gt;Ctrl + C&lt;/p&gt;
&lt;p&gt;2。Linux&amp;#x2F;moacOS 终端命令行输入的常用快捷键。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Linux" scheme="https://xiaoyan94.github.io/tags/Linux/"/>
    
    <category term="macOS" scheme="https://xiaoyan94.github.io/tags/macOS/"/>
    
    <category term="终端" scheme="https://xiaoyan94.github.io/tags/%E7%BB%88%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>ssh配置免密码登录至Linux—已配置密钥仍无法登陆等问题</title>
    <link href="https://xiaoyan94.github.io/2020/06/22/ssh%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95/"/>
    <id>https://xiaoyan94.github.io/2020/06/22/ssh%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95/</id>
    <published>2020-06-22T12:15:39.000Z</published>
    <updated>2022-08-26T08:30:07.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SSH连接免密码登录配置"><a href="#SSH连接免密码登录配置" class="headerlink" title="SSH连接免密码登录配置"></a>SSH连接免密码登录配置</h2><h3 id="方法一：手动复制公钥至服务器"><a href="#方法一：手动复制公钥至服务器" class="headerlink" title="方法一：手动复制公钥至服务器"></a>方法一：手动复制公钥至服务器</h3><ol><li><code>ssh-keygen -t rsa</code> 在客户端生成密钥对  </li><li>把公钥拷贝给要登录的目标主机，手动复制粘贴</li><li>目标主机上将这个公钥加入到授权列表 <code>cat id_rsa.pub &gt;&gt;authorized_keys</code>  </li><li>目标主机还要将这个授权列表文件权限修改为 <code>600</code> , <code>chmod 600 authorized_keys</code>  </li><li>在用户目录下即 <code>~</code> 执行以下步骤：  <ol><li><code>rm -rf .ssh/</code> # 会删除已有的密钥，谨慎删除</li><li><code>ssh-keygen -t rsa</code></li><li><code>cat .ssh/id_rsa.pub &gt;&gt; .ssh/authorized_keys</code></li><li><code>chmod 700 .ssh</code></li><li><code>chmod 600 .ssh/authorized_keys</code></li></ol></li></ol><blockquote><p>这种方法容易出错，推荐使用方法二  </p></blockquote><a id="more"></a><h3 id="方法二：在本地主机（客户端）上生成密钥对，使用-ssh-copy-id-将公钥复制到远程服务器中"><a href="#方法二：在本地主机（客户端）上生成密钥对，使用-ssh-copy-id-将公钥复制到远程服务器中" class="headerlink" title="方法二：在本地主机（客户端）上生成密钥对，使用 ssh-copy-id 将公钥复制到远程服务器中"></a><strong>方法二：在本地主机（客户端）上生成密钥对，使用 <code>ssh-copy-id</code> 将公钥复制到远程服务器中</strong></h3><ol><li>在本地机器上使用 <code>ssh-keygen</code> 产生公钥私钥对</li><li>用 <code>ssh-copy-id</code> 将公钥复制到远程机器中。默认: <code>ssh-copy-id</code> 会将Public Key写到远程机器的 <code>~/.ssh/authorized_key</code> 文件中</li><li><code>ssh-copy-id</code> 需要输入密码；第一次连接需要输入 <code>yes</code> 同意连接</li><li>以后登录到服务器都不用输入密码啦</li></ol><p>上述步骤对应命令如下：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen <span class="comment"># -t rsa 指定RSA加密算法</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/Users/yan/.ssh/id_rsa): /Users/yan/.ssh/login2bwg  <span class="comment"># 指定密钥保存路径</span></span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase): <span class="comment"># 直接回车就行</span></span><br><span class="line">Enter same passphrase again: <span class="comment"># 再次回车</span></span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /Users/yan/.ssh/login2bwg. <span class="comment"># 刚才指定的密钥路径就是私钥文件的路径</span></span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /Users/yan/.ssh/login2bwg.pub. <span class="comment"># .pub结尾的是私钥所对应的公钥</span></span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:1cK3jNxBM/9Kx5mSqyMl+w8BPzJpxIZL3cVNO380SfE yan@Mac-mini.local</span><br><span class="line">The key<span class="string">'s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 3072]----+</span></span><br><span class="line"><span class="string">|            =.o+.|</span></span><br><span class="line"><span class="string">|        +..o.=..+|</span></span><br><span class="line"><span class="string">|       o *+.+ .=E|</span></span><br><span class="line"><span class="string">|      . +o+* o.+*|</span></span><br><span class="line"><span class="string">|       .S=o++o.o*|</span></span><br><span class="line"><span class="string">|        ..o.o.oo.|</span></span><br><span class="line"><span class="string">|          +. ..  |</span></span><br><span class="line"><span class="string">|         o .o    |</span></span><br><span class="line"><span class="string">|          ooo.   |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br><span class="line"><span class="string">$ ssh-copy-id -i ~/.ssh/login2bwg.pub root@2001:470:c:1ab0::2 -p 26885 # 将公钥复制到远程服务器的root用户目录</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/Users/yan/.ssh/login2bwg.pub"</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys</span></span><br><span class="line"><span class="string">root@2001:470:c:1ab0::2'</span>s password: <span class="comment"># 需要输入服务器密码</span></span><br><span class="line"></span><br><span class="line">Number of key(s) added:        1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   <span class="string">"ssh -p '26885' 'root@2001:470:c:1ab0::2'"</span></span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br><span class="line"></span><br><span class="line">$ ssh -p 26885 root@2001:470:c:1ab0::2</span><br><span class="line">root@2001:470:c:1ab0::2<span class="string">'s password: # 这里遇到了问题，仍然要求输入密码才能登录。服务器端没有配置开启密钥登录，看下文的方法进行配置。</span></span><br></pre></td></tr></table></figure></div><h3 id="无法将公钥复制添加到服务器-ssh-authorized-keys-文件中"><a href="#无法将公钥复制添加到服务器-ssh-authorized-keys-文件中" class="headerlink" title="无法将公钥复制添加到服务器 ~/.ssh/authorized_keys 文件中"></a>无法将公钥复制添加到服务器 <code>~/.ssh/authorized_keys</code> 文件中</h3><p><strong>问题描述：</strong><br>在执行 <code>cat id_rsa.pub &gt;&gt;authorized_keys</code> 或 <code>ssh-copy-id -i ~/.ssh/login2bwg.pub root@2001:470:c:1ab0::2 -p 26885</code> 将公钥添加到服务器时报错❌：即使是使用sudo仍然没有权限修改文件内容  </p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo cat id_rsa.pub &gt;&gt; authorized_keys</span><br><span class="line">-bash: authorized_keys: Operation not permitted</span><br></pre></td></tr></table></figure></div><p><strong>解决方法：</strong><br>通过 <code>lsattr</code> 命令发现文件受保护禁止任何编辑，有<code>i</code>输出，使用 <code>chattr -i</code> 命令删除保护属性</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~/.ssh<span class="comment"># lsattr authorized_keys</span></span><br><span class="line">----i------------- authorized_keys</span><br><span class="line">root@brave-post-2:~/.ssh<span class="comment"># chattr -i authorized_keys</span></span><br><span class="line">root@brave-post-2:~/.ssh<span class="comment"># lsattr authorized_keys</span></span><br><span class="line">------------------ authorized_keys</span><br><span class="line">root@brave-post-2:~/.ssh<span class="comment"># cat github_actions2banwagon.pub &gt;&gt; authorized_keys # 已经能够修改authorized_keys的文件内容</span></span><br><span class="line">root@brave-post-2:~/.ssh<span class="comment">#</span></span><br></pre></td></tr></table></figure></div><p>PS: 关于<code>lsattr</code> 和<code>chattr</code> 命令的简单用法。</p><p>(1) 用chattr命令防止系统中某个关键文件被修改<br><code>$ chattr +i /etc/resolv.conf</code><br>然后用 mv &#x2F;etc&#x2F;resolv.conf 等命令操作于该文件，都是得到 Operation not permitted 的结果。<br>vim编辑该文件时会提示W10: Warning: Changing a readonly file错误。要想修改此文件就要把i属性去掉：<br><code>chattr -i /etc/resolv.conf</code></p><p>使用 lsattr 命令来显示文件属性:<br><code>lsattr /etc/resolv.conf</code><br>输出结果为:<br><code>----i-------- /etc/resolv.conf</code></p><p>(2) 让某个文件只能往里面追加数据，但不能删除，适用于各种日志文件：<br><code>chattr +a /var/log/messages</code></p><h2 id="已经配置好了公钥私钥，Ubuntu服务器仍然要求输入密码才能进行ssh登录"><a href="#已经配置好了公钥私钥，Ubuntu服务器仍然要求输入密码才能进行ssh登录" class="headerlink" title="已经配置好了公钥私钥，Ubuntu服务器仍然要求输入密码才能进行ssh登录"></a>已经配置好了公钥私钥，Ubuntu服务器仍然要求输入密码才能进行ssh登录</h2><p>出现这个问题的原因是远程服务器上的sshd服务没有配置好，我用的Ubuntu 18.04默认配置是关闭使用私钥登录的，需要修改配置文件。</p><ol><li><p>在Ubuntu服务器上打开配置文件：  <code>sudo vi /etc/ssh/sshd_config</code>  </p></li><li><p>修改配置如下：</p></li></ol><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#禁用root账户登录，如果是用root用户登录请开启  </span></span><br><span class="line">PermitRootLogin yes  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 是否让 sshd 去检查用户家目录或相关档案的权限数据，  </span></span><br><span class="line"><span class="comment"># 这是为了担心使用者将某些重要档案的权限设错，可能会导致一些问题所致。  </span></span><br><span class="line"><span class="comment"># 例如使用者的 ~.ssh/ 权限设错时，某些特殊情况下会不许用户登入  </span></span><br><span class="line">StrictModes no  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 是否允许用户自行使用成对的密钥系统进行登入行为，仅针对 version 2。  </span></span><br><span class="line"><span class="comment"># 至于自制的公钥数据就放置于用户家目录下的 .ssh/authorized_keys 内  </span></span><br><span class="line">RSAAuthentication yes  </span><br><span class="line">PubkeyAuthentication yes  </span><br><span class="line">AuthorizedKeysFile .ssh/authorized_keys  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 有了证书登录了，就禁用密码登录。 no为禁止密码登录</span></span><br><span class="line">PasswordAuthentication yes</span><br></pre></td></tr></table></figure></div><p>最后重启SSH的服务 <code>sudo service sshd restart</code> 即刻生效。</p><p>再次ssh连接至服务器，此时已经不用输入密码即刻登录，如下图所示：</p><p><img src="/2020/06/22/ssh%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95/ssh.gif" alt="ssh连接免密码登录服务器"></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;SSH连接免密码登录配置&quot;&gt;&lt;a href=&quot;#SSH连接免密码登录配置&quot; class=&quot;headerlink&quot; title=&quot;SSH连接免密码登录配置&quot;&gt;&lt;/a&gt;SSH连接免密码登录配置&lt;/h2&gt;&lt;h3 id=&quot;方法一：手动复制公钥至服务器&quot;&gt;&lt;a href=&quot;#方法一：手动复制公钥至服务器&quot; class=&quot;headerlink&quot; title=&quot;方法一：手动复制公钥至服务器&quot;&gt;&lt;/a&gt;方法一：手动复制公钥至服务器&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;ssh-keygen -t rsa&lt;/code&gt; 在客户端生成密钥对  &lt;/li&gt;
&lt;li&gt;把公钥拷贝给要登录的目标主机，手动复制粘贴&lt;/li&gt;
&lt;li&gt;目标主机上将这个公钥加入到授权列表 &lt;code&gt;cat id_rsa.pub &amp;gt;&amp;gt;authorized_keys&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;目标主机还要将这个授权列表文件权限修改为 &lt;code&gt;600&lt;/code&gt; , &lt;code&gt;chmod 600 authorized_keys&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;在用户目录下即 &lt;code&gt;~&lt;/code&gt; 执行以下步骤：  &lt;ol&gt;
&lt;li&gt;&lt;code&gt;rm -rf .ssh/&lt;/code&gt; # 会删除已有的密钥，谨慎删除&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ssh-keygen -t rsa&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cat .ssh/id_rsa.pub &amp;gt;&amp;gt; .ssh/authorized_keys&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;chmod 700 .ssh&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;chmod 600 .ssh/authorized_keys&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;这种方法容易出错，推荐使用方法二  &lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    
    <category term="ssh" scheme="https://xiaoyan94.github.io/tags/ssh/"/>
    
    <category term="Linux" scheme="https://xiaoyan94.github.io/tags/Linux/"/>
    
    <category term="密钥" scheme="https://xiaoyan94.github.io/tags/%E5%AF%86%E9%92%A5/"/>
    
  </entry>
  
  <entry>
    <title>使用Github Actions CI / CD 自动化部署Hexo到Github/Gitee Pages</title>
    <link href="https://xiaoyan94.github.io/2020/06/22/%E4%BD%BF%E7%94%A8Github-Actions-CI-CD-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2Hexo%E5%88%B0Github-Gitee-Pages/"/>
    <id>https://xiaoyan94.github.io/2020/06/22/%E4%BD%BF%E7%94%A8Github-Actions-CI-CD-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2Hexo%E5%88%B0Github-Gitee-Pages/</id>
    <published>2020-06-22T05:56:03.000Z</published>
    <updated>2023-02-08T02:43:15.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2020/06/22/%E4%BD%BF%E7%94%A8Github-Actions-CI-CD-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2Hexo%E5%88%B0Github-Gitee-Pages/%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="流程图"></p><p>在当前仓库 <code>hexobackup</code> 配置以下工作流，实现向当前仓库提交更新时，触发 GitPages 自动编译。</p><pre class="mermaid">graph TD;    1(手动执行 hexo g 和 hexo d 部署命令)-->自动推送GiteePages仓库-->2(已推送至 Gitee Pages 仓库)-->官方自动部署GiteePages要钱;    1-->自动推送GithubPages仓库-->已推送至GithubPages仓库-->官方自动部署GithubPages-->完成同步更新;    2-->3;    手动推送更新至hexobackup仓库触发Actions-->3(Actions等待工作流中配置的部署GiteePages作业被触发执行)-->自动部署GiteePages-->完成同步更新;    完成_config.yml文件的deploy配置-->1;</pre><p>Something about Continuously Integrity &#x2F; Continuously Deploy…</p><p>Github Actions.</p><p>.github&#x2F;workflows&#x2F;main.yml文件代码：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="YML"><figure class="iseeu highlight /yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Sync</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> <span class="string">[master]</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Gitee</span> <span class="string">Pages</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">yanglbme/gitee-pages-action@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 用户名</span></span><br><span class="line">          <span class="attr">gitee-username:</span> <span class="string">xy94</span></span><br><span class="line">          <span class="comment"># 注意在 Settings-&gt;Secrets 配置 GITEE_PASSWORD</span></span><br><span class="line">          <span class="attr">gitee-password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 仓库，仓库名严格区分大小写，请准确填写，否则会出错</span></span><br><span class="line">          <span class="attr">gitee-repo:</span> <span class="string">xy94/xy94</span></span><br><span class="line">          <span class="comment"># 要部署的分支，默认是 master，若是其他分支，则需要指定（指定的分支必须存在）</span></span><br><span class="line">          <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure></div><p>SSH</p><p>CI 持续集成</p>]]></content>
    
    
      
      
    <summary type="html"></summary>
      
    
    
    
    
    <category term="Github" scheme="https://xiaoyan94.github.io/tags/Github/"/>
    
    <category term="hexo" scheme="https://xiaoyan94.github.io/tags/hexo/"/>
    
    <category term="Github Actions" scheme="https://xiaoyan94.github.io/tags/Github-Actions/"/>
    
  </entry>
  
  <entry>
    <title>Git Bash中使用ssh远程连接至macOS/Linux服务器中文乱码 附Git Bash for Windows主题美化和字体设置</title>
    <link href="https://xiaoyan94.github.io/2020/06/21/Git-Bash%E4%B8%AD%E4%BD%BF%E7%94%A8ssh%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E8%87%B3macOS-Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81-%E9%99%84Git-Bash-for-Windows%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E5%92%8C%E5%AD%97%E4%BD%93%E8%AE%BE%E7%BD%AE/"/>
    <id>https://xiaoyan94.github.io/2020/06/21/Git-Bash%E4%B8%AD%E4%BD%BF%E7%94%A8ssh%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E8%87%B3macOS-Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81-%E9%99%84Git-Bash-for-Windows%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E5%92%8C%E5%AD%97%E4%BD%93%E8%AE%BE%E7%BD%AE/</id>
    <published>2020-06-21T15:36:03.000Z</published>
    <updated>2022-08-26T08:30:07.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Windows-Git-Bash-主题美化和字体设置"><a href="#Windows-Git-Bash-主题美化和字体设置" class="headerlink" title="Windows Git Bash 主题美化和字体设置"></a><a id="top1">Windows Git Bash 主题美化和字体设置</a></h2><h3 id="ssh远程连接至服务器，终端命令提示符等乱码"><a href="#ssh远程连接至服务器，终端命令提示符等乱码" class="headerlink" title="ssh远程连接至服务器，终端命令提示符等乱码"></a>ssh远程连接至服务器，终端命令提示符等乱码</h3><p><strong>问题描述</strong>：  </p><p>远程服务器上我使用的是oh-my-zsh终端并且使用了agnoster主题以及<code>Meslo LG L DZ Regular for Powerline</code>字体，在Windows上使用ssh远程连接至服务器时由于Windows没有Powerline字体，终端命令提示符有些非ASCII字符会乱码。</p><p><strong>解决方法</strong>：  </p><ol><li>下载并安装字体<br>在Windows上安装上述字体，点击 <a href="https://github.com/powerline/fonts/raw/master/Meslo%20Dotted/Meslo%20LG%20L%20DZ%20Regular%20for%20Powerline.ttf" target="_blank" rel="noopener">Meslo LG L DZ Regular for Powerline</a> 下载字体至本地，双击下载的字体文件，安装字体。</li><li>修改Git Bash配置文件使用安装好的字体<br>在Git Bash的Option中的Text选项卡也能设置字体，但是它的字体列表显示的不完全，很多Windows上已有的和上述新安装的Powerline字体在Git bash的设置里面都找不到。解决方法是直接修改Git Bash的配置文件，一般这个配置文件都是用户目录下的.minttyrc文件，即<code>~/.minttyrc</code>，如果没有这个文件也不影响下面的操作，会自动创建。在<code>~/.minttyrc</code>文件中填写以下配置：</li></ol><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Font&#x3D;Meslo LG L DZ Regular for Powerline</span><br><span class="line">FontHeight&#x3D;14</span><br><span class="line">ForegroundColour&#x3D;131,148,150</span><br><span class="line">BackgroundColour&#x3D;0,43,54</span><br><span class="line">CursorColour&#x3D;222,222,0</span><br><span class="line"></span><br><span class="line">Black&#x3D;7,54,66</span><br><span class="line">BoldBlack&#x3D;0,43,54</span><br><span class="line">Red&#x3D;220,50,47</span><br><span class="line">BoldRed&#x3D;203,75,22</span><br><span class="line">Green&#x3D;133,153,0</span><br><span class="line">BoldGreen&#x3D;88,110,117</span><br><span class="line">Yellow&#x3D;181,137,0</span><br><span class="line">BoldYellow&#x3D;101,123,131</span><br><span class="line">Blue&#x3D;38,139,210</span><br><span class="line">BoldBlue&#x3D;131,148,150</span><br><span class="line">Magenta&#x3D;211,54,130</span><br><span class="line">BoldMagenta&#x3D;108,113,196</span><br><span class="line">Cyan&#x3D;42,161,152</span><br><span class="line">BoldCyan&#x3D;147,161,161</span><br><span class="line">White&#x3D;238,232,213</span><br><span class="line">BoldWhite&#x3D;253,246,227</span><br><span class="line">Locale&#x3D;zh_CN </span><br><span class="line">Charset&#x3D;UTF-8</span><br><span class="line">CursorType&#x3D;block</span><br></pre></td></tr></table></figure></div><h3 id="主题配色和隐藏用户主机名"><a href="#主题配色和隐藏用户主机名" class="headerlink" title="主题配色和隐藏用户主机名"></a>主题配色和隐藏用户主机名</h3><ol><li>主题美化：<br>主题美化很简单，事实上已经配置完成了。以上配置文件中已经配置了字体<code>Font</code>和字体大小<code>FontHeight</code>，同时也配置了MinGW的主题配色为<a href="https://github.com/mavnn/mintty-colors-solarized" target="_blank" rel="noopener">mintty-colors-solarized</a>。重启Git Bash就能看到新的主题配色和字体。  </li><li>隐藏命令提示符前的 ‘用户名@主机名’：<br>打开Git Bash，输入命令<code>vi ~/.profile</code>打开.profile文件，按<code>i</code>进入<code>INSERT</code>模式，在文件末尾添加一行<code>export PS1=&quot;\W\[\033[32m\]\$(parse_git_branch)\[\033[00m\] $ &quot;</code> ，按<code>ESC</code>，输入<code>:wq</code>保存退出。再次重启Git Bash，用户名和主机名都不会显示啦。如果想只显示用户名而不显示电脑主机名，就把输入的那一行改为<del>改成啥来着，忘了，百度一下吧</del>。</li></ol><hr><h2 id="使用ssh远程连接时中文乱码"><a href="#使用ssh远程连接时中文乱码" class="headerlink" title="使用ssh远程连接时中文乱码"></a>使用ssh远程连接时中文乱码</h2><p><strong>问题描述</strong>：<br>在本地Windows系统的Git Bash上使用ssh连接至远程的macOS服务器（Linux同理），中文还是乱码。  </p><p><strong>解决方法</strong>:  </p><ol><li>在Windows上编辑<code>~/.minttyrc</code>文件，填入<code>Locale=zh_CN</code>和<code>Charset=UTF-8</code>这两行（上面修改主题部分给出的配置中已经有了这两行，没有就添加）以修改字符集为UTF-8；  </li><li>在<code>ssh username@host</code>连接上远程服务器之后，输入<code>export LANG=&quot;zh_CN.UTF-8&quot;</code>，中文即可显示正常。  </li><li>第2点的命令只对本次连接有效，下次使用ssh重新连接远程服务器时还是会出现中文乱码。为使之永久生效，可以将上述export命令添加到远程主机（macOS&#x2F;Linux）的环境变量中。</li></ol><hr><p>写完才发现我远程oh-my-zsh（<a href="https://www.ioiox.com/archives/34.html" target="_blank" rel="noopener">macOS上</a>）使用的字体是 <a href="https://github.com/abertsch/Menlo-for-Powerline" target="_blank" rel="noopener">Menlo-for-Powerline</a> ，虽然Windows本地的Git Bash上配置的字体和远程终端不一样，但是也不影响，因为两者都是支持非ASCII字符显示的Powerline字体。  </p><p>链接：macOS终端iTerm2及其主题美化：  </p><ol><li><a href="https://www.ioiox.com/archives/34.html" target="_blank" rel="noopener">macOS使用oh-my-zsh美化Terminal,iTerm2,VSCode命令行终端配置教程</a></li><li><a href="https://hsiangfeng.github.io/other/20200123/1105303313/" target="_blank" rel="noopener">Mac OS 終端機美化(Mac OS Terminal)</a></li><li><a href="https://www.jianshu.com/p/6d21d3484444" target="_blank" rel="noopener">【vscode】windows中使用zsh美化vscode终端</a></li><li><a href="https://sspai.com/post/45332" target="_blank" rel="noopener">一款基于 Electron 的跨平台终端 Terminal Emulator: Hyper</a></li></ol><hr><p><a href="#top1">回到顶部</a></p><hr>]]></content>
    
    
      
      
    <summary type="html"></summary>
      
    
    
    
    
    <category term="Git Bash" scheme="https://xiaoyan94.github.io/tags/Git-Bash/"/>
    
    <category term="ssh" scheme="https://xiaoyan94.github.io/tags/ssh/"/>
    
    <category term="中文乱码" scheme="https://xiaoyan94.github.io/tags/%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>Linux/macOS终端命令之——basename / dirname,从完整文件名获取文件名/路径名</title>
    <link href="https://xiaoyan94.github.io/2020/06/21/Linux-macOS%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4%E4%B9%8B%E2%80%94%E2%80%94basename/"/>
    <id>https://xiaoyan94.github.io/2020/06/21/Linux-macOS%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4%E4%B9%8B%E2%80%94%E2%80%94basename/</id>
    <published>2020-06-21T11:57:45.000Z</published>
    <updated>2022-08-26T08:30:07.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Linux-x2F-macOS终端命令，如何从包含完整路径的文件名-获取-不包含文件夹路径只包含文件名的-基本名称"><a href="#Linux-x2F-macOS终端命令，如何从包含完整路径的文件名-获取-不包含文件夹路径只包含文件名的-基本名称" class="headerlink" title="Linux&#x2F;macOS终端命令，如何从包含完整路径的文件名 获取 不包含文件夹路径只包含文件名的 基本名称"></a>Linux&#x2F;macOS终端命令，如何从包含完整路径的文件名 获取 不包含文件夹路径只包含文件名的 基本名称</h2><p>一个简单的提示，如果你正在编写一个 Linux shell 脚本，并且需要从一个完整的(规范的)目录 &#x2F; 文件路径中获取文件名，你可以像这样使用 Linux basename 命令:</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ basename /foo/bar/baz/foo.txt</span><br><span class="line">foo.txt</span><br></pre></td></tr></table></figure></div><a id="more"></a><p>或者，如果您知道文件名扩展名并希望获取文件名的第一部分（基本文件名，即扩展名之前的部分），则也可以使用以下命令：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ basename /foo/bar/baz/foo.txt .txt</span><br><span class="line">foo</span><br></pre></td></tr></table></figure></div><hr><p>反之，如果想要只获得文件完整路径名的文件夹路径，去掉文件名称，则可以使用<code>dirname</code>命令：  </p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ dirname /foo/bar/baz/foo.txt</span><br><span class="line">/foo/bar/baz</span><br></pre></td></tr></table></figure></div><hr><p>结合 <code>find</code> 命令，实现查找指定目录及其子目录下所有以.pdf结尾的文件，并在find的查找结果中只显示文件名，不显示文件夹路径：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ find . -iname <span class="string">"*python*.pdf"</span> -<span class="built_in">exec</span> basename &#123;&#125; \;</span><br><span class="line">Python_Programming.pdf</span><br><span class="line">Python核心编程(第二版).pdf</span><br><span class="line">Python编程入门  第3版.pdf</span><br><span class="line">think python.pdf</span><br><span class="line">Python编程：从入门到实践.pdf</span><br><span class="line">Flask Web开发 基于Python的Web应用开发实战 .pdf</span><br><span class="line">PythonWeb开发 测试驱动方法 .pdf</span><br><span class="line">Python数据分析基础.pdf</span><br><span class="line">Python数据挖掘入门与实践.pdf</span><br><span class="line">Python机器学习经典实例.pdf</span><br></pre></td></tr></table></figure></div><p>关于<code>find</code>命令：<br><code>-name</code> 参数严格区分大小写，如<code>python</code>和<code>Python</code>不同，<code>.PDF</code>和<code>.pdf</code>也不同；<br><code>-iname</code> 参数则不区分大小写，包括文件名和扩展名都不区分，<code>python</code>和<code>Python</code>都会匹配，<code>.PDF</code>和<code>.pdf</code>也都会匹配。  </p><hr><p>关于<code>basename</code>命令的更多功能：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">BASENAME(1)               BSD General Commands Manual              BASENAME(1)</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">     basename, dirname -- <span class="built_in">return</span> filename or directory portion of pathname</span><br><span class="line"></span><br><span class="line">SYNOPSIS</span><br><span class="line">     basename string [suffix]</span><br><span class="line">     basename [-a] [-s suffix] string [...]</span><br><span class="line">     dirname string</span><br><span class="line"></span><br><span class="line">DESCRIPTION</span><br><span class="line">     The basename utility deletes any prefix ending with the last slash `/<span class="string">'</span></span><br><span class="line"><span class="string">     character present in string (after first stripping trailing slashes), and</span></span><br><span class="line"><span class="string">     a suffix, if given.  The suffix is not stripped if it is identical to the</span></span><br><span class="line"><span class="string">     remaining characters in string.  The resulting filename is written to the</span></span><br><span class="line"><span class="string">     standard output.  A non-existent suffix is ignored.  If -a is specified,</span></span><br><span class="line"><span class="string">     then every argument is treated as a string as if basename were invoked</span></span><br><span class="line"><span class="string">     with just one argument.  If -s is specified, then the suffix is taken as</span></span><br><span class="line"><span class="string">     its argument, and all other arguments are treated as a string.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">     The dirname utility deletes the filename portion, beginning with the last</span></span><br><span class="line"><span class="string">     slash `/'</span> character to the end of string (after first stripping trailing</span><br><span class="line">     slashes), and writes the result to the standard output.</span><br><span class="line"></span><br><span class="line">EXAMPLES</span><br><span class="line">     The following line sets the shell variable FOO to /usr/bin.</span><br><span class="line"></span><br><span class="line">           FOO=`dirname /usr/bin/trail`</span><br><span class="line"></span><br><span class="line">DIAGNOSTICS</span><br><span class="line">     The basename and dirname utilities <span class="built_in">exit</span> 0 on success, and &gt;0 <span class="keyword">if</span> an error</span><br><span class="line">     occurs.</span><br><span class="line"></span><br><span class="line">SEE ALSO</span><br><span class="line">     csh(1), sh(1)</span><br><span class="line"></span><br><span class="line">STANDARDS</span><br><span class="line">     The basename and dirname utilities are expected to be IEEE Std 1003.2</span><br><span class="line">     (``POSIX.2<span class="string">''</span>) compatible.</span><br><span class="line"></span><br><span class="line">BSD                             April 18, 1994                             BSD</span><br></pre></td></tr></table></figure></div><hr><p><a href="https://alvinalexander.com/linux-unix/get-basename-from-full-filename-extension/" target="_blank" rel="noopener">参考文章</a></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;Linux-x2F-macOS终端命令，如何从包含完整路径的文件名-获取-不包含文件夹路径只包含文件名的-基本名称&quot;&gt;&lt;a href=&quot;#Linux-x2F-macOS终端命令，如何从包含完整路径的文件名-获取-不包含文件夹路径只包含文件名的-基本名称&quot; class=&quot;headerlink&quot; title=&quot;Linux&amp;#x2F;macOS终端命令，如何从包含完整路径的文件名 获取 不包含文件夹路径只包含文件名的 基本名称&quot;&gt;&lt;/a&gt;Linux&amp;#x2F;macOS终端命令，如何从包含完整路径的文件名 获取 不包含文件夹路径只包含文件名的 基本名称&lt;/h2&gt;&lt;p&gt;一个简单的提示，如果你正在编写一个 Linux shell 脚本，并且需要从一个完整的(规范的)目录 &amp;#x2F; 文件路径中获取文件名，你可以像这样使用 Linux basename 命令:&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ basename /foo/bar/baz/foo.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;foo.txt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="Shell" scheme="https://xiaoyan94.github.io/tags/Shell/"/>
    
    <category term="Linux" scheme="https://xiaoyan94.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linux/macOS终端命令之——find</title>
    <link href="https://xiaoyan94.github.io/2020/06/21/Linux-macOS%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4%E4%B9%8B%E2%80%94%E2%80%94find/"/>
    <id>https://xiaoyan94.github.io/2020/06/21/Linux-macOS%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4%E4%B9%8B%E2%80%94%E2%80%94find/</id>
    <published>2020-06-21T11:54:02.000Z</published>
    <updated>2022-08-26T08:30:07.000Z</updated>
    
    <content type="html"><![CDATA[<p>查找命令</p>]]></content>
    
    
      
      
    <summary type="html"></summary>
      
    
    
    
    
    <category term="Shell" scheme="https://xiaoyan94.github.io/tags/Shell/"/>
    
    <category term="Linux" scheme="https://xiaoyan94.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop：分布式资源调度YARN</title>
    <link href="https://xiaoyan94.github.io/2020/06/18/%E5%88%86%E5%B8%83%E5%BC%8F%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6YARN/"/>
    <id>https://xiaoyan94.github.io/2020/06/18/%E5%88%86%E5%B8%83%E5%BC%8F%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6YARN/</id>
    <published>2020-06-18T06:48:12.000Z</published>
    <updated>2022-08-26T08:30:07.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>YARN</strong>全称：Yet Another Resource Negotiator。</p><p>一个Cluster Resource Management</p><a id="more"></a><h2 id="YARN产生背景"><a href="#YARN产生背景" class="headerlink" title="YARN产生背景"></a>YARN产生背景</h2><p>MapReduce1.x存在的问题：</p><ul><li>单点故障&amp;节点压力大不易扩展</li><li>资源利用率低&amp;运维成本高</li></ul><p>Hadoop1.x时:  </p><p>MapReduce: Master&#x2F;Slave架构， 1个JobTracker带多个TaskTracker<br>JobTracker: 负责资源管理和作业调度<br>TaskTracker: 定期向JT汇报本节点的健康状况、资源使用情况、作业执行情况;<br>接收来自JT的命令:启动任务&#x2F;杀死任务</p><p><strong>YARN</strong>:</p><p>不同计算框架可以共享同一个HDFS集群上的数据，享受整体的资源调度<br>XXX on YARN的好处:<br>与其他计算框架共享集群资源，按资源需要分配，进而提高集群资源的利用率<br>XXX: Spark&#x2F;MapReduce&#x2F;Storm&#x2F;Flink</p><h2 id="基本思想"><a href="#基本思想" class="headerlink" title="基本思想"></a>基本思想</h2><p>MapReduce v2版本的<strong>基本思想</strong>是将JobTracker的两个主要功能（<strong>资源管理和作业计划&#x2F;监视</strong>）拆分为单独的守护程序。 想法是拥有一个全局<strong>ResourceManager</strong>（RM）和每个应用程序的<strong>ApplicationMaster</strong>（AM）。 一个应用程序（Application）要么是传统意义上的Map-Reduce作业中的单个作业，要么是作业的DAG（有向无环图）。</p><hr><h2 id="主要组件"><a href="#主要组件" class="headerlink" title="主要组件"></a>主要组件</h2><p><img src="/2020/06/18/%E5%88%86%E5%B8%83%E5%BC%8F%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6YARN/yarn_architecture.gif" alt="Yarn架构和主要组件"></p><p>ResourceManager和每个节点的从属节点NodeManager（NM）构成了数据计算框架。 ResourceManager是在系统中所有应用程序之间仲裁资源的最终权限。</p><p>每个应用程序的ApplicationMaster实际上是一个框架特定库，其任务是协商来自ResourceManager的资源，并与NodeManager一起执行和监视任务。</p><p>ResourceManager具有两个主要组件：Scheduler和ApplicationsManager。  </p><p>Scheduler负责将资源分配给各种正在运行的应用程序，这些应用程序受到常见的能力、队列等约束。<br>Scheduler是纯调度器，因为它不监视或跟踪应用程序的状态。此外，它不能保证重新启动<em>由于应用程序失败或硬件失败而失败的</em>任务。<br>Scheduler基于应用程序的资源要求执行其调度功能；它基于资源容器的抽象概念来执行此功能，资源容器合并了内存、CPU、磁盘、网络等元素。在第一个版本中，仅支持内存。<br>Scheduler有一个可插拔的策略插件，负责在各种队列、应用程序等之间划分集群资源。Map-Reduce调度器(如CapacityScheduler和FairScheduler)就是该插件的一些示例。<br>CapacityScheduler支持分层队列（<em>hierarchical queues</em>），以使群集资源的共享更加可预测。</p><p>ApplicationsManager负责接受作业提交，协商用于执行特定于应用程序的ApplicationMaster的第一个容器，并提供在失败时重新启动ApplicationMaster容器的服务。</p><p>Container： 封装了CPU、Memory等资源的容器。</p><p>NodeManager是每台机器的框架代理，负责容器，监视其资源使用情况（cpu，内存，磁盘，网络），并将其报告给ResourceManager &#x2F; Scheduler。</p><p>每个应用程序的ApplicationMaster负责从Scheduler协商适当的资源容器，跟踪它们的状态并监视进度。</p><p>MRV2与以前的稳定版本（hadoop-1.x）保持API兼容性。这意味着，所有Map Reduce作业都应该在MRv2的基础上以不变的方式运行，只需重新编译。</p><hr><h2 id="YARN环境搭建"><a href="#YARN环境搭建" class="headerlink" title="YARN环境搭建"></a>YARN环境搭建</h2><p>Hadoop版本：hadoop-2.6.0-cdh5.7.0</p><h3 id="服务器配置"><a href="#服务器配置" class="headerlink" title="服务器配置"></a>服务器配置</h3><p>依然是在伪分布式环境：<br>Hadoop也可以以伪分布式模式在单节点上运行，其中每个Hadoop守护程序都在单独的Java进程中运行。<br>通过设置一些参数并运行ResourceManager守护进程和NodeManager守护进程，可以在伪分布式模式下在YAR上运行MapReduce作业。</p><p>打开以下配置文件：Hadoop安装目录&#x2F;etc&#x2F;hadoop&#x2F;mapred-site.xml:</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>Hadoop安装目录&#x2F;etc&#x2F;hadoop&#x2F;yarn-site.xml:</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h3 id="启动与停止YARN服务"><a href="#启动与停止YARN服务" class="headerlink" title="启动与停止YARN服务"></a>启动与停止YARN服务</h3><p>启动ResourceManager守护程序和NodeManager守护程序：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="variable">$HADOOP_HOME</span>/sbin/start-yarn.sh</span><br><span class="line">$</span><br></pre></td></tr></table></figure></div><p><code>jps</code>命令查看RM和NM进程是否启动成功<br>ResourceManager Web管理界面： <a href="http://server-ip:8088/" target="_blank" rel="noopener">http://server-ip:8088/</a></p><p>运行MapReduce作业：<br>使用<code>hadoop jar</code>命令提交MapReduce作业到yarn运行。</p><p>停止YARN守护进程：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="variable">$HADOOP_HOME</span>/sbin/stop-yarn.sh</span><br><span class="line">$</span><br></pre></td></tr></table></figure></div><hr><p><a href="https://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.7.0/hadoop-project-dist/hadoop-common/ClusterSetup.html" target="_blank" rel="noopener">真·分布式集群配置</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;strong&gt;YARN&lt;/strong&gt;全称：Yet Another Resource Negotiator。&lt;/p&gt;
&lt;p&gt;一个Cluster Resource Management&lt;/p&gt;</summary>
    
    
    
    
    <category term="Hadoop" scheme="https://xiaoyan94.github.io/tags/Hadoop/"/>
    
    <category term="YARN" scheme="https://xiaoyan94.github.io/tags/YARN/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop HDFS JAVA API操作</title>
    <link href="https://xiaoyan94.github.io/2020/06/18/Hadoop-HDFS-JAVA-API%E6%93%8D%E4%BD%9C/"/>
    <id>https://xiaoyan94.github.io/2020/06/18/Hadoop-HDFS-JAVA-API%E6%93%8D%E4%BD%9C/</id>
    <published>2020-06-18T02:48:47.000Z</published>
    <updated>2022-08-26T08:30:07.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-环境搭建"><a href="#1-环境搭建" class="headerlink" title="1. 环境搭建"></a>1. 环境搭建</h2><ul><li>IntelliJ IDEA 新建 Maven 项目<ul><li>勾选 <code>Create from archetype</code></li><li>选择 <code>org.apache.maven.archetypes:maven-archetype-quickstart</code>,点击<code>Next</code></li><li>Maven home directory可以默认，也可以选择自己安装的Maven目录</li><li>User settings file勾选<code>Override</code>，选择用户自定义的<code>~/.m2/settings.xml</code>文件</li></ul></li><li><code>pom.xml</code> 配置</li></ul><a id="more"></a><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-train<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop-train<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- FIXME change it to the project's website --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://www.example.com<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 自定义属性 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hadoop.version</span>&gt;</span>2.6.0-cdh5.7.0<span class="tag">&lt;/<span class="name">hadoop.version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 默认仓库没有cdh版本的hadoop，需要添加CDH仓库 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>cloudera<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repository.cloudera.com/artifactory/cloudera-repos/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--添加Hadoop依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 使用$&#123;&#125;使用上面自定义的properties --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hadoop.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--添加单元测试--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span><span class="comment">&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-clean-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.22.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-install-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-site-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.7.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-project-info-reports-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h2 id="2-编写测试类"><a href="#2-编写测试类" class="headerlink" title="2. 编写测试类"></a>2. 编写测试类</h2><h3 id="2-1-调用fileSystem-mkdir方法创建文件夹"><a href="#2-1-调用fileSystem-mkdir方法创建文件夹" class="headerlink" title="2.1. 调用fileSystem.mkdir方法创建文件夹"></a>2.1. 调用<code>fileSystem.mkdir</code>方法创建文件夹</h3><p>测试代码：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.junit.After;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.URI;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Hadoop HDFS Java API 操作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HDFSApp</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String HDFS_PATH = <span class="string">"hdfs://23.105.206.170:8020"</span>;</span><br><span class="line"></span><br><span class="line">    FileSystem fileSystem = <span class="keyword">null</span>;</span><br><span class="line">    Configuration configuration = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mkdir</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        fileSystem.mkdirs(<span class="keyword">new</span> Path(<span class="string">"/hdfsapi/test"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"HDFSApp.setUp"</span>);</span><br><span class="line">        configuration = <span class="keyword">new</span> Configuration();</span><br><span class="line">        fileSystem = FileSystem.get(<span class="keyword">new</span> URI(HDFS_PATH), configuration, <span class="string">"root"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">tearDown</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        configuration = <span class="keyword">null</span>;</span><br><span class="line">        fileSystem = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"HDFSApp.tearDown"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h4 id="2-1-1-异常处理"><a href="#2-1-1-异常处理" class="headerlink" title="2.1.1. 异常处理"></a>2.1.1. 异常处理</h4><ul><li>连接异常：<code>java.net.ConnectException: Connection refused</code></li></ul><p>异常代码：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">HDFSApp.setUp</span><br><span class="line">log4j:<span class="function">WARN No appenders could be found <span class="keyword">for</span> <span class="title">logger</span> <span class="params">(org.apache.hadoop.metrics2.lib.MutableMetricsFactory)</span>.</span></span><br><span class="line"><span class="function">log4j:WARN Please initialize the log4j system properly.</span></span><br><span class="line"><span class="function">log4j:WARN See http:<span class="comment">//logging.apache.org/log4j/1.2/faq.html#noconfig for more info.</span></span></span><br><span class="line"><span class="function">WARNING: An illegal reflective access operation has occurred</span></span><br><span class="line"><span class="function">WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.<span class="title">KerberosUtil</span> <span class="params">(file:/Users/yan/.m2/repository/org/apache/hadoop/hadoop-auth/<span class="number">2.6</span><span class="number">.0</span>-cdh5<span class="number">.7</span><span class="number">.0</span>/hadoop-auth<span class="number">-2.6</span><span class="number">.0</span>-cdh5<span class="number">.7</span><span class="number">.0</span>.jar)</span> to method sun.security.krb5.Config.<span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function">WARNING: Please consider reporting <span class="keyword">this</span> to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil</span></span><br><span class="line"><span class="function">WARNING: Use --illegal-access</span>=warn to enable warnings of further illegal reflective access operations</span><br><span class="line">WARNING: All illegal access operations will be denied in a future release</span><br><span class="line">HDFSApp.tearDown</span><br><span class="line"></span><br><span class="line">java.net.ConnectException: Call From Mac-mini.local/<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> to <span class="number">23.105</span><span class="number">.206</span><span class="number">.170</span><span class="number">.16</span>clouds.com:<span class="number">8020</span> failed on connection exception: java.net.ConnectException: Connection refused; For more details see:  http:<span class="comment">//wiki.apache.org/hadoop/ConnectionRefused</span></span><br><span class="line"></span><br><span class="line"> at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)</span><br><span class="line"> ...(省略)</span><br><span class="line"> at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:<span class="number">58</span>)</span><br><span class="line"></span><br><span class="line">Caused by: java.net.ConnectException: Connection refused</span><br><span class="line"> at java.base/sun.nio.ch.Net.pollConnect(Native Method)</span><br><span class="line"> ...</span><br><span class="line"> ... <span class="number">44</span> more</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">255</span></span><br></pre></td></tr></table></figure></div><hr><p>解决方法：<br>（1）使用<code>jps</code>命令查看Hdfs是否运行；<br>（2）查看服务器防火墙是否开放<code>8020</code>端口；<br>（3）查看服务器Hadoop安装目录下etc&#x2F;core-site.xml中地址是否配置为服务器公网ip；  </p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~<span class="comment"># $HADOOP_HOME/sbin/start-dfs.sh  </span></span><br><span class="line">20/06/12 02:10:20 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">Starting namenodes on [localhost]</span><br><span class="line">localhost: starting namenode, logging to /root/app/hadoop-2.6.0-cdh5.7.0/logs/hadoop-root-namenode-brave-post-2.localdomain.out</span><br><span class="line">localhost: starting datanode, logging to /root/app/hadoop-2.6.0-cdh5.7.0/logs/hadoop-root-datanode-brave-post-2.localdomain.out</span><br><span class="line">Starting secondary namenodes [0.0.0.0]</span><br><span class="line">0.0.0.0: starting secondarynamenode, logging to /root/app/hadoop-2.6.0-cdh5.7.0/logs/hadoop-root-secondarynamenode-brave-post-2.localdomain.out</span><br><span class="line">20/06/12 02:10:40 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line"></span><br><span class="line">root@brave-post-2:~<span class="comment"># ufw status</span></span><br><span class="line">Status: inactive</span><br><span class="line">root@brave-post-2:~<span class="comment"># jps</span></span><br><span class="line">1210 NameNode</span><br><span class="line">1868 Jps</span><br><span class="line">1326 DataNode</span><br><span class="line">1535 SecondaryNameNode</span><br><span class="line"></span><br><span class="line">root@brave-post-2:~<span class="comment"># cat $HADOOP_HOME/etc/hadoop/core-site.xml  </span></span><br><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;?xml-stylesheet <span class="built_in">type</span>=<span class="string">"text/xsl"</span> href=<span class="string">"configuration.xsl"</span>?&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">  Licensed under the Apache License, Version 2.0 (the <span class="string">"License"</span>);</span><br><span class="line">  you may not use this file except <span class="keyword">in</span> compliance with the License.</span><br><span class="line">  You may obtain a copy of the License at</span><br><span class="line"></span><br><span class="line">    http://www.apache.org/licenses/LICENSE-2.0</span><br><span class="line"></span><br><span class="line">  Unless required by applicable law or agreed to <span class="keyword">in</span> writing, software</span><br><span class="line">  distributed under the License is distributed on an <span class="string">"AS IS"</span> BASIS,</span><br><span class="line">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="line">  See the License <span class="keyword">for</span> the specific language governing permissions and</span><br><span class="line">  limitations under the License. See accompanying LICENSE file.</span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- Put site-specific property overrides <span class="keyword">in</span> this file. --&gt;</span><br><span class="line"></span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;hdfs://localhost:8020&lt;/value&gt;</span><br><span class="line">        <span class="comment">#将localhost改为公网IP地址！！！！实测不能为0.0.0.0，写文件时会报异常,下面的异常和这里配置错误有关</span></span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;/home/root/app/tmp&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line"></span><br><span class="line">root@brave-post-2:~<span class="comment"># $HADOOP_HOME/sbin/stop-all.sh  </span></span><br><span class="line">This script is Deprecated. Instead use stop-dfs.sh and stop-yarn.sh</span><br><span class="line">20/06/12 03:14:37 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">Stopping namenodes on [localhost]</span><br><span class="line">localhost: stopping namenode</span><br><span class="line">localhost: stopping datanode</span><br><span class="line">Stopping secondary namenodes [0.0.0.0]</span><br><span class="line">0.0.0.0: stopping secondarynamenode</span><br><span class="line">20/06/12 03:14:59 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">stopping yarn daemons</span><br><span class="line">no resourcemanager to stop</span><br><span class="line">localhost: no nodemanager to stop</span><br><span class="line">no proxyserver to stop</span><br><span class="line"></span><br><span class="line">root@brave-post-2:~<span class="comment"># vi $HADOOP_HOME/etc/hadoop/core-site.xml</span></span><br><span class="line">root@brave-post-2:~<span class="comment"># cat $HADOOP_HOME/etc/hadoop/core-site.xml</span></span><br><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;?xml-stylesheet <span class="built_in">type</span>=<span class="string">"text/xsl"</span> href=<span class="string">"configuration.xsl"</span>?&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">  Licensed under the Apache License, Version 2.0 (the <span class="string">"License"</span>);</span><br><span class="line">  you may not use this file except <span class="keyword">in</span> compliance with the License.</span><br><span class="line">  You may obtain a copy of the License at</span><br><span class="line"></span><br><span class="line">    http://www.apache.org/licenses/LICENSE-2.0</span><br><span class="line"></span><br><span class="line">  Unless required by applicable law or agreed to <span class="keyword">in</span> writing, software</span><br><span class="line">  distributed under the License is distributed on an <span class="string">"AS IS"</span> BASIS,</span><br><span class="line">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="line">  See the License <span class="keyword">for</span> the specific language governing permissions and</span><br><span class="line">  limitations under the License. See accompanying LICENSE file.</span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- Put site-specific property overrides <span class="keyword">in</span> this file. --&gt;</span><br><span class="line"></span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;hdfs://ip:8020&lt;/value&gt; <span class="comment">#这里得填公网IP地址，不能为0.0.0.0</span></span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;/home/root/app/tmp&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line"></span><br><span class="line">root@brave-post-2:~<span class="comment"># $HADOOP_HOME/sbin/start-dfs.sh</span></span><br><span class="line">20/06/12 03:16:35 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">Starting namenodes on [0.0.0.0]</span><br><span class="line">0.0.0.0: starting namenode, logging to /root/app/hadoop-2.6.0-cdh5.7.0/logs/hadoop-root-namenode-brave-post-2.localdomain.out</span><br><span class="line">localhost: starting datanode, logging to /root/app/hadoop-2.6.0-cdh5.7.0/logs/hadoop-root-datanode-brave-post-2.localdomain.out</span><br><span class="line">Starting secondary namenodes [0.0.0.0]</span><br><span class="line">0.0.0.0: starting secondarynamenode, logging to /root/app/hadoop-2.6.0-cdh5.7.0/logs/hadoop-root-secondarynamenode-brave-post-2.localdomain.out</span><br><span class="line">20/06/12 03:16:55 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">root@brave-post-2:~<span class="comment">#</span></span><br></pre></td></tr></table></figure></div><hr><ul><li>访问控制权限异常：<code>org.apache.hadoop.security.AccessControlException: Permission denied: user=yan, access=WRITE, inode=&quot;/&quot;:root:supergroup:drwxr-xr-x</code><ul><li>解决方法：使用<code>FileSystem.get</code> 的重载方法，给出user参数值为root</li></ul></li></ul><h3 id="2-2-调用FileSystem-create方法创建文件"><a href="#2-2-调用FileSystem-create方法创建文件" class="headerlink" title="2.2. 调用FileSystem.create方法创建文件"></a>2.2. 调用<code>FileSystem.create</code>方法创建文件</h3><p>测试代码：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createFile</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    FSDataOutputStream fsDataOutputStream = fileSystem.create(<span class="keyword">new</span> Path(<span class="string">"/hdfsapi/test/a.txt"</span>));</span><br><span class="line">    fsDataOutputStream.write(<span class="string">"Hello hadoop字节数组"</span>.getBytes());</span><br><span class="line">    fsDataOutputStream.flush();</span><br><span class="line">    fsDataOutputStream.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><hr><h4 id="2-2-1-异常处理"><a href="#2-2-1-异常处理" class="headerlink" title="2.2.1. 异常处理"></a>2.2.1. 异常处理</h4><p>运行上面方法，hdfs无法写入内容，出现以下异常</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">org.apache.hadoop.ipc.RemoteException(java.io.IOException): File /hdfsapi/test/a.txt could only be replicated to <span class="number">0</span> <span class="function">nodes instead of <span class="title">minReplication</span> <span class="params">(=<span class="number">1</span>)</span>.  There are 1 <span class="title">datanode</span><span class="params">(s)</span> running and 1 <span class="title">node</span><span class="params">(s)</span> are excluded in <span class="keyword">this</span> operation.</span></span><br><span class="line"><span class="function"> at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.<span class="title">chooseTarget4NewBlock</span><span class="params">(BlockManager.java:<span class="number">1595</span>)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<span class="title">getAdditionalBlock</span><span class="params">(FSNamesystem.java:<span class="number">3287</span>)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.<span class="title">addBlock</span><span class="params">(NameNodeRpcServer.java:<span class="number">677</span>)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.hdfs.server.namenode.AuthorizationProviderProxyClientProtocol.<span class="title">addBlock</span><span class="params">(AuthorizationProviderProxyClientProtocol.java:<span class="number">213</span>)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.<span class="title">addBlock</span><span class="params">(ClientNamenodeProtocolServerSideTranslatorPB.java:<span class="number">485</span>)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.<span class="title">callBlockingMethod</span><span class="params">(ClientNamenodeProtocolProtos.java)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.<span class="title">call</span><span class="params">(ProtobufRpcEngine.java:<span class="number">617</span>)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.ipc.RPC$Server.<span class="title">call</span><span class="params">(RPC.java:<span class="number">1073</span>)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.ipc.Server$Handler$1.<span class="title">run</span><span class="params">(Server.java:<span class="number">2086</span>)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.ipc.Server$Handler$1.<span class="title">run</span><span class="params">(Server.java:<span class="number">2082</span>)</span></span></span><br><span class="line"><span class="function"> at java.security.AccessController.<span class="title">doPrivileged</span><span class="params">(Native Method)</span></span></span><br><span class="line"><span class="function"> at javax.security.auth.Subject.<span class="title">doAs</span><span class="params">(Subject.java:<span class="number">422</span>)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.security.UserGroupInformation.<span class="title">doAs</span><span class="params">(UserGroupInformation.java:<span class="number">1693</span>)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.ipc.Server$Handler.<span class="title">run</span><span class="params">(Server.java:<span class="number">2080</span>)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.ipc.Client.<span class="title">call</span><span class="params">(Client.java:<span class="number">1471</span>)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.ipc.Client.<span class="title">call</span><span class="params">(Client.java:<span class="number">1408</span>)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.<span class="title">invoke</span><span class="params">(ProtobufRpcEngine.java:<span class="number">230</span>)</span></span></span><br><span class="line"><span class="function"> at com.sun.proxy.$Proxy15.<span class="title">addBlock</span><span class="params">(Unknown Source)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.<span class="title">addBlock</span><span class="params">(ClientNamenodeProtocolTranslatorPB.java:<span class="number">404</span>)</span></span></span><br><span class="line"><span class="function"> at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.<span class="title">invoke0</span><span class="params">(Native Method)</span></span></span><br><span class="line"><span class="function"> at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.<span class="title">invoke</span><span class="params">(NativeMethodAccessorImpl.java:<span class="number">62</span>)</span></span></span><br><span class="line"><span class="function"> at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.<span class="title">invoke</span><span class="params">(DelegatingMethodAccessorImpl.java:<span class="number">43</span>)</span></span></span><br><span class="line"><span class="function"> at java.base/java.lang.reflect.Method.<span class="title">invoke</span><span class="params">(Method.java:<span class="number">567</span>)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.io.retry.RetryInvocationHandler.<span class="title">invokeMethod</span><span class="params">(RetryInvocationHandler.java:<span class="number">256</span>)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.io.retry.RetryInvocationHandler.<span class="title">invoke</span><span class="params">(RetryInvocationHandler.java:<span class="number">104</span>)</span></span></span><br><span class="line"><span class="function"> at com.sun.proxy.$Proxy16.<span class="title">addBlock</span><span class="params">(Unknown Source)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.<span class="title">locateFollowingBlock</span><span class="params">(DFSOutputStream.java:<span class="number">1704</span>)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.<span class="title">nextBlockOutputStream</span><span class="params">(DFSOutputStream.java:<span class="number">1500</span>)</span></span></span><br><span class="line"><span class="function"> at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.<span class="title">run</span><span class="params">(DFSOutputStream.java:<span class="number">668</span>)</span></span></span><br></pre></td></tr></table></figure></div><hr><p>出现上面异常的原因有很多，具体信息可以查看日志文件<code>hadoop-root-datanode-brave-post-2.localdomain.log</code>：<br>经过一番盘查试错，终，之前在<code>core-site.xml</code>文件中，将localhost改为0.0.0.0，导致了这个问题。<br><strong>正确配置</strong>应为  </p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://公网ip:8020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/home/root/app/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></div><hr><p>重新启动HDFS之后，打开浏览器查看DataNode info：  </p><p><img src="/2020/06/18/Hadoop-HDFS-JAVA-API%E6%93%8D%E4%BD%9C/datanode_ip.png" alt="正确配置时DataNode信息"><br>此时DN节点显示的是公网ip+端口，客户端重新运行测试类<code>createFile</code>方法，成功创建并写入文本文件内容。Hadoop运行在公网服务器时，想要Java客户端能够通过Java API操作HDFS，必须通过配置让节点在 Datanode Information 中显示的是正在使用公网ip地址。</p><ul><li>试错期间还遇到了clusterID不一致的问题，查看datanode节点的日志输出异常<code>java.io.IOException: Incompatible clusterIDs</code>：</li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">2020-06-12 07:16:54,343 WARN org.apache.hadoop.hdfs.server.common.Storage: java.io.IOException: Incompatible clusterIDs in &#x2F;home&#x2F;root&#x2F;app&#x2F;tmp&#x2F;dfs&#x2F;data: namenode clusterID &#x3D; CID-401a9f8e-e699-4aa9-9f8c-0ef5bd016863; datanode clusterID &#x3D; CID-42b312a4-8c81-4582-8d33-d8dafa23fe4e</span><br><span class="line">2020-06-12 07:16:54,344 FATAL org.apache.hadoop.hdfs.server.datanode.DataNode: Initialization failed for Block pool &lt;registering&gt; (Datanode Uuid unassigned) service to &#x2F;0.0.0.0:8020. Exiting.</span><br><span class="line">java.io.IOException: All specified directories are failed to load.</span><br><span class="line"> at org.apache.hadoop.hdfs.server.datanode.DataStorage.recoverTransitionRead(DataStorage.java:478)</span><br><span class="line"> at org.apache.hadoop.hdfs.server.datanode.DataNode.initStorage(DataNode.java:1394)</span><br><span class="line"> at org.apache.hadoop.hdfs.server.datanode.DataNode.initBlockPool(DataNode.java:1355)</span><br><span class="line"> at org.apache.hadoop.hdfs.server.datanode.BPOfferService.verifyAndSetNamespaceInfo(BPOfferService.java:317)</span><br><span class="line"> at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.connectToNNAndHandshake(BPServiceActor.java:228)</span><br><span class="line"> at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.run(BPServiceActor.java:829)</span><br><span class="line"> at java.lang.Thread.run(Thread.java:748)</span><br><span class="line">2020-06-12 07:16:54,349 WARN org.apache.hadoop.hdfs.server.datanode.DataNode: Ending block pool service for: Block pool &lt;registering&gt; (Datanode Uuid unassigned) service to &#x2F;0.0.0.0:8020</span><br><span class="line">2020-06-12 07:16:54,352 INFO org.apache.hadoop.hdfs.server.datanode.DataNode: Removed Block pool &lt;registering&gt; (Datanode Uuid unassigned)</span><br><span class="line">2020-06-12 07:16:56,352 WARN org.apache.hadoop.hdfs.server.datanode.DataNode: Exiting Datanode</span><br><span class="line">2020-06-12 07:16:56,354 INFO org.apache.hadoop.util.ExitUtil: Exiting with status 0</span><br><span class="line">2020-06-12 07:16:56,355 INFO org.apache.hadoop.hdfs.server.datanode.DataNode: SHUTDOWN_MSG:</span><br><span class="line">&#x2F;************************************************************</span><br><span class="line">SHUTDOWN_MSG: Shutting down DataNode at localhost&#x2F;127.0.0.1</span><br></pre></td></tr></table></figure></div><hr><p>找到<a href="https://blog.csdn.net/u011630575/article/details/61191443" target="_blank" rel="noopener">解决方法</a>：<br>出现该问题的原因：在第一次格式化dfs后，启动并使用了hadoop，后来又重新执行了格式化命令（hdfs namenode -format)，这时namenode的clusterID会重新生成，而datanode的clusterID 保持不变。<br>解决方法：将datanode的clusterID改成和上面日志中的namenode的clusterID一样。</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:/home/root/app/tmp/dfs/data/current<span class="comment"># cat VERSION</span></span><br><span class="line"><span class="comment">#Fri Jun 12 06:46:01 EDT 2020</span></span><br><span class="line">storageID=DS-af0a3f1e-d5a0-4141-95c2-a4615c461743</span><br><span class="line">clusterID=CID-42b312a4-8c81-4582-8d33-d8dafa23fe4e</span><br><span class="line">cTime=0</span><br><span class="line">datanodeUuid=17c0f342-bbc3-45d1-b3c7-54e3fca3cda5</span><br><span class="line">storageType=DATA_NODE</span><br><span class="line">layoutVersion=-56</span><br><span class="line"></span><br><span class="line">root@brave-post-2:/home/root/app/tmp/dfs/data/current<span class="comment"># vi VERSION</span></span><br><span class="line"></span><br><span class="line">root@brave-post-2:/home/root/app/tmp/dfs/data/current<span class="comment"># cat VERSION</span></span><br><span class="line"><span class="comment">#Fri Jun 12 07:30:43 EDT 2020</span></span><br><span class="line">storageID=DS-af0a3f1e-d5a0-4141-95c2-a4615c461743</span><br><span class="line">clusterID=CID-401a9f8e-e699-4aa9-9f8c-0ef5bd016863</span><br><span class="line">cTime=0</span><br><span class="line">datanodeUuid=17c0f342-bbc3-45d1-b3c7-54e3fca3cda5</span><br><span class="line">storageType=DATA_NODE</span><br><span class="line">layoutVersion=-56</span><br><span class="line"></span><br><span class="line">root@brave-post-2:/home/root/app/tmp/dfs/data/current<span class="comment">#</span></span><br></pre></td></tr></table></figure></div><h3 id="2-3-副本系数-replication-factor"><a href="#2-3-副本系数-replication-factor" class="headerlink" title="2.3. 副本系数 replication factor"></a>2.3. 副本系数 replication factor</h3><p><strong>问题</strong>:我们已经在hdfs-site.xmL中设置了副本系数为1,为什么此时查询文件看到的是3呢?  </p><p>如果你是通过hdfs shell的方式put上去的，那么才采用xml配置中的副本系数1；<br>如果我们是java api上传上去的，在本地我们并没有手工设置副本系数，所以采用的是hadoop默认的副本系数3.</p><p>测试代码：</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IOUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.util.Progressable;</span><br><span class="line"><span class="keyword">import</span> org.junit.After;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.URI;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Hadoop HDFS Java API 操作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HDFSApp</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String HDFS_PATH = <span class="string">"hdfs://23.105.206.170:8020"</span>;</span><br><span class="line"></span><br><span class="line">    FileSystem fileSystem = <span class="keyword">null</span>;</span><br><span class="line">    Configuration configuration = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查看文件内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cat</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FSDataInputStream in = fileSystem.open(<span class="keyword">new</span> Path(<span class="string">"/f.txt"</span>));</span><br><span class="line">        IOUtils.copyBytes(in, System.out, <span class="number">1024</span>);</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listFiles</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileStatus[] fileStatuses = fileSystem.listStatus(<span class="keyword">new</span> Path(<span class="string">"/"</span>));</span><br><span class="line">        <span class="keyword">for</span> (FileStatus fileStatus:</span><br><span class="line">             fileStatuses) &#123;</span><br><span class="line">            System.out.println(fileStatus);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> delete = fileSystem.delete(<span class="keyword">new</span> Path(<span class="string">"/hdfsapi/test/e.txt"</span>),</span><br><span class="line">                <span class="keyword">false</span>);</span><br><span class="line">        System.out.println(delete);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rename</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> rename = fileSystem.rename(<span class="keyword">new</span> Path(<span class="string">"/f.txt"</span>), <span class="keyword">new</span> Path(<span class="string">"/f2"</span> +</span><br><span class="line">                <span class="string">".txt"</span>));</span><br><span class="line">        System.out.println(rename);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">copyToLocalFile</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        fileSystem.copyToLocalFile(<span class="keyword">new</span> Path(<span class="string">"/check.sh"</span>),</span><br><span class="line">                <span class="keyword">new</span> Path(<span class="string">"/Users/yan/testShell/check1.sh"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">copyFromLocalFile</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        fileSystem.copyFromLocalFile(<span class="keyword">new</span> Path(<span class="string">"/Users/yan/testShell/check.sh"</span>),</span><br><span class="line">                <span class="keyword">new</span> Path(<span class="string">"/check.sh"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">copyFromLocalFileWithProgress</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        String src = <span class="string">"/Users/yan/Downloads/考试安排表.xlsx"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> Integer[] i = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">        InputStream in =</span><br><span class="line">                <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(src)));</span><br><span class="line">        FSDataOutputStream output = fileSystem.create(<span class="keyword">new</span> Path(<span class="string">"/wechat.dmg"</span>), <span class="keyword">new</span> Progressable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">progress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">int</span> size = i[<span class="number">0</span>]++;</span><br><span class="line"></span><br><span class="line">                System.out.println(<span class="string">"上传进度"</span> + size +<span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        IOUtils.copyBytes(in,output,<span class="number">1024</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mkdir</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        fileSystem.mkdirs(<span class="keyword">new</span> Path(<span class="string">"/hdfsapi/test"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createFile</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        FSDataOutputStream fsDataOutputStream = fileSystem.create(<span class="keyword">new</span> Path(</span><br><span class="line">                <span class="string">"/f.txt"</span>));</span><br><span class="line">        fsDataOutputStream.write(<span class="string">"Hello  hadoop字节数组"</span>.getBytes());</span><br><span class="line">        fsDataOutputStream.flush();</span><br><span class="line">        fsDataOutputStream.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"HDFSApp.setUp"</span>);</span><br><span class="line">        configuration = <span class="keyword">new</span> Configuration();</span><br><span class="line">        fileSystem = FileSystem.get(<span class="keyword">new</span> URI(HDFS_PATH), configuration, <span class="string">"root"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">tearDown</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        configuration = <span class="keyword">null</span>;</span><br><span class="line">        fileSystem = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"HDFSApp.tearDown"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;1-环境搭建&quot;&gt;&lt;a href=&quot;#1-环境搭建&quot; class=&quot;headerlink&quot; title=&quot;1. 环境搭建&quot;&gt;&lt;/a&gt;1. 环境搭建&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;IntelliJ IDEA 新建 Maven 项目&lt;ul&gt;
&lt;li&gt;勾选 &lt;code&gt;Create from archetype&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;选择 &lt;code&gt;org.apache.maven.archetypes:maven-archetype-quickstart&lt;/code&gt;,点击&lt;code&gt;Next&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Maven home directory可以默认，也可以选择自己安装的Maven目录&lt;/li&gt;
&lt;li&gt;User settings file勾选&lt;code&gt;Override&lt;/code&gt;，选择用户自定义的&lt;code&gt;~/.m2/settings.xml&lt;/code&gt;文件&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pom.xml&lt;/code&gt; 配置&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    
    <category term="Hadoop" scheme="https://xiaoyan94.github.io/tags/Hadoop/"/>
    
    <category term="HDFS" scheme="https://xiaoyan94.github.io/tags/HDFS/"/>
    
    <category term="大数据" scheme="https://xiaoyan94.github.io/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
  </entry>
  
  <entry>
    <title>CDH Hadoop安装过程</title>
    <link href="https://xiaoyan94.github.io/2020/06/08/CDH-Hadoop%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/"/>
    <id>https://xiaoyan94.github.io/2020/06/08/CDH-Hadoop%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/</id>
    <published>2020-06-08T10:56:47.000Z</published>
    <updated>2022-08-26T08:30:07.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-安装环境"><a href="#1-安装环境" class="headerlink" title="1. 安装环境"></a>1. 安装环境</h2><ul><li>操作系统：Ubuntu 18.04 64位</li><li><a href="https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html" target="_blank" rel="noopener">Hadoop</a>版本：hadoop-2.6.0-cdh5.7.0.tar.gz</li><li>JDK版本：jdk-8u241-linux-x64.tar.gz</li></ul><h2 id="2-Hadoop伪分布式安装"><a href="#2-Hadoop伪分布式安装" class="headerlink" title="2. Hadoop伪分布式安装"></a>2. <a href="https://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.7.0/hadoop-project-dist/hadoop-common/SingleCluster.html" target="_blank" rel="noopener">Hadoop伪分布式安装</a></h2><p>操作环境：macOS终端 <code>ssh</code> 远程连接Ubuntu  </p><h3 id="2-1-下载地址"><a href="#2-1-下载地址" class="headerlink" title="2.1. 下载地址"></a>2.1. 下载地址</h3><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.7.0.tar.gz <span class="comment">#Hadoop安装包</span></span><br><span class="line">wget http://enos.itcollege.ee/~jpoial/allalaadimised/jdk8/jdk-8u241-linux-x64.tar.gz <span class="comment">#JDK安装包</span></span><br></pre></td></tr></table></figure></div><a id="more"></a><h3 id="2-2-JDK安装"><a href="#2-2-JDK安装" class="headerlink" title="2.2. JDK安装"></a>2.2. JDK安装</h3><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -xvzf jdk-8u241-linux-x64.tar.gz -C ~/app <span class="comment">#解压到~/app目录下</span></span><br><span class="line">vi ~/.bash_profile <span class="comment">#设置系统环境变量</span></span><br></pre></td></tr></table></figure></div><p>vi编辑器添加以下内容</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/root/app/jdk1.8.0_241</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure></div><p>生效环境变量</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br><span class="line">java -version</span><br></pre></td></tr></table></figure></div><h3 id="2-3-Hadoop安装"><a href="#2-3-Hadoop安装" class="headerlink" title="2.3. Hadoop安装"></a>2.3. Hadoop安装</h3><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">apt install rsync</span><br><span class="line">apt install ssh</span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line">cp ~/.ssh/id_rsa.pub ~/.ssh/authorized_keys</span><br><span class="line">ssh localhost -p 26885 <span class="comment">#不用输入密码就能连接上了</span></span><br><span class="line">tar -zxvf hadoop-2.6.0-cdh5.7.0.tar.gz -C ~/app/ <span class="comment">#解压hadoop</span></span><br></pre></td></tr></table></figure></div><h3 id="2-4-Hadoop配置"><a href="#2-4-Hadoop配置" class="headerlink" title="2.4. Hadoop配置"></a>2.4. Hadoop配置</h3><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi app/hadoop-2.6.0-cdh5.7.0/etc/hadoop/hadoop-env.sh</span><br></pre></td></tr></table></figure></div><p>配置<code>hadoop-env.sh</code>文件，修改JAVA_HOME；如果ssh端口不是默认的22则设置ssh端口</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/root/app/jdk1.8.0_241</span><br><span class="line"><span class="built_in">export</span> HADOOP_SSH_OPTS=<span class="string">"-p 26885"</span></span><br></pre></td></tr></table></figure></div><blockquote><p>如果控制台出现错误提示：Hadoop: connect to host localhost port 22: Connection refused when running start-dfs.sh<br>那么可能的原因是ssh端口不是默认的22。需要在<code>hadoop安装目录</code>&#x2F;etc&#x2F;hadoop&#x2F;hadoop-env.sh中添加<code>export HADOOP_SSH_OPTS=&quot;-p 26885&quot;</code>，其中-p后面的参数是当前ssh使用的端口号  </p></blockquote><p>配置<code>core-site.xml</code>,端口改为8020,配置<code>hadoop.tmp.dir</code>临时文件目录，因为默认为Linux临时目录每次重启都会清空</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://ip:8020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>/home/root/app/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>上面的配置中，需要通过JavaAPI远程操作则ip不能配置为localhost，需要公网ip。</p><p>配置<code>hdfs-site.xml</code></p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></div><hr><h3 id="2-5-启动HDFS"><a href="#2-5-启动HDFS" class="headerlink" title="2.5. 启动HDFS"></a>2.5. 启动HDFS</h3><p>格式化文件系统（仅仅第一次需要执行格式化）</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/hdfs namenode -format</span><br></pre></td></tr></table></figure></div><p>启动hdfs</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sbin/start-dfs.sh</span><br></pre></td></tr></table></figure></div><p>验证是否启动成功</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jps</span><br></pre></td></tr></table></figure></div><p>如果有以下java进程，说明启动成功</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~/app/hadoop-2.6.0-cdh5.7.0<span class="comment"># jps</span></span><br><span class="line">5745 Jps</span><br><span class="line">5330 NameNode</span><br><span class="line">5641 SecondaryNameNode</span><br><span class="line">5439 DataNode</span><br></pre></td></tr></table></figure></div><blockquote><ul><li>也可以通过浏览器访问 <a href="http://localhost:50070/" target="_blank" rel="noopener">http://localhost:50070</a>（本地服务器），<a href="http://ip:50070/" target="_blank" rel="noopener">http://ip:50070/</a>（远程服务器）  <ul><li>如果浏览器打不开 HADOOP WEB 页面，请配置防火墙开放 <strong>50070</strong> 端口。Ubuntu可以使用 <code>ufw</code> 命令配置防火墙。</li></ul></li><li><code>jps</code> 命令是JDK 1.5之后自带的查看Java进程的指令。</li></ul></blockquote><h3 id="2-6-停止HDFS"><a href="#2-6-停止HDFS" class="headerlink" title="2.6. 停止HDFS"></a>2.6. 停止HDFS</h3><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~/app/hadoop-2.6.0-cdh5.7.0<span class="comment"># sbin/stop-dfs.sh</span></span><br><span class="line">20/06/08 09:18:17 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">Stopping namenodes on [localhost]</span><br><span class="line">localhost: stopping namenode</span><br><span class="line">localhost: stopping datanode</span><br><span class="line">Stopping secondary namenodes [0.0.0.0]</span><br><span class="line">0.0.0.0: stopping secondarynamenode</span><br><span class="line">20/06/08 09:18:39 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">root@brave-post-2:~/app/hadoop-2.6.0-cdh5.7.0<span class="comment">#</span></span><br><span class="line">root@brave-post-2:~/app/hadoop-2.6.0-cdh5.7.0<span class="comment"># jps # 再次输入jps查看Java进程，hdfs已经停止</span></span><br><span class="line">6943 Jps</span><br><span class="line">root@brave-post-2:~/app/hadoop-2.6.0-cdh5.7.0<span class="comment">#</span></span><br></pre></td></tr></table></figure></div><hr><h2 id="3-HDFS-SHELL-常用命令"><a href="#3-HDFS-SHELL-常用命令" class="headerlink" title="3. HDFS SHELL 常用命令"></a>3. HDFS SHELL 常用命令</h2><h3 id="3-1-将Hadoop-bin目录添加到环境变量"><a href="#3-1-将Hadoop-bin目录添加到环境变量" class="headerlink" title="3.1. 将Hadoop bin目录添加到环境变量"></a>3.1. 将Hadoop bin目录添加到环境变量</h3><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.bash_profile <span class="comment">#设置系统环境变量</span></span><br></pre></td></tr></table></figure></div><p>vi 编辑器添加以下内容</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HADOOP_HOME=/root/app/hadoop-2.6.0-cdh5.7.0</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$HADOOP_HOME</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure></div><p>生效环境变量</p><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~/app/hadoop-2.6.0-cdh5.7.0<span class="comment"># vi ~/.bash_profile</span></span><br><span class="line">root@brave-post-2:~/app/hadoop-2.6.0-cdh5.7.0<span class="comment"># source ~/.bash_profile</span></span><br></pre></td></tr></table></figure></div><p>终端键入<code>hdfs</code>，若有输出hdfs命令的用法提示则环境变量配置成功。</p><h3 id="3-2-HDFS-SHELL-命令用法"><a href="#3-2-HDFS-SHELL-命令用法" class="headerlink" title="3.2. HDFS SHELL 命令用法"></a>3.2. HDFS SHELL 命令用法</h3><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~/app/hadoop-2.6.0-cdh5.7.0<span class="comment"># hdfs</span></span><br><span class="line">   Usage: hdfs [--config confdir] COMMAND</span><br><span class="line">      <span class="built_in">where</span> COMMAND is one of:</span><br><span class="line">   dfs                  run a filesystem <span class="built_in">command</span> on the file systems supported <span class="keyword">in</span> Hadoop.</span><br><span class="line">   namenode -format     format the DFS filesystem</span><br><span class="line">   secondarynamenode    run the DFS secondary namenode</span><br><span class="line">   namenode             run the DFS namenode</span><br><span class="line">   journalnode          run the DFS journalnode</span><br><span class="line">   zkfc                 run the ZK Failover Controller daemon</span><br><span class="line">   datanode             run a DFS datanode</span><br><span class="line">   dfsadmin             run a DFS admin client</span><br><span class="line">   haadmin              run a DFS HA admin client</span><br><span class="line">   fsck                 run a DFS filesystem checking utility</span><br><span class="line">   balancer             run a cluster balancing utility</span><br><span class="line">   jmxget               get JMX exported values from NameNode or DataNode.</span><br><span class="line">   mover                run a utility to move block replicas across</span><br><span class="line">                     storage types</span><br><span class="line">   oiv                  apply the offline fsimage viewer to an fsimage</span><br><span class="line">   oiv_legacy           apply the offline fsimage viewer to an legacy fsimage</span><br><span class="line">   oev                  apply the offline edits viewer to an edits file</span><br><span class="line">   fetchdt              fetch a delegation token from the NameNode</span><br><span class="line">   getconf              get config values from configuration</span><br><span class="line">   groups               get the groups <span class="built_in">which</span> users belong to</span><br><span class="line">   snapshotDiff         diff two snapshots of a directory or diff the</span><br><span class="line">                     current directory contents with a snapshot</span><br><span class="line">   lsSnapshottableDir   list all snapshottable <span class="built_in">dirs</span> owned by the current user</span><br><span class="line">                     Use -<span class="built_in">help</span> to see options</span><br><span class="line">   portmap              run a portmap service</span><br><span class="line">   nfs3                 run an NFS version 3 gateway</span><br><span class="line">   cacheadmin           configure the HDFS cache</span><br><span class="line">   crypto               configure HDFS encryption zones</span><br><span class="line">   storagepolicies      list/get/<span class="built_in">set</span> block storage policies</span><br><span class="line">   version              <span class="built_in">print</span> the version</span><br><span class="line"></span><br><span class="line">   Most commands <span class="built_in">print</span> <span class="built_in">help</span> when invoked w/o parameters.</span><br><span class="line">root@brave-post-2:~/app/hadoop-2.6.0-cdh5.7.0<span class="comment">#</span></span><br><span class="line"></span><br><span class="line">root@brave-post-2:~<span class="comment"># hdfs dfs</span></span><br><span class="line">Usage: hadoop fs [generic options]  <span class="comment">#也可以使用Hadoop fs命令</span></span><br><span class="line">   [-appendToFile &lt;localsrc&gt; ... &lt;dst&gt;]</span><br><span class="line">   [-cat [-ignoreCrc] &lt;src&gt; ...]</span><br><span class="line">   [-checksum &lt;src&gt; ...]</span><br><span class="line">   [-chgrp [-R] GROUP PATH...]</span><br><span class="line">   [-chmod [-R] &lt;MODE[,MODE]... | OCTALMODE&gt; PATH...]</span><br><span class="line">   [-chown [-R] [OWNER][:[GROUP]] PATH...]</span><br><span class="line">   [-copyFromLocal [-f] [-p] [-l] &lt;localsrc&gt; ... &lt;dst&gt;]</span><br><span class="line">   [-copyToLocal [-p] [-ignoreCrc] [-crc] &lt;src&gt; ... &lt;localdst&gt;]</span><br><span class="line">   [-count [-q] [-h] [-v] &lt;path&gt; ...]</span><br><span class="line">   [-cp [-f] [-p | -p[topax]] &lt;src&gt; ... &lt;dst&gt;]</span><br><span class="line">   [-createSnapshot &lt;snapshotDir&gt; [&lt;snapshotName&gt;]]</span><br><span class="line">   [-deleteSnapshot &lt;snapshotDir&gt; &lt;snapshotName&gt;]</span><br><span class="line">   [-df [-h] [&lt;path&gt; ...]]</span><br><span class="line">   [-du [-s] [-h] &lt;path&gt; ...]</span><br><span class="line">   [-expunge]</span><br><span class="line">   [-find &lt;path&gt; ... &lt;expression&gt; ...]</span><br><span class="line">   [-get [-p] [-ignoreCrc] [-crc] &lt;src&gt; ... &lt;localdst&gt;]</span><br><span class="line">   [-getfacl [-R] &lt;path&gt;]</span><br><span class="line">   [-getfattr [-R] &#123;-n name | -d&#125; [-e en] &lt;path&gt;]</span><br><span class="line">   [-getmerge [-nl] &lt;src&gt; &lt;localdst&gt;]</span><br><span class="line">   [-<span class="built_in">help</span> [cmd ...]]</span><br><span class="line">   [-ls [-d] [-h] [-R] [&lt;path&gt; ...]]</span><br><span class="line">   [-mkdir [-p] &lt;path&gt; ...]</span><br><span class="line">   [-moveFromLocal &lt;localsrc&gt; ... &lt;dst&gt;]</span><br><span class="line">   [-moveToLocal &lt;src&gt; &lt;localdst&gt;]</span><br><span class="line">   [-mv &lt;src&gt; ... &lt;dst&gt;]</span><br><span class="line">   [-put [-f] [-p] [-l] &lt;localsrc&gt; ... &lt;dst&gt;]</span><br><span class="line">   [-renameSnapshot &lt;snapshotDir&gt; &lt;oldName&gt; &lt;newName&gt;]</span><br><span class="line">   [-rm [-f] [-r|-R] [-skipTrash] &lt;src&gt; ...]</span><br><span class="line">   [-rmdir [--ignore-fail-on-non-empty] &lt;dir&gt; ...]</span><br><span class="line">   [-setfacl [-R] [&#123;-b|-k&#125; &#123;-m|-x &lt;acl_spec&gt;&#125; &lt;path&gt;]|[--<span class="built_in">set</span> &lt;acl_spec&gt; &lt;path&gt;]]</span><br><span class="line">   [-setfattr &#123;-n name [-v value] | -x name&#125; &lt;path&gt;]</span><br><span class="line">   [-setrep [-R] [-w] &lt;rep&gt; &lt;path&gt; ...]</span><br><span class="line">   [-<span class="built_in">stat</span> [format] &lt;path&gt; ...]</span><br><span class="line">   [-tail [-f] &lt;file&gt;]</span><br><span class="line">   [-<span class="built_in">test</span> -[defsz] &lt;path&gt;]</span><br><span class="line">   [-text [-ignoreCrc] &lt;src&gt; ...]</span><br><span class="line">   [-touchz &lt;path&gt; ...]</span><br><span class="line">   [-usage [cmd ...]]</span><br><span class="line"></span><br><span class="line">Generic options supported are</span><br><span class="line">-conf &lt;configuration file&gt;     specify an application configuration file</span><br><span class="line">-D &lt;property=value&gt;            use value <span class="keyword">for</span> given property</span><br><span class="line">-fs &lt;<span class="built_in">local</span>|namenode:port&gt;      specify a namenode</span><br><span class="line">-jt &lt;<span class="built_in">local</span>|resourcemanager:port&gt;    specify a ResourceManager</span><br><span class="line">-files &lt;comma separated list of files&gt;    specify comma separated files to be copied to the map reduce cluster</span><br><span class="line">-libjars &lt;comma separated list of jars&gt;    specify comma separated jar files to include <span class="keyword">in</span> the classpath.</span><br><span class="line">-archives &lt;comma separated list of archives&gt;    specify comma separated archives to be unarchived on the compute machines.</span><br><span class="line"></span><br><span class="line">The general <span class="built_in">command</span> line syntax is</span><br><span class="line">bin/hadoop <span class="built_in">command</span> [genericOptions] [commandOptions]</span><br><span class="line"></span><br><span class="line">root@brave-post-2:~<span class="comment">#</span></span><br></pre></td></tr></table></figure></div><hr><h3 id="3-3-ls、put命令"><a href="#3-3-ls、put命令" class="headerlink" title="3.3. ls、put命令"></a>3.3. <code>ls</code>、<code>put</code>命令</h3><ul><li>查看目录列表 <code>ls</code>  </li><li>将本地文件保存到HDFS中 <code>put</code></li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~<span class="comment"># mkdir ~/data</span></span><br><span class="line">root@brave-post-2:~<span class="comment"># cd ~/data</span></span><br><span class="line">root@brave-post-2:~/data<span class="comment"># ls</span></span><br><span class="line">root@brave-post-2:~/data<span class="comment"># vi hello.txt</span></span><br><span class="line">root@brave-post-2:~/data<span class="comment"># cat hello.txt</span></span><br><span class="line">hadoop welcome</span><br><span class="line">hadoop hdfs</span><br><span class="line">hadoop hello</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -ls /</span></span><br><span class="line">20/06/08 21:59:27 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">ls: Call From localhost/127.0.0.1 to localhost:8020 failed on connection exception: java.net.ConnectException: Connection refused; For more details see:  http://wiki.apache.org/hadoop/ConnectionRefused</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># $HADOOP_HOME/sbin/start-dfs.sh</span></span><br><span class="line">20/06/08 22:02:12 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">Starting namenodes on [localhost]</span><br><span class="line">localhost: starting namenode, logging to /root/app/hadoop-2.6.0-cdh5.7.0/logs/hadoop-root-namenode-brave-post-2.localdomain.out</span><br><span class="line">localhost: starting datanode, logging to /root/app/hadoop-2.6.0-cdh5.7.0/logs/hadoop-root-datanode-brave-post-2.localdomain.out</span><br><span class="line">Starting secondary namenodes [0.0.0.0]</span><br><span class="line">0.0.0.0: starting secondarynamenode, logging to /root/app/hadoop-2.6.0-cdh5.7.0/logs/hadoop-root-secondarynamenode-brave-post-2.localdomain.out</span><br><span class="line">20/06/08 22:02:31 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -ls /  #没有文件</span></span><br><span class="line">20/06/08 22:02:36 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -put hello.txt /</span></span><br><span class="line">20/06/08 22:03:08 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -ls /  #有了hello.txt</span></span><br><span class="line">20/06/08 22:03:30 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">Found 1 items</span><br><span class="line">-rw-r--r--   1 root supergroup         40 2020-06-08 22:03 /hello.txt</span><br></pre></td></tr></table></figure></div><hr><h3 id="3-4-查看文件内容-text、cat"><a href="#3-4-查看文件内容-text、cat" class="headerlink" title="3.4. 查看文件内容  text、cat"></a>3.4. 查看文件内容  <code>text</code>、<code>cat</code></h3><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -text /hello.txt</span></span><br><span class="line">20/06/08 22:08:59 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">hadoop welcome</span><br><span class="line">hadoop hdfs</span><br><span class="line">hadoop hello</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -cat /hello.txt</span></span><br><span class="line">20/06/08 22:09:11 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">hadoop welcome</span><br><span class="line">hadoop hdfs</span><br><span class="line">hadoop hello</span><br><span class="line">root@brave-post-2:~/data<span class="comment">#</span></span><br></pre></td></tr></table></figure></div><hr><h3 id="3-5-mkdir、rmdir、get、copyFromLocal、rm"><a href="#3-5-mkdir、rmdir、get、copyFromLocal、rm" class="headerlink" title="3.5. mkdir、rmdir、get、copyFromLocal、rm"></a>3.5. <code>mkdir、rmdir、get、copyFromLocal、rm</code></h3><ul><li>创建目录 <code>mkdir</code></li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -mkdir /testdir</span></span><br><span class="line">20/06/08 22:13:56 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs  -ls /testdir</span></span><br><span class="line">20/06/08 22:14:24 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs  -ls /</span></span><br><span class="line">20/06/08 22:14:32 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">Found 2 items</span><br><span class="line">-rw-r--r--   1 root supergroup         40 2020-06-08 22:03 /hello.txt</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:13 /testdir</span><br><span class="line">root@brave-post-2:~/data<span class="comment">#</span></span><br></pre></td></tr></table></figure></div><ul><li>递归创建目录 <code>-p</code> 参数</li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -mkdir /a/b</span></span><br><span class="line">20/06/08 22:17:12 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">mkdir: `/a/b<span class="string">': No such file or directory</span></span><br><span class="line"><span class="string">root@brave-post-2:~/data# hadoop fs -mkdir -p /a/b</span></span><br><span class="line"><span class="string">20/06/08 22:17:26 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</span></span><br><span class="line"><span class="string">root@brave-post-2:~/data# hadoop fs  -ls /</span></span><br><span class="line"><span class="string">20/06/08 22:17:53 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</span></span><br><span class="line"><span class="string">Found 3 items</span></span><br><span class="line"><span class="string">drwxr-xr-x   - root supergroup          0 2020-06-08 22:17 /a</span></span><br><span class="line"><span class="string">-rw-r--r--   1 root supergroup         40 2020-06-08 22:03 /hello.txt</span></span><br><span class="line"><span class="string">drwxr-xr-x   - root supergroup          0 2020-06-08 22:13 /testdir</span></span><br></pre></td></tr></table></figure></div><ul><li>递归列出所有目录和文件 <code>-R</code> 参数</li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs  -ls -R /</span></span><br><span class="line">20/06/08 22:18:18 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:17 /a</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:17 /a/b</span><br><span class="line">-rw-r--r--   1 root supergroup         40 2020-06-08 22:03 /hello.txt</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:13 /testdir</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs  -lsr /  #或者lsr命令</span></span><br><span class="line">lsr: DEPRECATED: Please use <span class="string">'ls -R'</span> instead.</span><br><span class="line">20/06/08 22:18:40 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:17 /a</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:17 /a/b</span><br><span class="line">-rw-r--r--   1 root supergroup         40 2020-06-08 22:03 /hello.txt</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:13 /testdir</span><br><span class="line">root@brave-post-2:~/data<span class="comment">#</span></span><br></pre></td></tr></table></figure></div><ul><li>从本地拷贝 <code>copyFromLocal</code></li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -copyFromLocal hello.txt /a/b/h.txt</span></span><br><span class="line">20/06/08 22:25:06 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs  -ls -R /</span></span><br><span class="line">20/06/08 22:25:18 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:17 /a</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:25 /a/b</span><br><span class="line">-rw-r--r--   1 root supergroup         40 2020-06-08 22:25 /a/b/h.txt</span><br><span class="line">-rw-r--r--   1 root supergroup         40 2020-06-08 22:03 /hello.txt</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:13 /testdir</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -cat /a/b/h.txt</span></span><br><span class="line">20/06/08 22:26:07 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">hadoop welcome</span><br><span class="line">hadoop hdfs</span><br><span class="line">hadoop hello</span><br></pre></td></tr></table></figure></div><ul><li>从HDFS获取文件 <code>get</code></li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~/data<span class="comment"># ls</span></span><br><span class="line">hello.txt</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -get /a/b/h.txt</span></span><br><span class="line">20/06/08 22:27:09 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># ls</span></span><br><span class="line">hello.txt  h.txt</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># cat h.txt</span></span><br><span class="line">hadoop welcome</span><br><span class="line">hadoop hdfs</span><br><span class="line">hadoop hello</span><br></pre></td></tr></table></figure></div><ul><li>删除文件 <code>rm</code></li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -rm /hello.txt</span></span><br><span class="line">20/06/08 22:28:16 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">Deleted /hello.txt</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -ls /</span></span><br><span class="line">20/06/08 22:28:37 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">Found 2 items</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:17 /a</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:13 /testdir</span><br></pre></td></tr></table></figure></div><ul><li>从本地 <code>put</code> 文件至HDFS</li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -put hello.txt /</span></span><br><span class="line">20/06/08 22:29:36 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># ls -lh /root/software/hadoop-2.6.0-cdh5.7.0.tar.gz</span></span><br><span class="line">-rw-r--r-- 1 root root 298M Feb 20  2018 /root/software/hadoop-2.6.0-cdh5.7.0.tar.gz</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -put /root/software/hadoop-2.6.0-cdh5.7.0.tar.gz /</span></span><br><span class="line">20/06/08 22:33:27 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -ls -R /</span></span><br><span class="line">20/06/08 22:33:59 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:17 /a</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:25 /a/b</span><br><span class="line">-rw-r--r--   1 root supergroup         40 2020-06-08 22:25 /a/b/h.txt</span><br><span class="line">-rw-r--r--   1 root supergroup  311585484 2020-06-08 22:33 /hadoop-2.6.0-cdh5.7.0.tar.gz</span><br><span class="line">-rw-r--r--   1 root supergroup         40 2020-06-08 22:29 /hello.txt</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:13 /testdir</span><br></pre></td></tr></table></figure></div><ul><li>文件大小以GB、MB为单位显示而不是直接显示字节数 <code>-h</code> 参数</li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -ls -R -h /</span></span><br><span class="line">20/06/08 22:51:11 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:17 /a</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:25 /a/b</span><br><span class="line">-rw-r--r--   1 root supergroup         40 2020-06-08 22:25 /a/b/h.txt</span><br><span class="line">-rw-r--r--   1 root supergroup    297.2 M 2020-06-08 22:33 /hadoop-2.6.0-cdh5.7.0.tar.gz</span><br><span class="line">-rw-r--r--   1 root supergroup         40 2020-06-08 22:29 /hello.txt</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 22:13 /testdir</span><br><span class="line">root@brave-post-2:~/data<span class="comment">#</span></span><br></pre></td></tr></table></figure></div><ul><li>删除文件夹 <code>rmdir</code></li></ul><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -mkdir -p /a/b/c</span></span><br><span class="line">20/06/08 23:27:22 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -ls -R -h /a/</span></span><br><span class="line">20/06/08 23:27:40 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 23:27 /a/b</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 23:27 /a/b/c</span><br><span class="line">-rw-r--r--   1 root supergroup         40 2020-06-08 22:25 /a/b/h.txt</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -rmdir /a/b/c</span></span><br><span class="line">20/06/08 23:27:51 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">root@brave-post-2:~/data<span class="comment"># hadoop fs -ls -R -h /a/</span></span><br><span class="line">20/06/08 23:27:58 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using <span class="built_in">builtin</span>-java classes <span class="built_in">where</span> applicable</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2020-06-08 23:27 /a/b</span><br><span class="line">-rw-r--r--   1 root supergroup         40 2020-06-08 22:25 /a/b/h.txt</span><br><span class="line">root@brave-post-2:~/data<span class="comment">#</span></span><br></pre></td></tr></table></figure></div><hr><h3 id="3-6-HDFS-Web-管理页面"><a href="#3-6-HDFS-Web-管理页面" class="headerlink" title="3.6. HDFS Web 管理页面"></a>3.6. HDFS Web 管理页面</h3><p>URL：<a href="http://23.105.206.170:50070/explorer.html#/" target="_blank" rel="noopener">http://23.105.206.170:50070/explorer.html#/</a></p><ul><li>浏览HDFS文件系统目录，查看文件信息</li></ul><p><img src="/2020/06/08/CDH-Hadoop%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/hdfs01.png" alt="浏览HDFS文件系统目录"></p><hr><ul><li>查看block信息</li></ul><p><img src="/2020/06/08/CDH-Hadoop%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/hdfs02.png" alt="查看文件block信息"></p><hr><h2 id="4-参考文档"><a href="#4-参考文档" class="headerlink" title="4. 参考文档"></a>4. 参考文档</h2><ul><li><a href="https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html" target="_blank" rel="noopener">https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html</a></li><li><a href="https://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.7.0/hadoop-project-dist/hadoop-common/SingleCluster.html" target="_blank" rel="noopener">https://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.7.0/hadoop-project-dist/hadoop-common/SingleCluster.html</a></li><li><a href="https://www.youtube.com/watch?v=k3Bb0fVVTZk&amp;list=PLhXu26RzZZTzveyPX8XgTBKf3tjxjA1tW&amp;index=3" target="_blank" rel="noopener">https://www.youtube.com/watch?v=k3Bb0fVVTZk&amp;list=PLhXu26RzZZTzveyPX8XgTBKf3tjxjA1tW&amp;index=3</a></li></ul><hr>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;1-安装环境&quot;&gt;&lt;a href=&quot;#1-安装环境&quot; class=&quot;headerlink&quot; title=&quot;1. 安装环境&quot;&gt;&lt;/a&gt;1. 安装环境&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;操作系统：Ubuntu 18.04 64位&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hadoop&lt;/a&gt;版本：hadoop-2.6.0-cdh5.7.0.tar.gz&lt;/li&gt;
&lt;li&gt;JDK版本：jdk-8u241-linux-x64.tar.gz&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;2-Hadoop伪分布式安装&quot;&gt;&lt;a href=&quot;#2-Hadoop伪分布式安装&quot; class=&quot;headerlink&quot; title=&quot;2. Hadoop伪分布式安装&quot;&gt;&lt;/a&gt;2. &lt;a href=&quot;https://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.7.0/hadoop-project-dist/hadoop-common/SingleCluster.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hadoop伪分布式安装&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;操作环境：macOS终端 &lt;code&gt;ssh&lt;/code&gt; 远程连接Ubuntu  &lt;/p&gt;
&lt;h3 id=&quot;2-1-下载地址&quot;&gt;&lt;a href=&quot;#2-1-下载地址&quot; class=&quot;headerlink&quot; title=&quot;2.1. 下载地址&quot;&gt;&lt;/a&gt;2.1. 下载地址&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wget https://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.7.0.tar.gz &lt;span class=&quot;comment&quot;&gt;#Hadoop安装包&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget http://enos.itcollege.ee/~jpoial/allalaadimised/jdk8/jdk-8u241-linux-x64.tar.gz &lt;span class=&quot;comment&quot;&gt;#JDK安装包&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="Hadoop" scheme="https://xiaoyan94.github.io/tags/Hadoop/"/>
    
    <category term="安装教程" scheme="https://xiaoyan94.github.io/tags/%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
</feed>
